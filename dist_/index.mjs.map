{"version":3,"file":"index.mjs","sources":["../node_modules/svelte/src/runtime/internal/utils.js","../node_modules/svelte/src/runtime/internal/globals.js","../node_modules/svelte/src/runtime/internal/dom.js","../node_modules/svelte/src/runtime/internal/lifecycle.js","../node_modules/svelte/src/runtime/internal/scheduler.js","../node_modules/svelte/src/runtime/internal/transitions.js","../node_modules/svelte/src/runtime/internal/each.js","../node_modules/svelte/src/runtime/internal/spread.js","../node_modules/svelte/src/runtime/internal/Component.js","../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../node_modules/svelte/src/shared/version.js","../node_modules/svelte/src/runtime/store/index.js","../node_modules/classcat/index.js","../node_modules/d3-dispatch/src/dispatch.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/iterator.js","../node_modules/d3-drag/src/noevent.js","../node_modules/d3-drag/src/nodrag.js","../node_modules/d3-drag/src/constant.js","../node_modules/d3-drag/src/event.js","../node_modules/d3-drag/src/drag.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/transform/decompose.js","../node_modules/d3-interpolate/src/transform/parse.js","../node_modules/d3-interpolate/src/transform/index.js","../node_modules/d3-interpolate/src/zoom.js","../node_modules/d3-timer/src/timer.js","../node_modules/d3-timer/src/timeout.js","../node_modules/d3-transition/src/transition/schedule.js","../node_modules/d3-transition/src/interrupt.js","../node_modules/d3-transition/src/transition/tween.js","../node_modules/d3-transition/src/transition/interpolate.js","../node_modules/d3-transition/src/transition/attr.js","../node_modules/d3-transition/src/transition/attrTween.js","../node_modules/d3-transition/src/transition/delay.js","../node_modules/d3-transition/src/transition/duration.js","../node_modules/d3-transition/src/transition/selection.js","../node_modules/d3-transition/src/transition/style.js","../node_modules/d3-transition/src/transition/index.js","../node_modules/d3-transition/src/transition/select.js","../node_modules/d3-transition/src/transition/selectAll.js","../node_modules/d3-transition/src/transition/filter.js","../node_modules/d3-transition/src/transition/merge.js","../node_modules/d3-transition/src/transition/transition.js","../node_modules/d3-transition/src/transition/on.js","../node_modules/d3-transition/src/transition/styleTween.js","../node_modules/d3-transition/src/transition/text.js","../node_modules/d3-transition/src/transition/textTween.js","../node_modules/d3-transition/src/transition/remove.js","../node_modules/d3-transition/src/transition/ease.js","../node_modules/d3-transition/src/transition/easeVarying.js","../node_modules/d3-transition/src/transition/end.js","../node_modules/d3-transition/src/selection/transition.js","../node_modules/d3-ease/src/cubic.js","../node_modules/d3-transition/src/selection/index.js","../node_modules/d3-transition/src/selection/interrupt.js","../node_modules/d3-zoom/src/constant.js","../node_modules/d3-zoom/src/event.js","../node_modules/d3-zoom/src/transform.js","../node_modules/d3-zoom/src/noevent.js","../node_modules/d3-zoom/src/zoom.js","../node_modules/@xyflow/system/dist/esm/index.js","../node_modules/@xyflow/svelte/dist/lib/components/Handle/Handle.svelte","../node_modules/@xyflow/svelte/dist/lib/components/nodes/DefaultNode.svelte","../node_modules/@xyflow/svelte/dist/lib/components/nodes/InputNode.svelte","../node_modules/@xyflow/svelte/dist/lib/components/nodes/OutputNode.svelte","../node_modules/@xyflow/svelte/dist/lib/actions/portal/index.js","../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabelRenderer/EdgeLabelRenderer.svelte","../node_modules/@xyflow/svelte/dist/lib/hooks/useHandleEdgeSelect.js","../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabel/EdgeLabel.svelte","../node_modules/@xyflow/svelte/dist/lib/components/BaseEdge/BaseEdge.svelte","../node_modules/@xyflow/svelte/dist/lib/components/edges/BezierEdgeInternal.svelte","../node_modules/@xyflow/svelte/dist/lib/components/edges/SmoothStepEdgeInternal.svelte","../node_modules/@xyflow/svelte/dist/lib/components/edges/StraightEdgeInternal.svelte","../node_modules/@xyflow/svelte/dist/lib/components/edges/StepEdgeInternal.svelte","../node_modules/@xyflow/svelte/dist/lib/store/utils.js","../node_modules/@xyflow/svelte/dist/lib/store/initial-store.js","../node_modules/@xyflow/svelte/dist/lib/store/visible-edges.js","../node_modules/@xyflow/svelte/dist/lib/store/visible-nodes.js","../node_modules/@xyflow/svelte/dist/lib/store/index.js","../node_modules/@xyflow/svelte/dist/lib/actions/zoom/index.js","../node_modules/@xyflow/svelte/dist/lib/container/Zoom/Zoom.svelte","../node_modules/@xyflow/svelte/dist/lib/container/Pane/Pane.svelte","../node_modules/@xyflow/svelte/dist/lib/container/Viewport/Viewport.svelte","../node_modules/@xyflow/svelte/dist/lib/actions/drag/index.js","../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/NodeWrapper.svelte","../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/utils.js","../node_modules/@xyflow/svelte/dist/lib/container/NodeRenderer/NodeRenderer.svelte","../node_modules/@xyflow/svelte/dist/lib/components/EdgeWrapper/EdgeWrapper.svelte","../node_modules/@xyflow/svelte/dist/lib/components/CallOnMount/CallOnMount.svelte","../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/MarkerDefinition.svelte","../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/Marker.svelte","../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/EdgeRenderer.svelte","../node_modules/@xyflow/svelte/dist/lib/components/Selection/Selection.svelte","../node_modules/@xyflow/svelte/dist/lib/components/UserSelection/UserSelection.svelte","../node_modules/@xyflow/svelte/dist/lib/components/NodeSelection/NodeSelection.svelte","../node_modules/@svelte-put/shortcut/src/shortcut.js","../node_modules/@xyflow/svelte/dist/lib/components/KeyHandler/KeyHandler.svelte","../node_modules/@xyflow/svelte/dist/lib/components/ConnectionLine/ConnectionLine.svelte","../node_modules/@xyflow/svelte/dist/lib/container/Panel/Panel.svelte","../node_modules/@xyflow/svelte/dist/lib/components/Attribution/Attribution.svelte","../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/utils.js","../node_modules/@xyflow/svelte/dist/lib/hooks/useColorModeClass.js","../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/SvelteFlow.svelte","../node_modules/@xyflow/svelte/dist/lib/components/SvelteFlowProvider/SvelteFlowProvider.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/ControlButton.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Plus.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Minus.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Fit.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Lock.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Unlock.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Controls.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Background/types.js","../node_modules/@xyflow/svelte/dist/lib/plugins/Background/DotPattern.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Background/LinePattern.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Background/Background.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/MinimapNode.svelte","../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/interactive.js","../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/Minimap.svelte","../src/lib/config.js","../src/lib/flow/Step.svelte","../node_modules/html-to-image/es/util.js","../node_modules/html-to-image/es/clone-pseudos.js","../node_modules/html-to-image/es/mimes.js","../node_modules/html-to-image/es/dataurl.js","../node_modules/html-to-image/es/clone-node.js","../node_modules/html-to-image/es/embed-resources.js","../node_modules/html-to-image/es/embed-images.js","../node_modules/html-to-image/es/embed-webfonts.js","../node_modules/html-to-image/es/index.js","../node_modules/html-to-image/es/apply-style.js","../src/lib/DownloadButton.svelte","../node_modules/@solothought/text2obj/src/flow/flow.js","../node_modules/@solothought/text2obj/src/flow/LinkGenerator.js","../src/lib/flow/NodesAndEdgesBuilder.js","../src/lib/flow/nodeUpdater.js","../src/lib/flow/hoverManager.js","../src/lib/flow/FlowChart.svelte"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro — restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\n\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is useable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is useable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * Pass in a node, and get connected nodes where edge.source === node.id\n * @public\n * @param node - The node to get the connected nodes from\n * @param nodes - The array of all nodes\n * @param edges - The array of all edges\n * @returns An array of nodes that are connected over eges where the source is the given node\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * Pass in a node, and get connected nodes where edge.target === node.id\n * @public\n * @param node - The node to get the connected nodes from\n * @param nodes - The array of all nodes\n * @param edges - The array of all edges\n * @returns An array of nodes that are connected over eges where the target is the given node\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Internal function for determining a bounding box that contains all given nodes in an array.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for\n * @param params.nodeOrigin - Origin of the nodes: [0, 0] - top left, [0.5, 0.5] - center\n * @returns Bounding box enclosing all nodes\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0], nodeLookup: undefined }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * Get all connecting edges for a given set of nodes\n * @param nodes - Nodes you want to get the connected edges for\n * @param edges - All edges\n * @returns Array of edges that connect any of the given nodes with each other\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitView({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(false);\n    }\n    const bounds = getInternalNodesBounds(nodes);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, { duration: options?.duration });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + node.measured.width * origin[0],\n            y: positionAbsolute.y - parentY + node.measured.height * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Returns a viewport that encloses the given bounds with optional padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport\n * @param width - Width of the viewport\n * @param height  - Height of the viewport\n * @param minZoom - Minimum zoom level of the resulting viewport\n * @param maxZoom - Maximum zoom level of the resulting viewport\n * @param padding - Optional padding around the bounds\n * @returns A transforned {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n  { x: 0, y: 0, width: 100, height: 100},\n  1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    const xZoom = width / (bounds.width * (1 + padding));\n    const yZoom = height / (bounds.height * (1 + padding));\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    return { x, y, zoom: clampedZoom };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    let nextParentId = parentId;\n    const positionAbsolute = { ...position };\n    while (nextParentId) {\n        const parent = nodeLookup.get(nextParentId);\n        nextParentId = parent?.parentId;\n        if (parent) {\n            const origin = parent.origin || nodeOrigin;\n            positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n            positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n        }\n    }\n    return positionAbsolute;\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x, y }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    const isInput = inputTags.includes(target?.nodeName) || target?.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target?.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n// The handle bounds are calculated relative to the node element.\n// We store them in the internals object of the node in order to avoid\n// unnecessary recalculations.\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n    // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * Get a bezier path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.sourcePosition - The position of the source handle (default: Position.Bottom)\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @param params.targetPosition - The position of the target handle (default: Position.Top)\n * @param params.curvature - The curvature of the bezier edge\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n});\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex = 0, elevateOnSelect = false, }) {\n    if (!elevateOnSelect) {\n        return zIndex;\n    }\n    const edgeOrConnectedNodeSelected = selected || targetNode.selected || sourceNode.selected;\n    const selectedZIndex = Math.max(sourceNode.internals.z || 0, targetNode.internals.z || 0, 1000);\n    return zIndex + (edgeOrConnectedNodeSelected ? selectedZIndex : 0);\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges\n * @remarks It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an Edge or a Connection you want to add\n * @param edges -  The array of all current edges\n * @returns A new array of edges with the new edge added\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to reconnect an existing edge with new properties\n * @param oldEdge - The edge you want to update\n * @param newConnection - The new connection you want to update the edge with\n * @param edges - The array of all current edges\n * @param options.shouldReplaceId - should the id of the old edge be replaced with the new connection id\n * @returns the updated edges array\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Get a straight path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n    });\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n// ith this function we try to mimic a orthogonal edge routing behaviour\n// It's not as good as a real orthogonal edge routing but it's faster and good enough as a default for step and smooth step edges\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        centerX = center.x ?? defaultCenterX;\n        centerY = center.y ?? defaultCenterY;\n        //    --->\n        //    |\n        // >---\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        //    |\n        //  ---\n        //  |\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * Get a smooth step path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.sourcePosition - The position of the source handle (default: Position.Bottom)\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @param params.targetPosition - The position of the target handle (default: Position.Top)\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n    });\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    // position === Position.Top\n    // we set the x any y position of the toolbar based on the nodes position\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        node.internals = {\n            ...node.internals,\n            positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n            z,\n        };\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ > childZ ? parentZ : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                // We move all child nodes in the oppsite direction\n                // so the x,y changes of the parent do not move the children\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            node.internals = {\n                ...node.internals,\n                handleBounds: undefined,\n            };\n            updatedInternals = true;\n        }\n        else {\n            const dimensions = getDimensions(update.nodeElement);\n            const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n            const doUpdate = !!(dimensions.width &&\n                dimensions.height &&\n                (dimensionChanged || !node.internals.handleBounds || update.force));\n            if (doUpdate) {\n                const nodeBounds = update.nodeElement.getBoundingClientRect();\n                const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n                let { positionAbsolute } = node.internals;\n                if (node.parentId && node.extent === 'parent') {\n                    positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n                }\n                else if (extent) {\n                    positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n                }\n                node.measured = dimensions;\n                node.internals = {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                };\n                if (node.parentId) {\n                    updateChildNode(node, nodeLookup, parentLookup, { nodeOrigin });\n                }\n                updatedInternals = true;\n                if (dimensionChanged) {\n                    changes.push({\n                        id: node.id,\n                        type: 'dimensions',\n                        dimensions,\n                    });\n                    if (node.expandParent && node.parentId) {\n                        parentExpandChildren.push({\n                            id: node.id,\n                            parentId: node.parentId,\n                            rect: nodeToRect(node, nodeOrigin),\n                        });\n                    }\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source, target, sourceHandle = null, targetHandle = null } = edge;\n        const sourceKey = `${source}-source-${sourceHandle}`;\n        const targetKey = `${target}-target-${targetHandle}`;\n        const prevSource = connectionLookup.get(sourceKey) || new Map();\n        const prevTarget = connectionLookup.get(targetKey) || new Map();\n        const connection = { edgeId: edge.id, source, target, sourceHandle, targetHandle };\n        edgeLookup.set(edge.id, edge);\n        connectionLookup.set(sourceKey, prevSource.set(`${target}-${targetHandle}`, connection));\n        connectionLookup.set(targetKey, prevTarget.set(`${source}-${sourceHandle}`, connection));\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n// returns two params:\n// 1. the dragged node (or the first of the list, if we are dragging a node selection)\n// 2. array of selected nodes (for multi selections)\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }, dragEvent) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            let nodesBox = { x: 0, y: 0, x2: 0, y2: 0 };\n            if (dragItems.size > 1 && nodeExtent) {\n                const rect = getInternalNodesBounds(dragItems);\n                nodesBox = rectToBox(rect);\n            }\n            for (const [id, dragItem] of dragItems) {\n                if (!nodeLookup.has(id)) {\n                    // if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                    // and we don't need to update it anymore\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = snapPosition(nextPosition, snapGrid);\n                }\n                // if there is selection with multiple nodes and a node extent is set, we need to adjust the node extent for each node\n                // based on its position so that the node stays at it's position relative to the selection.\n                let adjustedNodeExtent = [\n                    [nodeExtent[0][0], nodeExtent[0][1]],\n                    [nodeExtent[1][0], nodeExtent[1][1]],\n                ];\n                if (dragItems.size > 1 && nodeExtent && !dragItem.extent) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed } = getStoreItems();\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos, null);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            abortDrag = false;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            lastPos = pointerPos;\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                // dragEvent = event.sourceEvent as MouseEvent;\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos, event.sourceEvent);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                updateNodePositions(dragItems, false);\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n// this distance is used for the area around the user pointer\n// while doing a connection for finding the closest nodes\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const clickedHandle = doc?.elementFromPoint(x, y);\n    const handleType = getHandleType(edgeUpdaterType, clickedHandle);\n    const containerBounds = domNode?.getBoundingClientRect();\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let handleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    const newConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    updateConnection(newConnection);\n    let previousConnection = newConnection;\n    onConnectStart?.(event, { nodeId, handleId, handleType });\n    function onPointerMove(event) {\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        handleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: closestHandle && isValid\n                ? rendererPointToPoint({ x: closestHandle.x, y: closestHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        // we don't want to trigger an update when the connection\n        // is snapped to the same handle as before\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if ((closestHandle || handleDomNode) && connection && isValid) {\n            onConnect?.(connection);\n        }\n        // it's important to get a fresh reference from the store here\n        // in order to get the latest state of onConnectEnd\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { inProgress, ...connectionState } = previousConnection;\n        const finalConnectionState = {\n            ...connectionState,\n            toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n        };\n        onConnectEnd?.(event, finalConnectionState);\n        if (edgeUpdaterType) {\n            onReconnectEnd?.(event, finalConnectionState);\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    // we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n    // because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, false);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 10, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            const transform = getTransform();\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\nconst getD3Transition = (selection, duration = 0, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        // increase scroll speed in firefox\n        // firefox: deltaMode === 1; chrome: deltaMode === 0\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        // for pan on scroll we need to handle the event calls on our own\n        // we can't use the start, zoom and end events from d3-zoom\n        // because start and move gets called on every scroll event and not once at the beginning\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && event.type === 'wheel' && !event.ctrlKey;\n        if (preventZoom || isWrappedWithClass(event, noWheelClassName)) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.transform(getD3Transition(d3Selection, options?.duration, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        // We cannot add zoomOnDoubleClick to the filter above because\n        // double tapping on touch screens circumvents the filter and\n        // dblclick.zoom is fired on the selection directly\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleTo(getD3Transition(d3Selection, options?.duration, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleBy(getD3Transition(d3Selection, options?.duration, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            // Collect all child nodes to correct their relative positions when top/left changes\n            // Determine largest minimal extent the parent node is allowed to resize to\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                // when top/left changes, correct the relative positions of child nodes\n                // so that they stay in the same position\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width = isWidthChange ? width : prevValues.width;\n                change.height = isHeightChange ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.();\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitView, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getFitViewNodes, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals };\n","<script>import { getContext } from 'svelte';\nimport cc from 'classcat';\nimport { Position, XYHandle, isMouseEvent, areConnectionMapsEqual, handleConnectionChange, ConnectionMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let id = undefined;\nexport let type = 'source';\nexport let position = Position.Top;\nexport let style = undefined;\nexport let isValidConnection = undefined;\nexport let onconnect = undefined;\nexport let ondisconnect = undefined;\n// @todo implement connectablestart, connectableend\n// export let isConnectableStart: $$Props['isConnectableStart'] = undefined;\n// export let isConnectableEnd: $$Props['isConnectableEnd'] = undefined;\nlet isConnectableProp = undefined;\nexport { isConnectableProp as isConnectable };\nlet className = undefined;\nexport { className as class };\n$: isTarget = type === 'target';\nconst nodeId = getContext('svelteflow__node_id');\nconst connectable = getContext('svelteflow__node_connectable');\n$: isConnectable = isConnectableProp !== undefined ? isConnectableProp : $connectable;\n$: handleId = id || null;\nconst store = useStore();\nconst { connectionMode, domNode, nodeLookup, connectionRadius, viewport, isValidConnection: isValidConnectionStore, lib, addEdge, onedgecreate, panBy, cancelConnection, updateConnection, autoPanOnConnect, edges, connectionLookup, onconnect: onConnectAction, onconnectstart: onConnectStartAction, onconnectend: onConnectEndAction, flowId, connection } = store;\nfunction onPointerDown(event) {\n    const isMouseTriggered = isMouseEvent(event);\n    if ((isMouseTriggered && event.button === 0) || !isMouseTriggered) {\n        XYHandle.onPointerDown(event, {\n            handleId,\n            nodeId,\n            isTarget,\n            connectionRadius: $connectionRadius,\n            domNode: $domNode,\n            nodeLookup: $nodeLookup,\n            connectionMode: $connectionMode,\n            lib: $lib,\n            autoPanOnConnect: $autoPanOnConnect,\n            flowId: $flowId,\n            isValidConnection: isValidConnection ?? $isValidConnectionStore,\n            updateConnection,\n            cancelConnection,\n            panBy,\n            onConnect: (connection) => {\n                const edge = $onedgecreate ? $onedgecreate(connection) : connection;\n                if (!edge) {\n                    return;\n                }\n                addEdge(edge);\n                $onConnectAction?.(connection);\n            },\n            onConnectStart: (event, startParams) => {\n                $onConnectStartAction?.(event, {\n                    nodeId: startParams.nodeId,\n                    handleId: startParams.handleId,\n                    handleType: startParams.handleType\n                });\n            },\n            onConnectEnd: (event, connectionState) => {\n                $onConnectEndAction?.(event, connectionState);\n            },\n            getTransform: () => [$viewport.x, $viewport.y, $viewport.zoom],\n            getFromHandle: () => $connection.fromHandle\n        });\n    }\n}\nlet prevConnections = null;\nlet connections;\n$: if (onconnect || ondisconnect) {\n    // connectionLookup is not reactive, so we use edges to get notified about updates\n    $edges;\n    connections = $connectionLookup.get(`${nodeId}-${type}-${id || null}`);\n}\n$: {\n    if (prevConnections && !areConnectionMapsEqual(connections, prevConnections)) {\n        const _connections = connections ?? new Map();\n        handleConnectionChange(prevConnections, _connections, ondisconnect);\n        handleConnectionChange(_connections, prevConnections, onconnect);\n    }\n    prevConnections = connections ?? new Map();\n}\n$: connectionInProcess = !!$connection.fromHandle;\n$: connectingFrom =\n    $connection.fromHandle?.nodeId === nodeId &&\n        $connection.fromHandle?.type === type &&\n        $connection.fromHandle?.id === handleId;\n$: connectingTo =\n    $connection.toHandle?.nodeId === nodeId &&\n        $connection.toHandle?.type === type &&\n        $connection.toHandle?.id === handleId;\n$: isPossibleEndHandle =\n    $connectionMode === ConnectionMode.Strict\n        ? $connection.fromHandle?.type !== type\n        : nodeId !== $connection.fromHandle?.nodeId || handleId !== $connection.fromHandle?.id;\n$: valid = connectingTo && $connection.isValid;\n</script>\n\n<!--\n@component\nThe Handle component is the part of a node that can be used to connect nodes.\n-->\n<div\n  data-handleid={handleId}\n  data-nodeid={nodeId}\n  data-handlepos={position}\n  data-id=\"{$flowId}-{nodeId}-{id || null}-{type}\"\n  class={cc([\n    'svelte-flow__handle',\n    `svelte-flow__handle-${position}`,\n    'nodrag',\n    'nopan',\n    position,\n    className\n  ])}\n  class:valid\n  class:connectingto={connectingTo}\n  class:connectingfrom={connectingFrom}\n  class:source={!isTarget}\n  class:target={isTarget}\n  class:connectablestart={isConnectable}\n  class:connectableend={isConnectable}\n  class:connectable={isConnectable}\n  class:connectionindicator={isConnectable && (!connectionInProcess || isPossibleEndHandle)}\n  on:mousedown={onPointerDown}\n  on:touchstart={onPointerDown}\n  {style}\n  role=\"button\"\n  tabindex=\"-1\"\n>\n  <slot />\n</div>\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n","function tryToMount(node, domNode, target) {\n    if (!domNode) {\n        return;\n    }\n    const targetEl = target ? domNode.querySelector(target) : domNode;\n    if (targetEl) {\n        targetEl.appendChild(node);\n    }\n}\nexport default function (node, { target, domNode }) {\n    tryToMount(node, domNode, target);\n    return {\n        async update({ target, domNode }) {\n            tryToMount(node, domNode, target);\n        },\n        destroy() {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n}\n","<script>import portal from '../../actions/portal';\nimport { useStore } from '../../store';\nconst { domNode } = useStore();\n</script>\n\n<div use:portal={{ target: '.svelte-flow__edgelabel-renderer', domNode: $domNode }}>\n  <slot />\n</div>\n","import { get } from 'svelte/store';\nimport { errorMessages } from '@xyflow/system';\nimport { useStore } from '../store';\nexport function useHandleEdgeSelect() {\n    const { edgeLookup, selectionRect, selectionRectMode, multiselectionKeyPressed, addSelectedEdges, unselectNodesAndEdges, elementsSelectable } = useStore();\n    return (id) => {\n        const edge = get(edgeLookup).get(id);\n        if (!edge) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        const selectable = edge.selectable || (get(elementsSelectable) && typeof edge.selectable === 'undefined');\n        if (selectable) {\n            selectionRect.set(null);\n            selectionRectMode.set(null);\n            if (!edge.selected) {\n                addSelectedEdges([id]);\n            }\n            else if (edge.selected && get(multiselectionKeyPressed)) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n            }\n        }\n    };\n}\n","<script>import { getContext } from 'svelte';\nimport { EdgeLabelRenderer } from '../EdgeLabelRenderer';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let style = undefined;\nexport let x = undefined;\nexport let y = undefined;\nconst handleEdgeSelect = useHandleEdgeSelect();\nconst id = getContext('svelteflow__edge_id');\n</script>\n\n<EdgeLabelRenderer>\n  <div\n    class=\"svelte-flow__edge-label\"\n    style:transform=\"translate(-50%, -50%) translate({x}px,{y}px)\"\n    style={'pointer-events: all;' + style}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n    on:click={() => {\n      if (id) handleEdgeSelect(id);\n    }}\n  >\n    <slot />\n  </div>\n</EdgeLabelRenderer>\n","<script>import cc from 'classcat';\nimport EdgeLabel from '../EdgeLabel/EdgeLabel.svelte';\nexport let id = undefined;\nexport let path;\nexport let label = undefined;\nexport let labelX = undefined;\nexport let labelY = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let style = undefined;\nexport let interactionWidth = 20;\nlet className = undefined;\nexport { className as class };\nlet interactionWidthValue = interactionWidth === undefined ? 20 : interactionWidth;\n</script>\n\n<path\n  {id}\n  d={path}\n  class={cc(['svelte-flow__edge-path', className])}\n  marker-start={markerStart}\n  marker-end={markerEnd}\n  fill=\"none\"\n  {style}\n/>\n\n{#if interactionWidthValue}\n  <path\n    d={path}\n    stroke-opacity={0}\n    stroke-width={interactionWidthValue}\n    fill=\"none\"\n    class=\"svelte-flow__edge-interaction\"\n  />\n{/if}\n\n{#if label}\n  <EdgeLabel x={labelX} y={labelY} style={labelStyle}>\n    {label}\n  </EdgeLabel>\n{/if}\n","<script>import { getBezierPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getBezierPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getStraightPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\n$: [path, labelX, labelY] = getStraightPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition,\n    borderRadius: 0\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","import { writable, get } from 'svelte/store';\nimport { adoptUserNodes, updateConnectionLookup, infiniteExtent } from '@xyflow/system';\n// we need to sync the user nodes and the internal nodes so that the user can receive the updates\n// made by Svelte Flow (like dragging or selecting a node).\nexport function syncNodeStores(nodesStore, userNodesStore) {\n    const nodesStoreSetter = nodesStore.set;\n    const userNodesStoreSetter = userNodesStore.set;\n    const currentNodesStore = get(nodesStore);\n    const currentUserNodesStore = get(userNodesStore);\n    // depending how the user initializes the nodes, we need to decide if we want to use\n    // the user nodes or the internal nodes for initialization. A user can use a SvelteFlowProvider\n    // without providing any nodes, in that case we want to use the nodes passed by the user.\n    // By default we are using the store nodes, because they already have the absolute positions.\n    const initWithUserNodes = currentNodesStore.length === 0 && currentUserNodesStore.length > 0;\n    let val = initWithUserNodes ? currentUserNodesStore : currentNodesStore;\n    nodesStore.set(val);\n    const _set = (nds) => {\n        const updatedNodes = nodesStoreSetter(nds);\n        val = updatedNodes;\n        userNodesStoreSetter(val);\n        return updatedNodes;\n    };\n    nodesStore.set = userNodesStore.set = _set;\n    nodesStore.update = userNodesStore.update = (fn) => _set(fn(val));\n}\n// same for edges\nexport function syncEdgeStores(edgesStore, userEdgesStore) {\n    const nodesStoreSetter = edgesStore.set;\n    const userEdgesStoreSetter = userEdgesStore.set;\n    let val = get(userEdgesStore);\n    edgesStore.set(val);\n    const _set = (eds) => {\n        nodesStoreSetter(eds);\n        userEdgesStoreSetter(eds);\n        val = eds;\n    };\n    edgesStore.set = userEdgesStore.set = _set;\n    edgesStore.update = userEdgesStore.update = (fn) => _set(fn(val));\n}\n// it is possible to pass a viewport store to SvelteFlow for having more control\n// if that's the case we need to sync the internal viewport with the user viewport\nexport const syncViewportStores = (panZoomStore, viewportStore, userViewportStore) => {\n    if (!userViewportStore) {\n        return;\n    }\n    const panZoom = get(panZoomStore);\n    const viewportStoreSetter = viewportStore.set;\n    const userViewportStoreSetter = userViewportStore.set;\n    let val = userViewportStore ? get(userViewportStore) : { x: 0, y: 0, zoom: 1 };\n    viewportStore.set(val);\n    viewportStore.set = (vp) => {\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    userViewportStore.set = (vp) => {\n        panZoom?.syncViewport(vp);\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    viewportStore.update = (fn) => {\n        viewportStore.set(fn(val));\n    };\n    userViewportStore.update = (fn) => {\n        userViewportStore.set(fn(val));\n    };\n};\n// we are creating a custom store for the internals nodes in order to update the zIndex and positionAbsolute.\n// The user only passes in relative positions, so we need to calculate the absolute positions based on the parent nodes.\nexport const createNodesStore = (nodes, nodeLookup, parentLookup, nodeOrigin = [0, 0], nodeExtent = infiniteExtent) => {\n    const { subscribe, set, update } = writable([]);\n    let value = nodes;\n    let defaults = {};\n    let elevateNodesOnSelect = true;\n    const _set = (nds) => {\n        adoptUserNodes(nds, nodeLookup, parentLookup, {\n            elevateNodesOnSelect,\n            nodeOrigin,\n            nodeExtent,\n            defaults,\n            checkEquality: false\n        });\n        value = nds;\n        set(value);\n        return value;\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    const setOptions = (options) => {\n        elevateNodesOnSelect = options.elevateNodesOnSelect ?? elevateNodesOnSelect;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions,\n        setOptions\n    };\n};\nexport const createEdgesStore = (edges, connectionLookup, edgeLookup, defaultOptions) => {\n    const { subscribe, set, update } = writable([]);\n    let value = edges;\n    let defaults = defaultOptions || {};\n    const _set = (eds) => {\n        const nextEdges = defaults ? eds.map((edge) => ({ ...defaults, ...edge })) : eds;\n        updateConnectionLookup(connectionLookup, edgeLookup, nextEdges);\n        value = nextEdges;\n        set(value);\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions\n    };\n};\n","import { readable, writable } from 'svelte/store';\nimport { infiniteExtent, SelectionMode, ConnectionMode, ConnectionLineType, devWarn, adoptUserNodes, getViewportForBounds, updateConnectionLookup, initialConnection, getInternalNodesBounds } from '@xyflow/system';\nimport DefaultNode from '../components/nodes/DefaultNode.svelte';\nimport InputNode from '../components/nodes/InputNode.svelte';\nimport OutputNode from '../components/nodes/OutputNode.svelte';\nimport GroupNode from '../components/nodes/GroupNode.svelte';\nimport { BezierEdgeInternal, SmoothStepEdgeInternal, StraightEdgeInternal, StepEdgeInternal } from '../components/edges';\nimport { createNodesStore, createEdgesStore } from './utils';\nexport const initialNodeTypes = {\n    input: InputNode,\n    output: OutputNode,\n    default: DefaultNode,\n    group: GroupNode\n};\nexport const initialEdgeTypes = {\n    straight: StraightEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    default: BezierEdgeInternal,\n    step: StepEdgeInternal\n};\nexport const getInitialStore = ({ nodes = [], edges = [], width, height, fitView, nodeOrigin, nodeExtent }) => {\n    const nodeLookup = new Map();\n    const parentLookup = new Map();\n    const connectionLookup = new Map();\n    const edgeLookup = new Map();\n    const storeNodeOrigin = nodeOrigin ?? [0, 0];\n    const storeNodeExtent = nodeExtent ?? infiniteExtent;\n    adoptUserNodes(nodes, nodeLookup, parentLookup, {\n        nodeExtent: storeNodeExtent,\n        nodeOrigin: storeNodeOrigin,\n        elevateNodesOnSelect: false,\n        checkEquality: false\n    });\n    updateConnectionLookup(connectionLookup, edgeLookup, edges);\n    let viewport = { x: 0, y: 0, zoom: 1 };\n    if (fitView && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight))\n        });\n        viewport = getViewportForBounds(bounds, width, height, 0.5, 2, 0.1);\n    }\n    return {\n        flowId: writable(null),\n        nodes: createNodesStore(nodes, nodeLookup, parentLookup, storeNodeOrigin, storeNodeExtent),\n        nodeLookup: readable(nodeLookup),\n        parentLookup: readable(parentLookup),\n        edgeLookup: readable(edgeLookup),\n        visibleNodes: readable([]),\n        edges: createEdgesStore(edges, connectionLookup, edgeLookup),\n        visibleEdges: readable([]),\n        connectionLookup: readable(connectionLookup),\n        height: writable(500),\n        width: writable(500),\n        minZoom: writable(0.5),\n        maxZoom: writable(2),\n        nodeOrigin: writable(storeNodeOrigin),\n        nodeDragThreshold: writable(1),\n        nodeExtent: writable(storeNodeExtent),\n        translateExtent: writable(infiniteExtent),\n        autoPanOnNodeDrag: writable(true),\n        autoPanOnConnect: writable(true),\n        fitViewOnInit: writable(false),\n        fitViewOnInitDone: writable(false),\n        fitViewOptions: writable(undefined),\n        panZoom: writable(null),\n        snapGrid: writable(null),\n        dragging: writable(false),\n        selectionRect: writable(null),\n        selectionKeyPressed: writable(false),\n        multiselectionKeyPressed: writable(false),\n        deleteKeyPressed: writable(false),\n        panActivationKeyPressed: writable(false),\n        zoomActivationKeyPressed: writable(false),\n        selectionRectMode: writable(null),\n        selectionMode: writable(SelectionMode.Partial),\n        nodeTypes: writable(initialNodeTypes),\n        edgeTypes: writable(initialEdgeTypes),\n        viewport: writable(viewport),\n        connectionMode: writable(ConnectionMode.Strict),\n        domNode: writable(null),\n        connection: readable(initialConnection),\n        connectionLineType: writable(ConnectionLineType.Bezier),\n        connectionRadius: writable(20),\n        isValidConnection: writable(() => true),\n        nodesDraggable: writable(true),\n        nodesConnectable: writable(true),\n        elementsSelectable: writable(true),\n        selectNodesOnDrag: writable(true),\n        markers: readable([]),\n        defaultMarkerColor: writable('#b1b1b7'),\n        lib: readable('svelte'),\n        onlyRenderVisibleElements: writable(false),\n        onerror: writable(devWarn),\n        ondelete: writable(undefined),\n        onedgecreate: writable(undefined),\n        onconnect: writable(undefined),\n        onconnectstart: writable(undefined),\n        onconnectend: writable(undefined),\n        onbeforedelete: writable(undefined),\n        nodesInitialized: writable(false),\n        edgesInitialized: writable(false),\n        viewportInitialized: writable(false),\n        initialized: readable(false)\n    };\n};\n","import { derived } from 'svelte/store';\nimport { isEdgeVisible, getEdgePosition, getElevatedEdgeZIndex } from '@xyflow/system';\nexport function getVisibleEdges(store) {\n    const visibleEdges = derived([\n        store.edges,\n        store.nodes,\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.viewport,\n        store.width,\n        store.height\n    ], ([edges, , nodeLookup, onlyRenderVisibleElements, viewport, width, height]) => {\n        const visibleEdges = onlyRenderVisibleElements && width && height\n            ? edges.filter((edge) => {\n                const sourceNode = nodeLookup.get(edge.source);\n                const targetNode = nodeLookup.get(edge.target);\n                return (sourceNode &&\n                    targetNode &&\n                    isEdgeVisible({\n                        sourceNode,\n                        targetNode,\n                        width,\n                        height,\n                        transform: [viewport.x, viewport.y, viewport.zoom]\n                    }));\n            })\n            : edges;\n        return visibleEdges;\n    });\n    return derived([visibleEdges, store.nodes, store.nodeLookup, store.connectionMode, store.onerror], ([visibleEdges, , nodeLookup, connectionMode, onerror]) => {\n        const layoutedEdges = visibleEdges.reduce((res, edge) => {\n            const sourceNode = nodeLookup.get(edge.source);\n            const targetNode = nodeLookup.get(edge.target);\n            if (!sourceNode || !targetNode) {\n                return res;\n            }\n            const edgePosition = getEdgePosition({\n                id: edge.id,\n                sourceNode,\n                targetNode,\n                sourceHandle: edge.sourceHandle || null,\n                targetHandle: edge.targetHandle || null,\n                connectionMode,\n                onError: onerror\n            });\n            if (edgePosition) {\n                res.push({\n                    ...edge,\n                    zIndex: getElevatedEdgeZIndex({\n                        selected: edge.selected,\n                        zIndex: edge.zIndex,\n                        sourceNode,\n                        targetNode,\n                        elevateOnSelect: false\n                    }),\n                    ...edgePosition\n                });\n            }\n            return res;\n        }, []);\n        return layoutedEdges;\n    });\n}\n","import { derived } from 'svelte/store';\nimport { getNodesInside } from '@xyflow/system';\nexport function getVisibleNodes(store) {\n    return derived([\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.width,\n        store.height,\n        store.viewport,\n        store.nodes\n    ], ([nodeLookup, onlyRenderVisibleElements, width, height, viewport]) => {\n        const transform = [viewport.x, viewport.y, viewport.zoom];\n        return onlyRenderVisibleElements\n            ? getNodesInside(nodeLookup, { x: 0, y: 0, width, height }, transform, true)\n            : Array.from(nodeLookup.values());\n    });\n}\n","import { getContext, setContext } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { createMarkerIds, fitView as fitViewSystem, getElementsToRemove, panBy as panBySystem, updateNodeInternals as updateNodeInternalsSystem, addEdge as addEdgeUtil, initialConnection, errorMessages, pointToRendererPoint, getFitViewNodes, updateAbsolutePositions, getDimensions } from '@xyflow/system';\nimport { initialEdgeTypes, initialNodeTypes, getInitialStore } from './initial-store';\nimport { syncNodeStores, syncEdgeStores, syncViewportStores } from './utils';\nimport { getVisibleEdges } from './visible-edges';\nimport { getVisibleNodes } from './visible-nodes';\nexport const key = Symbol();\nexport function createStore({ nodes, edges, width, height, fitView: fitViewOnCreate, nodeOrigin, nodeExtent }) {\n    const store = getInitialStore({\n        nodes,\n        edges,\n        width,\n        height,\n        fitView: fitViewOnCreate,\n        nodeOrigin,\n        nodeExtent\n    });\n    function setNodeTypes(nodeTypes) {\n        store.nodeTypes.set({\n            ...initialNodeTypes,\n            ...nodeTypes\n        });\n    }\n    function setEdgeTypes(edgeTypes) {\n        store.edgeTypes.set({\n            ...initialEdgeTypes,\n            ...edgeTypes\n        });\n    }\n    function addEdge(edgeParams) {\n        const edges = get(store.edges);\n        store.edges.set(addEdgeUtil(edgeParams, edges));\n    }\n    const updateNodePositions = (nodeDragItems, dragging = false) => {\n        const nodeLookup = get(store.nodeLookup);\n        for (const [id, dragItem] of nodeDragItems) {\n            const node = nodeLookup.get(id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            node.position = dragItem.position;\n            node.dragging = dragging;\n        }\n        store.nodes.update((nds) => nds);\n    };\n    function updateNodeInternals(updates) {\n        const nodeLookup = get(store.nodeLookup);\n        const parentLookup = get(store.parentLookup);\n        const { changes, updatedInternals } = updateNodeInternalsSystem(updates, nodeLookup, get(store.parentLookup), get(store.domNode), get(store.nodeOrigin));\n        if (!updatedInternals) {\n            return;\n        }\n        updateAbsolutePositions(nodeLookup, parentLookup, { nodeOrigin, nodeExtent });\n        if (!get(store.fitViewOnInitDone) && get(store.fitViewOnInit)) {\n            const fitViewOptions = get(store.fitViewOptions);\n            const fitViewOnInitDone = fitViewSync({\n                ...fitViewOptions,\n                nodes: fitViewOptions?.nodes\n            });\n            store.fitViewOnInitDone.set(fitViewOnInitDone);\n        }\n        for (const change of changes) {\n            const node = nodeLookup.get(change.id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            switch (change.type) {\n                case 'dimensions': {\n                    const measured = { ...node.measured, ...change.dimensions };\n                    if (change.setAttributes) {\n                        node.width = change.dimensions?.width ?? node.width;\n                        node.height = change.dimensions?.height ?? node.height;\n                    }\n                    node.measured = measured;\n                    break;\n                }\n                case 'position':\n                    node.position = change.position ?? node.position;\n                    break;\n            }\n        }\n        store.nodes.update((nds) => nds);\n        if (!get(store.nodesInitialized)) {\n            store.nodesInitialized.set(true);\n        }\n    }\n    function fitView(options) {\n        const panZoom = get(store.panZoom);\n        const domNode = get(store.domNode);\n        if (!panZoom || !domNode) {\n            return Promise.resolve(false);\n        }\n        const { width, height } = getDimensions(domNode);\n        const fitViewNodes = getFitViewNodes(get(store.nodeLookup), options);\n        return fitViewSystem({\n            nodes: fitViewNodes,\n            width,\n            height,\n            minZoom: get(store.minZoom),\n            maxZoom: get(store.maxZoom),\n            panZoom\n        }, options);\n    }\n    function fitViewSync(options) {\n        const panZoom = get(store.panZoom);\n        if (!panZoom) {\n            return false;\n        }\n        const fitViewNodes = getFitViewNodes(get(store.nodeLookup), options);\n        fitViewSystem({\n            nodes: fitViewNodes,\n            width: get(store.width),\n            height: get(store.height),\n            minZoom: get(store.minZoom),\n            maxZoom: get(store.maxZoom),\n            panZoom\n        }, options);\n        return fitViewNodes.size > 0;\n    }\n    function zoomBy(factor, options) {\n        const panZoom = get(store.panZoom);\n        if (!panZoom) {\n            return Promise.resolve(false);\n        }\n        return panZoom.scaleBy(factor, options);\n    }\n    function zoomIn(options) {\n        return zoomBy(1.2, options);\n    }\n    function zoomOut(options) {\n        return zoomBy(1 / 1.2, options);\n    }\n    function setMinZoom(minZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([minZoom, get(store.maxZoom)]);\n            store.minZoom.set(minZoom);\n        }\n    }\n    function setMaxZoom(maxZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([get(store.minZoom), maxZoom]);\n            store.maxZoom.set(maxZoom);\n        }\n    }\n    function setTranslateExtent(extent) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setTranslateExtent(extent);\n            store.translateExtent.set(extent);\n        }\n    }\n    function resetSelectedElements(elements) {\n        let elementsChanged = false;\n        elements.forEach((element) => {\n            if (element.selected) {\n                element.selected = false;\n                elementsChanged = true;\n            }\n        });\n        return elementsChanged;\n    }\n    function setPaneClickDistance(distance) {\n        get(store.panZoom)?.setClickDistance(distance);\n    }\n    function unselectNodesAndEdges(params) {\n        const resetNodes = resetSelectedElements(params?.nodes || get(store.nodes));\n        if (resetNodes)\n            store.nodes.set(get(store.nodes));\n        const resetEdges = resetSelectedElements(params?.edges || get(store.edges));\n        if (resetEdges)\n            store.edges.set(get(store.edges));\n    }\n    store.deleteKeyPressed.subscribe(async (deleteKeyPressed) => {\n        if (deleteKeyPressed) {\n            const nodes = get(store.nodes);\n            const edges = get(store.edges);\n            const selectedNodes = nodes.filter((node) => node.selected);\n            const selectedEdges = edges.filter((edge) => edge.selected);\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove: selectedNodes,\n                edgesToRemove: selectedEdges,\n                nodes,\n                edges,\n                onBeforeDelete: get(store.onbeforedelete)\n            });\n            if (matchingNodes.length || matchingEdges.length) {\n                store.nodes.update((nds) => nds.filter((node) => !matchingNodes.some((mN) => mN.id === node.id)));\n                store.edges.update((eds) => eds.filter((edge) => !matchingEdges.some((mE) => mE.id === edge.id)));\n                get(store.ondelete)?.({\n                    nodes: matchingNodes,\n                    edges: matchingEdges\n                });\n            }\n        }\n    });\n    function addSelectedNodes(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.nodes.update((ns) => ns.map((node) => {\n            const nodeWillBeSelected = ids.includes(node.id);\n            const selected = isMultiSelection\n                ? node.selected || nodeWillBeSelected\n                : nodeWillBeSelected;\n            // we need to mutate the node here in order to have the correct selected state in the drag handler\n            node.selected = selected;\n            return node;\n        }));\n        if (!isMultiSelection) {\n            store.edges.update((es) => es.map((edge) => {\n                edge.selected = false;\n                return edge;\n            }));\n        }\n    }\n    function addSelectedEdges(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.edges.update((edges) => edges.map((edge) => {\n            const edgeWillBeSelected = ids.includes(edge.id);\n            const selected = isMultiSelection\n                ? edge.selected || edgeWillBeSelected\n                : edgeWillBeSelected;\n            edge.selected = selected;\n            return edge;\n        }));\n        if (!isMultiSelection) {\n            store.nodes.update((ns) => ns.map((node) => {\n                node.selected = false;\n                return node;\n            }));\n        }\n    }\n    function handleNodeSelection(id) {\n        const node = get(store.nodes)?.find((n) => n.id === id);\n        if (!node) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        if (!node.selected) {\n            addSelectedNodes([id]);\n        }\n        else if (node.selected && get(store.multiselectionKeyPressed)) {\n            unselectNodesAndEdges({ nodes: [node], edges: [] });\n        }\n    }\n    function panBy(delta) {\n        const viewport = get(store.viewport);\n        return panBySystem({\n            delta,\n            panZoom: get(store.panZoom),\n            transform: [viewport.x, viewport.y, viewport.zoom],\n            translateExtent: get(store.translateExtent),\n            width: get(store.width),\n            height: get(store.height)\n        });\n    }\n    const _connection = writable(initialConnection);\n    const updateConnection = (newConnection) => {\n        _connection.set({ ...newConnection });\n    };\n    function cancelConnection() {\n        _connection.set(initialConnection);\n    }\n    function reset() {\n        store.fitViewOnInitDone.set(false);\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        store.snapGrid.set(null);\n        store.isValidConnection.set(() => true);\n        unselectNodesAndEdges();\n        cancelConnection();\n    }\n    return {\n        // state\n        ...store,\n        // derived state\n        visibleEdges: getVisibleEdges(store),\n        visibleNodes: getVisibleNodes(store),\n        connection: derived([_connection, store.viewport], ([connection, viewport]) => {\n            return connection.inProgress\n                ? {\n                    ...connection,\n                    to: pointToRendererPoint(connection.to, [viewport.x, viewport.y, viewport.zoom])\n                }\n                : { ...connection };\n        }),\n        markers: derived([store.edges, store.defaultMarkerColor, store.flowId], ([edges, defaultColor, id]) => createMarkerIds(edges, { defaultColor, id })),\n        initialized: (() => {\n            let initialized = false;\n            const initialNodesLength = get(store.nodes).length;\n            const initialEdgesLength = get(store.edges).length;\n            return derived([store.nodesInitialized, store.edgesInitialized, store.viewportInitialized], ([nodesInitialized, edgesInitialized, viewportInitialized]) => {\n                // If it was already initialized, return true from then on\n                if (initialized)\n                    return initialized;\n                // if it hasn't been initialised check if it's now\n                if (initialNodesLength === 0) {\n                    initialized = viewportInitialized;\n                }\n                else if (initialEdgesLength === 0) {\n                    initialized = viewportInitialized && nodesInitialized;\n                }\n                else {\n                    initialized = viewportInitialized && nodesInitialized && edgesInitialized;\n                }\n                return initialized;\n            });\n        })(),\n        // actions\n        syncNodeStores: (nodes) => syncNodeStores(store.nodes, nodes),\n        syncEdgeStores: (edges) => syncEdgeStores(store.edges, edges),\n        syncViewport: (viewport) => syncViewportStores(store.panZoom, store.viewport, viewport),\n        setNodeTypes,\n        setEdgeTypes,\n        addEdge,\n        updateNodePositions,\n        updateNodeInternals,\n        zoomIn,\n        zoomOut,\n        fitView: (options) => fitView(options),\n        setMinZoom,\n        setMaxZoom,\n        setTranslateExtent,\n        setPaneClickDistance,\n        unselectNodesAndEdges,\n        addSelectedNodes,\n        addSelectedEdges,\n        handleNodeSelection,\n        panBy,\n        updateConnection,\n        cancelConnection,\n        reset\n    };\n}\nexport function useStore() {\n    const store = getContext(key);\n    if (!store) {\n        throw new Error('In order to use useStore you need to wrap your component in a <SvelteFlowProvider />');\n    }\n    return store.getStore();\n}\nexport function createStoreContext({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent }) {\n    const store = createStore({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent });\n    setContext(key, {\n        getStore: () => store\n    });\n    return store;\n}\n","import { PanOnScrollMode, XYPanZoom } from '@xyflow/system';\nexport default function zoom(domNode, params) {\n    const { panZoom, minZoom, maxZoom, initialViewport, viewport, dragging, translateExtent, paneClickDistance } = params;\n    const panZoomInstance = XYPanZoom({\n        domNode,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        viewport: initialViewport,\n        paneClickDistance,\n        onDraggingChange: dragging.set\n    });\n    const currentViewport = panZoomInstance.getViewport();\n    viewport.set(currentViewport);\n    panZoom.set(panZoomInstance);\n    panZoomInstance.update(params);\n    return {\n        update(params) {\n            panZoomInstance.update(params);\n        }\n    };\n}\n","<script>import { onMount } from 'svelte';\nimport { PanOnScrollMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport zoom from '../../actions/zoom';\nexport let initialViewport = undefined;\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let panOnScrollMode;\nexport let preventScrolling;\nexport let zoomOnScroll;\nexport let zoomOnDoubleClick;\nexport let zoomOnPinch;\nexport let panOnDrag;\nexport let panOnScroll;\nexport let paneClickDistance;\nconst { viewport, panZoom, selectionRect, minZoom, maxZoom, dragging, translateExtent, lib, panActivationKeyPressed, zoomActivationKeyPressed, viewportInitialized } = useStore();\n$: viewPort = initialViewport || { x: 0, y: 0, zoom: 1 };\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: _panOnScroll = $panActivationKeyPressed || panOnScroll;\nconst onTransformChange = (transform) => viewport.set({ x: transform[0], y: transform[1], zoom: transform[2] });\nonMount(() => {\n    $viewportInitialized = true;\n});\n</script>\n\n<div\n  class=\"svelte-flow__zoom\"\n  use:zoom={{\n    viewport,\n    minZoom: $minZoom,\n    maxZoom: $maxZoom,\n    initialViewport: viewPort,\n    dragging,\n    panZoom,\n    onPanZoomStart: onMoveStart,\n    onPanZoom: onMove,\n    onPanZoomEnd: onMoveEnd,\n    zoomOnScroll,\n    zoomOnDoubleClick,\n    zoomOnPinch,\n    panOnScroll: _panOnScroll,\n    panOnDrag: _panOnDrag,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: panOnScrollMode || PanOnScrollMode.Free,\n    zoomActivationKeyPressed: $zoomActivationKeyPressed,\n    preventScrolling: typeof preventScrolling === 'boolean' ? preventScrolling : true,\n    noPanClassName: 'nopan',\n    noWheelClassName: 'nowheel',\n    userSelectionActive: !!$selectionRect,\n    translateExtent: $translateExtent,\n    lib: $lib,\n    paneClickDistance,\n    onTransformChange\n  }}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__zoom {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 4;\n  }\n</style>\n","<script context=\"module\">export function wrapHandler(handler, container) {\n    return (event) => {\n        if (event.target !== container) {\n            return;\n        }\n        handler?.(event);\n    };\n}\nexport function toggleSelected(ids) {\n    return (item) => {\n        const isSelected = ids.includes(item.id);\n        if (item.selected !== isSelected) {\n            item.selected = isSelected;\n        }\n        return item;\n    };\n}\n</script>\n\n<script>import { createEventDispatcher } from 'svelte';\nimport { SelectionMode, getEventPosition, getNodesInside, getConnectedEdges } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let panOnDrag = undefined;\nexport let selectionOnDrag = undefined;\nconst dispatch = createEventDispatcher();\nconst { nodes, nodeLookup, edges, viewport, dragging, elementsSelectable, selectionRect, selectionRectMode, selectionKeyPressed, selectionMode, panActivationKeyPressed, unselectNodesAndEdges } = useStore();\nlet container;\nlet containerBounds = null;\nlet selectedNodes = [];\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: isSelecting =\n    $selectionKeyPressed || $selectionRect || (selectionOnDrag && _panOnDrag !== true);\n$: hasActiveSelection = $elementsSelectable && (isSelecting || $selectionRectMode === 'user');\n// Used to prevent click events when the user lets go of the selectionKey during a selection\nlet selectionInProgress = false;\nfunction onClick(event) {\n    // We prevent click events when the user let go of the selectionKey during a selection\n    if (selectionInProgress) {\n        selectionInProgress = false;\n        return;\n    }\n    dispatch('paneclick', { event });\n    unselectNodesAndEdges();\n    selectionRectMode.set(null);\n}\nfunction onPointerDown(event) {\n    containerBounds = container.getBoundingClientRect();\n    if (!elementsSelectable ||\n        !isSelecting ||\n        event.button !== 0 ||\n        event.target !== container ||\n        !containerBounds) {\n        return;\n    }\n    event.target?.setPointerCapture?.(event.pointerId);\n    const { x, y } = getEventPosition(event, containerBounds);\n    unselectNodesAndEdges();\n    selectionRect.set({\n        width: 0,\n        height: 0,\n        startX: x,\n        startY: y,\n        x,\n        y\n    });\n    // onSelectionStart?.(event);\n}\nfunction onPointerMove(event) {\n    if (!isSelecting || !containerBounds || !$selectionRect) {\n        return;\n    }\n    selectionInProgress = true;\n    const mousePos = getEventPosition(event, containerBounds);\n    const startX = $selectionRect.startX ?? 0;\n    const startY = $selectionRect.startY ?? 0;\n    const nextUserSelectRect = {\n        ...$selectionRect,\n        x: mousePos.x < startX ? mousePos.x : startX,\n        y: mousePos.y < startY ? mousePos.y : startY,\n        width: Math.abs(mousePos.x - startX),\n        height: Math.abs(mousePos.y - startY)\n    };\n    const prevSelectedNodeIds = selectedNodes.map((n) => n.id);\n    const prevSelectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    selectedNodes = getNodesInside($nodeLookup, nextUserSelectRect, [$viewport.x, $viewport.y, $viewport.zoom], $selectionMode === SelectionMode.Partial, true);\n    const selectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    const selectedNodeIds = selectedNodes.map((n) => n.id);\n    // this prevents unnecessary updates while updating the selection rectangle\n    if (prevSelectedNodeIds.length !== selectedNodeIds.length ||\n        selectedNodeIds.some((id) => !prevSelectedNodeIds.includes(id))) {\n        nodes.update((nodes) => nodes.map(toggleSelected(selectedNodeIds)));\n    }\n    if (prevSelectedEdgeIds.length !== selectedEdgeIds.length ||\n        selectedEdgeIds.some((id) => !prevSelectedEdgeIds.includes(id))) {\n        edges.update((edges) => edges.map(toggleSelected(selectedEdgeIds)));\n    }\n    selectionRectMode.set('user');\n    selectionRect.set(nextUserSelectRect);\n}\nfunction onPointerUp(event) {\n    if (event.button !== 0) {\n        return;\n    }\n    event.target?.releasePointerCapture?.(event.pointerId);\n    // We only want to trigger click functions when in selection mode if\n    // the user did not move the mouse.\n    if (!isSelecting && $selectionRectMode === 'user' && event.target === container) {\n        onClick?.(event);\n    }\n    selectionRect.set(null);\n    if (selectedNodes.length > 0) {\n        $selectionRectMode = 'nodes';\n    }\n    // If the user kept holding the selectionKey during the selection,\n    // we need to reset the selectionInProgress, so the next click event is not prevented\n    if ($selectionKeyPressed) {\n        selectionInProgress = false;\n    }\n    // onSelectionEnd?.(event);\n}\nconst onContextMenu = (event) => {\n    if (Array.isArray(_panOnDrag) && _panOnDrag?.includes(2)) {\n        event.preventDefault();\n        return;\n    }\n    dispatch('panecontextmenu', { event });\n};\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n  bind:this={container}\n  class=\"svelte-flow__pane\"\n  class:draggable={panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0))}\n  class:dragging={$dragging}\n  class:selection={isSelecting}\n  on:click={hasActiveSelection ? undefined : wrapHandler(onClick, container)}\n  on:pointerdown={hasActiveSelection ? onPointerDown : undefined}\n  on:pointermove={hasActiveSelection ? onPointerMove : undefined}\n  on:pointerup={hasActiveSelection ? onPointerUp : undefined}\n  on:contextmenu={wrapHandler(onContextMenu, container)}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__pane {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nconst { viewport } = useStore();\n</script>\n\n<div\n  class=\"svelte-flow__viewport xyflow__viewport\"\n  style=\"transform: translate({$viewport.x}px, {$viewport.y}px) scale({$viewport.zoom})\"\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__viewport {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","import { get } from 'svelte/store';\nimport { XYDrag } from '@xyflow/system';\nexport default function drag(domNode, params) {\n    const { store, onDrag, onDragStart, onDragStop, onNodeMouseDown } = params;\n    const dragInstance = XYDrag({\n        onDrag,\n        onDragStart,\n        onDragStop,\n        onNodeMouseDown,\n        getStoreItems: () => {\n            const snapGrid = get(store.snapGrid);\n            const vp = get(store.viewport);\n            return {\n                nodes: get(store.nodes),\n                nodeLookup: get(store.nodeLookup),\n                edges: get(store.edges),\n                nodeExtent: get(store.nodeExtent),\n                snapGrid: snapGrid ? snapGrid : [0, 0],\n                snapToGrid: !!snapGrid,\n                nodeOrigin: get(store.nodeOrigin),\n                multiSelectionActive: get(store.multiselectionKeyPressed),\n                domNode: get(store.domNode),\n                transform: [vp.x, vp.y, vp.zoom],\n                autoPanOnNodeDrag: get(store.autoPanOnNodeDrag),\n                nodesDraggable: get(store.nodesDraggable),\n                selectNodesOnDrag: get(store.selectNodesOnDrag),\n                nodeDragThreshold: get(store.nodeDragThreshold),\n                unselectNodesAndEdges: store.unselectNodesAndEdges,\n                updateNodePositions: store.updateNodePositions,\n                panBy: store.panBy\n            };\n        }\n    });\n    function updateDrag(domNode, params) {\n        if (params.disabled) {\n            dragInstance.destroy();\n            return;\n        }\n        dragInstance.update({\n            domNode,\n            noDragClassName: params.noDragClass,\n            handleSelector: params.handleSelector,\n            nodeId: params.nodeId,\n            isSelectable: params.isSelectable,\n            nodeClickDistance: params.nodeClickDistance\n        });\n    }\n    updateDrag(domNode, params);\n    return {\n        update(params) {\n            updateDrag(domNode, params);\n        },\n        destroy() {\n            dragInstance.destroy();\n        }\n    };\n}\n","<svelte:options immutable />\n\n<script>import { setContext, onDestroy, createEventDispatcher } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport cc from 'classcat';\nimport { errorMessages, Position } from '@xyflow/system';\nimport drag from '../../actions/drag';\nimport { useStore } from '../../store';\nimport DefaultNode from '../nodes/DefaultNode.svelte';\nimport { getNodeInlineStyleDimensions } from './utils';\nexport let node;\nexport let id;\nexport let data = {};\nexport let selected = false;\nexport let draggable = undefined;\nexport let selectable = undefined;\nexport let connectable = true;\nexport let deletable = true;\nexport let hidden = false;\nexport let dragging = false;\nexport let resizeObserver = null;\nexport let style = undefined;\nexport let type = 'default';\nexport let isParent = false;\nexport let positionX;\nexport let positionY;\nexport let sourcePosition = undefined;\nexport let targetPosition = undefined;\nexport let zIndex;\nexport let measuredWidth = undefined;\nexport let measuredHeight = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let dragHandle = undefined;\nexport let initialized = false;\nexport let parentId = undefined;\nexport let nodeClickDistance = undefined;\nlet className = '';\nexport { className as class };\nconst store = useStore();\nconst { nodeTypes, nodeDragThreshold, selectNodesOnDrag, handleNodeSelection, updateNodeInternals } = store;\nlet nodeRef;\nlet prevNodeRef = null;\nconst dispatchNodeEvent = createEventDispatcher();\nconst connectableStore = writable(connectable);\nlet prevType = undefined;\nlet prevSourcePosition = undefined;\nlet prevTargetPosition = undefined;\n$: nodeType = type || 'default';\n$: nodeTypeValid = !!$nodeTypes[nodeType];\n$: nodeComponent = $nodeTypes[nodeType] || DefaultNode;\n$: {\n    if (!nodeTypeValid) {\n        console.warn('003', errorMessages['error003'](type));\n    }\n}\n$: inlineStyleDimensions = getNodeInlineStyleDimensions({\n    width,\n    height,\n    initialWidth,\n    initialHeight,\n    measuredWidth,\n    measuredHeight\n});\n$: {\n    connectableStore.set(!!connectable);\n}\n$: {\n    // if type, sourcePosition or targetPosition changes,\n    // we need to re-calculate the handle positions\n    const doUpdate = (prevType && nodeType !== prevType) ||\n        (prevSourcePosition && sourcePosition !== prevSourcePosition) ||\n        (prevTargetPosition && targetPosition !== prevTargetPosition);\n    if (doUpdate) {\n        requestAnimationFrame(() => updateNodeInternals(new Map([\n            [\n                id,\n                {\n                    id,\n                    nodeElement: nodeRef,\n                    force: true\n                }\n            ]\n        ])));\n    }\n    prevType = nodeType;\n    prevSourcePosition = sourcePosition;\n    prevTargetPosition = targetPosition;\n}\nsetContext('svelteflow__node_id', id);\nsetContext('svelteflow__node_connectable', connectableStore);\n$: {\n    if (resizeObserver && (nodeRef !== prevNodeRef || !initialized)) {\n        prevNodeRef && resizeObserver.unobserve(prevNodeRef);\n        nodeRef && resizeObserver.observe(nodeRef);\n        prevNodeRef = nodeRef;\n    }\n}\nonDestroy(() => {\n    if (prevNodeRef) {\n        resizeObserver?.unobserve(prevNodeRef);\n    }\n});\nfunction onSelectNodeHandler(event) {\n    if (selectable && (!get(selectNodesOnDrag) || !draggable || get(nodeDragThreshold) > 0)) {\n        // this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n        // here we only need to call it when selectNodesOnDrag=false\n        handleNodeSelection(id);\n    }\n    dispatchNodeEvent('nodeclick', { node: node.internals.userNode, event });\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n{#if !hidden}\n  <div\n    use:drag={{\n      nodeId: id,\n      isSelectable: selectable,\n      disabled: false,\n      handleSelector: dragHandle,\n      noDragClass: 'nodrag',\n      nodeClickDistance,\n      onNodeMouseDown: handleNodeSelection,\n      onDrag: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedrag', { event, targetNode, nodes });\n      },\n      onDragStart: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstart', { event, targetNode, nodes });\n      },\n      onDragStop: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstop', { event, targetNode, nodes });\n      },\n      store\n    }}\n    bind:this={nodeRef}\n    data-id={id}\n    class={cc(['svelte-flow__node', `svelte-flow__node-${nodeType}`, className])}\n    class:dragging\n    class:selected\n    class:draggable\n    class:connectable\n    class:selectable\n    class:nopan={draggable}\n    class:parent={isParent}\n    style:z-index={zIndex}\n    style:transform=\"translate({positionX}px, {positionY}px)\"\n    style:visibility={initialized ? 'visible' : 'hidden'}\n    style=\"{style ?? ''};{inlineStyleDimensions.width}{inlineStyleDimensions.height}\"\n    on:click={onSelectNodeHandler}\n    on:mouseenter={(event) => dispatchNodeEvent('nodemouseenter', { node, event })}\n    on:mouseleave={(event) => dispatchNodeEvent('nodemouseleave', { node, event })}\n    on:mousemove={(event) => dispatchNodeEvent('nodemousemove', { node, event })}\n    on:contextmenu={(event) => dispatchNodeEvent('nodecontextmenu', { node, event })}\n  >\n    <svelte:component\n      this={nodeComponent}\n      {data}\n      {id}\n      {selected}\n      {selectable}\n      {deletable}\n      {sourcePosition}\n      {targetPosition}\n      {zIndex}\n      {dragging}\n      {draggable}\n      {dragHandle}\n      {parentId}\n      type={nodeType}\n      isConnectable={$connectableStore}\n      positionAbsoluteX={positionX}\n      positionAbsoluteY={positionY}\n      {width}\n      {height}\n    />\n  </div>\n{/if}\n","export function getNodeInlineStyleDimensions({ width, height, initialWidth, initialHeight, measuredWidth, measuredHeight }) {\n    if (measuredWidth === undefined && measuredHeight === undefined) {\n        const styleWidth = width ?? initialWidth;\n        const styleHeight = height ?? initialHeight;\n        return {\n            width: styleWidth ? `width:${styleWidth}px;` : '',\n            height: styleHeight ? `height:${styleHeight}px;` : ''\n        };\n    }\n    return {\n        width: width ? `width:${width}px;` : '',\n        height: height ? `height:${height}px;` : ''\n    };\n}\n","<script>import { onDestroy } from 'svelte';\nimport { nodeHasDimensions } from '@xyflow/system';\nimport { NodeWrapper } from '../../components/NodeWrapper';\nimport { useStore } from '../../store';\nexport let nodeClickDistance = 0;\nconst { visibleNodes, nodesDraggable, nodesConnectable, elementsSelectable, updateNodeInternals, parentLookup } = useStore();\nconst resizeObserver = typeof ResizeObserver === 'undefined'\n    ? null\n    : new ResizeObserver((entries) => {\n        const updates = new Map();\n        entries.forEach((entry) => {\n            const id = entry.target.getAttribute('data-id');\n            updates.set(id, {\n                id,\n                nodeElement: entry.target,\n                force: true\n            });\n        });\n        updateNodeInternals(updates);\n    });\nonDestroy(() => {\n    resizeObserver?.disconnect();\n});\n</script>\n\n<div class=\"svelte-flow__nodes\">\n  {#each $visibleNodes as node (node.id)}\n    <NodeWrapper\n      {node}\n      id={node.id}\n      data={node.data}\n      selected={!!node.selected}\n      hidden={!!node.hidden}\n      draggable={!!(node.draggable || ($nodesDraggable && typeof node.draggable === 'undefined'))}\n      selectable={!!(\n        node.selectable ||\n        ($elementsSelectable && typeof node.selectable === 'undefined')\n      )}\n      connectable={!!(\n        node.connectable ||\n        ($nodesConnectable && typeof node.connectable === 'undefined')\n      )}\n      deletable={node.deletable ?? true}\n      positionX={node.internals.positionAbsolute.x}\n      positionY={node.internals.positionAbsolute.y}\n      isParent={$parentLookup.has(node.id)}\n      style={node.style}\n      class={node.class}\n      type={node.type ?? 'default'}\n      sourcePosition={node.sourcePosition}\n      targetPosition={node.targetPosition}\n      dragging={node.dragging}\n      zIndex={node.internals.z ?? 0}\n      dragHandle={node.dragHandle}\n      initialized={nodeHasDimensions(node)}\n      width={node.width}\n      height={node.height}\n      initialWidth={node.initialWidth}\n      initialHeight={node.initialHeight}\n      measuredWidth={node.measured.width}\n      measuredHeight={node.measured.height}\n      parentId={node.parentId}\n      {resizeObserver}\n      {nodeClickDistance}\n      on:nodeclick\n      on:nodemouseenter\n      on:nodemousemove\n      on:nodemouseleave\n      on:nodedrag\n      on:nodedragstart\n      on:nodedragstop\n      on:nodecontextmenu\n    />\n  {/each}\n</div>\n\n<style>\n  .svelte-flow__nodes {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n</style>\n","<svelte:options immutable />\n\n<script>import { createEventDispatcher, setContext } from 'svelte';\nimport cc from 'classcat';\nimport { getMarkerId } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { BezierEdgeInternal } from '../edges';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let id;\nexport let type = 'default';\nexport let source = '';\nexport let target = '';\nexport let data = {};\nexport let style = undefined;\nexport let zIndex = undefined;\nexport let animated = false;\nexport let selected = false;\nexport let selectable = undefined;\nexport let deletable = undefined;\nexport let hidden = false;\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let sourceHandle = undefined;\nexport let targetHandle = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\nexport let sourcePosition;\nexport let targetPosition;\nexport let ariaLabel = undefined;\nexport let interactionWidth = undefined;\n// @ todo: support edge updates\nlet className = '';\nexport { className as class };\nsetContext('svelteflow__edge_id', id);\nconst { edgeLookup, edgeTypes, flowId, elementsSelectable } = useStore();\nconst dispatch = createEventDispatcher();\n$: edgeType = type || 'default';\n$: edgeComponent = $edgeTypes[edgeType] || BezierEdgeInternal;\n$: markerStartUrl = markerStart ? `url('#${getMarkerId(markerStart, $flowId)}')` : undefined;\n$: markerEndUrl = markerEnd ? `url('#${getMarkerId(markerEnd, $flowId)}')` : undefined;\n$: isSelectable = selectable ?? $elementsSelectable;\nconst handleEdgeSelect = useHandleEdgeSelect();\nfunction onClick(event) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        handleEdgeSelect(id);\n        dispatch('edgeclick', { event, edge });\n    }\n}\nfunction onMouseEvent(event, type) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        dispatch(type, { event, edge });\n    }\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n{#if !hidden}\n  <svg style:z-index={zIndex}>\n    <g\n      class={cc(['svelte-flow__edge', className])}\n      class:animated\n      class:selected\n      class:selectable={isSelectable}\n      data-id={id}\n      on:click={onClick}\n      on:contextmenu={(e) => {\n        onMouseEvent(e, 'edgecontextmenu');\n      }}\n      on:mouseenter={(e) => {\n        onMouseEvent(e, 'edgemouseenter');\n      }}\n      on:mouseleave={(e) => {\n        onMouseEvent(e, 'edgemouseleave');\n      }}\n      aria-label={ariaLabel === null\n        ? undefined\n        : ariaLabel\n          ? ariaLabel\n          : `Edge from ${source} to ${target}`}\n      role=\"img\"\n    >\n      <svelte:component\n        this={edgeComponent}\n        {id}\n        {source}\n        {target}\n        {sourceX}\n        {sourceY}\n        {targetX}\n        {targetY}\n        {sourcePosition}\n        {targetPosition}\n        {animated}\n        {selected}\n        {label}\n        {labelStyle}\n        {data}\n        {style}\n        {interactionWidth}\n        selectable={isSelectable}\n        deletable={deletable ?? true}\n        type={edgeType}\n        sourceHandleId={sourceHandle}\n        targetHandleId={targetHandle}\n        markerStart={markerStartUrl}\n        markerEnd={markerEndUrl}\n      />\n    </g>\n  </svg>\n{/if}\n","<script>import { onMount } from 'svelte';\nlet _onMount = undefined;\nexport { _onMount as onMount };\nlet _onDestroy = undefined;\nexport { _onDestroy as onDestroy };\nonMount(() => {\n    _onMount?.();\n    return _onDestroy;\n});\n</script>\n","<script>import { useStore } from '../../../store';\nimport { Marker } from './';\nconst { markers } = useStore();\n</script>\n\n<defs>\n  {#each $markers as marker (marker.id)}\n    <Marker {...marker} />\n  {/each}\n</defs>\n","<script>import { MarkerType } from '@xyflow/system';\nexport let id;\nexport let type;\nexport let width = 12.5;\nexport let height = 12.5;\nexport let markerUnits = 'strokeWidth';\nexport let orient = 'auto-start-reverse';\nexport let color = undefined;\nexport let strokeWidth = undefined;\n</script>\n\n<marker\n  class=\"svelte-flow__arrowhead\"\n  {id}\n  markerWidth={`${width}`}\n  markerHeight={`${height}`}\n  viewBox=\"-10 -10 20 20\"\n  {markerUnits}\n  {orient}\n  refX=\"0\"\n  refY=\"0\"\n>\n  {#if type === MarkerType.Arrow}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill=\"none\"\n      points=\"-5,-4 0,0 -5,4\"\n    />\n  {:else if type === MarkerType.ArrowClosed}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill={color}\n      points=\"-5,-4 0,0 -5,4 -5,-4\"\n    />\n  {/if}\n</marker>\n","<script>import { onMount } from 'svelte';\nimport { EdgeWrapper } from '../../components/EdgeWrapper';\nimport { CallOnMount } from '../../components/CallOnMount';\nimport { MarkerDefinition } from './MarkerDefinition';\nimport { useStore } from '../../store';\nexport let defaultEdgeOptions;\nconst { visibleEdges, edgesInitialized, edges: { setDefaultOptions }, elementsSelectable } = useStore();\nonMount(() => {\n    if (defaultEdgeOptions)\n        setDefaultOptions(defaultEdgeOptions);\n});\n</script>\n\n<div class=\"svelte-flow__edges\">\n  <svg class=\"svelte-flow__marker\">\n    <MarkerDefinition />\n  </svg>\n\n  {#each $visibleEdges as edge (edge.id)}\n    <EdgeWrapper\n      id={edge.id}\n      source={edge.source}\n      target={edge.target}\n      data={edge.data}\n      style={edge.style}\n      animated={edge.animated}\n      selected={edge.selected}\n      selectable={edge.selectable ?? $elementsSelectable}\n      deletable={edge.deletable}\n      hidden={edge.hidden}\n      label={edge.label}\n      labelStyle={edge.labelStyle}\n      markerStart={edge.markerStart}\n      markerEnd={edge.markerEnd}\n      sourceHandle={edge.sourceHandle}\n      targetHandle={edge.targetHandle}\n      sourceX={edge.sourceX}\n      sourceY={edge.sourceY}\n      targetX={edge.targetX}\n      targetY={edge.targetY}\n      sourcePosition={edge.sourcePosition}\n      targetPosition={edge.targetPosition}\n      ariaLabel={edge.ariaLabel}\n      interactionWidth={edge.interactionWidth}\n      class={edge.class}\n      type={edge.type || 'default'}\n      zIndex={edge.zIndex}\n      on:edgeclick\n      on:edgecontextmenu\n      on:edgemouseenter\n      on:edgemouseleave\n    />\n  {/each}\n\n  {#if $visibleEdges.length > 0}\n    <CallOnMount\n      onMount={() => {\n        $edgesInitialized = true;\n      }}\n      onDestroy={() => {\n        $edgesInitialized = false;\n      }}\n    />\n  {/if}\n</div>\n","<script>export let x = 0;\nexport let y = 0;\nexport let width = 0;\nexport let height = 0;\nexport let isVisible = true;\n</script>\n\n{#if isVisible}\n  <div\n    class=\"svelte-flow__selection\"\n    style:width={typeof width === 'string' ? width : `${width}px`}\n    style:height={typeof height === 'string' ? height : `${height}px`}\n    style:transform={`translate(${x}px, ${y}px)`}\n  />\n{/if}\n\n<style>\n  .svelte-flow__selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nimport { Selection } from '../Selection';\nconst { selectionRect, selectionRectMode } = useStore();\n</script>\n\n<Selection\n  isVisible={!!($selectionRect && $selectionRectMode === 'user')}\n  width={$selectionRect?.width}\n  height={$selectionRect?.height}\n  x={$selectionRect?.x}\n  y={$selectionRect?.y}\n/>\n","<script>import { createEventDispatcher } from 'svelte';\nimport { getInternalNodesBounds, isNumeric } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { Selection } from '../Selection';\nimport drag from '../../actions/drag';\nconst store = useStore();\nconst { selectionRectMode, nodes, nodeLookup } = store;\nconst dispatch = createEventDispatcher();\nlet bounds = null;\n$: if ($selectionRectMode === 'nodes') {\n    bounds = getInternalNodesBounds($nodeLookup, { filter: (node) => !!node.selected });\n    $nodes;\n}\nfunction onContextMenu(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectioncontextmenu', { nodes: selectedNodes, event });\n}\nfunction onClick(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectionclick', { nodes: selectedNodes, event });\n}\n</script>\n\n{#if $selectionRectMode === 'nodes' && bounds && isNumeric(bounds.x) && isNumeric(bounds.y)}\n  <div\n    class=\"selection-wrapper nopan\"\n    style=\"width: {bounds.width}px; height: {bounds.height}px; transform: translate({bounds.x}px, {bounds.y}px)\"\n    use:drag={{\n      disabled: false,\n      store,\n      onDrag: (event, _, __, nodes) => {\n        dispatch('nodedrag', { event, targetNode: null, nodes });\n      },\n      onDragStart: (event, _, __, nodes) => {\n        dispatch('nodedragstart', { event, targetNode: null, nodes });\n      },\n      onDragStop: (event, _, __, nodes) => {\n        dispatch('nodedragstop', { event, targetNode: null, nodes });\n      }\n    }}\n    on:contextmenu={onContextMenu}\n    on:click={onClick}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n  >\n    <Selection width=\"100%\" height=\"100%\" x={0} y={0} />\n  </div>\n{/if}\n\n<style>\n  .selection-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 7;\n    pointer-events: all;\n  }\n</style>\n","/**\n * Listen for keyboard event and trigger `shortcut` {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent | CustomEvent }\n * @example Typical usage\n *\n * ```svelte\n * <script lang=\"ts\">\n *  import { shortcut, type ShortcutEventDetail } from '@svelte-put/shortcut';\n *\n *  let commandPalette = false;\n *\n *  function onOpenCommandPalette() {\n *    commandPalette = true;\n *  }\n *  function onCloseCommandPalette() {\n *    commandPalette = false;\n *  }\n *\n *  function doSomethingElse(details: ShortcutEventDetail) {\n *    console.log('Action was placed on:', details.node);\n *    console.log('Trigger:', details.trigger);\n *  }\n *\n *  function onShortcut(event: CustomEvent<ShortcutEventDetail>) {\n *    if (event.detail.trigger.id === 'do-something-else') {\n *      console.log('Same as doSomethingElse()');\n *      // be careful here doSomethingElse would have been called too\n *   }\n * }\n * </script>\n *\n * <svelte:window\n *   use:shortcut={{\n *     trigger: [\n *       {\n *         key: 'k',\n *\n *         // trigger if either ctrl or meta is pressed\n *         modifier: ['ctrl', 'meta'],\n *\n *         callback: onOpenCommandPalette,\n *         preventDefault: true,\n *       },\n *       {\n *         key: 'Escape',\n *\n *         // preferably avoid arrow functions here for better performance\n *         // with arrow functions the action has to be updated more frequently\n *         callback: onCloseCommandPalette,\n *\n *         enabled: commandPalette,\n *         preventDefault: true,\n *       },\n *      {\n *         key: 'k',\n *\n *         // trigger if both ctrl & shift are pressed\n *         modifier: [['ctrl', 'shift']],\n *         id: 'do-something-else',\n *         callback: doSomethingElse,\n *      },\n *     ],\n *   }}\n *   on:shortcut={onShortcut}\n * />\n * ```\n *\n *\n *\n * As with any svelte action, `shortcut` should be use with element and not component.\n *\n * ```html\n * <-- correct usage-->\n *  <div use:intersect />\n *\n * <-- incorrect usage-->\n * <Component use:intersect/>\n * ```\n *\n * You can either:\n *\n * - pass multiple callbacks to their associated triggers, or\n *\n * - pass one single handler to the `on:shortcut` event, in which case you should\n * provide an ID to each trigger to be able to distinguish what trigger was activated\n * in the event handler.\n *\n * Either way, only use `callback` or `on:shortcut` and not both to\n * avoid handler duplication.\n * @param {HTMLElement} node - HTMLElement to add event listener to\n * @param {import('./public').ShortcutParameter} param - svelte action parameters\n * @returns {import('./public').ShortcutActionReturn}\n */\nexport function shortcut(node, param) {\n\tlet { enabled = true, trigger, type = 'keydown' } = param;\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction handler(event) {\n\t\tconst normalizedTriggers = Array.isArray(trigger) ? trigger : [trigger];\n\t\t/** @type {Record<import('./public').ShortcutModifier, boolean>} */\n\t\tconst modifiedMap = {\n\t\t\talt: event.altKey,\n\t\t\tctrl: event.ctrlKey,\n\t\t\tshift: event.shiftKey,\n\t\t\tmeta: event.metaKey,\n\t\t};\n\t\tfor (const trigger of normalizedTriggers) {\n\t\t\tconst mergedTrigger = {\n\t\t\t\tmodifier: [],\n\t\t\t\tpreventDefault: false,\n\t\t\t\tenabled: true,\n\t\t\t\t...trigger,\n\t\t\t};\n\t\t\tconst { modifier, key, callback, preventDefault, enabled: triggerEnabled } = mergedTrigger;\n\t\t\tif (triggerEnabled) {\n\t\t\t\tif (modifier.length) {\n\t\t\t\t\tconst modifierDefs = (Array.isArray(modifier) ? modifier : [modifier]).map((def) =>\n\t\t\t\t\t\ttypeof def === 'string' ? [def] : def,\n\t\t\t\t\t);\n\t\t\t\t\tconst modified = modifierDefs.some((def) =>\n\t\t\t\t\t\tdef.every((modifier) => modifiedMap[modifier]),\n\t\t\t\t\t);\n\t\t\t\t\tif (!modified) continue;\n\t\t\t\t}\n\t\t\t\tif (event.key === key) {\n\t\t\t\t\tif (preventDefault) event.preventDefault();\n\t\t\t\t\t/** @type {import('./public').ShortcutEventDetail} */\n\t\t\t\t\tconst detail = {\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\ttrigger: mergedTrigger,\n\t\t\t\t\t\toriginalEvent: event,\n\t\t\t\t\t};\n\t\t\t\t\tnode.dispatchEvent(new CustomEvent('shortcut', { detail }));\n\t\t\t\t\tcallback?.(detail);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (enabled) node.addEventListener(type, handler);\n\n\treturn {\n\t\tupdate: (update) => {\n\t\t\tconst { enabled: newEnabled = true, type: newType = 'keydown' } = update;\n\n\t\t\tif (enabled && (!newEnabled || type !== newType)) {\n\t\t\t\tnode.removeEventListener(type, handler);\n\t\t\t} else if (!enabled && newEnabled) {\n\t\t\t\tnode.addEventListener(newType, handler);\n\t\t\t}\n\n\t\t\tenabled = newEnabled;\n\t\t\ttype = newType;\n\t\t\ttrigger = update.trigger;\n\t\t},\n\t\tdestroy: () => {\n\t\t\tnode.removeEventListener(type, handler);\n\t\t},\n\t};\n}\n","<script>import { shortcut } from '@svelte-put/shortcut';\nimport { isInputDOMNode, isMacOs } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let selectionKey = 'Shift';\nexport let multiSelectionKey = isMacOs() ? 'Meta' : 'Control';\nexport let deleteKey = 'Backspace';\nexport let panActivationKey = ' ';\nexport let zoomActivationKey = isMacOs() ? 'Meta' : 'Control';\nconst { selectionKeyPressed, multiselectionKeyPressed, deleteKeyPressed, panActivationKeyPressed, zoomActivationKeyPressed, selectionRect } = useStore();\nfunction isKeyObject(key) {\n    return key !== null && typeof key === 'object';\n}\nfunction getModifier(key) {\n    return isKeyObject(key) ? key.modifier || [] : [];\n}\nfunction getKeyString(key) {\n    if (key === null || key === undefined) {\n        // this is a workaround to check if a key is set\n        // if not we won't call the callback\n        return '';\n    }\n    return isKeyObject(key) ? key.key : key;\n}\nfunction getShortcutTrigger(key, callback) {\n    const keys = Array.isArray(key) ? key : [key];\n    return keys.map((_key) => {\n        const keyString = getKeyString(_key);\n        return {\n            key: keyString,\n            modifier: getModifier(_key),\n            enabled: keyString !== null,\n            callback\n        };\n    });\n}\nfunction resetKeysAndSelection() {\n    selectionRect.set(null);\n    selectionKeyPressed.set(false);\n    multiselectionKeyPressed.set(false);\n    deleteKeyPressed.set(false);\n    panActivationKeyPressed.set(false);\n    zoomActivationKeyPressed.set(false);\n}\n</script>\n\n<svelte:window\n  on:blur={resetKeysAndSelection}\n  on:contextmenu={resetKeysAndSelection}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, (detail) => {\n      const isModifierKey =\n        detail.originalEvent.ctrlKey ||\n        detail.originalEvent.metaKey ||\n        detail.originalEvent.shiftKey;\n      if (!isModifierKey && !isInputDOMNode(detail.originalEvent)) {\n        deleteKeyPressed.set(true);\n      }\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, () => deleteKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n/>\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nimport { ConnectionLineType, getBezierPath, getConnectionStatus, getSmoothStepPath, getStraightPath } from '@xyflow/system';\nexport let containerStyle = '';\nexport let style = '';\nexport let isCustomComponent = false;\nconst { width, height, connection, connectionLineType } = useStore();\nlet path = null;\n$: if ($connection.inProgress && !isCustomComponent) {\n    const { from, to, fromPosition, toPosition } = $connection;\n    const pathParams = {\n        sourceX: from.x,\n        sourceY: from.y,\n        sourcePosition: fromPosition,\n        targetX: to.x,\n        targetY: to.y,\n        targetPosition: toPosition\n    };\n    switch ($connectionLineType) {\n        case ConnectionLineType.Bezier:\n            [path] = getBezierPath(pathParams);\n            break;\n        case ConnectionLineType.Step:\n            [path] = getSmoothStepPath({\n                ...pathParams,\n                borderRadius: 0\n            });\n            break;\n        case ConnectionLineType.SmoothStep:\n            [path] = getSmoothStepPath(pathParams);\n            break;\n        default:\n            [path] = getStraightPath(pathParams);\n    }\n}\n</script>\n\n{#if $connection.inProgress}\n  <svg width={$width} height={$height} class=\"svelte-flow__connectionline\" style={containerStyle}>\n    <g class={cc(['svelte-flow__connection', getConnectionStatus($connection.isValid)])}>\n      <slot name=\"connectionLine\" />\n      <!-- slot fallbacks do not work if slots are forwarded in parent -->\n      {#if !isCustomComponent}\n        <path d={path} {style} fill=\"none\" class=\"svelte-flow__connection-path\" />\n      {/if}\n    </g>\n  </svg>\n{/if}\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nexport let position = 'top-right';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nconst { selectionRectMode } = useStore();\n$: positionClasses = `${position}`.split('-');\n</script>\n\n<div\n  class={cc(['svelte-flow__panel', className, ...positionClasses])}\n  {style}\n  style:pointer-events={$selectionRectMode ? 'none' : ''}\n  {...$$restProps}\n>\n  <slot />\n</div>\n","<script>import { Panel } from '../../container/Panel';\nexport let proOptions = undefined;\nexport let position = 'bottom-right';\n</script>\n\n{#if !proOptions?.hideAttribution}\n  <Panel\n    {position}\n    class=\"svelte-flow__attribution\"\n    data-message=\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\"\n  >\n    <a\n      href=\"https://svelteflow.dev\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      aria-label=\"Svelte Flow attribution\"\n    >\n      Svelte Flow\n    </a>\n  </Panel>\n{/if}\n","// this is helper function for updating the store\n// for props where we need to call a specific store action\nexport function updateStore(store, { nodeTypes, edgeTypes, minZoom, maxZoom, translateExtent, paneClickDistance }) {\n    if (nodeTypes !== undefined) {\n        store.setNodeTypes(nodeTypes);\n    }\n    if (edgeTypes !== undefined) {\n        store.setEdgeTypes(edgeTypes);\n    }\n    if (minZoom !== undefined) {\n        store.setMinZoom(minZoom);\n    }\n    if (maxZoom !== undefined) {\n        store.setMaxZoom(maxZoom);\n    }\n    if (translateExtent !== undefined) {\n        store.setTranslateExtent(translateExtent);\n    }\n    if (paneClickDistance !== undefined) {\n        store.setPaneClickDistance(paneClickDistance);\n    }\n}\nconst getKeys = (obj) => Object.keys(obj);\nexport function updateStoreByKeys(store, keys) {\n    getKeys(keys).forEach((prop) => {\n        const update = keys[prop];\n        if (update !== undefined) {\n            // @ts-expect-error @todo: how to fix this TS error?\n            store[prop].set(update);\n        }\n    });\n}\n","import { readable } from 'svelte/store';\nfunction getMediaQuery() {\n    if (typeof window === 'undefined' || !window.matchMedia) {\n        return null;\n    }\n    return window.matchMedia('(prefers-color-scheme: dark)');\n}\n/**\n * Hook for receiving the current color mode class 'dark' or 'light'.\n *\n * @internal\n * @param colorMode - The color mode to use ('dark', 'light' or 'system')\n */\nexport function useColorModeClass(colorMode = 'light') {\n    const colorModeClass = readable('light', (set) => {\n        if (colorMode !== 'system') {\n            set(colorMode);\n            return;\n        }\n        const mediaQuery = getMediaQuery();\n        const updateColorModeClass = () => set(mediaQuery?.matches ? 'dark' : 'light');\n        set(mediaQuery?.matches ? 'dark' : 'light');\n        mediaQuery?.addEventListener('change', updateColorModeClass);\n        return () => {\n            mediaQuery?.removeEventListener('change', updateColorModeClass);\n        };\n    });\n    return colorModeClass;\n}\n","<script>import { onMount, hasContext } from 'svelte';\nimport { get } from 'svelte/store';\nimport cc from 'classcat';\nimport { ConnectionMode, PanOnScrollMode } from '@xyflow/system';\nimport { Zoom } from '../Zoom';\nimport { Pane } from '../Pane';\nimport { Viewport as ViewportComponent } from '../Viewport';\nimport { NodeRenderer } from '../NodeRenderer';\nimport { EdgeRenderer } from '../EdgeRenderer';\nimport { UserSelection } from '../../components/UserSelection';\nimport { NodeSelection } from '../../components/NodeSelection';\nimport { KeyHandler } from '../../components/KeyHandler';\nimport { ConnectionLine } from '../../components/ConnectionLine';\nimport { Attribution } from '../../components/Attribution';\nimport { key, useStore, createStoreContext } from '../../store';\nimport { updateStore, updateStoreByKeys } from './utils';\nimport { useColorModeClass } from '../../hooks/useColorModeClass';\nexport let id = '1';\nexport let nodes;\nexport let edges;\nexport let fitView = undefined;\nexport let fitViewOptions = undefined;\nexport let minZoom = undefined;\nexport let maxZoom = undefined;\nexport let initialViewport = undefined;\nexport let viewport = undefined;\nexport let nodeTypes = undefined;\nexport let edgeTypes = undefined;\nexport let selectionKey = undefined;\nexport let selectionMode = undefined;\nexport let panActivationKey = undefined;\nexport let multiSelectionKey = undefined;\nexport let zoomActivationKey = undefined;\nexport let nodesDraggable = undefined;\nexport let nodesConnectable = undefined;\nexport let nodeDragThreshold = undefined;\nexport let elementsSelectable = undefined;\nexport let snapGrid = undefined;\nexport let deleteKey = undefined;\nexport let connectionRadius = undefined;\nexport let connectionLineType = undefined;\nexport let connectionMode = ConnectionMode.Strict;\nexport let connectionLineStyle = '';\nexport let connectionLineContainerStyle = '';\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let isValidConnection = undefined;\nexport let translateExtent = undefined;\nexport let nodeExtent = undefined;\nexport let onlyRenderVisibleElements = undefined;\nexport let panOnScrollMode = PanOnScrollMode.Free;\nexport let preventScrolling = true;\nexport let zoomOnScroll = true;\nexport let zoomOnDoubleClick = true;\nexport let zoomOnPinch = true;\nexport let panOnScroll = false;\nexport let panOnDrag = true;\nexport let selectionOnDrag = undefined;\nexport let autoPanOnConnect = true;\nexport let autoPanOnNodeDrag = true;\nexport let onerror = undefined;\nexport let ondelete = undefined;\nexport let onedgecreate = undefined;\nexport let attributionPosition = undefined;\nexport let proOptions = undefined;\nexport let defaultEdgeOptions = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let colorMode = 'light';\nexport let onconnect = undefined;\nexport let onconnectstart = undefined;\nexport let onconnectend = undefined;\nexport let onbeforedelete = undefined;\nexport let oninit = undefined;\nexport let nodeOrigin = undefined;\nexport let paneClickDistance = 0;\nexport let nodeClickDistance = 0;\nexport let defaultMarkerColor = '#b1b1b7';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nlet domNode;\nlet clientWidth;\nlet clientHeight;\nconst initViewport = $viewport || initialViewport;\nconst store = hasContext(key)\n    ? useStore()\n    : createStoreContext({\n        nodes: get(nodes),\n        edges: get(edges),\n        width,\n        height,\n        fitView,\n        nodeOrigin,\n        nodeExtent\n    });\nonMount(() => {\n    store.width.set(clientWidth);\n    store.height.set(clientHeight);\n    store.domNode.set(domNode);\n    store.syncNodeStores(nodes);\n    store.syncEdgeStores(edges);\n    store.syncViewport(viewport);\n    if (fitView !== undefined) {\n        store.fitViewOnInit.set(fitView);\n    }\n    if (fitViewOptions) {\n        store.fitViewOptions.set(fitViewOptions);\n    }\n    updateStore(store, {\n        nodeTypes,\n        edgeTypes,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        paneClickDistance\n    });\n    return () => {\n        store.reset();\n    };\n});\n// Update width & height on resize\n$: {\n    if (clientWidth !== undefined && clientHeight !== undefined) {\n        store.width.set(clientWidth);\n        store.height.set(clientHeight);\n    }\n}\n// Call oninit once when flow is intialized\nconst { initialized } = store;\nlet onInitCalled = false;\n$: {\n    if (!onInitCalled && $initialized) {\n        oninit?.();\n        onInitCalled = true;\n    }\n}\n// this updates the store for simple changes\n// where the prop names equals the store name\n$: {\n    const updatableProps = {\n        flowId: id,\n        connectionLineType,\n        connectionRadius,\n        selectionMode,\n        snapGrid,\n        defaultMarkerColor,\n        nodesDraggable,\n        nodesConnectable,\n        elementsSelectable,\n        onlyRenderVisibleElements,\n        isValidConnection,\n        autoPanOnConnect,\n        autoPanOnNodeDrag,\n        onerror,\n        ondelete,\n        onedgecreate,\n        connectionMode,\n        nodeDragThreshold,\n        onconnect,\n        onconnectstart,\n        onconnectend,\n        onbeforedelete,\n        nodeOrigin\n    };\n    updateStoreByKeys(store, updatableProps);\n}\n$: updateStore(store, {\n    nodeTypes,\n    edgeTypes,\n    minZoom,\n    maxZoom,\n    translateExtent,\n    paneClickDistance\n});\n$: colorModeClass = useColorModeClass(colorMode);\n</script>\n\n<div\n  bind:this={domNode}\n  bind:clientWidth\n  bind:clientHeight\n  {style}\n  class={cc(['svelte-flow', className, $colorModeClass])}\n  data-testid=\"svelte-flow__wrapper\"\n  on:dragover\n  on:drop\n  {...$$restProps}\n  role=\"application\"\n>\n  <KeyHandler\n    {selectionKey}\n    {deleteKey}\n    {panActivationKey}\n    {multiSelectionKey}\n    {zoomActivationKey}\n  />\n  <Zoom\n    initialViewport={initViewport}\n    {onMoveStart}\n    {onMove}\n    {onMoveEnd}\n    panOnScrollMode={panOnScrollMode === undefined ? PanOnScrollMode.Free : panOnScrollMode}\n    preventScrolling={preventScrolling === undefined ? true : preventScrolling}\n    zoomOnScroll={zoomOnScroll === undefined ? true : zoomOnScroll}\n    zoomOnDoubleClick={zoomOnDoubleClick === undefined ? true : zoomOnDoubleClick}\n    zoomOnPinch={zoomOnPinch === undefined ? true : zoomOnPinch}\n    panOnScroll={panOnScroll === undefined ? false : panOnScroll}\n    panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n    paneClickDistance={paneClickDistance === undefined ? 0 : paneClickDistance}\n  >\n    <Pane\n      on:paneclick\n      on:panecontextmenu\n      panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n      {selectionOnDrag}\n    >\n      <ViewportComponent>\n        <EdgeRenderer\n          on:edgeclick\n          on:edgecontextmenu\n          on:edgemouseenter\n          on:edgemouseleave\n          {defaultEdgeOptions}\n        />\n        <ConnectionLine\n          containerStyle={connectionLineContainerStyle}\n          style={connectionLineStyle}\n          isCustomComponent={$$slots.connectionLine}\n        >\n          <slot name=\"connectionLine\" slot=\"connectionLine\" />\n        </ConnectionLine>\n        <div class=\"svelte-flow__edgelabel-renderer\" />\n        <div class=\"svelte-flow__viewport-portal\" />\n        <NodeRenderer\n          {nodeClickDistance}\n          on:nodeclick\n          on:nodemouseenter\n          on:nodemousemove\n          on:nodemouseleave\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n          on:nodecontextmenu\n        />\n        <NodeSelection\n          on:selectionclick\n          on:selectioncontextmenu\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n        />\n      </ViewportComponent>\n      <UserSelection />\n    </Pane>\n  </Zoom>\n  <Attribution {proOptions} position={attributionPosition} />\n  <slot />\n</div>\n\n<style>\n  .svelte-flow {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    z-index: 0;\n\n    background-color: var(--background-color, var(--background-color-default));\n  }\n\n  :root {\n    --background-color-default: #fff;\n    --background-pattern-color-default: #ddd;\n\n    --minimap-mask-color-default: rgb(240, 240, 240, 0.6);\n    --minimap-mask-stroke-color-default: none;\n    --minimap-mask-stroke-width-default: 1;\n\n    --controls-button-background-color-default: #fefefe;\n    --controls-button-background-color-hover-default: #f4f4f4;\n    --controls-button-color-default: inherit;\n    --controls-button-color-hover-default: inherit;\n    --controls-button-border-color-default: #eee;\n  }\n</style>\n","<script>import { onDestroy, setContext } from 'svelte';\nimport { createStore, key } from '../../store';\nexport let initialNodes = undefined;\nexport let initialEdges = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let fitView = undefined;\nexport let nodeOrigin = undefined;\nconst store = createStore({\n    nodes: initialNodes,\n    edges: initialEdges,\n    width: initialWidth,\n    height: initialHeight,\n    nodeOrigin,\n    fitView\n});\nsetContext(key, {\n    getStore: () => store\n});\nonDestroy(() => {\n    store.reset();\n});\n</script>\n\n<slot />\n","<script>import cc from 'classcat';\nlet className = undefined;\nlet bgColor = undefined;\nlet bgColorHover = undefined;\nlet color = undefined;\nlet colorHover = undefined;\nlet borderColor = undefined;\nexport { className as class };\n</script>\n\n<button\n  type=\"button\"\n  on:click\n  class={cc(['svelte-flow__controls-button', className])}\n  style:--xy-controls-button-background-color-props={bgColor}\n  style:--xy-controls-button-background-color-hover-props={bgColorHover}\n  style:--xy-controls-button-color-props={color}\n  style:--xy-controls-button-color-hover-props={colorHover}\n  style:--xy-controls-button-border-color-props={borderColor}\n  {...$$restProps}\n>\n  <slot class=\"button-svg\" />\n</button>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n  <path d=\"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 5\">\n  <path d=\"M0 0h32v4.2H0z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\">\n  <path\n    d=\"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"\n  />\n</svg>\n","<script>import cc from 'classcat';\nimport Panel from '../../container/Panel/Panel.svelte';\nimport { useStore } from '../../store';\nimport ControlButton from './ControlButton.svelte';\nimport PlusIcon from './Icons/Plus.svelte';\nimport MinusIcon from './Icons/Minus.svelte';\nimport FitViewIcon from './Icons/Fit.svelte';\nimport LockIcon from './Icons/Lock.svelte';\nimport UnlockIcon from './Icons/Unlock.svelte';\nexport let position = 'bottom-left';\nexport let showZoom = true;\nexport let showFitView = true;\nexport let showLock = true;\nexport let buttonBgColor = undefined;\nexport let buttonBgColorHover = undefined;\nexport let buttonColor = undefined;\nexport let buttonColorHover = undefined;\nexport let buttonBorderColor = undefined;\nexport let ariaLabel = undefined;\nexport let style = undefined;\nexport let orientation = 'vertical';\nexport let fitViewOptions = undefined;\nlet className = '';\nexport { className as class };\nconst { zoomIn, zoomOut, fitView, viewport, minZoom, maxZoom, nodesDraggable, nodesConnectable, elementsSelectable } = useStore();\nconst buttonProps = {\n    bgColor: buttonBgColor,\n    bgColorHover: buttonBgColorHover,\n    color: buttonColor,\n    colorHover: buttonColorHover,\n    borderColor: buttonBorderColor\n};\n$: isInteractive = $nodesDraggable || $nodesConnectable || $elementsSelectable;\n$: minZoomReached = $viewport.zoom <= $minZoom;\n$: maxZoomReached = $viewport.zoom >= $maxZoom;\nconst onZoomInHandler = () => {\n    zoomIn();\n};\nconst onZoomOutHandler = () => {\n    zoomOut();\n};\nconst onFitViewHandler = () => {\n    fitView(fitViewOptions);\n};\nconst onToggleInteractivity = () => {\n    isInteractive = !isInteractive;\n    nodesDraggable.set(isInteractive);\n    nodesConnectable.set(isInteractive);\n    elementsSelectable.set(isInteractive);\n};\n$: orientationClass = orientation === 'horizontal' ? 'horizontal' : 'vertical';\n</script>\n\n<Panel\n  class={cc(['svelte-flow__controls', orientationClass, className])}\n  {position}\n  data-testid=\"svelte-flow__controls\"\n  aria-label={ariaLabel ?? 'Svelte Flow controls'}\n  {style}\n>\n  <slot name=\"before\" />\n  {#if showZoom}\n    <ControlButton\n      on:click={onZoomInHandler}\n      class=\"svelte-flow__controls-zoomin\"\n      title=\"zoom in\"\n      aria-label=\"zoom in\"\n      disabled={maxZoomReached}\n      {...buttonProps}\n    >\n      <PlusIcon />\n    </ControlButton>\n    <ControlButton\n      on:click={onZoomOutHandler}\n      class=\"svelte-flow__controls-zoomout\"\n      title=\"zoom out\"\n      aria-label=\"zoom out\"\n      disabled={minZoomReached}\n      {...buttonProps}\n    >\n      <MinusIcon />\n    </ControlButton>\n  {/if}\n  {#if showFitView}\n    <ControlButton\n      class=\"svelte-flow__controls-fitview\"\n      on:click={onFitViewHandler}\n      title=\"fit view\"\n      aria-label=\"fit view\"\n      {...buttonProps}\n    >\n      <FitViewIcon />\n    </ControlButton>\n  {/if}\n  {#if showLock}\n    <ControlButton\n      class=\"svelte-flow__controls-interactive\"\n      on:click={onToggleInteractivity}\n      title=\"toggle interactivity\"\n      aria-label=\"toggle interactivity\"\n      {...buttonProps}\n    >\n      {#if isInteractive}<UnlockIcon />{:else}<LockIcon />{/if}\n    </ControlButton>\n  {/if}\n  <slot />\n  <slot name=\"after\" />\n</Panel>\n","export var BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n","<script>import cc from 'classcat';\nexport let radius = 5;\nlet className = '';\nexport { className as class };\n</script>\n\n<circle\n  cx={radius}\n  cy={radius}\n  r={radius}\n  class={cc(['svelte-flow__background-pattern', 'dots', className])}\n/>\n","<script>import cc from 'classcat';\nexport let lineWidth = 1;\nexport let dimensions;\nexport let variant = undefined;\nlet className = '';\nexport { className as class };\n</script>\n\n<path\n  stroke-width={lineWidth}\n  d={`M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`}\n  class={cc(['svelte-flow__background-pattern', variant, className])}\n/>\n","<script labg=\"ts\" context=\"module\">\n  const defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6\n  };\n</script>\n\n<script>import cc from 'classcat';\nimport DotPattern from './DotPattern.svelte';\nimport LinePattern from './LinePattern.svelte';\nimport { useStore } from '../../store';\nimport { BackgroundVariant } from './types';\nexport let id = undefined;\nexport let variant = BackgroundVariant.Dots;\nexport let gap = 20;\nexport let size = 1;\nexport let lineWidth = 1;\nexport let bgColor = undefined;\nexport let patternColor = undefined;\nexport let patternClass = undefined;\nlet className = '';\nexport { className as class };\nconst { viewport, flowId } = useStore();\nconst patternSize = size || defaultSize[variant];\nconst isDots = variant === BackgroundVariant.Dots;\nconst isCross = variant === BackgroundVariant.Cross;\nconst gapXY = Array.isArray(gap) ? gap : [gap, gap];\n$: patternId = `background-pattern-${$flowId}-${id ? id : ''}`;\n$: scaledGap = [gapXY[0] * $viewport.zoom || 1, gapXY[1] * $viewport.zoom || 1];\n$: scaledSize = patternSize * $viewport.zoom;\n$: patternDimensions = (isCross ? [scaledSize, scaledSize] : scaledGap);\n$: patternOffset = isDots\n    ? [scaledSize / 2, scaledSize / 2]\n    : [patternDimensions[0] / 2, patternDimensions[1] / 2];\n</script>\n\n<svg\n  class={cc(['svelte-flow__background', className])}\n  data-testid=\"svelte-flow__background\"\n  style:--xy-background-color-props={bgColor}\n  style:--xy-background-pattern-color-props={patternColor}\n>\n  <pattern\n    id={patternId}\n    x={$viewport.x % scaledGap[0]}\n    y={$viewport.y % scaledGap[1]}\n    width={scaledGap[0]}\n    height={scaledGap[1]}\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform={`translate(-${patternOffset[0]},-${patternOffset[1]})`}\n  >\n    {#if isDots}\n      <DotPattern radius={scaledSize / 2} class={patternClass} />\n    {:else}\n      <LinePattern dimensions={patternDimensions} {variant} {lineWidth} class={patternClass} />\n    {/if}\n  </pattern>\n  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={`url(#${patternId})`} />\n</svg>\n\n<style>\n  .svelte-flow__background {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script>import cc from 'classcat';\nexport let x;\nexport let y;\nexport let width = 0;\nexport let height = 0;\nexport let borderRadius = 5;\nexport let color = undefined;\nexport let shapeRendering;\nexport let strokeColor = undefined;\nexport let strokeWidth = 2;\nexport let selected = false;\nlet className = '';\nexport { className as class };\n</script>\n\n<rect\n  class={cc(['svelte-flow__minimap-node', className])}\n  class:selected\n  {x}\n  {y}\n  rx={borderRadius}\n  ry={borderRadius}\n  {width}\n  {height}\n  style={`${color ? `fill: ${color};` : ''}${strokeColor ? `stroke: ${strokeColor};` : ''}${\n    strokeWidth ? `stroke-width: ${strokeWidth};` : ''\n  }`}\n  shape-rendering={shapeRendering}\n/>\n","import { get } from 'svelte/store';\nimport { XYMinimap } from '@xyflow/system';\nexport default function interactive(domNode, params) {\n    const minimap = XYMinimap({\n        domNode,\n        panZoom: params.panZoom,\n        getTransform: () => {\n            const viewport = get(params.viewport);\n            return [viewport.x, viewport.y, viewport.zoom];\n        },\n        getViewScale: params.getViewScale\n    });\n    function update(params) {\n        minimap.update({\n            translateExtent: params.translateExtent,\n            width: params.width,\n            height: params.height,\n            inversePan: params.inversePan,\n            zoomStep: params.zoomStep,\n            pannable: params.pannable,\n            zoomable: params.zoomable\n        });\n    }\n    return {\n        update,\n        destroy() {\n            minimap.destroy();\n        }\n    };\n}\n","<script context=\"module\">\"use strict\";\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst getAttrFunction = (func) => func instanceof Function ? func : () => func;\n</script>\n\n<script>import cc from 'classcat';\nimport { getBoundsOfRects, getInternalNodesBounds, getNodeDimensions, nodeHasDimensions } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { Panel } from '../../container/Panel';\nimport MinimapNode from './MinimapNode.svelte';\nimport interactive from './interactive';\nexport let position = 'bottom-right';\nexport let ariaLabel = 'Mini map';\nexport let nodeStrokeColor = 'transparent';\nexport let nodeColor = undefined;\nexport let nodeClass = '';\nexport let nodeBorderRadius = 5;\nexport let nodeStrokeWidth = 2;\nexport let bgColor = undefined;\nexport let maskColor = undefined;\nexport let maskStrokeColor = undefined;\nexport let maskStrokeWidth = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let pannable = true;\nexport let zoomable = true;\nexport let inversePan = undefined;\nexport let zoomStep = undefined;\nexport let style = '';\nlet className = '';\nexport { className as class };\nconst defaultWidth = 200;\nconst defaultHeight = 150;\nconst { nodes, nodeLookup, viewport, width: containerWidth, height: containerHeight, flowId, panZoom, translateExtent } = useStore();\nconst nodeColorFunc = nodeColor === undefined ? undefined : getAttrFunction(nodeColor);\nconst nodeStrokeColorFunc = getAttrFunction(nodeStrokeColor);\nconst nodeClassFunc = getAttrFunction(nodeClass);\nconst shapeRendering = \n// @ts-expect-error - TS doesn't know about chrome\ntypeof window === 'undefined' || !!window.chrome ? 'crispEdges' : 'geometricPrecision';\nconst labelledBy = `svelte-flow__minimap-desc-${$flowId}`;\n$: viewBB = {\n    x: -$viewport.x / $viewport.zoom,\n    y: -$viewport.y / $viewport.zoom,\n    width: $containerWidth / $viewport.zoom,\n    height: $containerHeight / $viewport.zoom\n};\nlet boundingRect = viewBB;\n$: {\n    boundingRect =\n        $nodeLookup.size > 0 ? getBoundsOfRects(getInternalNodesBounds($nodeLookup), viewBB) : viewBB;\n    $nodes;\n}\n$: elementWidth = width ?? defaultWidth;\n$: elementHeight = height ?? defaultHeight;\n$: scaledWidth = boundingRect.width / elementWidth;\n$: scaledHeight = boundingRect.height / elementHeight;\n$: viewScale = Math.max(scaledWidth, scaledHeight);\n$: viewWidth = viewScale * elementWidth;\n$: viewHeight = viewScale * elementHeight;\n$: offset = 5 * viewScale;\n$: x = boundingRect.x - (viewWidth - boundingRect.width) / 2 - offset;\n$: y = boundingRect.y - (viewHeight - boundingRect.height) / 2 - offset;\n$: viewboxWidth = viewWidth + offset * 2;\n$: viewboxHeight = viewHeight + offset * 2;\nconst getViewScale = () => viewScale;\n</script>\n\n<Panel\n  {position}\n  style={style + (bgColor ? `;--xy-minimap-background-color-props:${bgColor}` : '')}\n  class={cc(['svelte-flow__minimap', className])}\n  data-testid=\"svelte-flow__minimap\"\n>\n  {#if $panZoom}\n    <svg\n      width={elementWidth}\n      height={elementHeight}\n      viewBox=\"{x} {y} {viewboxWidth} {viewboxHeight}\"\n      class=\"svelte-flow__minimap-svg\"\n      role=\"img\"\n      aria-labelledby={labelledBy}\n      style:--xy-minimap-mask-background-color-props={maskColor}\n      style:--xy-minimap-mask-stroke-color-props={maskStrokeColor}\n      style:--xy-minimap-mask-stroke-width-props={maskStrokeWidth\n        ? maskStrokeWidth * viewScale\n        : undefined}\n      use:interactive={{\n        panZoom: $panZoom,\n        viewport,\n        getViewScale,\n        translateExtent: $translateExtent,\n        width: $containerWidth,\n        height: $containerHeight,\n        inversePan,\n        zoomStep,\n        pannable,\n        zoomable\n      }}\n    >\n      {#if ariaLabel}<title id={labelledBy}>{ariaLabel}</title>{/if}\n\n      {#each $nodes as userNode (userNode.id)}\n        {@const node = $nodeLookup.get(userNode.id)}\n        {#if node && nodeHasDimensions(node)}\n          {@const nodeDimesions = getNodeDimensions(node)}\n          <MinimapNode\n            x={node.internals.positionAbsolute.x}\n            y={node.internals.positionAbsolute.y}\n            {...nodeDimesions}\n            selected={node.selected}\n            color={nodeColorFunc?.(node)}\n            borderRadius={nodeBorderRadius}\n            strokeColor={nodeStrokeColorFunc(node)}\n            strokeWidth={nodeStrokeWidth}\n            {shapeRendering}\n            class={nodeClassFunc(node)}\n          />\n        {/if}\n      {/each}\n      <path\n        class=\"svelte-flow__minimap-mask\"\n        d=\"M{x - offset},{y - offset}h{viewboxWidth + offset * 2}v{viewboxHeight +\n          offset * 2}h{-viewboxWidth - offset * 2}z\n      M{viewBB.x},{viewBB.y}h{viewBB.width}v{viewBB.height}h{-viewBB.width}z\"\n        fill-rule=\"evenodd\"\n        pointer-events=\"none\"\n      />\n    </svg>\n  {/if}\n</Panel>\n","export let nodeSize = {width: 180, height:72}","<script>\n  import { Handle, Position } from '@xyflow/svelte';\n  import { onMount, afterUpdate } from 'svelte';\n  import { nodeSize } from './../config.js';\n\n  export const fontSize = {desire: 15, min: 10, max: 80}\n\n  function isOverflow(el) {\n    return el.scrollWidth > el.clientWidth || el.scrollHeight > el.clientHeight;\n  }\n\n  function resizeText(element, parent) {\n    let min = fontSize.min;\n    let max = fontSize.max;\n    let size = min;\n\n    while (min <= max) {\n      size = Math.floor((min + max) / 2);\n      element.style.fontSize = `${size}px`;\n      isOverflow(parent) ? max = --size : min = ++size;\n    }\n\n    element.style.fontSize = `${max}px`;\n  }\n\n  let containerElement;\n  let textElement;\n\n  function applyFit() {\n    if (containerElement && textElement) {\n      resizeText(textElement, containerElement);\n    }\n  }\n\n  onMount(() => {\n    applyFit();\n  });\n\n  afterUpdate(() => {\n    applyFit();\n  });\n\n\n  export let data;  // Contains the node-specific data\n</script>\n\n<div class=\"{data.highlight ? 'hovered' : ''} {data.isEnd ? 'endStep':'step'}\">\n  <div style=\"position: absolute;\">\n    {#if data.type === \"LOOP\"}\n      <svg class=\"icon {data.isEnd ? 'invert':''}\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"49px\" height=\"42px\" viewBox=\"-0.5 -0.5 49 42\"><g><g data-cell-id=\"0\"><g data-cell-id=\"1\"><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-2\"><g><path d=\"M 44 23.11 C 44 34.65 35.05 44 24 44 C 12.95 44 4 34.65 4 23.11 C 4 11.57 12.95 2.22 24 2.22\" fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" transform=\"rotate(90,24,20.5)\" pointer-events=\"all\"/><path d=\"M 24 -3 L 31.5 2.22 L 24 7.44 Z\" fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-miterlimit=\"10\" transform=\"rotate(90,24,20.5)\" pointer-events=\"all\"/></g></g><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-5\"/><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-6\"/><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-3\"/><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-4\"/><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-8\"/></g></g></g></svg>    \n    {/if}\n    {#if data.type === \"IF\" || data.type === \"ELSE_IF\"}\n      <svg class=\"icon {data.isEnd ? 'invert':''}\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"78px\" height=\"112px\" viewBox=\"-0.5 -0.5 78 112\"><g><g data-cell-id=\"0\"><g data-cell-id=\"1\"><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-2\"/><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-5\"><g><path d=\"M 11 21 Q 11 61 57 61\" fill=\"none\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"2\" stroke-miterlimit=\"10\" pointer-events=\"stroke\"/></g></g><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-6\"><g><path d=\"M 11 21 L 11 91\" fill=\"none\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"2\" stroke-miterlimit=\"10\" pointer-events=\"stroke\"/></g></g><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-3\"><g><ellipse cx=\"11\" cy=\"11\" rx=\"10\" ry=\"10\" fill=\"none\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"2\" pointer-events=\"all\"/></g></g><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-4\"><g><ellipse cx=\"67\" cy=\"61\" rx=\"10\" ry=\"10\" fill=\"none\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"2\" pointer-events=\"all\"/></g></g><g data-cell-id=\"cL7QPJKOe-qMU4ihb_zf-8\"><g><ellipse cx=\"11\" cy=\"101\" rx=\"10\" ry=\"10\" fill=\"none\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"2\" pointer-events=\"all\"/></g></g></g></g></g></svg>\n    {/if}\n    {#if data.type === \"ERR\" }\n      <span style=\"font-size: 1.25em;\">⛔</span>\n    {/if}\n    {#if data.type === \"FOLLOW\" }\n      <span style=\"font-size: 1.5em;\">↖</span>\n    {/if}\n  </div>\n  <!-- <Handle class=\"hndl\" id=\"tt\" type=\"target\" position={Position.Top} /> -->\n  <Handle class=\"hndl\" id=\"t\" type=\"target\" position={Position.Top} />\n  <div class=\"container\" style=\"width:{nodeSize.width}px; height:{nodeSize.height}px;\" bind:this={containerElement}>\n    <div class=\"msgWrapper\">\n      <p bind:this={textElement}>{data.hideMsgDetail ? data.msg : data.rawMsg}</p>\n    </div>\n  </div>\n  <Handle class=\"hndl\" id=\"b\" type=\"source\" position={Position.Bottom} />\n  <Handle class=\"hndl\" id=\"bt\" type=\"target\" position={Position.Bottom} />\n  <Handle class=\"hndl\" id=\"l\" type=\"source\" position={Position.Left} />\n  <Handle class=\"hndl\" id=\"lt\" type=\"target\" position={Position.Left} />\n  <Handle class=\"hndl\" id=\"r\" type=\"source\" position={Position.Right} />\n  <Handle class=\"hndl\" id=\"rt\" type=\"target\" position={Position.Right} />\n</div>\n\n<style>\n  .msgWrapper{\n    display: inline-block; \n    width: 100%; \n    height: 100%;\n  }\n  :global(.hndl) {\n    visibility: hidden;\n  }\n  .endStep{\n    padding: 5px;\n    border-radius: 5px;\n    background-color: black;\n    color: white;\n    border: 1px solid #555;\n  }\n  .step {\n    padding: 5px;\n    border-radius: 5px;\n    background: white;\n    color: inherit;\n    border: 1px solid #555;\n  }\n\n\n  .container {\n    position: relative;\n    /* width: 150px;\n    height: 50px; */\n    text-align: center;\n  }\n\n  .hovered {\n      border: 2px solid #FF4000;\n      background-color: lightgrey;\n      color: inherit;\n   }\n\n   .icon{\n    width: 25px;\n    height: 25px;\n   }\n\n   svg.invert {\n    filter: invert(1); /* Invert the colors of the SVG */\n  }\n</style>\n","export function resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    const doc = document.implementation.createHTMLDocument();\n    const base = doc.createElement('base');\n    const a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexport const uuid = (() => {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    let counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    const random = () => \n    // eslint-disable-next-line no-bitwise\n    `0000${((Math.random() * 36 ** 4) << 0).toString(36)}`.slice(-4);\n    return () => {\n        counter += 1;\n        return `u${random()}${counter}`;\n    };\n})();\nexport function delay(ms) {\n    return (args) => new Promise((resolve) => {\n        setTimeout(() => resolve(args), ms);\n    });\n}\nexport function toArray(arrayLike) {\n    const arr = [];\n    for (let i = 0, l = arrayLike.length; i < l; i++) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nfunction px(node, styleProperty) {\n    const win = node.ownerDocument.defaultView || window;\n    const val = win.getComputedStyle(node).getPropertyValue(styleProperty);\n    return val ? parseFloat(val.replace('px', '')) : 0;\n}\nfunction getNodeWidth(node) {\n    const leftBorder = px(node, 'border-left-width');\n    const rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nfunction getNodeHeight(node) {\n    const topBorder = px(node, 'border-top-width');\n    const bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getImageSize(targetNode, options = {}) {\n    const width = options.width || getNodeWidth(targetNode);\n    const height = options.height || getNodeHeight(targetNode);\n    return { width, height };\n}\nexport function getPixelRatio() {\n    let ratio;\n    let FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    const val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\n// @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nconst canvasDimensionLimit = 16384;\nexport function checkCanvasDimensions(canvas) {\n    if (canvas.width > canvasDimensionLimit ||\n        canvas.height > canvasDimensionLimit) {\n        if (canvas.width > canvasDimensionLimit &&\n            canvas.height > canvasDimensionLimit) {\n            if (canvas.width > canvas.height) {\n                canvas.height *= canvasDimensionLimit / canvas.width;\n                canvas.width = canvasDimensionLimit;\n            }\n            else {\n                canvas.width *= canvasDimensionLimit / canvas.height;\n                canvas.height = canvasDimensionLimit;\n            }\n        }\n        else if (canvas.width > canvasDimensionLimit) {\n            canvas.height *= canvasDimensionLimit / canvas.width;\n            canvas.width = canvasDimensionLimit;\n        }\n        else {\n            canvas.width *= canvasDimensionLimit / canvas.height;\n            canvas.height = canvasDimensionLimit;\n        }\n    }\n}\nexport function canvasToBlob(canvas, options = {}) {\n    if (canvas.toBlob) {\n        return new Promise((resolve) => {\n            canvas.toBlob(resolve, options.type ? options.type : 'image/png', options.quality ? options.quality : 1);\n        });\n    }\n    return new Promise((resolve) => {\n        const binaryString = window.atob(canvas\n            .toDataURL(options.type ? options.type : undefined, options.quality ? options.quality : undefined)\n            .split(',')[1]);\n        const len = binaryString.length;\n        const binaryArray = new Uint8Array(len);\n        for (let i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], {\n            type: options.type ? options.type : 'image/png',\n        }));\n    });\n}\nexport function createImage(url) {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.decode = () => resolve(img);\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'async';\n        img.src = url;\n    });\n}\nexport async function svgToDataURL(svg) {\n    return Promise.resolve()\n        .then(() => new XMLSerializer().serializeToString(svg))\n        .then(encodeURIComponent)\n        .then((html) => `data:image/svg+xml;charset=utf-8,${html}`);\n}\nexport async function nodeToDataURL(node, width, height) {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttribute('width', `${width}`);\n    svg.setAttribute('height', `${height}`);\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    foreignObject.setAttribute('width', '100%');\n    foreignObject.setAttribute('height', '100%');\n    foreignObject.setAttribute('x', '0');\n    foreignObject.setAttribute('y', '0');\n    foreignObject.setAttribute('externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svgToDataURL(svg);\n}\nexport const isInstanceOfElement = (node, instance) => {\n    if (node instanceof instance)\n        return true;\n    const nodePrototype = Object.getPrototypeOf(node);\n    if (nodePrototype === null)\n        return false;\n    return (nodePrototype.constructor.name === instance.name ||\n        isInstanceOfElement(nodePrototype, instance));\n};\n//# sourceMappingURL=util.js.map","import { uuid, toArray } from './util';\nfunction formatCSSText(style) {\n    const content = style.getPropertyValue('content');\n    return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`;\n}\nfunction formatCSSProperties(style) {\n    return toArray(style)\n        .map((name) => {\n        const value = style.getPropertyValue(name);\n        const priority = style.getPropertyPriority(name);\n        return `${name}: ${value}${priority ? ' !important' : ''};`;\n    })\n        .join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    const selector = `.${className}:${pseudo}`;\n    const cssText = style.cssText\n        ? formatCSSText(style)\n        : formatCSSProperties(style);\n    return document.createTextNode(`${selector}{${cssText}}`);\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    const style = window.getComputedStyle(nativeNode, pseudo);\n    const content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    const className = uuid();\n    try {\n        clonedNode.className = `${clonedNode.className} ${className}`;\n    }\n    catch (err) {\n        return;\n    }\n    const styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n}\nexport function clonePseudoElements(nativeNode, clonedNode) {\n    clonePseudoElement(nativeNode, clonedNode, ':before');\n    clonePseudoElement(nativeNode, clonedNode, ':after');\n}\n//# sourceMappingURL=clone-pseudos.js.map","const WOFF = 'application/font-woff';\nconst JPEG = 'image/jpeg';\nconst mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n    webp: 'image/webp',\n};\nfunction getExtension(url) {\n    const match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n    const extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\n//# sourceMappingURL=mimes.js.map","function getContentFromDataUrl(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexport function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n}\nexport async function fetchAsDataURL(url, init, process) {\n    const res = await fetch(url, init);\n    if (res.status === 404) {\n        throw new Error(`Resource \"${res.url}\" not found`);\n    }\n    const blob = await res.blob();\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = () => {\n            try {\n                resolve(process({ res, result: reader.result }));\n            }\n            catch (error) {\n                reject(error);\n            }\n        };\n        reader.readAsDataURL(blob);\n    });\n}\nconst cache = {};\nfunction getCacheKey(url, contentType, includeQueryParams) {\n    let key = url.replace(/\\?.*/, '');\n    if (includeQueryParams) {\n        key = url;\n    }\n    // font resource\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return contentType ? `[${contentType}]${key}` : key;\n}\nexport async function resourceToDataURL(resourceUrl, contentType, options) {\n    const cacheKey = getCacheKey(resourceUrl, contentType, options.includeQueryParams);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        resourceUrl += (/\\?/.test(resourceUrl) ? '&' : '?') + new Date().getTime();\n    }\n    let dataURL;\n    try {\n        const content = await fetchAsDataURL(resourceUrl, options.fetchRequestInit, ({ res, result }) => {\n            if (!contentType) {\n                // eslint-disable-next-line no-param-reassign\n                contentType = res.headers.get('Content-Type') || '';\n            }\n            return getContentFromDataUrl(result);\n        });\n        dataURL = makeDataUrl(content, contentType);\n    }\n    catch (error) {\n        dataURL = options.imagePlaceholder || '';\n        let msg = `Failed to fetch resource: ${resourceUrl}`;\n        if (error) {\n            msg = typeof error === 'string' ? error : error.message;\n        }\n        if (msg) {\n            console.warn(msg);\n        }\n    }\n    cache[cacheKey] = dataURL;\n    return dataURL;\n}\n//# sourceMappingURL=dataurl.js.map","import { clonePseudoElements } from './clone-pseudos';\nimport { createImage, toArray, isInstanceOfElement } from './util';\nimport { getMimeType } from './mimes';\nimport { resourceToDataURL } from './dataurl';\nasync function cloneCanvasElement(canvas) {\n    const dataURL = canvas.toDataURL();\n    if (dataURL === 'data:,') {\n        return canvas.cloneNode(false);\n    }\n    return createImage(dataURL);\n}\nasync function cloneVideoElement(video, options) {\n    if (video.currentSrc) {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        canvas.width = video.clientWidth;\n        canvas.height = video.clientHeight;\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const dataURL = canvas.toDataURL();\n        return createImage(dataURL);\n    }\n    const poster = video.poster;\n    const contentType = getMimeType(poster);\n    const dataURL = await resourceToDataURL(poster, contentType, options);\n    return createImage(dataURL);\n}\nasync function cloneIFrameElement(iframe) {\n    var _a;\n    try {\n        if ((_a = iframe === null || iframe === void 0 ? void 0 : iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.body) {\n            return (await cloneNode(iframe.contentDocument.body, {}, true));\n        }\n    }\n    catch (_b) {\n        // Failed to clone iframe\n    }\n    return iframe.cloneNode(false);\n}\nasync function cloneSingleNode(node, options) {\n    if (isInstanceOfElement(node, HTMLCanvasElement)) {\n        return cloneCanvasElement(node);\n    }\n    if (isInstanceOfElement(node, HTMLVideoElement)) {\n        return cloneVideoElement(node, options);\n    }\n    if (isInstanceOfElement(node, HTMLIFrameElement)) {\n        return cloneIFrameElement(node);\n    }\n    return node.cloneNode(false);\n}\nconst isSlotElement = (node) => node.tagName != null && node.tagName.toUpperCase() === 'SLOT';\nasync function cloneChildren(nativeNode, clonedNode, options) {\n    var _a, _b;\n    let children = [];\n    if (isSlotElement(nativeNode) && nativeNode.assignedNodes) {\n        children = toArray(nativeNode.assignedNodes());\n    }\n    else if (isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n        ((_a = nativeNode.contentDocument) === null || _a === void 0 ? void 0 : _a.body)) {\n        children = toArray(nativeNode.contentDocument.body.childNodes);\n    }\n    else {\n        children = toArray(((_b = nativeNode.shadowRoot) !== null && _b !== void 0 ? _b : nativeNode).childNodes);\n    }\n    if (children.length === 0 ||\n        isInstanceOfElement(nativeNode, HTMLVideoElement)) {\n        return clonedNode;\n    }\n    await children.reduce((deferred, child) => deferred\n        .then(() => cloneNode(child, options))\n        .then((clonedChild) => {\n        if (clonedChild) {\n            clonedNode.appendChild(clonedChild);\n        }\n    }), Promise.resolve());\n    return clonedNode;\n}\nfunction cloneCSSStyle(nativeNode, clonedNode) {\n    const targetStyle = clonedNode.style;\n    if (!targetStyle) {\n        return;\n    }\n    const sourceStyle = window.getComputedStyle(nativeNode);\n    if (sourceStyle.cssText) {\n        targetStyle.cssText = sourceStyle.cssText;\n        targetStyle.transformOrigin = sourceStyle.transformOrigin;\n    }\n    else {\n        toArray(sourceStyle).forEach((name) => {\n            let value = sourceStyle.getPropertyValue(name);\n            if (name === 'font-size' && value.endsWith('px')) {\n                const reducedFont = Math.floor(parseFloat(value.substring(0, value.length - 2))) - 0.1;\n                value = `${reducedFont}px`;\n            }\n            if (isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n                name === 'display' &&\n                value === 'inline') {\n                value = 'block';\n            }\n            if (name === 'd' && clonedNode.getAttribute('d')) {\n                value = `path(${clonedNode.getAttribute('d')})`;\n            }\n            targetStyle.setProperty(name, value, sourceStyle.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (isInstanceOfElement(nativeNode, HTMLTextAreaElement)) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (isInstanceOfElement(nativeNode, HTMLInputElement)) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction cloneSelectValue(nativeNode, clonedNode) {\n    if (isInstanceOfElement(nativeNode, HTMLSelectElement)) {\n        const clonedSelect = clonedNode;\n        const selectedOption = Array.from(clonedSelect.children).find((child) => nativeNode.value === child.getAttribute('value'));\n        if (selectedOption) {\n            selectedOption.setAttribute('selected', '');\n        }\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    if (isInstanceOfElement(clonedNode, Element)) {\n        cloneCSSStyle(nativeNode, clonedNode);\n        clonePseudoElements(nativeNode, clonedNode);\n        cloneInputValue(nativeNode, clonedNode);\n        cloneSelectValue(nativeNode, clonedNode);\n    }\n    return clonedNode;\n}\nasync function ensureSVGSymbols(clone, options) {\n    const uses = clone.querySelectorAll ? clone.querySelectorAll('use') : [];\n    if (uses.length === 0) {\n        return clone;\n    }\n    const processedDefs = {};\n    for (let i = 0; i < uses.length; i++) {\n        const use = uses[i];\n        const id = use.getAttribute('xlink:href');\n        if (id) {\n            const exist = clone.querySelector(id);\n            const definition = document.querySelector(id);\n            if (!exist && definition && !processedDefs[id]) {\n                // eslint-disable-next-line no-await-in-loop\n                processedDefs[id] = (await cloneNode(definition, options, true));\n            }\n        }\n    }\n    const nodes = Object.values(processedDefs);\n    if (nodes.length) {\n        const ns = 'http://www.w3.org/1999/xhtml';\n        const svg = document.createElementNS(ns, 'svg');\n        svg.setAttribute('xmlns', ns);\n        svg.style.position = 'absolute';\n        svg.style.width = '0';\n        svg.style.height = '0';\n        svg.style.overflow = 'hidden';\n        svg.style.display = 'none';\n        const defs = document.createElementNS(ns, 'defs');\n        svg.appendChild(defs);\n        for (let i = 0; i < nodes.length; i++) {\n            defs.appendChild(nodes[i]);\n        }\n        clone.appendChild(svg);\n    }\n    return clone;\n}\nexport async function cloneNode(node, options, isRoot) {\n    if (!isRoot && options.filter && !options.filter(node)) {\n        return null;\n    }\n    return Promise.resolve(node)\n        .then((clonedNode) => cloneSingleNode(clonedNode, options))\n        .then((clonedNode) => cloneChildren(node, clonedNode, options))\n        .then((clonedNode) => decorate(node, clonedNode))\n        .then((clonedNode) => ensureSVGSymbols(clonedNode, options));\n}\n//# sourceMappingURL=clone-node.js.map","import { resolveUrl } from './util';\nimport { getMimeType } from './mimes';\nimport { isDataUrl, makeDataUrl, resourceToDataURL } from './dataurl';\nconst URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nconst URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"']?)([^\"']+)\\1\\)/g;\nconst FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nfunction toRegex(url) {\n    // eslint-disable-next-line no-useless-escape\n    const escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    return new RegExp(`(url\\\\(['\"]?)(${escaped})(['\"]?\\\\))`, 'g');\n}\nexport function parseURLs(cssText) {\n    const urls = [];\n    cssText.replace(URL_REGEX, (raw, quotation, url) => {\n        urls.push(url);\n        return raw;\n    });\n    return urls.filter((url) => !isDataUrl(url));\n}\nexport async function embed(cssText, resourceURL, baseURL, options, getContentFromUrl) {\n    try {\n        const resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n        const contentType = getMimeType(resourceURL);\n        let dataURL;\n        if (getContentFromUrl) {\n            const content = await getContentFromUrl(resolvedURL);\n            dataURL = makeDataUrl(content, contentType);\n        }\n        else {\n            dataURL = await resourceToDataURL(resolvedURL, contentType, options);\n        }\n        return cssText.replace(toRegex(resourceURL), `$1${dataURL}$3`);\n    }\n    catch (error) {\n        // pass\n    }\n    return cssText;\n}\nfunction filterPreferredFontFormat(str, { preferredFontFormat }) {\n    return !preferredFontFormat\n        ? str\n        : str.replace(FONT_SRC_REGEX, (match) => {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                const [src, , format] = URL_WITH_FORMAT_REGEX.exec(match) || [];\n                if (!format) {\n                    return '';\n                }\n                if (format === preferredFontFormat) {\n                    return `src: ${src};`;\n                }\n            }\n        });\n}\nexport function shouldEmbed(url) {\n    return url.search(URL_REGEX) !== -1;\n}\nexport async function embedResources(cssText, baseUrl, options) {\n    if (!shouldEmbed(cssText)) {\n        return cssText;\n    }\n    const filteredCSSText = filterPreferredFontFormat(cssText, options);\n    const urls = parseURLs(filteredCSSText);\n    return urls.reduce((deferred, url) => deferred.then((css) => embed(css, url, baseUrl, options)), Promise.resolve(filteredCSSText));\n}\n//# sourceMappingURL=embed-resources.js.map","import { embedResources } from './embed-resources';\nimport { toArray, isInstanceOfElement } from './util';\nimport { isDataUrl, resourceToDataURL } from './dataurl';\nimport { getMimeType } from './mimes';\nasync function embedProp(propName, node, options) {\n    var _a;\n    const propValue = (_a = node.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue(propName);\n    if (propValue) {\n        const cssString = await embedResources(propValue, null, options);\n        node.style.setProperty(propName, cssString, node.style.getPropertyPriority(propName));\n        return true;\n    }\n    return false;\n}\nasync function embedBackground(clonedNode, options) {\n    if (!(await embedProp('background', clonedNode, options))) {\n        await embedProp('background-image', clonedNode, options);\n    }\n    if (!(await embedProp('mask', clonedNode, options))) {\n        await embedProp('mask-image', clonedNode, options);\n    }\n}\nasync function embedImageNode(clonedNode, options) {\n    const isImageElement = isInstanceOfElement(clonedNode, HTMLImageElement);\n    if (!(isImageElement && !isDataUrl(clonedNode.src)) &&\n        !(isInstanceOfElement(clonedNode, SVGImageElement) &&\n            !isDataUrl(clonedNode.href.baseVal))) {\n        return;\n    }\n    const url = isImageElement ? clonedNode.src : clonedNode.href.baseVal;\n    const dataURL = await resourceToDataURL(url, getMimeType(url), options);\n    await new Promise((resolve, reject) => {\n        clonedNode.onload = resolve;\n        clonedNode.onerror = reject;\n        const image = clonedNode;\n        if (image.decode) {\n            image.decode = resolve;\n        }\n        if (image.loading === 'lazy') {\n            image.loading = 'eager';\n        }\n        if (isImageElement) {\n            clonedNode.srcset = '';\n            clonedNode.src = dataURL;\n        }\n        else {\n            clonedNode.href.baseVal = dataURL;\n        }\n    });\n}\nasync function embedChildren(clonedNode, options) {\n    const children = toArray(clonedNode.childNodes);\n    const deferreds = children.map((child) => embedImages(child, options));\n    await Promise.all(deferreds).then(() => clonedNode);\n}\nexport async function embedImages(clonedNode, options) {\n    if (isInstanceOfElement(clonedNode, Element)) {\n        await embedBackground(clonedNode, options);\n        await embedImageNode(clonedNode, options);\n        await embedChildren(clonedNode, options);\n    }\n}\n//# sourceMappingURL=embed-images.js.map","import { toArray } from './util';\nimport { fetchAsDataURL } from './dataurl';\nimport { shouldEmbed, embedResources } from './embed-resources';\nconst cssFetchCache = {};\nasync function fetchCSS(url) {\n    let cache = cssFetchCache[url];\n    if (cache != null) {\n        return cache;\n    }\n    const res = await fetch(url);\n    const cssText = await res.text();\n    cache = { url, cssText };\n    cssFetchCache[url] = cache;\n    return cache;\n}\nasync function embedFonts(data, options) {\n    let cssText = data.cssText;\n    const regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n    const fontLocs = cssText.match(/url\\([^)]+\\)/g) || [];\n    const loadFonts = fontLocs.map(async (loc) => {\n        let url = loc.replace(regexUrl, '$1');\n        if (!url.startsWith('https://')) {\n            url = new URL(url, data.url).href;\n        }\n        return fetchAsDataURL(url, options.fetchRequestInit, ({ result }) => {\n            cssText = cssText.replace(loc, `url(${result})`);\n            return [loc, result];\n        });\n    });\n    return Promise.all(loadFonts).then(() => cssText);\n}\nfunction parseCSS(source) {\n    if (source == null) {\n        return [];\n    }\n    const result = [];\n    const commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n    // strip out comments\n    let cssText = source.replace(commentsRegex, '');\n    // eslint-disable-next-line prefer-regex-literals\n    const keyframesRegex = new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const matches = keyframesRegex.exec(cssText);\n        if (matches === null) {\n            break;\n        }\n        result.push(matches[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    const importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\n    // to match css & media queries together\n    const combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n        '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})';\n    // unified regex\n    const unifiedRegex = new RegExp(combinedCSSRegex, 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        let matches = importRegex.exec(cssText);\n        if (matches === null) {\n            matches = unifiedRegex.exec(cssText);\n            if (matches === null) {\n                break;\n            }\n            else {\n                importRegex.lastIndex = unifiedRegex.lastIndex;\n            }\n        }\n        else {\n            unifiedRegex.lastIndex = importRegex.lastIndex;\n        }\n        result.push(matches[0]);\n    }\n    return result;\n}\nasync function getCSSRules(styleSheets, options) {\n    const ret = [];\n    const deferreds = [];\n    // First loop inlines imports\n    styleSheets.forEach((sheet) => {\n        if ('cssRules' in sheet) {\n            try {\n                toArray(sheet.cssRules || []).forEach((item, index) => {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                        let importIndex = index + 1;\n                        const url = item.href;\n                        const deferred = fetchCSS(url)\n                            .then((metadata) => embedFonts(metadata, options))\n                            .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                            try {\n                                sheet.insertRule(rule, rule.startsWith('@import')\n                                    ? (importIndex += 1)\n                                    : sheet.cssRules.length);\n                            }\n                            catch (error) {\n                                console.error('Error inserting rule from remote css', {\n                                    rule,\n                                    error,\n                                });\n                            }\n                        }))\n                            .catch((e) => {\n                            console.error('Error loading remote css', e.toString());\n                        });\n                        deferreds.push(deferred);\n                    }\n                });\n            }\n            catch (e) {\n                const inline = styleSheets.find((a) => a.href == null) || document.styleSheets[0];\n                if (sheet.href != null) {\n                    deferreds.push(fetchCSS(sheet.href)\n                        .then((metadata) => embedFonts(metadata, options))\n                        .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                        inline.insertRule(rule, sheet.cssRules.length);\n                    }))\n                        .catch((err) => {\n                        console.error('Error loading remote stylesheet', err);\n                    }));\n                }\n                console.error('Error inlining remote css file', e);\n            }\n        }\n    });\n    return Promise.all(deferreds).then(() => {\n        // Second loop parses rules\n        styleSheets.forEach((sheet) => {\n            if ('cssRules' in sheet) {\n                try {\n                    toArray(sheet.cssRules || []).forEach((item) => {\n                        ret.push(item);\n                    });\n                }\n                catch (e) {\n                    console.error(`Error while reading CSS rules from ${sheet.href}`, e);\n                }\n            }\n        });\n        return ret;\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter((rule) => rule.type === CSSRule.FONT_FACE_RULE)\n        .filter((rule) => shouldEmbed(rule.style.getPropertyValue('src')));\n}\nasync function parseWebFontRules(node, options) {\n    if (node.ownerDocument == null) {\n        throw new Error('Provided element is not within a Document');\n    }\n    const styleSheets = toArray(node.ownerDocument.styleSheets);\n    const cssRules = await getCSSRules(styleSheets, options);\n    return getWebFontRules(cssRules);\n}\nexport async function getWebFontCSS(node, options) {\n    const rules = await parseWebFontRules(node, options);\n    const cssTexts = await Promise.all(rules.map((rule) => {\n        const baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n        return embedResources(rule.cssText, baseUrl, options);\n    }));\n    return cssTexts.join('\\n');\n}\nexport async function embedWebFonts(clonedNode, options) {\n    const cssText = options.fontEmbedCSS != null\n        ? options.fontEmbedCSS\n        : options.skipFonts\n            ? null\n            : await getWebFontCSS(clonedNode, options);\n    if (cssText) {\n        const styleNode = document.createElement('style');\n        const sytleContent = document.createTextNode(cssText);\n        styleNode.appendChild(sytleContent);\n        if (clonedNode.firstChild) {\n            clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n        }\n        else {\n            clonedNode.appendChild(styleNode);\n        }\n    }\n}\n//# sourceMappingURL=embed-webfonts.js.map","import { cloneNode } from './clone-node';\nimport { embedImages } from './embed-images';\nimport { applyStyle } from './apply-style';\nimport { embedWebFonts, getWebFontCSS } from './embed-webfonts';\nimport { getImageSize, getPixelRatio, createImage, canvasToBlob, nodeToDataURL, checkCanvasDimensions, } from './util';\nexport async function toSvg(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const clonedNode = (await cloneNode(node, options, true));\n    await embedWebFonts(clonedNode, options);\n    await embedImages(clonedNode, options);\n    applyStyle(clonedNode, options);\n    const datauri = await nodeToDataURL(clonedNode, width, height);\n    return datauri;\n}\nexport async function toCanvas(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const svg = await toSvg(node, options);\n    const img = await createImage(svg);\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const ratio = options.pixelRatio || getPixelRatio();\n    const canvasWidth = options.canvasWidth || width;\n    const canvasHeight = options.canvasHeight || height;\n    canvas.width = canvasWidth * ratio;\n    canvas.height = canvasHeight * ratio;\n    if (!options.skipAutoScale) {\n        checkCanvasDimensions(canvas);\n    }\n    canvas.style.width = `${canvasWidth}`;\n    canvas.style.height = `${canvasHeight}`;\n    if (options.backgroundColor) {\n        context.fillStyle = options.backgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n    return canvas;\n}\nexport async function toPixelData(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const canvas = await toCanvas(node, options);\n    const ctx = canvas.getContext('2d');\n    return ctx.getImageData(0, 0, width, height).data;\n}\nexport async function toPng(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL();\n}\nexport async function toJpeg(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL('image/jpeg', options.quality || 1);\n}\nexport async function toBlob(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    const blob = await canvasToBlob(canvas);\n    return blob;\n}\nexport async function getFontEmbedCSS(node, options = {}) {\n    return getWebFontCSS(node, options);\n}\n//# sourceMappingURL=index.js.map","export function applyStyle(node, options) {\n    const { style } = node;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = `${options.width}px`;\n    }\n    if (options.height) {\n        style.height = `${options.height}px`;\n    }\n    const manual = options.style;\n    if (manual != null) {\n        Object.keys(manual).forEach((key) => {\n            style[key] = manual[key];\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=apply-style.js.map","<script>\n  import { toPng } from 'html-to-image';\n  import { Panel, getNodesBounds, getViewportForBounds, Background } from '@xyflow/svelte';\n\n  export let nodes=[];\n  export let fileName = \"\";\n\n  // console.log('Nodes:', nodes);\n  const imageWidth = 1024;\n  const imageHeight = 768;\n\n  function handleClick() {\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      console.error('No nodes available to generate image.');\n      return; // Exit if there are no nodes\n    }\n    const nodesBounds = getNodesBounds(nodes);\n    const viewport = getViewportForBounds(nodesBounds, imageWidth, imageHeight, 0.5, 2.0, 0.2);\n\n    const viewportDomNode = document.querySelector('.svelte-flow__viewport');\n\n    if (viewport) {\n      toPng(viewportDomNode, {\n        // backgroundColor: '#1a365d', //to make it transparent\n        width: imageWidth,\n        height: imageHeight,\n        style: {\n          width: `${imageWidth}px`,\n          height: `${imageHeight}px`,\n          transform: `translate(${viewport.x}px, ${viewport.y}px) scale(${viewport.zoom})`\n        }\n      }).then((dataUrl) => {\n        const link = document.createElement('a');\n        link.download = `${fileName || ''}_solothought-flowchart.png`;\n        link.href = dataUrl;\n        link.click();\n      });\n    }\n  }\n</script>\n\n<!-- <Panel position=\"top-right\"> -->\n  <button {...$$restProps} on:click={handleClick} alt=\"save as image\" placeholder=\"save chart as image\">💾</button>\n<!-- </Panel> -->","const generateLinks = require(\"./LinkGenerator\");\n\nconst branchSteps = [\"IF\", \"ELSE_IF\", \"LOOP\", \"ELSE\"];\nconst leavingSteps = [\"GOTO\", \"SKIP\", \"STOP\", \"END\"];\nconst normalSteps = [\"AND\", \"THEN\", \"BUT\", \"FOLLOW\", \"ERR\"];\n\nclass Flow {\n  constructor(name) {\n    this.name = name;\n    this.headers = {};\n    this.steps = []; // Store step detail\n    this.links = {}; // Store links for a step\n    this.leveledSteps = [[]]; // store steps indentation wise\n    // this.index = {};\n    // this.exitSteps = [];\n  }\n}\n\nfunction parse(algoText) {\n  const lines = algoText.split('\\n'); // split and trim lines\n  const flows = [];\n\n  let indexedSteps = {}; //used for GOTO statement\n  let indentLevels = []; //temp to hold indent detail\n  let curIndentLvl = 0;  //temp to hold current indent detail\n  let stepIndex = -1;    //temp\n  let currentFlow = null;\n  let readingHeader = false;\n  //TODO: \n  // - read Flow headers\n\n  lines.forEach((line, i) => {\n    const trimmedLine = line.trim();\n    if (!trimmedLine || trimmedLine[0] === \"#\") return; // Skip empty or comment lines\n    else if (trimmedLine.startsWith(\"FLOW:\")){\n      // complete last flow and start new\n      if(currentFlow) generateLinks(currentFlow.steps, indexedSteps, currentFlow.links);\n      indexedSteps = {}; //reset\n      indentLevels = [];\n      curIndentLvl  = 0;\n      stepIndex = -1\n      currentFlow = new Flow(trimmedLine.substring(6));\n      flows.push(currentFlow);\n      readingHeader = true;\n      return;\n    }else if(readingHeader && trimmedLine.match(/^[a-z]{1,70}:/)) {//reading header\n      const [key, value] = line.split(':');\n      currentFlow.headers[key.trim()] = value.trim();\n      return;\n    }else{\n      readingHeader = false;\n    }\n\n    stepIndex++;\n\n    const indent = line.search(/\\S/);\n    let curIndentVal;\n    if(indentLevels[curIndentLvl]!== undefined){\n      curIndentVal = indentLevels[curIndentLvl];\n    }else{\n      curIndentVal = indent;\n      indentLevels[curIndentLvl] = indent;\n    }\n    if(curIndentVal === indent){ //same level\n      currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n    }else if(curIndentVal < indent){ // next level\n      indentLevels[++curIndentLvl] = indent;\n      if(currentFlow.leveledSteps[curIndentLvl]){\n        currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n      }else{\n        currentFlow.leveledSteps.push([stepIndex]);\n      }\n    }else{ //previous level\n      for(;curIndentLvl > -1; curIndentLvl--){\n        let lastIndentLvl = indentLevels[curIndentLvl];\n        if(lastIndentLvl === indent) break;\n      }\n      if(curIndentLvl === -1){\n        throw new Error(`Indentation issue with line |${line}|`);\n      }else{\n        currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n      }\n    }\n\n    let data = readStep(line.trim());\n    data.indent = curIndentLvl;\n    if(data.index) indexedSteps[data.index] = stepIndex;\n    currentFlow.steps.push(data);\n    currentFlow.links[stepIndex] = [];\n\n  });\n\n  \n  generateLinks(currentFlow.steps, indexedSteps, currentFlow.links); //for last flow\n  return flows;\n}\n\n\n/**\n * Sample: [#1] ERR This statement (extra info)\n * @param {string} statement \n * @returns {{msg:string, rawMsg: string, type:string, index:string, indent:number}}\n    {msg: 'This statement',\n    rawMsg: 'This statement (extra info)',\n    type: 'ERR',\n    index: '#1',\n    indent: 0}\n */\nfunction readStep(statement) {\n  const data = { msg:\"\", rawMsg: \"\", type: \"\"}\n  if(statement[0] === '[') {//has index\n    const boundary = statement.indexOf(\"]\");\n    data.index = statement.substring(1,boundary).trim();\n    statement = statement.substring(boundary+1).trimStart();\n  }\n  const index = statement.indexOf(' ');\n  if(index < 1) {\n    if(isSupportedKeyword(statement)) data.type = statement;\n    else   data.msg = data.rawMsg = statement;\n  }else{\n    const firstWord = statement.substring(0, index);\n    const restStatement = statement.substring(index + 1);\n\n    if(isSupportedKeyword(firstWord)) {\n      data.type = firstWord;\n      statement = restStatement;\n    }else{\n    }\n    data.rawMsg = statement.replace(/\\s+/g,\" \");\n    data.msg = refinedMsg(statement).replace(/\\s+/g,\" \");\n  }\n  return data;\n}\n\n\n/**\n * Remove extra  info from the message\n * @param {string} msg \n * @returns {string}\n */\nfunction refinedMsg(msg){\n  let count = 0;\n  let newmsg = \"\";\n  for (let i = 0; i < msg.length; i++) {\n    const ch = msg[i];\n    if(ch===\"(\") count++;\n    else if(ch===\")\") count--;\n    else {\n      if(count > 0) continue;\n      else newmsg += ch;\n    }\n  }\n  return newmsg.trim();\n}\n\nfunction isSupportedKeyword(k){\n  return leavingSteps.indexOf(k) !== -1 || \n    branchSteps.indexOf(k) !== -1 ||\n    normalSteps.indexOf(k) !== -1;\n}\n\n// Example usage\n// let input = `\n// IF root\n//   LOOP condition 1\n//     [#1] DO A\n//     IF condition 2 (extra)\n//       GOTO #1\n//     ELSE_IF condition 3\n//       SKIP\n//     ELSE_IF condition 4\n//       LOOP illusion\n//         ends here\n//       IF otherwise\n//         END\n//       ELSE\n//         STOP\n//     this is B\n//     FOLLOW a new flow\n//     last here\n//     #comments are skipped\n// ELSE_IF admin\n//   ban\n// last`;\n// input = `\n// FLOW: sample\n// [index] ERR This statement (extra info)\n\n// FLOW: sample\n// this: is header\n// [index] ERR This statement (extra info)\n// `;\n\n\n// const output = parse(input);\n// console.log(JSON.stringify(output, null, 2));\n\n\nmodule.exports = parse;","const branchSteps = [\"IF\", \"ELSE_IF\", \"ELSE\", \"LOOP\"];\nconst leavingSteps = [\"GOTO\", \"SKIP\", \"STOP\", \"END\"];\n\nfunction isBranchStep(step) {\n  return branchSteps.includes(step.type);\n}\nfunction isLeavingStep(step) {\n  return leavingSteps.includes(step.type);\n}\n\n\n/**\n * A next step is not a child step but a sibling or higher level step\n * Find next step of same level or\n * Find next step of lower level within loop boundary if within loop\n * loop step if no next step of lower level within loop boundary if within loop\n * Find next step of lower level if not in loop\n * -1 if no next step and not in loop\n * \n * But if next step is ELSE_IF, ELSE type\n *  AND current step is IF/ELSE_IF on same indent level\n * , then we need to find next step of this\n * @param {[number[]]} steps \n * @param {number} currentStepId \n * @param {number} indent\n * @returns {number} step id\n */\nfunction findNextStep(steps, currentStepId, parentLoopId, nested) {\n  //TODO: use leveledSteps to find the next step\n  // nextStepId = leveledSteps[steps[currentStepId].indent].indexOf(currentStepId)+1\n  // if(nextStepId === undefined) nextStepId=-1\n  // else if(steps[nextStepId].type.startsWith(\"ELSE\")\n  //          && currentStep.type is not of same level IF block) check for next step in indent\n  let nextStepId = -2;\n\n  // if(parentLoopId !== undefined && parentLoopId > currentStepId){\n  if(parentLoopId !== undefined){\n    // Find next step whose indent is less or equal to current indent\n    // but higher than loop's indent\n    // Otherwise IF next step indent is higher, ignore\n    // IF next step indent is higher or equal to loop indent, point to loop\n\n    const parentLoop = steps[parentLoopId];\n    const currentIndent = steps[currentStepId].indent;\n    for (let i = currentStepId+1; i < steps.length; i++) {\n      const nextStepIndent = steps[i].indent;\n      if (nextStepIndent === currentIndent){\n        nextStepId = i;\n        break;\n      }else if (nextStepIndent < currentIndent){\n        if(nextStepIndent > parentLoop.indent) {\n          nextStepId = i;\n        }else{\n          nextStepId = parentLoopId\n        }\n        break;\n      }\n    }\n    if(nextStepId === -2) nextStepId = parentLoopId;\n  }else{\n    for (let i = currentStepId + 1; i < steps.length; i++) {\n      if (steps[i].indent <= steps[currentStepId].indent) {\n        nextStepId = i;\n        break;\n      }\n    }\n    if(nextStepId === -2) nextStepId = -1;\n  }\n\n  if(nextStepId > -1 && steps[nextStepId].type.startsWith(\"ELSE\")){\n    // IF not\n    //   but\n    // ELSE_IF else if\n    //   B\n    // ELSE\n    if(!nested && steps[currentStepId].indent === steps[nextStepId].indent\n      && (steps[currentStepId].type === \"IF\" \n        || steps[currentStepId].type === \"ELSE_IF\")\n      ){\n      // an IF or ELSE_IF can point to ELSE_IF or ELSE on the same indent\n    }else{\n      // Must not point to ELSE_IF or ELSE\n      nextStepId = findNextStep(steps,nextStepId,parentLoopId, true);\n    }\n  }\n  return nextStepId;\n}\n\nfunction handleNormalStep(steps, stepId, links, loopStack) {\n  const nextStepIndex = findNextStep(steps, stepId, parentLoop(loopStack));\n  links[stepId].push(nextStepIndex);\n}\n\nfunction findLastStepOfSameLevel(steps, stepId){\n  const targetLvl = steps[stepId].indent;\n  for (let i = stepId-1; i > -1; i--) {\n    if(targetLvl === steps[i].indent){\n      return i; \n    }\n  }\n  throw new Error(\"Unable to find last step of same indent level\");\n}\n\nfunction handleBranchStep(step, steps, links, stepId, loopStack) {\n  if(step.type === \"ELSE\") { // no linking is needed\n    delete links[stepId];\n    return; \n  }\n  const indent = step.indent;\n  \n  // a) Success branch: If the next step has a higher indent\n  if (steps[stepId + 1] && steps[stepId + 1].indent > indent) {\n    links[stepId].push(stepId + 1); // Success branch\n  } else {\n    links[stepId].push(undefined); // No success branch\n  }\n\n  // Find next step with same or lower indent\n  let failingBranchStepId = findNextStep(steps, stepId, parentLoop(loopStack));\n  if(failingBranchStepId !== -1 && steps[failingBranchStepId].type === \"ELSE\"){\n    failingBranchStepId++;\n  }\n  links[stepId].push(failingBranchStepId);\n\n  if (step.type === \"LOOP\") {\n    loopStack.push(stepId); // Push LOOP to the stack\n  }\n}\n\nfunction checkIfNot1stStep(steps, id){\n  if(id === 0) throw new Error(`${steps[id].type} can't be first step of the flow`);\n}\n\nfunction handleGotoStep(steps, step, indexedSteps, links, stepId) {\n  checkIfNot1stStep(steps, stepId);\n  if(indexedSteps[step.msg] === undefined) throw new Error(`GOTO is pointing to ${step.msg} that doesn't specified with any step`)\n\n  //validate target step\n  updatePointersOfLastSteps(steps, links,stepId,indexedSteps[step.msg]);\n}\n\nfunction handleLeavingStep(steps, currentStepId, links, loopStack) {\n  checkIfNot1stStep(steps, currentStepId);\n  const step = steps[currentStepId];\n  if (step.type === \"SKIP\") { // points to the LOOP step\n    if (loopStack.length < 1) throw new Error(\"SKIP must be inside LOOP\");\n\n    const loopStepId = loopStack[loopStack.length - 1];\n    updatePointersOfLastSteps(steps, links, currentStepId, loopStepId);\n  } else if (step.type === \"STOP\") { // points to next step of the LOOP step\n    if (loopStack.length < 1) throw new Error(\"STOP must be inside LOOP\");\n\n    const nextStepIndex = findNextStep(steps, parentLoop(loopStack));\n    updatePointersOfLastSteps(steps, links, currentStepId, nextStepIndex);\n  } else if (step.type === \"END\")  { // points to -1\n    updatePointersOfLastSteps(steps, links, currentStepId, -1);\n  }\n}\n\n/**\n * Skip an extra link for leaving steps. Update pointer in all previous steps pointing to this\n * @param {object} links \n * @param {number} parentStepId \n * @param {number} currentStepId \n */\nfunction updatePointersOfLastSteps(steps, links, currentStepId, stepToPoint){\n  for (let i = 0; i < currentStepId; i++) {\n    let link = links[i];\n    if(link !== undefined){\n      const ind = link.indexOf(currentStepId);\n      if(ind !== -1){\n        if(steps[i].type === \"ELSE\"){\n          link = findLastStepOfSameLevel(steps, link);\n        }\n        link[ind] = stepToPoint;\n      }\n    }\n  }\n  delete links[currentStepId];\n}\n\nfunction generateLinks(steps, indexedSteps, links) {\n  const loopStack = []; // Stack to track LOOP steps\n\n  // Traverse through all steps\n  for (let i = 0; i < steps.length; i++) {\n    const step = steps[i];\n    const indent = step.indent;\n\n    if (loopStack.length > 0 ) {\n      //pop until loop indent is equal to current  step indent\n      for (let li = loopStack.length - 1; li > -1; li--) {\n        const loopStepId = loopStack[li];\n        if(indent <= steps[loopStepId].indent)\n          loopStack.pop();\n      }\n    }\n\n    if (step.type === \"GOTO\") {\n      handleGotoStep(steps, step, indexedSteps, links, i);\n      // continue;\n    }else if (isBranchStep(step)) {\n      handleBranchStep(step, steps, links, i, loopStack);\n    }else if(isLeavingStep(step)){\n      handleLeavingStep(steps, i, links, loopStack);\n    }else{  // Normal Step: Just link to the next step if exists\n      handleNormalStep(steps, i, links, loopStack);\n    }\n\n    \n  }\n}\n\nfunction parentLoop(loopStack){\n  return loopStack[loopStack.length -1];\n}\n\nmodule.exports = generateLinks","import parse from \"@solothought/text2obj/flow\";\nimport { nodeSize } from './../config.js';\n\nconst nodeWidth = nodeSize.width;\nconst nodeHeight = nodeSize.height;\nconst nodeMargin_h = nodeSize.height*1.5;\nconst nodeMargin_v = nodeSize.width*1.1;\n\nconst deltaX = nodeWidth + nodeMargin_v;\nconst deltaY = nodeHeight + nodeMargin_h;\n\nfunction SvelteFlowNode(id, data , position){ //TODO: use class\n  return {\n    id : id+\"\",\n    type : \"step\",\n    data : data,\n    position : position,\n  }\n}\nfunction SvelteFlowEdge(sourceId, targetId, i, sourceType=\"\", targetType){ //TODO: use class\n  // console.debug(sourceType, i)\n  let animated = false;\n  // let srcHandle = \"b\";\n  // let targetHandle = \"t\";\n  let srcHandle = \"\";\n  let targetHandle = \"\";\n  let label = \"\";\n  if(isBranchStep(sourceType)){//first node\n    if(i==0)  {\n      srcHandle = \"r\";\n      targetHandle= \"lt\";\n    }\n  }\n  // if(targetType === \"LOOP\" && sourceId > targetId){\n  if(sourceId > targetId){\n    srcHandle = \"l\";\n    animated = true;\n  }\n  if(sourceType === \"IF\" || sourceType === \"ELSE_IF\"){\n    if(i === 0)    label= \"True\";\n    else if(i === 1)    label= \"False\";\n  }else if(sourceType === \"LOOP\"){\n    if(i === 1)    label= \"Exit\";\n  }\n  return {\n    id : `${sourceId}-${targetId}`,\n    source : sourceId+\"\",\n    target : targetId+\"\",\n    label : \"\",\n    data : {},\n    sourceHandle: srcHandle,\n    targetHandle: targetHandle,\n    animated: animated,\n    label: label\n  }\n}\n\n/**\n * Parse flow to SvelteFlow compatible nodes and edges\n * @param {string} flowContent \n * @returns \n */\nexport function convert(flowContent){\n  const nodesAndEdges = [];\n  try{\n    const flows = parse(flowContent); // returns [Flow]\n    for (let i = 0; i < flows.length; i++) {\n      const flow = flows[i];\n      if(flow.steps.length > 0) {\n        const nAe = mapStepsToNodes(flow);\n        // console.log(nAe.edges);\n        // console.log(nAe.nodes);\n        nodesAndEdges.push(nAe);\n      }\n    }\n  }catch(e){\n    //TODO: notify error\n    console.error(e);\n  }\n  // console.debug(nodesAndEdges);\n  return nodesAndEdges;\n}\n\n\nfunction mapStepsToNodes(flow){\n  const nodes=[];\n  const edges=[];\n  const connections = {};\n  let lastNode;\n  const parentStack = [];\n  let nodeId = 0, row=-1;\n  for (; nodeId < flow.steps.length; nodeId++) {\n    const step = flow.steps[nodeId];\n\n    if(flow.links[nodeId]){\n      row++;\n      let position;\n\n      //Build chart connections\n      if(connections[nodeId]) connections[nodeId].target = [...flow.links[nodeId].map(String)];\n      else connections[nodeId] = {target: [...flow.links[nodeId].map(String)], parent: []};\n    \n      //calculate position\n      if(!lastNode) position={x:0,y:0};\n      else{\n        const lastStep = flow.steps[lastNode.id];\n        if(lastStep.indent === step.indent) {//same level\n          position = {x:lastNode.position.x, y:lastNode.position.y+deltaY}\n        }else if(lastStep.indent < step.indent){ //child-parent step\n          row--; //graph expands horizontally\n          position = {x:lastNode.position.x+deltaX, y:lastNode.position.y};\n        }else{\n          let diff = lastStep.indent - step.indent;\n          let parentNode;\n          while(diff-->0) parentNode = parentStack.pop();\n          position = {x:parentNode.position.x, y:(row*deltaY)}\n        }\n\n        if(flow.steps[nodeId-1].type===\"ELSE\"){ //shift to left\n          position = {x:position.x-deltaX, y:position.y};\n        }\n      }\n\n      //Add node\n      const node = SvelteFlowNode(nodeId, { \n        msg: step.msg, \n        rawMsg: step.rawMsg, \n        type: step.type, \n        }, position )\n      nodes.push(node);\n\n      //to calculate position\n      lastNode = node;\n      if(isBranchStep(step.type)){\n        parentStack.push(node);\n      }\n\n      //Add edge\n      for (let j = 0; j < flow.links[nodeId].length; j++) {\n        const targetId = flow.links[nodeId][j];\n        \n        //Build chart connections\n        if(!connections[targetId]) connections[targetId] = {target:[], parent:[]}\n        if(targetId > nodeId) connections[targetId].parent.push(String(nodeId));\n\n        if(targetId === -1){\n          node.data.isEnd = true;          \n        }else{\n          if(!flow.links[targetId]) throw new Error(`Link for Step ${targetId} is not present`);\n          const edge = SvelteFlowEdge(nodeId, targetId, j, step.type, flow.steps[targetId].type);\n          edges.push(edge);\n        }\n      }\n    }\n  }\n  // for first node\n  nodes[0].data.isStart = true;\n  // console.debug(connections);\n  \n  return {flowName:  flow.name, nodes, edges, connections}\n}\n\nconst branchSteps=[\"IF\", \"ELSE_IF\", \"LOOP\"];\nfunction isBranchStep(type){\n  return branchSteps.indexOf(type) !== -1;\n}\n\n// const flowText = `\n// FLOW: passed as parameter\n// here you go\n// LOOP until\n//   you're safe here\n//   IF not\n//     STOP\n//   ELSE\n//     SKIP\n// ` \n\n// const {nodes,edges} = convert(flowText)\n// console.log(nodes)\n// console.log(edges);","/**\n * update a property or state of all or selected nodes\n * @param {object[]} nodes \n * @param {object} globalState \n * @param {object} newProp \n * @param {string[]} selectedNodes node ids\n */\nexport function updateProperty(nodes, globalState, newProp = {}, selectedNodes = null){\n  nodes.forEach(node => {\n    if(!selectedNodes || selectedNodes.has(node.id)){\n      node.data = {\n        ...node.data,\n        ...globalState,\n        ...newProp\n      };\n    }\n  })\n  return nodes; //for chaining if needed\n}","import { \n  MarkerType\n  } from '@xyflow/svelte';\n  import {updateProperty} from './nodeUpdater.js';\n\n// TODO: when an edge is highlighted by click, set it's z-index to 1 then reset to 0;\nexport const edgeStyle = \"stroke-width: 2px; stroke: #cac2c2;\";\nexport const highlightedEdgeStyle = \"stroke-width: 2px; stroke: #FF4000\";\nexport const labelStyle = \"font-size: 10px; font-weight: inherit; color: inherit;\";\nexport const highlightedLabelStyle = \"font-size: 16px; font-weight: bold; color: #ff6347;\";\nexport const edgeMarkerStyle = { \n  type: MarkerType.ArrowClosed,\n  width: 20, \n  height: 20, \n  color: '#cac2c2' };\nexport const highlightedEdgeMarkerStyle = { \n  type: MarkerType.ArrowClosed,\n  width: 20, \n  height: 20, \n  color: \"#FF4000\" };\n\n\n/**\n * Select nodes to handle hover over a node\n * @param {number} nodeId \n * @param {Object} connections \n * @param {Set<number>} nodeSet \n * @param {Set<number>} edgeSet \n */\nexport function traverseConnections(nodeId, connections, selectDirection) {\n  const nSetUp = new Set();\n  const eSetUp = new Set();\n  const nSetDown = new Set();\n  const eSetDown = new Set();\n\n  if(selectDirection === 0 || selectDirection === 2)\n    traverseUpwards(nodeId, connections, nSetUp, eSetUp);\n  if(selectDirection === 1 || selectDirection === 2)\n    traverseDownwards(nodeId, connections, nSetDown, eSetDown);\n\n  return {\n    seletedNodes: new Set([...nSetUp, ...nSetDown]),\n    seletedEdges: new Set([...eSetUp, ...eSetDown])\n  }\n}\n\nfunction traverseUpwards(currentNode, connections, nodeSet, edgeSet) {\n  if (!nodeSet.has(currentNode)) {\n    nodeSet.add(currentNode);\n    connections[currentNode].parent.forEach(parentNode => {\n      edgeSet.add(`${parentNode}-${currentNode}`);\n      traverseUpwards(parentNode, connections, nodeSet, edgeSet);\n    });\n  }\n}\n\nfunction traverseDownwards(currentNode, connections, nodeSet, edgeSet) {\n  if (!nodeSet.has(currentNode)) {\n    nodeSet.add(currentNode);\n    connections[currentNode].target.forEach(targetNode => {\n      edgeSet.add(`${currentNode}-${targetNode}`);\n      traverseDownwards(targetNode, connections, nodeSet, edgeSet);\n    });\n  }\n}\n\n/**\n * \n * @param {[]} nodes \n * @param {[]} edges \n * @param {Set<string>} nodeIds \n * @param {Set<string>} edgeIds \n * @returns \n */\nexport function highlight(nodes, nodeIds, nodesState, edges, edgeIds) {\n  updateNodesStyle(nodes, nodeIds,nodesState,{highlight: true});\n  if(edgeIds) updateEdgesStyle(edges, edgeIds, highlightEdge);\n}\n\nexport function unhighlight(nodes, nodeIds, nodesState, edges, edgeIds) {\n  updateNodesStyle(nodes, nodeIds,nodesState,{highlight: false});\n  if(edgeIds) updateEdgesStyle(edges, edgeIds, unhighlightEdge);\n}\n\nfunction updateNodesStyle(nodes,nodeIds, nodesState, highlight){\n  updateProperty(nodes,nodesState,highlight,nodeIds)\n}\n\n/**\n * \n * @param {[]} edges master data\n * @param {string[]} edgeIds edges to update\n * @param {function} cb function that apply style\n */\nexport function updateEdgesStyle(edges,edgeIds, cb){\n  edges.forEach(edge => {\n    if(edgeIds.has(edge.id)){\n      cb(edge);\n    }\n  })\n}\n\n/**\n * apply edge and it's marker's style\n * @param {object} edge \n */\nexport function unhighlightEdge(edge){\n  edge.style = edgeStyle;\n  edge.markerEnd = edgeMarkerStyle;\n  edge.labelStyle = labelStyle;\n}\n\n/**\n * apply edge and it's marker's style\n * @param {object} edge \n */\nexport function highlightEdge(edge){\n  edge.style = highlightedEdgeStyle;\n  edge.markerEnd = highlightedEdgeMarkerStyle;\n  edge.labelStyle = highlightedLabelStyle;\n}","<script>\n  import { writable } from 'svelte/store';\n  import { onMount } from 'svelte';\n  import { \n    SvelteFlow, \n    Controls, \n    Background, \n    MiniMap, \n    SvelteFlowProvider} from '@xyflow/svelte';\n\n  import '@xyflow/svelte/dist/style.css';\n  // import './toolbox-style.css';\n  import StepNode from './Step.svelte';\n  import DownloadButton from './../DownloadButton.svelte';\n  import {convert as flowText2Obj} from './NodesAndEdgesBuilder.js';\n  import {updateProperty} from './nodeUpdater.js';\n\n  import {highlight, \n    traverseConnections, \n    unhighlight, \n    edgeStyle, \n    edgeMarkerStyle, \n    unhighlightEdge, \n    updateEdgesStyle,\n    highlightEdge} from './hoverManager.js';\n\n  const nodeTypes = { step: StepNode };\n  // const edgeTypes = { custom: CustomEdge };\n  \n  // Accept nodes and edges from the parent\n  export let nodes = [];\n  export let edges = [];\n  export let text = \"\";\n  export let flowName = \"\";\n  export let selection = [];\n\n  // Convert the arrays to writable stores\n  let nodeStore = writable(nodes);\n  let edgeStore = writable(edges);\n  let keyPressed = \"\";\n  /**\n   * {\n   *  \"1\":{ source: [], target: [2]},\n   *  \"2\":{ source: [1], target: [3,4]}\n   * }\n   */\n  let connections = {}; //an intermediate DataType for fast traversing when styling nodes/edges\n\n  let hoveredPathNodes = new Set();\n  let hoveredPathEdges = new Set();\n\n  let flowsData = []; // All flows parsed from text\n  let selectedFlowIndex = 0; // Track selected flow, defaulting to the first\n  let hoveredState = false;\n  let nodeConfig = {\n    hideMsgDetail: false,\n    standardShape: false\n  }\n\n  function onNodeMouseEnter(event){\n    hoveredState = true;\n    const nodeId = event.detail.node.id;\n    let selectDirection = 2;\n    if (keyPressed === 'Shift') selectDirection = 0;\n    else if (keyPressed === 'Control') selectDirection = 1;\n    const selection = traverseConnections(nodeId, connections, selectDirection);\n    hoveredPathNodes = selection.seletedNodes;\n    hoveredPathEdges = selection.seletedEdges;\n    highlight(nodes, hoveredPathNodes, nodeConfig, edges,hoveredPathEdges);\n\n    nodeStore.set(nodes);\n    edgeStore.set(edges);\n  }\n  function onNodeMouseLeave(){\n    hoveredState=false;\n    unhighlight(nodes, hoveredPathNodes, nodeConfig, edges, hoveredPathEdges);\n    hoveredPathNodes.clear();\n    hoveredPathEdges.clear();\n\n    nodeStore.set(nodes);\n    edgeStore.set(edges);\n  }\n  \n\n  const selectedEdges = new Set();\n  function styleEdge(event){\n    const edgeId = event.detail.edge.id;\n    if(selectedEdges.has(edgeId)){\n      selectedEdges.delete(edgeId);\n      updateEdgesStyle(edges,new Set([event.detail.edge.id]),unhighlightEdge);\n    }else{\n      selectedEdges.add(edgeId);\n      updateEdgesStyle(edges,new Set([event.detail.edge.id]),highlightEdge);\n    }\n    edgeStore.set(edges);\n  }\n  \n  function handleKeyDown(event){\n    keyPressed = event.key;\n  };\n  function handleKeyUp(event){\n    keyPressed = \"\";\n  };\n  function hideNodeMsgDetail(){\n    nodeConfig.hideMsgDetail = !nodeConfig.hideMsgDetail;\n    updateProperty(nodes,nodeConfig);\n    nodeStore.set(nodes);\n  }\n\n\n  function onNodeCick(event){ \n    const node = event.detail.node.data;\n    if(node.type === \"FOLLOW\"){\n      //change flow\n      flowsData.forEach((flow,i )=> {\n        if(flow.flowName === node.msg){\n          selectedFlowIndex = i;\n        }\n      });\n    }\n  }\n\n   // Update flow data when user selects a different flow\n  function handleFlowChange(event) {\n    updateSelectedFlow(parseInt(event.target.value));\n  }\n\n  onMount(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n  });\n\n  let slimoFlow = \"\";\n  $: { \n    if (text.length > 0) {\n      flowsData = flowText2Obj(text);\n      updateSelectedFlow(selectedFlowIndex); // Set first flow by default\n    }\n  }\n\n  function updateSelectedFlow(index) {\n    selectedFlowIndex = index;\n    if (flowsData[selectedFlowIndex]) {\n      const selectedFlow = flowsData[selectedFlowIndex];\n      nodes = selectedFlow.nodes;\n      edges = selectedFlow.edges;\n      connections = selectedFlow.connections;\n      flowName = selectedFlow.flowName;\n      updateProperty(nodes,nodeConfig);\n      nodeStore.set(nodes);\n      edgeStore.set(edges);\n    }\n  }\nlet selected = {}; //{flowIndex:number,nodeIds:string[]}\n$: {\n  if(selection && selection.nodeIds && selection.nodeIds.length){ //TODO: accept flow number. Ignore if selected flow is different \n    // console.log(selection, selected);\n    unhighlight(nodes,new Set(selected.nodeIds), nodeConfig);\n    if(selection.flowIndex === selectedFlowIndex){\n\n      nodeStore.set(nodes);\n      selected = selection;\n      highlight(nodes,new Set(selection.nodeIds),nodeConfig);\n      nodeStore.set(nodes);\n\n    }\n  }\n}\n</script>\n\n<div {...$$restProps} class=\"solothought_text2chart_flow\"> \n  <SvelteFlowProvider >\n    <div class=\"st-toolbox\">\n      <!-- Flow Selector -->\n      <select class=\"st-flow-chart-tool\" on:change={handleFlowChange} bind:value={selectedFlowIndex}>\n        {#each flowsData as flow, index}\n          <option value={index} >{flow.flowName}</option>\n        {/each}\n      </select>\n      <button on:click={hideNodeMsgDetail} class='{nodeConfig.hideMsgDetail ? 'passive' : ''}'>👁</button>\n      <DownloadButton nodes={nodes} fileName={flowName}/>\n    </div>\n    <SvelteFlow  {nodeTypes} style=\"min-height: 200px;\"\n    bind:nodes={nodeStore} bind:edges={edgeStore} fitView \n    defaultEdgeOptions={{\n      type: 'smoothstep',\n      markerEnd: edgeMarkerStyle,\n      style: edgeStyle\n    }} \n    on:nodemouseenter={onNodeMouseEnter}\n    on:nodemouseleave={onNodeMouseLeave}\n    on:nodeclick={onNodeCick}\n    on:edgeclick={styleEdge}\n    >\n      <Controls />\n      <Background />\n      <MiniMap />\n    </SvelteFlow>\n  </SvelteFlowProvider>\n\n</div>\n<style>\n  .passive{\n    opacity: 50%;\n  }\n  :global(.st-toolbox){\n    height: 40px;\n  }\n  :global(.st-toolbox button){\n    background-color: #FFFFFF;\n    border-width: 0;\n    padding: 5px;\n    cursor: pointer;\n  }\n  :global(.st-toolbox button:hover){\n    outline: 1px dashed black;\n  }\n</style>"],"names":["noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","not_equal","subscribe","store","callbacks","callback","undefined","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","null_to_empty","set_store_value","ret","set","action_destroyer","action_result","destroy","globals","window","globalThis","global","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","always_set_through_set_attribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","indexOf","set_data","set_style","important","removeProperty","setProperty","select_option","select","mounting","option","__value","selected","selectedIndex","crossorigin","current_component","is_crossorigin","parent","error","toggle_class","toggle","classList","construct_svelte_component","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","createEventDispatcher","type","detail","cancelable","bubbles","CustomEvent","custom_event","call","defaultPrevented","setContext","context","getContext","get","bubble","this","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","seen_callbacks","flushidx","flush","saved_component","update","e","pop","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","ensure_array_like","array_like_or_iterator","Array","from","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","updates","child_ctx","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","get_spread_update","levels","to_null_out","accounted_for","get_spread_object","spread_props","bind","index","bound","create_component","mount_component","new_on_destroy","map","filter","destroy_component","detaching","filtered","targets","flush_render_callbacks","make_dirty","then","fill","init","instance","create_fragment","append_styles","parent_component","on_disconnect","skip_bound","root","ready","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","$on","splice","$set","obj","__svelte","v","subscriber_queue","readable","start","writable","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","derived","stores","initial_value","single","isArray","stores_array","every","Boolean","auto","started","values","pending","cleanup","sync","unsubscribers","cc","names","out","tmp","dispatch","t","arguments","test","Dispatch","concat","prototype","constructor","on","typename","types","T","trim","split","hasOwnProperty","copy","that","args","apply","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","prefix","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","creatorFixed","fullname","creator","none","selector","querySelector","selectorAll","querySelectorAll","arrayAll","x","matcher","matches","childMatcher","find","childFirst","firstElementChild","sparse","EnterNode","datum","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","ascending","NaN","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","styleConstant","priority","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","ClassList","_node","_names","classedAdd","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","j","listener","onAdd","contextListener","dispatchEvent","params","createEvent","initEvent","dispatchConstant","dispatchFunction","child","join","contains","Selection","groups","parents","_groups","_parents","selection","pointer","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","y","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","left","clientLeft","top","clientTop","pageX","pageY","subgroups","subnode","subgroup","selectAll","selectChild","match","childFind","selectChildren","childrenFilter","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","onenter","onupdate","onexit","merge","order","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","each","getAttributeNS","property","classed","html","before","deep","typenames","parseTypenames","Symbol","iterator","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","noevent$1","preventDefault","dragDisable","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","setTimeout","constant$2","DragEvent","subject","identifier","active","dx","dy","defineProperties","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","define","factory","extend","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","g","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","round","toString","h","s","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","channels","displayable","formatHex8","formatHsl","pow","clamp","constant$1","gamma","nogamma","exponential","constant","linear","interpolateRgb","rgbGamma","end","colorRgb","interpolateNumber","reA","reB","source","interpolateString","am","bm","bs","bi","lastIndex","q","number","one","zero","svgNode","degrees","PI","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","decompose","f","sqrt","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","interpolateTransformSvg","transform","baseVal","consolidate","matrix","cosh","exp","taskHead","taskTail","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","d2","log","d1","b0","b1","r0","r1","coshr0","u","sinh","duration","SQRT2","_1","_2","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","schedule","id","timing","schedules","__transition","self","tween","state","tick","ease","interrupt","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","inherit","id0","id1","on0","on1","sit","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","reject","cancel","defaultTiming","ZoomEvent","Transform","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","range","rescaleY","__zoom","defaultExtent","SVGElement","hasAttribute","viewBox","width","height","clientWidth","clientHeight","defaultTransform","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","zoom$1","touchstarting","touchfirst","touchending","constrain","wheelDelta","touchable","scaleExtent","listeners","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","centroid","gesture","w","clean","__zooming","Gesture","taps","wheel","mouse","moved","x0","y0","dragEnable","changedTouches","k1","shiftKey","touches","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","translateBy","translateTo","emit","clickDistance","errorMessages","nodeType","handleType","sourceHandle","targetHandle","infiniteExtent","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","ConnectionMode","PanOnScrollMode","SelectionMode","initialConnection","inProgress","isValid","fromHandle","fromPosition","fromNode","to","toHandle","toPosition","toNode","ConnectionLineType","MarkerType","Position","oppositePosition","Left","Right","Top","Bottom","handleConnectionChange","cb","diff","connection","getConnectionStatus","isInternalNodeBase","getNodePositionWithOrigin","nodeOrigin","getNodeDimensions","origin","offsetX","offsetY","position","getInternalNodesBounds","nodeLookup","box","x2","y2","nodeBox","nodeToBox","getBoundsOfBoxes","boxToRect","getNodesInside","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","pointToRendererPoint","visibleNodes","measured","selectable","hidden","initialWidth","initialHeight","overlappingArea","getOverlappingArea","nodeToRect","area","partiallyVisible","internals","handleBounds","dragging","getConnectedEdges","edges","nodeIds","edge","getFitViewNodes","fitViewNodes","optionNodeIds","includeHiddenNodes","async","fitView","panZoom","minZoom","maxZoom","bounds","viewport","getViewportForBounds","padding","setViewport","calculateNodePosition","nodeId","nextPosition","nodeExtent","onError","parentId","parentX","parentY","positionAbsolute","expandParent","isCoordinateExtent","parentWidth","parentHeight","clampPosition","val","dimensions","clampPositionToParent","childPosition","childDimensions","calcAutoPanVelocity","calcAutoPan","pos","speed","distance","box1","box2","rectToBox","getBoundsOfRects","rect1","rect2","rectA","rectB","xOverlap","yOverlap","ceil","isNumeric","isFinite","devWarn","message","snapPosition","snapGrid","snapToGrid","rendererPointToPoint","xZoom","yZoom","clampedZoom","isMacOs","userAgent","nodeHasDimensions","getPointerPosition","getEventPosition","pointerPos","xSnapped","ySnapped","getDimensions","offsetWidth","offsetHeight","inputTags","isMouseEvent","isMouse","evtX","evtY","getHandleBounds","nodeElement","nodeBounds","handles","handle","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","getBezierPath","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","sourceControlX","sourceControlY","targetControlX","targetControlY","labelX","labelY","centerX","centerY","getBezierEdgeCenter","getEdgeCenter","xOffset","yOffset","getElevatedEdgeZIndex","sourceNode","targetNode","zIndex","elevateOnSelect","edgeOrConnectedNodeSelected","selectedZIndex","z","getEdgeId","getStraightPath","handleDirections","getPoints","center","offset","sourceDir","targetDir","sourceGapped","targetGapped","dir","getDirection","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","getSmoothStepPath","borderRadius","reduce","res","segment","bendSize","xDir","getBend","isNodeInitialized","toHandleBounds","getHandlePosition","fallbackPosition","getHandle$1","handleId","getMarkerId","marker","defaultOptions","elevateNodesOnSelect","defaults","adoptUserNodesDefaultOptions","checkEquality","mergeObjects","base","incoming","adoptUserNodes","parentLookup","_options","tmpLookup","selectedNodeZ","userNode","internalNode","positionWithOrigin","clampedPosition","calculateZ","updateChildNode","console","warn","updateParentLookup","childNode","absolutePosition","childZ","parentZ","calculateChildXYZ","positionChanged","updateNodeInternals","domNode","viewportNode","updatedInternals","changes","m22","DOMMatrixReadOnly","parentExpandChildren","dimensionChanged","force","parentExpandChanges","parentExpansions","parentRect","expandedRect","xChange","yChange","newWidth","newHeight","widthChange","heightChange","some","setAttributes","handleExpandParent","updateConnectionLookup","connectionLookup","edgeLookup","sourceKey","targetKey","prevSource","prevTarget","edgeId","isParentSelected","hasSelector","current","parentElement","getEventHandlerParams","dragItems","nodesFromDragItems","dragItem","XYDrag","onNodeMouseDown","getStoreItems","onDragStart","onDrag","onDragStop","lastPos","autoPanId","autoPanStarted","mousePosition","containerBounds","dragStarted","d3Selection","abortDrag","noDragClassName","handleSelector","isSelectable","nodeClickDistance","updateNodes","dragEvent","onNodeDrag","onSelectionDrag","updateNodePositions","hasChange","nodesBox","adjustedNodeExtent","currentNode","currentNodes","autoPan","panBy","autoPanSpeed","xMovement","yMovement","startDrag","multiSelectionActive","nodesDraggable","selectNodesOnDrag","onNodeDragStart","onSelectionDragStart","unselectNodesAndEdges","mousePos","draggable","getDragItems","d3DragInstance","mousedownx","mousedowny","mousemoving","container","gestures","drag","beforestart","mousemoved","mouseupped","nodrag","touch","nodeDragThreshold","autoPanOnNodeDrag","cancelAnimationFrame","onNodeDragStop","onSelectionDragStop","getClosestHandle","connectionRadius","closestHandles","minDistance","closeNodes","getNodesWithinDistance","allHandles","oppositeHandleType","getHandle","connectionMode","withAbsolutePosition","getHandleType","edgeUpdaterType","handleDomNode","alwaysValid","isValidHandle","fromNodeId","fromHandleId","fromType","doc","lib","flowId","isValidConnection","isTarget","handleBelow","elementFromPoint","handleToCheck","handleNodeId","connectable","connectableEnd","Strict","XYHandle","onPointerDown","autoPanOnConnect","cancelConnection","onConnectStart","onConnect","onConnectEnd","onReconnectEnd","updateConnection","getTransform","getFromHandle","getRootNode","getHostForElement","closestHandle","clickedHandle","fromHandleInternal","fromNodeInternal","newConnection","previousConnection","onPointerMove","onPointerUp","isInsideConnectionRadius","isHandleValid","isConnectionValid","connectionState","finalConnectionState","transformToViewport","viewportToTransform","zoomIdentity","isWrappedWithClass","className","closest","isRightClickPan","panOnDrag","usedButton","includes","getD3Transition","onEnd","hasDuration","factor","XYPanZoom","paneClickDistance","onPanZoom","onPanZoomStart","onPanZoomEnd","onDraggingChange","zoomPanValues","isZoomingOrPanning","usedRightMouseButton","prevViewport","mouseButton","timerId","panScrollTimeout","isPanScrolling","bbox","d3ZoomInstance","setViewportConstrained","d3ZoomHandler","d3DblClickZoomHandler","setTransform","nextTransform","contrainedTransform","noWheelClassName","noPanClassName","onPaneContextMenu","userSelectionActive","panOnScroll","panOnScrollMode","panOnScrollSpeed","preventScrolling","zoomOnPinch","zoomOnScroll","zoomOnDoubleClick","zoomActivationKeyPressed","onTransformChange","wheelHandler","d3Zoom","currentZoom","pinchDelta","deltaNormalize","deltaX","Vertical","Horizontal","internal","nextViewport","createPanOnScrollHandler","createZoomOnScrollHandler","startHandler","createPanZoomStartHandler","panZoomHandler","createPanZoomHandler","panZoomEndHandler","eventViewport","createPanZoomEndHandler","zoomScroll","pinchZoom","buttonAllowed","createFilter","getViewport","zoomTransform","setScaleExtent","setTranslateExtent","syncViewport","currentTransform","setClickDistance","validDistance","ResizeControlVariant","div","div_data_id_value","$$props","onconnect","ondisconnect","isConnectable","isConnectableProp","class","useStore","isValidConnectionStore","addEdge","onedgecreate","onConnectAction","onconnectstart","onConnectStartAction","onconnectend","onConnectEndAction","connections","prevConnections","$$invalidate","$connectable","$connectionLookup","areConnectionMapsEqual","_connections","connectionInProcess","$connection","connectingFrom","connectingTo","isPossibleEndHandle","$connectionMode","valid","isMouseTriggered","$connectionRadius","$domNode","$nodeLookup","$lib","$autoPanOnConnect","$flowId","$isValidConnectionStore","$onedgecreate","$onConnectAction","startParams","$onConnectStartAction","$onConnectEndAction","$viewport","t1_value","label","t0_value","tryToMount","targetEl","portal","useHandleEdgeSelect","selectionRect","selectionRectMode","multiselectionKeyPressed","addSelectedEdges","elementsSelectable","style_transform","div_style_value","style_changed","handleEdgeSelect","path_1","create_if_block_1","create_if_block","if_block0","path","labelStyle","markerStart","markerEnd","interactionWidth","interactionWidthValue","createNodesStore","_set","nds","setDefaultOptions","setOptions","createEdgesStore","eds","nextEdges","initialNodeTypes","input","InputNode","output","OutputNode","default","DefaultNode","GroupNode","initialEdgeTypes","straight","StraightEdgeInternal","smoothstep","SmoothStepEdgeInternal","BezierEdgeInternal","step","getVisibleEdges","visibleEdges","onlyRenderVisibleElements","edgeBox","viewRect","isEdgeVisible","onerror","edgePosition","sourceHandleBounds","targetHandleBounds","getEdgePosition","getVisibleNodes","createStore","fitViewOnCreate","storeNodeOrigin","storeNodeExtent","fitViewOnInit","fitViewOnInitDone","fitViewOptions","selectionKeyPressed","deleteKeyPressed","panActivationKeyPressed","selectionMode","Partial","nodeTypes","edgeTypes","connectionLineType","Bezier","nodesConnectable","markers","defaultMarkerColor","ondelete","onbeforedelete","nodesInitialized","edgesInitialized","viewportInitialized","initialized","getInitialStore","zoomBy","resetSelectedElements","elements","elementsChanged","addSelectedNodes","ids","isMultiSelection","ns","nodeWillBeSelected","es","selectedNodes","selectedEdges","matchingNodes","matchingEdges","nodesToRemove","edgesToRemove","onBeforeDelete","deletable","isIncluded","parentHit","edgeIds","deletableEdges","onBeforeDeleteResult","getElementsToRemove","mN","mE","_connection","defaultColor","defaultMarkerStart","defaultMarkerEnd","markerId","localeCompare","createMarkerIds","initialNodesLength","initialEdgesLength","syncNodeStores","nodesStore","userNodesStore","nodesStoreSetter","userNodesStoreSetter","currentNodesStore","currentUserNodesStore","updatedNodes","syncEdgeStores","edgesStore","userEdgesStore","userEdgesStoreSetter","panZoomStore","viewportStore","userViewportStore","viewportStoreSetter","userViewportStoreSetter","vp","syncViewportStores","setNodeTypes","setEdgeTypes","edgeParams","isEdgeBase","el","connectionExists","addEdgeUtil","nodeDragItems","updateNodeInternalsSystem","updateAbsolutePositions","fitViewSystem","fitViewSync","change","zoomIn","zoomOut","setMinZoom","setMaxZoom","setPaneClickDistance","edgeWillBeSelected","handleNodeSelection","delta","transformChanged","panBySystem","reset","getStore","initialViewport","panZoomInstance","currentViewport","Free","onMoveStart","onMove","onMoveEnd","$viewportInitialized","viewPort","_panOnDrag","$panActivationKeyPressed","_panOnScroll","wrapHandler","toggleSelected","item","isSelected","selectionOnDrag","selectionInProgress","onClick","isSelecting","$selectionKeyPressed","$selectionRect","hasActiveSelection","$elementsSelectable","$selectionRectMode","setPointerCapture","pointerId","startX","startY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","$edges","$selectionMode","selectedEdgeIds","selectedNodeIds","releasePointerCapture","$$value","dragInstance","updateDrag","disabled","noDragClass","resizeObserver","isParent","positionX","positionY","measuredWidth","measuredHeight","dragHandle","nodeRef","prevNodeRef","dispatchNodeEvent","connectableStore","prevType","prevSourcePosition","prevTargetPosition","unobserve","nodeTypeValid","$nodeTypes","nodeComponent","inlineStyleDimensions","styleWidth","styleHeight","getNodeInlineStyleDimensions","observe","nodewrapper_changes","ResizeObserver","entries","entry","disconnect","g_aria_label_value","switch_instance_changes","animated","ariaLabel","onMouseEvent","$edgeLookup","edgeType","edgeComponent","$edgeTypes","markerStartUrl","markerEndUrl","_onMount","_onDestroy","defs","polyline","Arrow","ArrowClosed","markerUnits","orient","strokeWidth","edgewrapper_changes","defaultEdgeOptions","$edgesInitialized","isVisible","selection_changes","show_if","$nodes","__","shortcut","param","enabled","trigger","normalizedTriggers","modifiedMap","alt","altKey","ctrl","shift","meta","metaKey","mergedTrigger","modifier","triggerEnabled","def","originalEvent","newEnabled","newType","getShortcutTrigger","isKeyObject","getModifier","_key","keyString","getKeyString","selectionKey","multiSelectionKey","deleteKey","panActivationKey","zoomActivationKey","composedPath","nodeName","isInputDOMNode","if_block","containerStyle","isCustomComponent","pathParams","$connectionLineType","Step","SmoothStep","div_class_value","positionClasses","hideAttribution","proOptions","updateStore","updateStoreByKeys","prop","useColorModeClass","colorMode","colorModeClass","mediaQuery","matchMedia","updateColorModeClass","connectionLine","div0","div1","connectionline_changes","pane_changes","iframe","tabIndex","contentWindow","onload","zoom_changes","slots","connectionLineStyle","connectionLineContainerStyle","attributionPosition","oninit","initViewport","hasContext","createStoreContext","onInitCalled","$initialized","initialNodes","initialEdges","button_class_value","bgColor","bgColorHover","colorHover","borderColor","create_if_block_3","create_if_block_2","panel_changes","showZoom","showFitView","showLock","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","orientation","buttonProps","isInteractive","$nodesDraggable","$nodesConnectable","minZoomReached","$minZoom","maxZoomReached","$maxZoom","orientationClass","BackgroundVariant","circle","circle_class_value","radius","path_d_value","lineWidth","variant","dotpattern_changes","pattern","pattern_x_value","pattern_y_value","pattern_width_value","pattern_height_value","pattern_patternTransform_value","defaultSize","Dots","Lines","Cross","gap","patternColor","patternClass","patternSize","isDots","isCross","gapXY","patternId","scaledGap","scaledSize","patternDimensions","patternOffset","rect_style_value","shapeRendering","strokeColor","interactive","minimap","getViewScale","zoomStep","pannable","zoomable","inversePan","panStart","zoomAndPanHandler","panCurrent","panDelta","moveScale","nextZoom","XYMinimap","constants_0","svg_viewBox_value","title","getAttrFunction","func","Function","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","maskColor","maskStrokeColor","maskStrokeWidth","containerWidth","containerHeight","nodeColorFunc","nodeStrokeColorFunc","nodeClassFunc","chrome","labelledBy","boundingRect","viewBB","$containerWidth","$containerHeight","elementWidth","elementHeight","scaledWidth","scaledHeight","viewScale","viewWidth","viewHeight","viewboxWidth","viewboxHeight","nodeSize","svg_class_value","isEnd","g9","g8","g7","g1","g0","path0","path1","g2","g3","g4","g5","g6","g13","g12","g11","ellipse0","ellipse1","g10","ellipse2","span","t5_value","hideMsgDetail","msg","rawMsg","div2","div3","div3_class_value","highlight","t5","fontSize","desire","containerElement","textElement","applyFit","floor","scrollWidth","scrollHeight","resizeText","uuid","counter","random","toArray","arrayLike","arr","px","styleProperty","parseFloat","replace","getImageSize","leftBorder","rightBorder","getNodeWidth","topBorder","bottomBorder","getNodeHeight","canvasDimensionLimit","createImage","url","img","Image","decode","crossOrigin","decoding","nodeToDataURL","foreignObject","XMLSerializer","serializeToString","encodeURIComponent","svgToDataURL","isInstanceOfElement","nodePrototype","getPrototypeOf","getPseudoElementStyle","pseudo","content","formatCSSText","getPropertyPriority","formatCSSProperties","clonePseudoElement","nativeNode","clonedNode","err","styleElement","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","webp","getMimeType","extension","getExtension","isDataUrl","search","makeDataUrl","mimeType","fetchAsDataURL","process","fetch","status","blob","reader","FileReader","onloadend","readAsDataURL","cache","resourceToDataURL","resourceUrl","contentType","cacheKey","includeQueryParams","getCacheKey","dataURL","cacheBust","getTime","fetchRequestInit","headers","getContentFromDataUrl","imagePlaceholder","cloneSingleNode","HTMLCanvasElement","canvas","toDataURL","cloneCanvasElement","HTMLVideoElement","video","currentSrc","drawImage","poster","cloneVideoElement","HTMLIFrameElement","_a","contentDocument","body","_b","cloneIFrameElement","isSlotElement","tagName","toUpperCase","decorate","Element","targetStyle","sourceStyle","transformOrigin","endsWith","reducedFont","substring","cloneCSSStyle","clonePseudoElements","HTMLTextAreaElement","HTMLInputElement","cloneInputValue","HTMLSelectElement","clonedSelect","selectedOption","cloneSelectValue","isRoot","assignedNodes","shadowRoot","deferred","clonedChild","cloneChildren","uses","processedDefs","exist","overflow","display","ensureSVGSymbols","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","embed","resourceURL","baseURL","getContentFromUrl","resolvedURL","baseUrl","protocol","implementation","createHTMLDocument","head","href","resolveUrl","escaped","toRegex","shouldEmbed","embedResources","filteredCSSText","str","preferredFontFormat","filterPreferredFontFormat","urls","raw","quotation","parseURLs","css","embedProp","propName","propValue","cssString","embedImages","embedBackground","isImageElement","HTMLImageElement","SVGImageElement","image","loading","srcset","embedImageNode","deferreds","all","embedChildren","cssFetchCache","fetchCSS","embedFonts","regexUrl","loadFonts","loc","startsWith","URL","parseCSS","keyframesRegex","importRegex","unifiedRegex","parseWebFontRules","styleSheets","cssRules","sheet","CSSRule","IMPORT_RULE","importIndex","metadata","rule","insertRule","catch","inline","getCSSRules","FONT_FACE_RULE","getWebFontRules","embedWebFonts","fontEmbedCSS","skipFonts","rules","parentStyleSheet","getWebFontCSS","styleNode","sytleContent","toSvg","backgroundColor","manual","applyStyle","toCanvas","ratio","pixelRatio","FINAL_PROCESS","env","devicePixelRatio","getPixelRatio","canvasWidth","canvasHeight","skipAutoScale","checkCanvasDimensions","fillStyle","fillRect","imageWidth","fileName","nodesBounds","currBox","nodeOrId","isId","getNodesBounds","viewportDomNode","toPng","dataUrl","link","download","click","generateLinks","branchSteps","leavingSteps","isBranchStep","isLeavingStep","findNextStep","steps","currentStepId","parentLoopId","nested","nextStepId","parentLoop","currentIndent","indent","nextStepIndent","handleNormalStep","stepId","links","loopStack","nextStepIndex","findLastStepOfSameLevel","targetLvl","handleBranchStep","failingBranchStepId","checkIfNot1stStep","handleGotoStep","indexedSteps","updatePointersOfLastSteps","handleLeavingStep","stepToPoint","ind","LinkGenerator","li","require$$0","normalSteps","Flow","leveledSteps","isSupportedKeyword","flow","algoText","lines","flows","indentLevels","curIndentLvl","stepIndex","currentFlow","readingHeader","line","trimmedLine","curIndentVal","statement","boundary","trimStart","firstWord","restStatement","count","newmsg","ch","refinedMsg","readStep","SvelteFlowNode","SvelteFlowEdge","sourceId","targetId","sourceType","targetType","srcHandle","mapStepsToNodes","lastNode","parentStack","row","String","lastStep","isStart","flowName","updateProperty","globalState","newProp","edgeStyle","edgeMarkerStyle","highlightedEdgeMarkerStyle","traverseConnections","selectDirection","nSetUp","eSetUp","nSetDown","eSetDown","traverseUpwards","traverseDownwards","seletedNodes","seletedEdges","nodeSet","edgeSet","nodesState","updateNodesStyle","updateEdgesStyle","highlightEdge","unhighlight","unhighlightEdge","t_value","iterations","StepNode","nodeStore","edgeStore","keyPressed","hoveredPathNodes","hoveredPathEdges","flowsData","selectedFlowIndex","nodeConfig","standardShape","handleKeyDown","handleKeyUp","updateSelectedFlow","selectedFlow","flowContent","nodesAndEdges","nAe","flowText2Obj","flowIndex","selected_option","select_value"],"mappings":"AACO,SAASA,IAAS,CAWlB,SAASC,EAAOC,EAAKC,GAE3B,IAAK,MAAMC,KAAKD,EAAKD,EAAIE,GAAKD,EAAIC,GAClC,OAAA,CACD,CAuBO,SAASC,EAAIC,GACnB,OAAOA,GACR,CAEO,SAASC,IACf,OAAOC,OAAOC,OAAO,KACtB,CAMO,SAASC,EAAQC,GACvBA,EAAIC,QAAQP,EACb,CAMO,SAASQ,EAAYC,GAC3B,MAAwB,mBAAVA,CACf,CAGO,SAASC,EAAeC,EAAGC,GACjC,OAAOD,GAAKA,EAAIC,GAAKA,EAAID,IAAMC,GAAMD,GAAkB,iBAANA,GAAgC,mBAANA,CAC5E,CAiDO,SAASE,EAAUF,EAAGC,GAC5B,OAAOD,GAAKA,EAAIC,GAAKA,EAAID,IAAMC,CAChC,CAcO,SAASE,EAAUC,KAAUC,GACnC,GAAa,MAATD,EAAe,CAClB,IAAK,MAAME,KAAYD,EACtBC,OAASC,GAEV,OAAOvB,CACP,CACD,MAAMwB,EAAQJ,EAAMD,aAAaE,GACjC,OAAOG,EAAMC,YAAc,IAAMD,EAAMC,cAAgBD,CACxD,CAUO,SAASE,EAAgBN,GAC/B,IAAIO,EAEJ,OADAR,EAAUC,GAAQQ,GAAOD,EAAQC,GAAjCT,GACOQ,CACR,CAGO,SAASE,EAAoBC,EAAWV,EAAOE,GACrDQ,EAAUC,GAAGC,WAAWC,KAAKd,EAAUC,EAAOE,GAC/C,CAEO,SAASY,EAAYC,EAAYC,EAAKC,EAAS/B,GACrD,GAAI6B,EAAY,CACf,MAAMG,EAAWC,EAAiBJ,EAAYC,EAAKC,EAAS/B,GAC5D,OAAO6B,EAAW,GAAGG,EACrB,CACF,CAEA,SAASC,EAAiBJ,EAAYC,EAAKC,EAAS/B,GACnD,OAAO6B,EAAW,IAAM7B,EAAKL,EAAOoC,EAAQD,IAAII,QAASL,EAAW,GAAG7B,EAAG8B,KAASC,EAAQD,GAC5F,CAEO,SAASK,EAAiBN,EAAYE,EAASK,EAAOpC,GAC5D,GAAI6B,EAAW,IAAM7B,EAAI,CACxB,MAAMqC,EAAOR,EAAW,GAAG7B,EAAGoC,IAC9B,QAAsBnB,IAAlBc,EAAQK,MACX,OAAOC,EAER,GAAoB,iBAATA,EAAmB,CAC7B,MAAMC,EAAS,GACTC,EAAMC,KAAKC,IAAIV,EAAQK,MAAMM,OAAQL,EAAKK,QAChD,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAKI,GAAK,EAC7BL,EAAOK,GAAKZ,EAAQK,MAAMO,GAAKN,EAAKM,GAErC,OAAOL,CACP,CACD,OAAOP,EAAQK,MAAQC,CACvB,CACD,OAAON,EAAQK,KAChB,CAGO,SAASQ,EACfC,EACAC,EACAhB,EACAC,EACAgB,EACAC,GAEA,GAAID,EAAc,CACjB,MAAME,EAAehB,EAAiBa,EAAiBhB,EAAKC,EAASiB,GACrEH,EAAKK,EAAED,EAAcF,EACrB,CACF,CAiBO,SAASI,EAAyBpB,GACxC,GAAIA,EAAQD,IAAIY,OAAS,GAAI,CAC5B,MAAMN,EAAQ,GACRM,EAASX,EAAQD,IAAIY,OAAS,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQC,IAC3BP,EAAMO,IAAM,EAEb,OAAOP,CACP,CACD,OAAQ,CACT,CAGO,SAASgB,EAAuBC,GACtC,MAAMC,EAAS,CAAA,EACf,IAAK,MAAMxD,KAAKuD,EAAoB,MAATvD,EAAE,KAAYwD,EAAOxD,GAAKuD,EAAMvD,IAC3D,OAAOwD,CACR,CAGO,SAASC,EAAmBF,EAAOG,GACzC,MAAMC,EAAO,CAAA,EACbD,EAAO,IAAIE,IAAIF,GACf,IAAK,MAAM1D,KAAKuD,EAAYG,EAAKG,IAAI7D,IAAe,MAATA,EAAE,KAAY2D,EAAK3D,GAAKuD,EAAMvD,IACzE,OAAO2D,CACR,CAqBO,SAASG,EAAcvC,GAC7B,OAAgB,MAATA,EAAgB,GAAKA,CAC7B,CAEO,SAASwC,EAAgB/C,EAAOgD,EAAKzC,GAE3C,OADAP,EAAMiD,IAAI1C,GACHyC,CACR,CAIO,SAASE,EAAiBC,GAChC,OAAOA,GAAiB1D,EAAY0D,EAAcC,SAAWD,EAAcC,QAAUxE,CACtF,CCvRO,MAAMyE,EACM,oBAAXC,OACJA,OACsB,oBAAfC,WACPA,WAEAC,OCuIG,SAASC,EAAOC,EAAQC,GAC9BD,EAAOE,YAAYD,EACpB,CA8FO,SAASE,EAAOH,EAAQC,EAAMG,GACpCJ,EAAOK,aAAaJ,EAAMG,GAAU,KACrC,CAoBO,SAASE,EAAOL,GAClBA,EAAKM,YACRN,EAAKM,WAAWC,YAAYP,EAE9B,CAeO,SAASQ,EAAQC,GACvB,OAAOC,SAASC,cAAcF,EAC/B,CAuCO,SAASG,EAAYH,GAC3B,OAAOC,SAASG,gBAAgB,6BAA8BJ,EAC/D,CAMO,SAASK,EAAKC,GACpB,OAAOL,SAASM,eAAeD,EAChC,CAIO,SAASE,IACf,OAAOH,EAAK,IACb,CAIO,SAASI,IACf,OAAOJ,EAAK,GACb,CAiBO,SAASK,EAAOnB,EAAMoB,EAAOC,EAASC,GAE5C,OADAtB,EAAKuB,iBAAiBH,EAAOC,EAASC,GAC/B,IAAMtB,EAAKwB,oBAAoBJ,EAAOC,EAASC,EACvD,CAwDO,SAASG,EAAKzB,EAAM0B,EAAW9E,GACxB,MAATA,EAAeoD,EAAK2B,gBAAgBD,GAC/B1B,EAAK4B,aAAaF,KAAe9E,GAAOoD,EAAK6B,aAAaH,EAAW9E,EAC/E,CAQA,MAAMkF,EAAmC,CAAC,QAAS,UAO5C,SAASC,EAAe/B,EAAMgC,GAEpC,MAAMC,EAAcxG,OAAOyG,0BAA0BlC,EAAKmC,WAC1D,IAAK,MAAMC,KAAOJ,EACM,MAAnBA,EAAWI,GACdpC,EAAK2B,gBAAgBS,GACH,UAARA,EACVpC,EAAKqC,MAAMC,QAAUN,EAAWI,GACd,YAARA,EACS,EAAOxF,MAAQoD,EAAKoC,GAAOJ,EAAWI,GAEzDH,EAAYG,IACZH,EAAYG,GAAK9C,MACkC,IAAnDwC,EAAiCS,QAAQH,GAEzCpC,EAAKoC,GAAOJ,EAAWI,GAEvBX,EAAKzB,EAAMoC,EAAKJ,EAAWI,GAG9B,CAgXO,SAASI,EAAS1B,EAAMC,GAC9BA,EAAO,GAAKA,EACRD,EAAKC,OAASA,IAClBD,EAAKC,KAA8B,EACpC,CA6CO,SAAS0B,EAAUzC,EAAMoC,EAAKxF,EAAO8F,GAC9B,MAAT9F,EACHoD,EAAKqC,MAAMM,eAAeP,GAE1BpC,EAAKqC,MAAMO,YAAYR,EAAKxF,EAAO8F,EAAY,YAAc,GAE/D,CAIO,SAASG,EAAcC,EAAQlG,EAAOmG,GAC5C,IAAK,IAAI7E,EAAI,EAAGA,EAAI4E,EAAOxB,QAAQrD,OAAQC,GAAK,EAAG,CAClD,MAAM8E,EAASF,EAAOxB,QAAQpD,GAC9B,GAAI8E,EAAOC,UAAYrG,EAEtB,YADAoG,EAAOE,UAAW,EAGnB,CACIH,QAAsBvG,IAAVI,IAChBkG,EAAOK,eAAiB,EAE1B,CAwBA,IAAIC,ECp5BOC,EDw5BJ,SAASC,IACf,QAAoB9G,IAAhB4G,EAA2B,CAC9BA,GAAc,EACd,IACuB,oBAAXzD,QAA0BA,OAAO4D,QACtC5D,OAAO4D,OAAO7C,QAEpB,CAAC,MAAO8C,GACRJ,GAAc,CACd,CACD,CACD,OAAOA,CACR,CAmEO,SAASK,EAAajD,EAASC,EAAMiD,GAE3ClD,EAAQmD,UAAUD,OAAOjD,IAAQiD,EAClC,CA8NO,SAASE,EAA2B7G,EAAW6B,GACrD,OAAO,IAAI7B,EAAU6B,EACtB,CCvsCO,SAASiF,EAAsB9G,GACrCsG,EAAoBtG,CACrB,CAEO,SAAS+G,IACf,IAAKT,EAAmB,MAAM,IAAIU,MAAM,oDACxC,OAAOV,CACR,CA6BO,SAASW,EAAQzI,GACvBuI,IAAwB9G,GAAGiH,SAAS/G,KAAK3B,EAC1C,CAyBO,SAAS2I,EAAU3I,GACzBuI,IAAwB9G,GAAGC,WAAWC,KAAK3B,EAC5C,CAyBO,SAAS4I,IACf,MAAMpH,EAAY+G,IAClB,MAAO,CAACM,EAAMC,GAAUC,cAAa,GAAU,MAC9C,MAAMhI,EAAYS,EAAUC,GAAGV,UAAU8H,GACzC,GAAI9H,EAAW,CAGd,MAAM8E,ED+4BF,SAAsBgD,EAAMC,GAAQE,QAAEA,GAAU,EAAKD,WAAEA,GAAa,GAAU,IACpF,OAAO,IAAIE,YAAYJ,EAAM,CAAEC,SAAQE,UAASD,cACjD,CCj5BiBG,CAAoC,EAAOJ,EAAQ,CAAEC,eAInE,OAHAhI,EAAUmB,QAAQ5B,SAASN,IAC1BA,EAAGmJ,KAAK3H,EAAWqE,EAAM,KAElBA,EAAMuD,gBACd,CACD,OAAO,CAAI,CAEb,CAeO,SAASC,EAAWxC,EAAKyC,GAE/B,OADAf,IAAwB9G,GAAG6H,QAAQvF,IAAI8C,EAAKyC,GACrCA,CACR,CAWO,SAASC,EAAW1C,GAC1B,OAAO0B,IAAwB9G,GAAG6H,QAAQE,IAAI3C,EAC/C,CAmCO,SAAS4C,EAAOjI,EAAWqE,GACjC,MAAM9E,EAAYS,EAAUC,GAAGV,UAAU8E,EAAMgD,MAC3C9H,GAEHA,EAAUmB,QAAQ5B,SAASN,GAAOA,EAAGmJ,KAAKO,KAAM7D,IAElD,CCnLO,MAAM8D,EAAmB,GAEnBC,EAAoB,GAEjC,IAAIC,EAAmB,GAEvB,MAAMC,EAAkB,GAElBC,GAAmCC,QAAQC,UAEjD,IAAIC,IAAmB,EAiBhB,SAASC,GAAoBnK,GACnC6J,EAAiBlI,KAAK3B,EACvB,CAGO,SAASoK,GAAmBpK,GAClC8J,EAAgBnI,KAAK3B,EACtB,CAoBA,MAAMqK,GAAiB,IAAI3G,IAE3B,IAAI4G,GAAW,EAGR,SAASC,KAIf,GAAiB,IAAbD,GACH,OAED,MAAME,EAAkB1C,EACxB,EAAG,CAGF,IACC,KAAOwC,GAAWX,EAAiBjH,QAAQ,CAC1C,MAAMlB,EAAYmI,EAAiBW,IACnCA,KACAhC,EAAsB9G,GACtBiJ,GAAOjJ,EAAUC,GACjB,CACD,CAAC,MAAOiJ,GAIR,MAFAf,EAAiBjH,OAAS,EAC1B4H,GAAW,EACLI,CACN,CAID,IAHApC,EAAsB,MACtBqB,EAAiBjH,OAAS,EAC1B4H,GAAW,EACJV,EAAkBlH,QAAQkH,EAAkBe,KAAlBf,GAIjC,IAAK,IAAIjH,EAAI,EAAGA,EAAIkH,EAAiBnH,OAAQC,GAAK,EAAG,CACpD,MAAM3B,EAAW6I,EAAiBlH,GAC7B0H,GAAe1G,IAAI3C,KAEvBqJ,GAAeO,IAAI5J,GACnBA,IAED,CACD6I,EAAiBnH,OAAS,CAC5B,OAAUiH,EAAiBjH,QAC1B,KAAOoH,EAAgBpH,QACtBoH,EAAgBa,KAAhBb,GAEDI,IAAmB,EACnBG,GAAeQ,QACfvC,EAAsBkC,EACvB,CAGA,SAASC,GAAOhJ,GACf,GAAoB,OAAhBA,EAAGqJ,SAAmB,CACzBrJ,EAAGgJ,SACHrK,EAAQqB,EAAGsJ,eACX,MAAM3I,EAAQX,EAAGW,MACjBX,EAAGW,MAAQ,EAAE,GACbX,EAAGqJ,UAAYrJ,EAAGqJ,SAAS5H,EAAEzB,EAAGK,IAAKM,GACrCX,EAAGuJ,aAAa1K,QAAQ6J,GACxB,CACF,CCtFA,MAAMc,GAAW,IAAIvH,IAKrB,IAAIwH,GAIG,SAASC,KACfD,GAAS,CACRE,EAAG,EACHC,EAAG,GACHnI,EAAGgI,GAEL,CAIO,SAASI,KACVJ,GAAOE,GACXhL,EAAQ8K,GAAOG,GAEhBH,GAASA,GAAOhI,CACjB,CAOO,SAASqI,GAAcC,EAAOC,GAChCD,GAASA,EAAM7I,IAClBsI,GAASS,OAAOF,GAChBA,EAAM7I,EAAE8I,GAEV,CASO,SAASE,GAAeH,EAAOC,EAAO3G,EAAQ9D,GACpD,GAAIwK,GAASA,EAAMI,EAAG,CACrB,GAAIX,GAAStH,IAAI6H,GAAQ,OACzBP,GAASL,IAAIY,GACbN,GAAOG,EAAE1J,MAAK,KACbsJ,GAASS,OAAOF,GACZxK,IACC8D,GAAQ0G,EAAMK,EAAE,GACpB7K,IACA,IAEFwK,EAAMI,EAAEH,EACR,MAAUzK,GACVA,GAEF,CC1FO,SAAS8K,GAAkBC,GACjC,YAA0C9K,IAAnC8K,GAAwBrJ,OAC5BqJ,EACAC,MAAMC,KAAKF,EACf,CAWO,SAASG,GAAwBV,EAAOW,GAC9CR,GAAeH,EAAO,EAAG,GAAG,KAC3BW,EAAOT,OAAOF,EAAM3E,IAAI,GAE1B,CAeO,SAASuF,GACfC,EACAjK,EACAkK,EACAC,EACAzK,EACA0K,EACAL,EACA1H,EACAP,EACAuI,EACAC,EACAC,GAEA,IAAIf,EAAIS,EAAW3J,OACfkK,EAAIJ,EAAK9J,OACTC,EAAIiJ,EACR,MAAMiB,EAAc,CAAA,EACpB,KAAOlK,KAAKkK,EAAYR,EAAW1J,GAAGkE,KAAOlE,EAC7C,MAAMmK,EAAa,GACbC,EAAa,IAAIC,IACjBC,EAAS,IAAID,IACbE,EAAU,GAEhB,IADAvK,EAAIiK,EACGjK,KAAK,CACX,MAAMwK,EAAYR,EAAY7K,EAAK0K,EAAM7J,GACnCkE,EAAMyF,EAAQa,GACpB,IAAI3B,EAAQW,EAAO3C,IAAI3C,GAClB2E,EAGMe,GAEVW,EAAQvL,MAAK,IAAM6J,EAAMtI,EAAEiK,EAAW/K,MAJtCoJ,EAAQiB,EAAkB5F,EAAKsG,GAC/B3B,EAAMH,KAKP0B,EAAWhJ,IAAI8C,EAAMiG,EAAWnK,GAAK6I,GACjC3E,KAAOgG,GAAaI,EAAOlJ,IAAI8C,EAAKrE,KAAK4K,IAAIzK,EAAIkK,EAAYhG,IACjE,CACD,MAAMwG,EAAY,IAAI3J,IAChB4J,EAAW,IAAI5J,IAErB,SAASiB,EAAO6G,GACfD,GAAcC,EAAO,GACrBA,EAAM+B,EAAE9I,EAAMiI,GACdP,EAAOpI,IAAIyH,EAAM3E,IAAK2E,GACtBkB,EAAOlB,EAAMgC,MACbZ,GACA,CACD,KAAOhB,GAAKgB,GAAG,CACd,MAAMa,EAAYX,EAAWF,EAAI,GAC3Bc,EAAYrB,EAAWT,EAAI,GAC3B+B,EAAUF,EAAU5G,IACpB+G,EAAUF,EAAU7G,IACtB4G,IAAcC,GAEjBhB,EAAOe,EAAUD,MACjB5B,IACAgB,KACWG,EAAWpJ,IAAIiK,IAIfzB,EAAOxI,IAAIgK,IAAYN,EAAU1J,IAAIgK,GAChDhJ,EAAO8I,GACGH,EAAS3J,IAAIiK,GACvBhC,IACUqB,EAAOzD,IAAImE,GAAWV,EAAOzD,IAAIoE,IAC3CN,EAAS1C,IAAI+C,GACbhJ,EAAO8I,KAEPJ,EAAUzC,IAAIgD,GACdhC,MAXA1H,EAAQwJ,EAAWvB,GACnBP,IAYD,CACD,KAAOA,KAAK,CACX,MAAM8B,EAAYrB,EAAWT,GACxBmB,EAAWpJ,IAAI+J,EAAU7G,MAAM3C,EAAQwJ,EAAWvB,EACvD,CACD,KAAOS,GAAGjI,EAAOmI,EAAWF,EAAI,IAEhC,OADAxM,EAAQ8M,GACDJ,CACR,CCvHO,SAASe,GAAkBC,EAAQZ,GACzC,MAAMzC,EAAS,CAAA,EACTsD,EAAc,CAAA,EACdC,EAAgB,CAAEjM,QAAS,GACjC,IAAIY,EAAImL,EAAOpL,OACf,KAAOC,KAAK,CACX,MAAMiJ,EAAIkC,EAAOnL,GACXiK,EAAIM,EAAQvK,GAClB,GAAIiK,EAAG,CACN,IAAK,MAAM/F,KAAO+E,EACX/E,KAAO+F,IAAImB,EAAYlH,GAAO,GAErC,IAAK,MAAMA,KAAO+F,EACZoB,EAAcnH,KAClB4D,EAAO5D,GAAO+F,EAAE/F,GAChBmH,EAAcnH,GAAO,GAGvBiH,EAAOnL,GAAKiK,CACf,MACG,IAAK,MAAM/F,KAAO+E,EACjBoC,EAAcnH,GAAO,CAGvB,CACD,IAAK,MAAMA,KAAOkH,EACXlH,KAAO4D,IAASA,EAAO5D,QAAO5F,GAErC,OAAOwJ,CACR,CAEO,SAASwD,GAAkBC,GACjC,MAA+B,iBAAjBA,GAA8C,OAAjBA,EAAwBA,EAAe,EACnF,CCZO,SAASC,GAAK3M,EAAW0D,EAAMlE,GACrC,MAAMoN,EAAQ5M,EAAUC,GAAG4B,MAAM6B,QACnBjE,IAAVmN,IACH5M,EAAUC,GAAG4M,MAAMD,GAASpN,EAC5BA,EAASQ,EAAUC,GAAGK,IAAIsM,IAE5B,CAGO,SAASE,GAAiB9C,GAChCA,GAASA,EAAMH,GAChB,CAQO,SAASkD,GAAgB/M,EAAWgD,EAAQI,GAClD,MAAMkG,SAAEA,EAAQE,aAAEA,GAAiBxJ,EAAUC,GAC7CqJ,GAAYA,EAASyC,EAAE/I,EAAQI,GAE/BuF,IAAoB,KACnB,MAAMqE,EAAiBhN,EAAUC,GAAGiH,SAAS+F,IAAI1O,GAAK2O,OAAOnO,GAIzDiB,EAAUC,GAAGC,WAChBF,EAAUC,GAAGC,WAAWC,QAAQ6M,GAIhCpO,EAAQoO,GAEThN,EAAUC,GAAGiH,SAAW,EAAE,IAE3BsC,EAAa1K,QAAQ6J,GACtB,CAGO,SAASwE,GAAkBnN,EAAWoN,GAC5C,MAAMnN,EAAKD,EAAUC,GACD,OAAhBA,EAAGqJ,YJ+DD,SAAgCzK,GACtC,MAAMwO,EAAW,GACXC,EAAU,GAChBjF,EAAiBvJ,SAAS+K,IAA2B,IAApBhL,EAAI2G,QAAQqE,GAAYwD,EAASlN,KAAK0J,GAAKyD,EAAQnN,KAAK0J,KACzFyD,EAAQxO,SAAS+K,GAAMA,MACvBxB,EAAmBgF,CACpB,CIpEEE,CAAuBtN,EAAGuJ,cAC1B5K,EAAQqB,EAAGC,YACXD,EAAGqJ,UAAYrJ,EAAGqJ,SAASe,EAAE+C,GAG7BnN,EAAGC,WAAaD,EAAGqJ,SAAW,KAC9BrJ,EAAGK,IAAM,GAEX,CAGA,SAASkN,GAAWxN,EAAWmB,IACC,IAA3BnB,EAAUC,GAAGW,MAAM,KACtBuH,EAAiBhI,KAAKH,GJ9DlB0I,KACJA,IAAmB,EACnBH,GAAiBkF,KAAK1E,KI8DtB/I,EAAUC,GAAGW,MAAM8M,KAAK,IAEzB1N,EAAUC,GAAGW,MAAOO,EAAI,GAAM,IAAM,GAAKA,EAAI,EAC9C,CAaO,SAASwM,GACf3N,EACAuE,EACAqJ,EACAC,EACAzO,EACAyC,EACAiM,EAAgB,KAChBlN,EAAQ,EAAE,IAEV,MAAMmN,EAAmBzH,EACzBQ,EAAsB9G,GAEtB,MAAMC,EAAMD,EAAUC,GAAK,CAC1BqJ,SAAU,KACVhJ,IAAK,GAELuB,QACAoH,OAAQ/K,EACRkB,YACAyN,MAAOpO,IAEPyI,SAAU,GACVhH,WAAY,GACZ8N,cAAe,GACfzE,cAAe,GACfC,aAAc,GACd1B,QAAS,IAAI0D,IAAIjH,EAAQuD,UAAYiG,EAAmBA,EAAiB9N,GAAG6H,QAAU,KAEtFvI,UAAWd,IACXmC,QACAqN,YAAY,EACZC,KAAM3J,EAAQvB,QAAU+K,EAAiB9N,GAAGiO,MAE7CJ,GAAiBA,EAAc7N,EAAGiO,MAClC,IAAIC,GAAQ,EAgBZ,GAfAlO,EAAGK,IAAMsN,EACNA,EAAS5N,EAAWuE,EAAQ1C,OAAS,CAAE,GAAE,CAACV,EAAGmB,KAAQL,KACrD,MAAMpC,EAAQoC,EAAKf,OAASe,EAAK,GAAKK,EAKtC,OAJIrC,EAAGK,KAAOlB,EAAUa,EAAGK,IAAIa,GAAKlB,EAAGK,IAAIa,GAAKtB,MAC1CI,EAAGgO,YAAchO,EAAG4M,MAAM1L,IAAIlB,EAAG4M,MAAM1L,GAAGtB,GAC3CsO,GAAOX,GAAWxN,EAAWmB,IAE3BmB,CAAG,IAEV,GACHrC,EAAGgJ,SACHkF,GAAQ,EACRvP,EAAQqB,EAAGsJ,eAEXtJ,EAAGqJ,WAAWuE,GAAkBA,EAAgB5N,EAAGK,KAC/CiE,EAAQvB,OAAQ,CACnB,GAAIuB,EAAQ6J,QAAS,CAIpB,MAAMC,EN4cF,SAAkB5K,GACxB,OAAO+G,MAAMC,KAAKhH,EAAQ6K,WAC3B,CM9ciBC,CAAShK,EAAQvB,QAC/B/C,EAAGqJ,UAAYrJ,EAAGqJ,SAASkF,EAAEH,GAC7BA,EAAMvP,QAAQwE,EACjB,MAEGrD,EAAGqJ,UAAYrJ,EAAGqJ,SAASO,IAExBtF,EAAQkK,OAAO1E,GAAc/J,EAAUC,GAAGqJ,UAC9CyD,GAAgB/M,EAAWuE,EAAQvB,OAAQuB,EAAQnB,QAEnD2F,IACA,CACDjC,EAAsBiH,EACvB,CAmSO,MAAMW,GAQZzO,QAAKR,EAQLkP,WAAQlP,EAGR,QAAAmP,GACCzB,GAAkBjF,KAAM,GACxBA,KAAK0G,SAAW1Q,CAChB,CAQD,GAAA2Q,CAAIxH,EAAM7H,GACT,IAAKT,EAAYS,GAChB,OAAOtB,EAER,MAAMqB,EAAY2I,KAAKjI,GAAGV,UAAU8H,KAAUa,KAAKjI,GAAGV,UAAU8H,GAAQ,IAExE,OADA9H,EAAUY,KAAKX,GACR,KACN,MAAMoN,EAAQrN,EAAUiG,QAAQhG,IACjB,IAAXoN,GAAcrN,EAAUuP,OAAOlC,EAAO,EAAE,CAE7C,CAMD,IAAAmC,CAAKlN,GR/XC,IAAkBmN,EQgYnB9G,KAAKyG,QRhYcK,EQgYKnN,ER/XM,IAA5BnD,OAAOsD,KAAKgN,GAAK9N,UQgYtBgH,KAAKjI,GAAGgO,YAAa,EACrB/F,KAAKyG,MAAM9M,GACXqG,KAAKjI,GAAGgO,YAAa,EAEtB,EC3foB,oBAAXrL,SAETA,OAAOqM,WAAarM,OAAOqM,SAAW,CAAEC,EAAG,IAAIhN,OAAUgN,EAAE9F,ICK/B,KCA9B,MAAM+F,GAAmB,GAWlB,SAASC,GAASvP,EAAOwP,GAC/B,MAAO,CACNhQ,UAAWiQ,GAASzP,EAAOwP,GAAOhQ,UAEpC,CAWO,SAASiQ,GAASzP,EAAOwP,EAAQnR,GAEvC,IAAIqR,EAEJ,MAAMC,EAAc,IAAItN,IAIxB,SAASK,EAAIkN,GACZ,GAAIxQ,EAAeY,EAAO4P,KACzB5P,EAAQ4P,EACJF,GAAM,CAET,MAAMG,GAAaP,GAAiBjO,OACpC,IAAK,MAAMyO,KAAcH,EACxBG,EAAW,KACXR,GAAiBhP,KAAKwP,EAAY9P,GAEnC,GAAI6P,EAAW,CACd,IAAK,IAAIvO,EAAI,EAAGA,EAAIgO,GAAiBjO,OAAQC,GAAK,EACjDgO,GAAiBhO,GAAG,GAAGgO,GAAiBhO,EAAI,IAE7CgO,GAAiBjO,OAAS,CAC1B,CACD,CAEF,CAMD,SAAS+H,EAAOzK,GACf+D,EAAI/D,EAAGqB,GACP,CAuBD,MAAO,CAAE0C,MAAK0G,SAAQ5J,UAhBtB,SAAmBd,EAAKqR,EAAa1R,GAEpC,MAAMyR,EAAa,CAACpR,EAAKqR,GAMzB,OALAJ,EAAYpG,IAAIuG,GACS,IAArBH,EAAYK,OACfN,EAAOF,EAAM9M,EAAK0G,IAAW/K,GAE9BK,EAAIsB,GACG,KACN2P,EAAYtF,OAAOyF,GACM,IAArBH,EAAYK,MAAcN,IAC7BA,IACAA,EAAO,KACP,CAEF,EAEF,CAsCO,SAASO,GAAQC,EAAQvR,EAAIwR,GACnC,MAAMC,GAAUzF,MAAM0F,QAAQH,GAExBI,EAAeF,EAAS,CAACF,GAAUA,EACzC,IAAKI,EAAaC,MAAMC,SACvB,MAAM,IAAIrJ,MAAM,wDAEjB,MAAMsJ,EAAO9R,EAAG0C,OAAS,EACzB,OAAOkO,GAASY,GAAe,CAACzN,EAAK0G,KACpC,IAAIsH,GAAU,EACd,MAAMC,EAAS,GACf,IAAIC,EAAU,EACVC,EAAUxS,EACd,MAAMyS,EAAO,KACZ,GAAIF,EACH,OAEDC,IACA,MAAM5O,EAAStD,EAAGyR,EAASO,EAAO,GAAKA,EAAQjO,EAAK0G,GAChDqH,EACH/N,EAAIT,GAEJ4O,EAAU3R,EAAY+C,GAAUA,EAAS5D,CACzC,EAEI0S,EAAgBT,EAAalD,KAAI,CAAC3N,EAAO6B,IAC9C9B,EACCC,GACCO,IACA2Q,EAAOrP,GAAKtB,EACZ4Q,KAAa,GAAKtP,GACdoP,GACHI,GACA,IAEF,KACCF,GAAW,GAAKtP,CAAC,MAMpB,OAFAoP,GAAU,EACVI,IACO,WACN/R,EAAQgS,GACRF,IAIAH,GAAU,CACb,CAAG,GAEH,CCtLe,SAASM,GAAGC,GACzB,GAAqB,iBAAVA,GAAuC,iBAAVA,EAAoB,MAAO,GAAKA,EAExE,IAAIC,EAAM,GAEV,GAAIvG,MAAM0F,QAAQY,GAChB,IAAK,IAAWE,EAAP7P,EAAI,EAAQA,EAAI2P,EAAM5P,OAAQC,IACR,MAAxB6P,EAAMH,GAAGC,EAAM3P,OAClB4P,IAAQA,GAAO,KAAOC,QAI1B,IAAK,IAAI1S,KAAKwS,EACRA,EAAMxS,KAAIyS,IAAQA,GAAO,KAAOzS,GAIxC,OAAOyS,CACT,CClBA,IAAI7S,GAAO,CAAC2B,MAAO,QAEnB,SAASoR,KACP,IAAK,IAAyCC,EAArC/P,EAAI,EAAGiK,EAAI+F,UAAUjQ,OAAQpB,EAAI,CAAA,EAAOqB,EAAIiK,IAAKjK,EAAG,CAC3D,KAAM+P,EAAIC,UAAUhQ,GAAK,KAAQ+P,KAAKpR,GAAM,QAAQsR,KAAKF,GAAI,MAAM,IAAIlK,MAAM,iBAAmBkK,GAChGpR,EAAEoR,GAAK,EACR,CACD,OAAO,IAAIG,GAASvR,EACtB,CAEA,SAASuR,GAASvR,GAChBoI,KAAKpI,EAAIA,CACX,CAoDA,SAASkI,GAAIX,EAAM3D,GACjB,IAAK,IAA4BmG,EAAxB1I,EAAI,EAAGiK,EAAI/D,EAAKnG,OAAWC,EAAIiK,IAAKjK,EAC3C,IAAK0I,EAAIxC,EAAKlG,IAAIuC,OAASA,EACzB,OAAOmG,EAAEhK,KAGf,CAEA,SAAS0C,GAAI8E,EAAM3D,EAAMlE,GACvB,IAAK,IAAI2B,EAAI,EAAGiK,EAAI/D,EAAKnG,OAAQC,EAAIiK,IAAKjK,EACxC,GAAIkG,EAAKlG,GAAGuC,OAASA,EAAM,CACzB2D,EAAKlG,GAAKjD,GAAMmJ,EAAOA,EAAK3G,MAAM,EAAGS,GAAGmQ,OAAOjK,EAAK3G,MAAMS,EAAI,IAC9D,KACD,CAGH,OADgB,MAAZ3B,GAAkB6H,EAAKlH,KAAK,CAACuD,KAAMA,EAAM7D,MAAOL,IAC7C6H,CACT,CA1DAgK,GAASE,UAAYN,GAASM,UAAY,CACxCC,YAAaH,GACbI,GAAI,SAASC,EAAUlS,GACrB,IAEI0R,EAd2BS,EAY3B7R,EAAIoI,KAAKpI,EACT8R,GAb2BD,EAaO7R,GAAf4R,EAAW,IAZnBG,OAAOC,MAAM,SAAS7E,KAAI,SAASiE,GAClD,IAAIxN,EAAO,GAAIvC,EAAI+P,EAAE1L,QAAQ,KAE7B,GADIrE,GAAK,IAAGuC,EAAOwN,EAAExQ,MAAMS,EAAI,GAAI+P,EAAIA,EAAExQ,MAAM,EAAGS,IAC9C+P,IAAMS,EAAMI,eAAeb,GAAI,MAAM,IAAIlK,MAAM,iBAAmBkK,GACtE,MAAO,CAAC7J,KAAM6J,EAAGxN,KAAMA,EAC3B,KASQvC,GAAK,EACLiK,EAAIwG,EAAE1Q,OAGV,KAAIiQ,UAAUjQ,OAAS,GAAvB,CAOA,GAAgB,MAAZ1B,GAAwC,mBAAbA,EAAyB,MAAM,IAAIwH,MAAM,qBAAuBxH,GAC/F,OAAS2B,EAAIiK,GACX,GAAI8F,GAAKQ,EAAWE,EAAEzQ,IAAIkG,KAAMvH,EAAEoR,GAAK3O,GAAIzC,EAAEoR,GAAIQ,EAAShO,KAAMlE,QAC3D,GAAgB,MAAZA,EAAkB,IAAK0R,KAAKpR,EAAGA,EAAEoR,GAAK3O,GAAIzC,EAAEoR,GAAIQ,EAAShO,KAAM,MAG1E,OAAOwE,IAVN,CAFC,OAAS/G,EAAIiK,OAAQ8F,GAAKQ,EAAWE,EAAEzQ,IAAIkG,QAAU6J,EAAIlJ,GAAIlI,EAAEoR,GAAIQ,EAAShO,OAAQ,OAAOwN,CAa9F,EACDc,KAAM,WACJ,IAAIA,EAAO,CAAE,EAAElS,EAAIoI,KAAKpI,EACxB,IAAK,IAAIoR,KAAKpR,EAAGkS,EAAKd,GAAKpR,EAAEoR,GAAGxQ,QAChC,OAAO,IAAI2Q,GAASW,EACrB,EACDrK,KAAM,SAASN,EAAM4K,GACnB,IAAK7G,EAAI+F,UAAUjQ,OAAS,GAAK,EAAG,IAAK,IAAgCkK,EAAG8F,EAA/BgB,EAAO,IAAI1H,MAAMY,GAAIjK,EAAI,EAASA,EAAIiK,IAAKjK,EAAG+Q,EAAK/Q,GAAKgQ,UAAUhQ,EAAI,GACnH,IAAK+G,KAAKpI,EAAEiS,eAAe1K,GAAO,MAAM,IAAIL,MAAM,iBAAmBK,GACrE,IAAuBlG,EAAI,EAAGiK,GAAzB8F,EAAIhJ,KAAKpI,EAAEuH,IAAoBnG,OAAQC,EAAIiK,IAAKjK,EAAG+P,EAAE/P,GAAGtB,MAAMsS,MAAMF,EAAMC,EAChF,EACDC,MAAO,SAAS9K,EAAM4K,EAAMC,GAC1B,IAAKhK,KAAKpI,EAAEiS,eAAe1K,GAAO,MAAM,IAAIL,MAAM,iBAAmBK,GACrE,IAAK,IAAI6J,EAAIhJ,KAAKpI,EAAEuH,GAAOlG,EAAI,EAAGiK,EAAI8F,EAAEhQ,OAAQC,EAAIiK,IAAKjK,EAAG+P,EAAE/P,GAAGtB,MAAMsS,MAAMF,EAAMC,EACpF,GC7DI,IAAIE,GAAQ,+BAEJC,GAAA,CACbC,IAAK,6BACLF,MAAOA,GACPG,MAAO,+BACPC,IAAK,uCACLC,MAAO,iCCLM,SAAQC,GAAChP,GACtB,IAAIiP,EAASjP,GAAQ,GAAIvC,EAAIwR,EAAOnN,QAAQ,KAE5C,OADIrE,GAAK,GAAqC,WAA/BwR,EAASjP,EAAKhD,MAAM,EAAGS,MAAiBuC,EAAOA,EAAKhD,MAAMS,EAAI,IACtEkR,GAAWN,eAAeY,GAAU,CAACzO,MAAOmO,GAAWM,GAAS1I,MAAOvG,GAAQA,CACxF,CCHA,SAASkP,GAAelP,GACtB,OAAO,WACL,IAAIC,EAAWuE,KAAK2K,cAChBC,EAAM5K,KAAK6K,aACf,OAAOD,IAAQV,IAASzO,EAASqP,gBAAgBD,eAAiBX,GAC5DzO,EAASC,cAAcF,GACvBC,EAASG,gBAAgBgP,EAAKpP,EACxC,CACA,CAEA,SAASuP,GAAaC,GACpB,OAAO,WACL,OAAOhL,KAAK2K,cAAc/O,gBAAgBoP,EAAShP,MAAOgP,EAASjJ,MACvE,CACA,CAEe,SAAQkJ,GAACzP,GACtB,IAAIwP,EAAWR,GAAUhP,GACzB,OAAQwP,EAASjJ,MACXgJ,GACAL,IAAgBM,EACxB,CCxBA,SAASE,KAAS,CAEH,SAAQC,GAACA,GACtB,OAAmB,MAAZA,EAAmBD,GAAO,WAC/B,OAAOlL,KAAKoL,cAAcD,EAC9B,CACA,CCNA,SAASlP,KACP,MAAO,EACT,CAEe,SAAQoP,GAACF,GACtB,OAAmB,MAAZA,EAAmBlP,GAAQ,WAChC,OAAO+D,KAAKsL,iBAAiBH,EACjC,CACA,CCJA,SAASI,GAAS1N,GAChB,OAAO,WACL,OCCU,OADgB2N,EDAb3N,EAAOoM,MAAMjK,KAAMiJ,YCCf,GAAK3G,MAAM0F,QAAQwD,GAAKA,EAAIlJ,MAAMC,KAAKiJ,GAD7C,IAAeA,CDC9B,CACA,CERe,SAAQC,GAACN,GACtB,OAAO,WACL,OAAOnL,KAAK0L,QAAQP,EACxB,CACA,CAEO,SAASQ,GAAaR,GAC3B,OAAO,SAASpQ,GACd,OAAOA,EAAK2Q,QAAQP,EACxB,CACA,CCRA,IAAIS,GAAOtJ,MAAM+G,UAAUuC,KAQ3B,SAASC,KACP,OAAO7L,KAAK8L,iBACd,CCVA,IAAI9G,GAAS1C,MAAM+G,UAAUrE,OAE7B,SAASqB,KACP,OAAO/D,MAAMC,KAAKvC,KAAKqG,SACzB,CCNe,SAAQ0F,GAAChL,GACtB,OAAO,IAAIuB,MAAMvB,EAAO/H,OAC1B,CCKO,SAASgT,GAAU1N,EAAQ2N,GAChCjM,KAAK2K,cAAgBrM,EAAOqM,cAC5B3K,KAAK6K,aAAevM,EAAOuM,aAC3B7K,KAAKkM,MAAQ,KACblM,KAAKmM,QAAU7N,EACf0B,KAAKoM,SAAWH,CAClB,CCTA,SAASI,GAAU/N,EAAQgO,EAAOC,EAAOxL,EAAQyL,EAAM1Q,GASrD,IARA,IACIf,EADA9B,EAAI,EAEJwT,EAAcH,EAAMtT,OACpB0T,EAAa5Q,EAAK9C,OAKfC,EAAIyT,IAAczT,GACnB8B,EAAOuR,EAAMrT,KACf8B,EAAKqR,SAAWtQ,EAAK7C,GACrB8H,EAAO9H,GAAK8B,GAEZwR,EAAMtT,GAAK,IAAI+S,GAAU1N,EAAQxC,EAAK7C,IAK1C,KAAOA,EAAIwT,IAAexT,GACpB8B,EAAOuR,EAAMrT,MACfuT,EAAKvT,GAAK8B,EAGhB,CAEA,SAAS4R,GAAQrO,EAAQgO,EAAOC,EAAOxL,EAAQyL,EAAM1Q,EAAMqB,GACzD,IAAIlE,EACA8B,EAKA6R,EAJAC,EAAiB,IAAIvJ,IACrBmJ,EAAcH,EAAMtT,OACpB0T,EAAa5Q,EAAK9C,OAClB8T,EAAY,IAAIxK,MAAMmK,GAK1B,IAAKxT,EAAI,EAAGA,EAAIwT,IAAexT,GACzB8B,EAAOuR,EAAMrT,MACf6T,EAAU7T,GAAK2T,EAAWzP,EAAIsC,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,GAAS,GAChEO,EAAe5S,IAAI2S,GACrBJ,EAAKvT,GAAK8B,EAEV8R,EAAexS,IAAIuS,EAAU7R,IAQnC,IAAK9B,EAAI,EAAGA,EAAIyT,IAAczT,EAC5B2T,EAAWzP,EAAIsC,KAAKnB,EAAQxC,EAAK7C,GAAIA,EAAG6C,GAAQ,IAC5Cf,EAAO8R,EAAe/M,IAAI8M,KAC5B7L,EAAO9H,GAAK8B,EACZA,EAAKqR,SAAWtQ,EAAK7C,GACrB4T,EAAe7K,OAAO4K,IAEtBL,EAAMtT,GAAK,IAAI+S,GAAU1N,EAAQxC,EAAK7C,IAK1C,IAAKA,EAAI,EAAGA,EAAIwT,IAAexT,GACxB8B,EAAOuR,EAAMrT,KAAQ4T,EAAe/M,IAAIgN,EAAU7T,MAAQ8B,IAC7DyR,EAAKvT,GAAK8B,EAGhB,CAEA,SAASkR,GAAMlR,GACb,OAAOA,EAAKqR,QACd,CA+CA,SAASW,GAAUjR,GACjB,MAAuB,iBAATA,GAAqB,WAAYA,EAC3CA,EACAwG,MAAMC,KAAKzG,EACjB,CC1GA,SAASkR,GAAUhW,EAAGC,GACpB,OAAOD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAIgW,GAC/C,CCrBA,SAASC,GAAW1R,GAClB,OAAO,WACLwE,KAAKtD,gBAAgBlB,EACzB,CACA,CAEA,SAAS2R,GAAanC,GACpB,OAAO,WACLhL,KAAKoN,kBAAkBpC,EAAShP,MAAOgP,EAASjJ,MACpD,CACA,CAEA,SAASsL,GAAa7R,EAAM7D,GAC1B,OAAO,WACLqI,KAAKpD,aAAapB,EAAM7D,EAC5B,CACA,CAEA,SAAS2V,GAAetC,EAAUrT,GAChC,OAAO,WACLqI,KAAKuN,eAAevC,EAAShP,MAAOgP,EAASjJ,MAAOpK,EACxD,CACA,CAEA,SAAS6V,GAAahS,EAAM7D,GAC1B,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WACjB,MAALjC,EAAWhH,KAAKtD,gBAAgBlB,GAC/BwE,KAAKpD,aAAapB,EAAMwL,EACjC,CACA,CAEA,SAASyG,GAAezC,EAAUrT,GAChC,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WACjB,MAALjC,EAAWhH,KAAKoN,kBAAkBpC,EAAShP,MAAOgP,EAASjJ,OAC1D/B,KAAKuN,eAAevC,EAAShP,MAAOgP,EAASjJ,MAAOiF,EAC7D,CACA,CCxCe,SAAQ0G,GAAC3S,GACtB,OAAQA,EAAK4P,eAAiB5P,EAAK4P,cAAc+C,aACzC3S,EAAKU,UAAYV,GAClBA,EAAK2S,WACd,CCFA,SAASC,GAAYnS,GACnB,OAAO,WACLwE,KAAK5C,MAAMM,eAAelC,EAC9B,CACA,CAEA,SAASoS,GAAcpS,EAAM7D,EAAOkW,GAClC,OAAO,WACL7N,KAAK5C,MAAMO,YAAYnC,EAAM7D,EAAOkW,EACxC,CACA,CAEA,SAASC,GAActS,EAAM7D,EAAOkW,GAClC,OAAO,WACL,IAAI7G,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WACjB,MAALjC,EAAWhH,KAAK5C,MAAMM,eAAelC,GACpCwE,KAAK5C,MAAMO,YAAYnC,EAAMwL,EAAG6G,EACzC,CACA,CAWO,SAASE,GAAWhT,EAAMS,GAC/B,OAAOT,EAAKqC,MAAM4Q,iBAAiBxS,IAC5BkS,GAAY3S,GAAMkT,iBAAiBlT,EAAM,MAAMiT,iBAAiBxS,EACzE,CClCA,SAAS0S,GAAe1S,GACtB,OAAO,kBACEwE,KAAKxE,EAChB,CACA,CAEA,SAAS2S,GAAiB3S,EAAM7D,GAC9B,OAAO,WACLqI,KAAKxE,GAAQ7D,CACjB,CACA,CAEA,SAASyW,GAAiB5S,EAAM7D,GAC9B,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WACjB,MAALjC,SAAkBhH,KAAKxE,GACtBwE,KAAKxE,GAAQwL,CACtB,CACA,CClBA,SAASqH,GAAWC,GAClB,OAAOA,EAAO3E,OAAOC,MAAM,QAC7B,CAEA,SAASlL,GAAU3D,GACjB,OAAOA,EAAK2D,WAAa,IAAI6P,GAAUxT,EACzC,CAEA,SAASwT,GAAUxT,GACjBiF,KAAKwO,MAAQzT,EACbiF,KAAKyO,OAASJ,GAAWtT,EAAK4B,aAAa,UAAY,GACzD,CAsBA,SAAS+R,GAAW3T,EAAM6N,GAExB,IADA,IAAI9F,EAAOpE,GAAU3D,GAAO9B,GAAK,EAAGiK,EAAI0F,EAAM5P,SACrCC,EAAIiK,GAAGJ,EAAK5B,IAAI0H,EAAM3P,GACjC,CAEA,SAAS0V,GAAc5T,EAAM6N,GAE3B,IADA,IAAI9F,EAAOpE,GAAU3D,GAAO9B,GAAK,EAAGiK,EAAI0F,EAAM5P,SACrCC,EAAIiK,GAAGJ,EAAK8L,OAAOhG,EAAM3P,GACpC,CAEA,SAAS4V,GAAYjG,GACnB,OAAO,WACL8F,GAAW1O,KAAM4I,EACrB,CACA,CAEA,SAASkG,GAAalG,GACpB,OAAO,WACL+F,GAAc3O,KAAM4I,EACxB,CACA,CAEA,SAASmG,GAAgBnG,EAAOjR,GAC9B,OAAO,YACJA,EAAMsS,MAAMjK,KAAMiJ,WAAayF,GAAaC,IAAe3O,KAAM4I,EACtE,CACA,CC3DA,SAASoG,KACPhP,KAAKiP,YAAc,EACrB,CAEA,SAASC,GAAavX,GACpB,OAAO,WACLqI,KAAKiP,YAActX,CACvB,CACA,CAEA,SAASwX,GAAaxX,GACpB,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WAC1BjJ,KAAKiP,YAAmB,MAALjI,EAAY,GAAKA,CACxC,CACA,CCfA,SAASoI,KACPpP,KAAKqP,UAAY,EACnB,CAEA,SAASC,GAAa3X,GACpB,OAAO,WACLqI,KAAKqP,UAAY1X,CACrB,CACA,CAEA,SAAS4X,GAAa5X,GACpB,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WAC1BjJ,KAAKqP,UAAiB,MAALrI,EAAY,GAAKA,CACtC,CACA,CCfA,SAASwI,KACHxP,KAAKyP,aAAazP,KAAK3E,WAAWL,YAAYgF,KACpD,CCFA,SAAS0P,KACH1P,KAAK2P,iBAAiB3P,KAAK3E,WAAWF,aAAa6E,KAAMA,KAAK3E,WAAWuU,WAC/E,CCCA,SAASC,KACP,OAAO,IACT,CCLA,SAASjB,KACP,IAAItQ,EAAS0B,KAAK3E,WACdiD,GAAQA,EAAOhD,YAAY0E,KACjC,CCHA,SAAS8P,KACP,IAAIC,EAAQ/P,KAAKgQ,WAAU,GAAQ1R,EAAS0B,KAAK3E,WACjD,OAAOiD,EAASA,EAAOnD,aAAa4U,EAAO/P,KAAKyP,aAAeM,CACjE,CAEA,SAASE,KACP,IAAIF,EAAQ/P,KAAKgQ,WAAU,GAAO1R,EAAS0B,KAAK3E,WAChD,OAAOiD,EAASA,EAAOnD,aAAa4U,EAAO/P,KAAKyP,aAAeM,CACjE,CCMA,SAASG,GAAS1G,GAChB,OAAO,WACL,IAAID,EAAKvJ,KAAKmQ,KACd,GAAK5G,EAAL,CACA,IAAK,IAAkCrH,EAA9BkO,EAAI,EAAGnX,GAAK,EAAG4K,EAAI0F,EAAGvQ,OAAWoX,EAAIvM,IAAKuM,EAC7ClO,EAAIqH,EAAG6G,GAAM5G,EAASrK,MAAQ+C,EAAE/C,OAASqK,EAASrK,MAAS+C,EAAE1G,OAASgO,EAAShO,KAGjF+N,IAAKtQ,GAAKiJ,EAFVlC,KAAKzD,oBAAoB2F,EAAE/C,KAAM+C,EAAEmO,SAAUnO,EAAE7F,WAK7CpD,EAAGsQ,EAAGvQ,OAASC,SACT+G,KAAKmQ,IATD,CAUpB,CACA,CAEA,SAASG,GAAM9G,EAAU7R,EAAO0E,GAC9B,OAAO,WACL,IAAoB6F,EAAhBqH,EAAKvJ,KAAKmQ,KAASE,EAhC3B,SAAyBA,GACvB,OAAO,SAASlU,GACdkU,EAAS5Q,KAAKO,KAAM7D,EAAO6D,KAAKoM,SACpC,CACA,CA4BsCmE,CAAgB5Y,GAClD,GAAI4R,EAAI,IAAK,IAAI6G,EAAI,EAAGvM,EAAI0F,EAAGvQ,OAAQoX,EAAIvM,IAAKuM,EAC9C,IAAKlO,EAAIqH,EAAG6G,IAAIjR,OAASqK,EAASrK,MAAQ+C,EAAE1G,OAASgO,EAAShO,KAI5D,OAHAwE,KAAKzD,oBAAoB2F,EAAE/C,KAAM+C,EAAEmO,SAAUnO,EAAE7F,SAC/C2D,KAAK1D,iBAAiB4F,EAAE/C,KAAM+C,EAAEmO,SAAWA,EAAUnO,EAAE7F,QAAUA,QACjE6F,EAAEvK,MAAQA,GAIdqI,KAAK1D,iBAAiBkN,EAASrK,KAAMkR,EAAUhU,GAC/C6F,EAAI,CAAC/C,KAAMqK,EAASrK,KAAM3D,KAAMgO,EAAShO,KAAM7D,MAAOA,EAAO0Y,SAAUA,EAAUhU,QAASA,GACrFkN,EACAA,EAAGtR,KAAKiK,GADJlC,KAAKmQ,KAAO,CAACjO,EAE1B,CACA,CC5CA,SAASsO,GAAczV,EAAMoE,EAAMsR,GACjC,IAAI/V,EAASgT,GAAY3S,GACrBoB,EAAQzB,EAAO6E,YAEE,mBAAVpD,EACTA,EAAQ,IAAIA,EAAMgD,EAAMsR,IAExBtU,EAAQzB,EAAOe,SAASiV,YAAY,SAChCD,GAAQtU,EAAMwU,UAAUxR,EAAMsR,EAAOnR,QAASmR,EAAOpR,YAAalD,EAAMiD,OAASqR,EAAOrR,QACvFjD,EAAMwU,UAAUxR,GAAM,GAAO,IAGpCpE,EAAKyV,cAAcrU,EACrB,CAEA,SAASyU,GAAiBzR,EAAMsR,GAC9B,OAAO,WACL,OAAOD,GAAcxQ,KAAMb,EAAMsR,EACrC,CACA,CAEA,SAASI,GAAiB1R,EAAMsR,GAC9B,OAAO,WACL,OAAOD,GAAcxQ,KAAMb,EAAMsR,EAAOxG,MAAMjK,KAAMiJ,WACxD,CACA,ChBZA+C,GAAU3C,UAAY,CACpBC,YAAa0C,GACbhR,YAAa,SAAS8V,GAAS,OAAO9Q,KAAKmM,QAAQhR,aAAa2V,EAAO9Q,KAAKkM,MAAS,EACrF/Q,aAAc,SAAS2V,EAAO9N,GAAQ,OAAOhD,KAAKmM,QAAQhR,aAAa2V,EAAO9N,EAAQ,EACtFoI,cAAe,SAASD,GAAY,OAAOnL,KAAKmM,QAAQf,cAAcD,EAAY,EAClFG,iBAAkB,SAASH,GAAY,OAAOnL,KAAKmM,QAAQb,iBAAiBH,EAAY,GOP1FoD,GAAUlF,UAAY,CACpBnI,IAAK,SAAS1F,GACJwE,KAAKyO,OAAOnR,QAAQ9B,GACpB,IACNwE,KAAKyO,OAAOxW,KAAKuD,GACjBwE,KAAKwO,MAAM5R,aAAa,QAASoD,KAAKyO,OAAOsC,KAAK,MAErD,EACDnC,OAAQ,SAASpT,GACf,IAAIvC,EAAI+G,KAAKyO,OAAOnR,QAAQ9B,GACxBvC,GAAK,IACP+G,KAAKyO,OAAO7H,OAAO3N,EAAG,GACtB+G,KAAKwO,MAAM5R,aAAa,QAASoD,KAAKyO,OAAOsC,KAAK,MAErD,EACDC,SAAU,SAASxV,GACjB,OAAOwE,KAAKyO,OAAOnR,QAAQ9B,IAAS,CACrC,GUKI,IAAIwK,GAAO,CAAC,MAEZ,SAASiL,GAAUC,EAAQC,GAChCnR,KAAKoR,QAAUF,EACflR,KAAKqR,SAAWF,CAClB,CAEA,SAASG,KACP,OAAO,IAAIL,GAAU,CAAC,CAACxV,SAASqP,kBAAmB9E,GACrD,CC1Ce,SAAQnI,GAACsN,GACtB,MAA2B,iBAAbA,EACR,IAAI8F,GAAU,CAAC,CAACxV,SAAS2P,cAAcD,KAAa,CAAC1P,SAASqP,kBAC9D,IAAImG,GAAU,CAAC,CAAC9F,IAAYnF,GACpC,CCJe,SAAAuL,GAASpV,EAAOpB,GAG7B,GAFAoB,ECHa,SAASA,GACtB,IAAIqV,EACJ,KAAOA,EAAcrV,EAAMqV,aAAarV,EAAQqV,EAChD,OAAOrV,CACT,CDDUqV,CAAYrV,QACP5E,IAATwD,IAAoBA,EAAOoB,EAAMsV,eACjC1W,EAAM,CACR,IAAIqP,EAAMrP,EAAK2W,iBAAmB3W,EAClC,GAAIqP,EAAIuH,eAAgB,CACtB,IAAIC,EAAQxH,EAAIuH,iBAGhB,OAFAC,EAAMpG,EAAIrP,EAAM0V,QAASD,EAAME,EAAI3V,EAAM4V,QAElC,EADPH,EAAQA,EAAMI,gBAAgBjX,EAAKkX,eAAeC,YACpC1G,EAAGoG,EAAME,EACxB,CACD,GAAI/W,EAAKoX,sBAAuB,CAC9B,IAAIC,EAAOrX,EAAKoX,wBAChB,MAAO,CAAChW,EAAM0V,QAAUO,EAAKC,KAAOtX,EAAKuX,WAAYnW,EAAM4V,QAAUK,EAAKG,IAAMxX,EAAKyX,UACtF,CACF,CACD,MAAO,CAACrW,EAAMsW,MAAOtW,EAAMuW,MAC7B,CF+BAzB,GAAU5H,UAAYiI,GAAUjI,UAAY,CAC1CC,YAAa2H,GACbpT,OIjDa,SAASA,GACA,mBAAXA,IAAuBA,EAASsN,GAAStN,IAEpD,IAAK,IAAIqT,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,IAAIrQ,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAC3F,IAAK,IAAiFrV,EAAM6X,EAAnFtG,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAQ6Z,EAAWF,EAAUvC,GAAK,IAAI9N,MAAMY,GAAmBjK,EAAI,EAAGA,EAAIiK,IAAKjK,GAC9G8B,EAAOuR,EAAMrT,MAAQ2Z,EAAU/U,EAAO4B,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,MAClE,aAAcvR,IAAM6X,EAAQxG,SAAWrR,EAAKqR,UAChDyG,EAAS5Z,GAAK2Z,GAKpB,OAAO,IAAI3B,GAAU0B,EAAW3S,KAAKqR,SACvC,EJqCEyB,UvB3Ca,SAASjV,GACYA,EAAZ,mBAAXA,EAAgC0N,GAAS1N,GACtCwN,GAAYxN,GAE1B,IAAK,IAAIqT,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,GAAIxB,EAAU,GAAIf,EAAI,EAAGA,EAAIvM,IAAKuM,EAC/F,IAAK,IAAyCrV,EAArCuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAcC,EAAI,EAAGA,EAAIiK,IAAKjK,GAC9D8B,EAAOuR,EAAMrT,MACf0Z,EAAU1a,KAAK4F,EAAO4B,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,IACnD6E,EAAQlZ,KAAK8C,IAKnB,OAAO,IAAIkW,GAAU0B,EAAWxB,EAClC,EuB8BE4B,YpBxCa,SAASC,GACtB,OAAOhT,KAAKnC,OAAgB,MAATmV,EAAgBnH,GAXrC,SAAmBmH,GACjB,OAAO,WACL,OAAOpH,GAAKnM,KAAKO,KAAKqG,SAAU2M,EACpC,CACA,CAQQC,CAA2B,mBAAVD,EAAuBA,EAAQrH,GAAaqH,IACrE,EoBsCEE,enBzCa,SAASF,GACtB,OAAOhT,KAAK8S,UAAmB,MAATE,EAAgB3M,GAPxC,SAAwB2M,GACtB,OAAO,WACL,OAAOhO,GAAOvF,KAAKO,KAAKqG,SAAU2M,EACtC,CACA,CAIQG,CAAgC,mBAAVH,EAAuBA,EAAQrH,GAAaqH,IAC1E,EmBuCEhO,OKrDa,SAASgO,GACD,mBAAVA,IAAsBA,EAAQvH,GAAQuH,IAEjD,IAAK,IAAI9B,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,IAAIrQ,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAC3F,IAAK,IAAuErV,EAAnEuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAQ6Z,EAAWF,EAAUvC,GAAK,GAAUnX,EAAI,EAAGA,EAAIiK,IAAKjK,GAC3F8B,EAAOuR,EAAMrT,KAAO+Z,EAAMvT,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,IAC1DuG,EAAS5a,KAAK8C,GAKpB,OAAO,IAAIkW,GAAU0B,EAAW3S,KAAKqR,SACvC,EL0CEvV,KhBqBa,SAASnE,EAAOwF,GAC7B,IAAK8L,UAAUjQ,OAAQ,OAAOsJ,MAAMC,KAAKvC,KAAMiM,IAE/C,IsBjFsBT,EtBiFlB/G,EAAOtH,EAAMwP,GAAUN,GACvB8E,EAAUnR,KAAKqR,SACfH,EAASlR,KAAKoR,QAEG,mBAAVzZ,IsBrFW6T,EtBqF4B7T,EAAjBA,EsBpF1B,WACL,OAAO6T,CACX,GtBoFE,IAAK,IAAI3H,EAAIqN,EAAOlY,OAAQ+H,EAAS,IAAIuB,MAAMuB,GAAI0I,EAAQ,IAAIjK,MAAMuB,GAAI2I,EAAO,IAAIlK,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAAG,CAC/G,IAAI9R,EAAS6S,EAAQf,GACjB9D,EAAQ4E,EAAOd,GACf3D,EAAcH,EAAMtT,OACpB8C,EAAOiR,GAAUpV,EAAM8H,KAAKnB,EAAQA,GAAUA,EAAO8N,SAAUgE,EAAGe,IAClEzE,EAAa5Q,EAAK9C,OAClBoa,EAAa7G,EAAM6D,GAAK,IAAI9N,MAAMoK,GAClC2G,EAActS,EAAOqP,GAAK,IAAI9N,MAAMoK,GAGxCjI,EAAKnG,EAAQgO,EAAO8G,EAAYC,EAFhB7G,EAAK4D,GAAK,IAAI9N,MAAMmK,GAEoB3Q,EAAMqB,GAK9D,IAAK,IAAoBmW,EAAUtQ,EAA1BuQ,EAAK,EAAGC,EAAK,EAAmBD,EAAK7G,IAAc6G,EAC1D,GAAID,EAAWF,EAAWG,GAAK,CAE7B,IADIA,GAAMC,IAAIA,EAAKD,EAAK,KACfvQ,EAAOqQ,EAAYG,OAAUA,EAAK9G,IAC3C4G,EAASpH,MAAQlJ,GAAQ,IAC1B,CAEJ,CAKD,OAHAjC,EAAS,IAAIkQ,GAAUlQ,EAAQoQ,IACxBsC,OAASlH,EAChBxL,EAAO2S,MAAQlH,EACRzL,CACT,EgBzDEwL,MjBvDa,WACb,OAAO,IAAI0E,GAAUjR,KAAKyT,QAAUzT,KAAKoR,QAAQrM,IAAIgH,IAAS/L,KAAKqR,SACrE,EiBsDE7E,KOxDa,WACb,OAAO,IAAIyE,GAAUjR,KAAK0T,OAAS1T,KAAKoR,QAAQrM,IAAIgH,IAAS/L,KAAKqR,SACpE,EPuDEN,KQ5Da,SAAS4C,EAASC,EAAUC,GACzC,IAAItH,EAAQvM,KAAKuM,QAASxL,EAASf,KAAMwM,EAAOxM,KAAKwM,OAYrD,MAXuB,mBAAZmH,GACTpH,EAAQoH,EAAQpH,MACLA,EAAQA,EAAM+E,aAEzB/E,EAAQA,EAAM1R,OAAO8Y,EAAU,IAEjB,MAAZC,IACF7S,EAAS6S,EAAS7S,MACNA,EAASA,EAAOuQ,aAEhB,MAAVuC,EAAgBrH,EAAKoC,SAAeiF,EAAOrH,GACxCD,GAASxL,EAASwL,EAAMuH,MAAM/S,GAAQgT,QAAUhT,CACzD,ER+CE+S,MS3Da,SAASlU,GAGtB,IAFA,IAAI0R,EAAY1R,EAAQ0R,UAAY1R,EAAQ0R,YAAc1R,EAEjDoU,EAAUhU,KAAKoR,QAAS6C,EAAU3C,EAAUF,QAAS8C,EAAKF,EAAQhb,OAAQmb,EAAKF,EAAQjb,OAAQ6K,EAAI/K,KAAKsb,IAAIF,EAAIC,GAAKE,EAAS,IAAI/R,MAAM4R,GAAK9D,EAAI,EAAGA,EAAIvM,IAAKuM,EACpK,IAAK,IAAmGrV,EAA/FuZ,EAASN,EAAQ5D,GAAImE,EAASN,EAAQ7D,GAAIlN,EAAIoR,EAAOtb,OAAQ8a,EAAQO,EAAOjE,GAAK,IAAI9N,MAAMY,GAAUjK,EAAI,EAAGA,EAAIiK,IAAKjK,GACxH8B,EAAOuZ,EAAOrb,IAAMsb,EAAOtb,MAC7B6a,EAAM7a,GAAK8B,GAKjB,KAAOqV,EAAI8D,IAAM9D,EACfiE,EAAOjE,GAAK4D,EAAQ5D,GAGtB,OAAO,IAAIa,GAAUoD,EAAQrU,KAAKqR,SACpC,ET4CEC,UAhBF,WACE,OAAOtR,IACT,EAeE+T,MU/Da,WAEb,IAAK,IAAI7C,EAASlR,KAAKoR,QAAShB,GAAK,EAAGvM,EAAIqN,EAAOlY,SAAUoX,EAAIvM,GAC/D,IAAK,IAA8D9I,EAA1DuR,EAAQ4E,EAAOd,GAAInX,EAAIqT,EAAMtT,OAAS,EAAGgK,EAAOsJ,EAAMrT,KAAYA,GAAK,IAC1E8B,EAAOuR,EAAMrT,MACX+J,GAA6C,EAArCjI,EAAKyZ,wBAAwBxR,IAAWA,EAAK3H,WAAWF,aAAaJ,EAAMiI,GACvFA,EAAOjI,GAKb,OAAOiF,IACT,EVoDEyU,Kf9Da,SAASC,GAGtB,SAASC,EAAY3d,EAAGC,GACtB,OAAOD,GAAKC,EAAIyd,EAAQ1d,EAAEoV,SAAUnV,EAAEmV,WAAapV,GAAKC,CACzD,CAJIyd,IAASA,EAAU1H,IAMxB,IAAK,IAAIkE,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ4b,EAAa,IAAItS,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAAG,CAC/F,IAAK,IAAmFrV,EAA/EuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAQ6b,EAAYD,EAAWxE,GAAK,IAAI9N,MAAMY,GAAUjK,EAAI,EAAGA,EAAIiK,IAAKjK,GACxG8B,EAAOuR,EAAMrT,MACf4b,EAAU5b,GAAK8B,GAGnB8Z,EAAUJ,KAAKE,EAChB,CAED,OAAO,IAAI1D,GAAU2D,EAAY5U,KAAKqR,UAAU0C,OAClD,Ee8CEtU,KWjEa,WACb,IAAInI,EAAW2R,UAAU,GAGzB,OAFAA,UAAU,GAAKjJ,KACf1I,EAAS2S,MAAM,KAAMhB,WACdjJ,IACT,EX6DEmG,MYlEa,WACb,OAAO7D,MAAMC,KAAKvC,KACpB,EZiEEjF,KanEa,WAEb,IAAK,IAAImW,EAASlR,KAAKoR,QAAShB,EAAI,EAAGvM,EAAIqN,EAAOlY,OAAQoX,EAAIvM,IAAKuM,EACjE,IAAK,IAAI9D,EAAQ4E,EAAOd,GAAInX,EAAI,EAAGiK,EAAIoJ,EAAMtT,OAAQC,EAAIiK,IAAKjK,EAAG,CAC/D,IAAI8B,EAAOuR,EAAMrT,GACjB,GAAI8B,EAAM,OAAOA,CAClB,CAGH,OAAO,IACT,Eb0DE4M,KcpEa,WACb,IAAIA,EAAO,EACX,IAAK,MAAM5M,KAAQiF,OAAQ2H,EAC3B,OAAOA,CACT,EdiEE1L,MerEa,WACb,OAAQ+D,KAAKjF,MACf,EfoEE+Z,KgBtEa,SAASxd,GAEtB,IAAK,IAAI4Z,EAASlR,KAAKoR,QAAShB,EAAI,EAAGvM,EAAIqN,EAAOlY,OAAQoX,EAAIvM,IAAKuM,EACjE,IAAK,IAAgDrV,EAA5CuR,EAAQ4E,EAAOd,GAAInX,EAAI,EAAGiK,EAAIoJ,EAAMtT,OAAcC,EAAIiK,IAAKjK,GAC9D8B,EAAOuR,EAAMrT,KAAI3B,EAASmI,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,GAI/D,OAAOtM,IACT,EhB8DExD,Kd7Ba,SAAShB,EAAM7D,GAC5B,IAAIqT,EAAWR,GAAUhP,GAEzB,GAAIyN,UAAUjQ,OAAS,EAAG,CACxB,IAAI+B,EAAOiF,KAAKjF,OAChB,OAAOiQ,EAASjJ,MACVhH,EAAKga,eAAe/J,EAAShP,MAAOgP,EAASjJ,OAC7ChH,EAAK4B,aAAaqO,EACzB,CAED,OAAOhL,KAAK8U,MAAe,MAATnd,EACXqT,EAASjJ,MAAQoL,GAAeD,GAAgC,mBAAVvV,EACtDqT,EAASjJ,MAAQ0L,GAAiBD,GAClCxC,EAASjJ,MAAQuL,GAAiBD,IAAgBrC,EAAUrT,GACrE,EcgBEyF,MZlDa,SAAS5B,EAAM7D,EAAOkW,GACnC,OAAO5E,UAAUjQ,OAAS,EACpBgH,KAAK8U,MAAe,MAATnd,EACLgW,GAA+B,mBAAVhW,EACrBmW,GACAF,IAAepS,EAAM7D,EAAmB,MAAZkW,EAAmB,GAAKA,IAC1DE,GAAW/N,KAAKjF,OAAQS,EAChC,EY4CEwZ,SXrDa,SAASxZ,EAAM7D,GAC5B,OAAOsR,UAAUjQ,OAAS,EACpBgH,KAAK8U,MAAe,MAATnd,EACPuW,GAAkC,mBAAVvW,EACxByW,GACAD,IAAkB3S,EAAM7D,IAC5BqI,KAAKjF,OAAOS,EACpB,EW+CEyZ,QVba,SAASzZ,EAAM7D,GAC5B,IAAIiR,EAAQyF,GAAW7S,EAAO,IAE9B,GAAIyN,UAAUjQ,OAAS,EAAG,CAExB,IADA,IAAI8J,EAAOpE,GAAUsB,KAAKjF,QAAS9B,GAAK,EAAGiK,EAAI0F,EAAM5P,SAC5CC,EAAIiK,OAAQJ,EAAKkO,SAASpI,EAAM3P,IAAK,OAAO,EACrD,OAAO,CACR,CAED,OAAO+G,KAAK8U,MAAuB,mBAAVnd,EACnBoX,GAAkBpX,EAClBkX,GACAC,IAAclG,EAAOjR,GAC7B,EUCEkE,KT1Da,SAASlE,GACtB,OAAOsR,UAAUjQ,OACXgH,KAAK8U,KAAc,MAATnd,EACNqX,IAA+B,mBAAVrX,EACrBwX,GACAD,IAAcvX,IAClBqI,KAAKjF,OAAOkU,WACpB,ESoDEiG,KR3Da,SAASvd,GACtB,OAAOsR,UAAUjQ,OACXgH,KAAK8U,KAAc,MAATnd,EACNyX,IAA+B,mBAAVzX,EACrB4X,GACAD,IAAc3X,IAClBqI,KAAKjF,OAAOsU,SACpB,EQqDEG,MPzEa,WACb,OAAOxP,KAAK8U,KAAKtF,GACnB,EOwEEE,MN1Ea,WACb,OAAO1P,KAAK8U,KAAKpF,GACnB,EMyEE7U,OiB7Ea,SAASW,GACtB,IAAI/E,EAAyB,mBAAT+E,EAAsBA,EAAOyP,GAAQzP,GACzD,OAAOwE,KAAKnC,QAAO,WACjB,OAAOmC,KAAKhF,YAAYvE,EAAOwT,MAAMjK,KAAMiJ,WAC/C,GACA,EjByEEhO,OLzEa,SAASO,EAAM2Z,GAC5B,IAAI1e,EAAyB,mBAAT+E,EAAsBA,EAAOyP,GAAQzP,GACrDqC,EAAmB,MAAVsX,EAAiBtF,GAAiC,mBAAXsF,EAAwBA,EAAShK,GAASgK,GAC9F,OAAOnV,KAAKnC,QAAO,WACjB,OAAOmC,KAAK7E,aAAa1E,EAAOwT,MAAMjK,KAAMiJ,WAAYpL,EAAOoM,MAAMjK,KAAMiJ,YAAc,KAC7F,GACA,EKoEE2F,OJ5Ea,WACb,OAAO5O,KAAK8U,KAAKlG,GACnB,EI2EEmB,MHxEa,SAASqF,GACtB,OAAOpV,KAAKnC,OAAOuX,EAAOnF,GAAsBH,GAClD,EGuEE7D,MkBnFa,SAAStU,GACtB,OAAOsR,UAAUjQ,OACXgH,KAAKgV,SAAS,WAAYrd,GAC1BqI,KAAKjF,OAAOqR,QACpB,ElBgFE7C,GFpCa,SAASC,EAAU7R,EAAO0E,GACvC,IAA+CpD,EAAyB+P,EAApEqM,EA3CN,SAAwBA,GACtB,OAAOA,EAAU1L,OAAOC,MAAM,SAAS7E,KAAI,SAASiE,GAClD,IAAIxN,EAAO,GAAIvC,EAAI+P,EAAE1L,QAAQ,KAE7B,OADIrE,GAAK,IAAGuC,EAAOwN,EAAExQ,MAAMS,EAAI,GAAI+P,EAAIA,EAAExQ,MAAM,EAAGS,IAC3C,CAACkG,KAAM6J,EAAGxN,KAAMA,EAC3B,GACA,CAqCkB8Z,CAAe9L,EAAW,IAAQtG,EAAImS,EAAUrc,OAEhE,KAAIiQ,UAAUjQ,OAAS,GAAvB,CAaA,IADAuQ,EAAK5R,EAAQ2Y,GAAQJ,GAChBjX,EAAI,EAAGA,EAAIiK,IAAKjK,EAAG+G,KAAK8U,KAAKvL,EAAG8L,EAAUpc,GAAItB,EAAO0E,IAC1D,OAAO2D,IAJN,CATC,IAAIuJ,EAAKvJ,KAAKjF,OAAOoV,KACrB,GAAI5G,EAAI,IAAK,IAA0BrH,EAAtBkO,EAAI,EAAGvM,EAAI0F,EAAGvQ,OAAWoX,EAAIvM,IAAKuM,EACjD,IAAKnX,EAAI,EAAGiJ,EAAIqH,EAAG6G,GAAInX,EAAIiK,IAAKjK,EAC9B,IAAK+P,EAAIqM,EAAUpc,IAAIkG,OAAS+C,EAAE/C,MAAQ6J,EAAExN,OAAS0G,EAAE1G,KACrD,OAAO0G,EAAEvK,KAUnB,EEmBEoR,SDxDa,SAAS5J,EAAMsR,GAC5B,OAAOzQ,KAAK8U,MAAwB,mBAAXrE,EACnBI,GACAD,IAAkBzR,EAAMsR,GAChC,ECqDE,CAAC8E,OAAOC,UmBtFK,YACb,IAAK,IAAItE,EAASlR,KAAKoR,QAAShB,EAAI,EAAGvM,EAAIqN,EAAOlY,OAAQoX,EAAIvM,IAAKuM,EACjE,IAAK,IAAgDrV,EAA5CuR,EAAQ4E,EAAOd,GAAInX,EAAI,EAAGiK,EAAIoJ,EAAMtT,OAAcC,EAAIiK,IAAKjK,GAC9D8B,EAAOuR,EAAMrT,YAAU8B,EAGjC,GCJO,MAAM0a,GAAa,CAACC,SAAS,GACvBC,GAAoB,CAACC,SAAS,EAAMF,SAAS,GAEnD,SAASG,GAAc1Z,GAC5BA,EAAM2Z,0BACR,CAEe,SAAQC,GAAC5Z,GACtBA,EAAM6Z,iBACN7Z,EAAM2Z,0BACR,CCTe,SAAQG,GAACC,GACtB,IAAIlQ,EAAOkQ,EAAKza,SAASqP,gBACrBwG,EAAYzT,GAAOqY,GAAM3M,GAAG,iBAAkB4M,GAASR,IACvD,kBAAmB3P,EACrBsL,EAAU/H,GAAG,mBAAoB4M,GAASR,KAE1C3P,EAAKoQ,WAAapQ,EAAK5I,MAAMiZ,cAC7BrQ,EAAK5I,MAAMiZ,cAAgB,OAE/B,CAEO,SAASC,GAAQJ,EAAMK,GAC5B,IAAIvQ,EAAOkQ,EAAKza,SAASqP,gBACrBwG,EAAYzT,GAAOqY,GAAM3M,GAAG,iBAAkB,MAC9CgN,IACFjF,EAAU/H,GAAG,aAAc4M,GAASR,IACpCa,YAAW,WAAalF,EAAU/H,GAAG,aAAc,QAAU,IAE3D,kBAAmBvD,EACrBsL,EAAU/H,GAAG,mBAAoB,OAEjCvD,EAAK5I,MAAMiZ,cAAgBrQ,EAAKoQ,kBACzBpQ,EAAKoQ,WAEhB,CC3BA,IAAeK,GAAAjL,GAAK,IAAMA,ECAX,SAASkL,GAAUvX,GAAMqS,YACtCA,EAAWmF,QACXA,EAAO7b,OACPA,EAAM8b,WACNA,EAAUC,OACVA,EAAMrL,EACNA,EAACsG,EAAEA,EAACgF,GAAEA,EAAEC,GAAEA,EAAEhO,SACZA,IAEAvS,OAAOwgB,iBAAiBhX,KAAM,CAC5Bb,KAAM,CAACxH,MAAOwH,EAAM8X,YAAY,EAAMC,cAAc,GACpD1F,YAAa,CAAC7Z,MAAO6Z,EAAayF,YAAY,EAAMC,cAAc,GAClEP,QAAS,CAAChf,MAAOgf,EAASM,YAAY,EAAMC,cAAc,GAC1Dpc,OAAQ,CAACnD,MAAOmD,EAAQmc,YAAY,EAAMC,cAAc,GACxDN,WAAY,CAACjf,MAAOif,EAAYK,YAAY,EAAMC,cAAc,GAChEL,OAAQ,CAAClf,MAAOkf,EAAQI,YAAY,EAAMC,cAAc,GACxD1L,EAAG,CAAC7T,MAAO6T,EAAGyL,YAAY,EAAMC,cAAc,GAC9CpF,EAAG,CAACna,MAAOma,EAAGmF,YAAY,EAAMC,cAAc,GAC9CJ,GAAI,CAACnf,MAAOmf,EAAIG,YAAY,EAAMC,cAAc,GAChDH,GAAI,CAACpf,MAAOof,EAAIE,YAAY,EAAMC,cAAc,GAChDtf,EAAG,CAACD,MAAOoR,IAEf,CCdA,SAASoO,GAAchb,GACrB,OAAQA,EAAMib,UAAYjb,EAAMkb,MAClC,CAEA,SAASC,KACP,OAAOtX,KAAK3E,UACd,CAEA,SAASkc,GAAepb,EAAOgG,GAC7B,OAAY,MAALA,EAAY,CAACqJ,EAAGrP,EAAMqP,EAAGsG,EAAG3V,EAAM2V,GAAK3P,CAChD,CAEA,SAASqV,KACP,OAAOC,UAAUC,gBAAmB,iBAAkB1X,IACxD,CCtBe,SAAA2X,GAASrO,EAAasO,EAASvO,GAC5CC,EAAYD,UAAYuO,EAAQvO,UAAYA,EAC5CA,EAAUC,YAAcA,CAC1B,CAEO,SAASuO,GAAOvZ,EAAQnG,GAC7B,IAAIkR,EAAY7S,OAAOC,OAAO6H,EAAO+K,WACrC,IAAK,IAAIlM,KAAOhF,EAAYkR,EAAUlM,GAAOhF,EAAWgF,GACxD,OAAOkM,CACT,CCPO,SAASyO,KAAU,CHsB1BpB,GAAUrN,UAAUE,GAAK,WACvB,IAAI5R,EAAQqI,KAAKpI,EAAE2R,GAAGU,MAAMjK,KAAKpI,EAAGqR,WACpC,OAAOtR,IAAUqI,KAAKpI,EAAIoI,KAAOrI,CACnC,EGvBO,IAAIogB,GAAS,GACTC,GAAW,EAAID,GAEtBE,GAAM,sBACNC,GAAM,oDACNC,GAAM,qDACNC,GAAQ,qBACRC,GAAe,IAAIC,OAAO,UAAUL,MAAOA,MAAOA,UAClDM,GAAe,IAAID,OAAO,UAAUH,MAAOA,MAAOA,UAClDK,GAAgB,IAAIF,OAAO,WAAWL,MAAOA,MAAOA,MAAOC,UAC3DO,GAAgB,IAAIH,OAAO,WAAWH,MAAOA,MAAOA,MAAOD,UAC3DQ,GAAe,IAAIJ,OAAO,UAAUJ,MAAOC,MAAOA,UAClDQ,GAAgB,IAAIL,OAAO,WAAWJ,MAAOC,MAAOA,MAAOD,UAE3DU,GAAQ,CACVC,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,QACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,EACPC,eAAgB,SAChBC,KAAM,IACNC,WAAY,QACZC,MAAO,SACPC,UAAW,SACXC,UAAW,QACXC,WAAY,QACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,QAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,IACVC,SAAU,MACVC,cAAe,SACfC,SAAU,SACVC,UAAW,MACXC,SAAU,SACVC,UAAW,SACXC,YAAa,QACbC,eAAgB,QAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,QACTC,WAAY,SACZC,aAAc,QACdC,cAAe,QACfC,cAAe,QACfC,cAAe,QACfC,cAAe,MACfC,WAAY,QACZC,SAAU,SACVC,YAAa,MACbC,QAAS,QACTC,QAAS,QACTC,WAAY,QACZC,UAAW,SACXC,YAAa,SACbC,YAAa,QACbC,QAAS,SACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,QACNC,MAAO,MACPC,YAAa,SACbC,KAAM,QACNC,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,QACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,QACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtBC,UAAW,SACXC,WAAY,QACZC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,cAAe,QACfC,aAAc,QACdC,eAAgB,QAChBC,eAAgB,QAChBC,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,QACXC,MAAO,SACPC,QAAS,SACTC,OAAQ,QACRC,iBAAkB,QAClBC,WAAY,IACZC,aAAc,SACdC,aAAc,QACdC,eAAgB,QAChBC,gBAAiB,QACjBC,kBAAmB,MACnBC,gBAAiB,QACjBC,gBAAiB,SACjBC,aAAc,QACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,IACNC,QAAS,SACTC,MAAO,QACPC,UAAW,QACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,QACRC,cAAe,QACfC,IAAK,SACLC,UAAW,SACXC,UAAW,QACXC,YAAa,QACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,QACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,QACTC,UAAW,QACXC,UAAW,QACXC,UAAW,QACXC,KAAM,SACNC,YAAa,MACbC,UAAW,QACXC,IAAK,SACLC,KAAM,MACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,QACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,WAAY,SACZC,OAAQ,SACRC,YAAa,UAkBf,SAASC,KACP,OAAOjiB,KAAKkiB,MAAMC,WACpB,CAUA,SAASC,KACP,OAAOpiB,KAAKkiB,MAAMG,WACpB,CAEe,SAASC,GAAMC,GAC5B,IAAI1e,EAAGyC,EAEP,OADAic,GAAUA,EAAS,IAAI5Y,OAAO6Y,eACtB3e,EAAIuU,GAAMqK,KAAKF,KAAYjc,EAAIzC,EAAE,GAAG7K,OAAQ6K,EAAI6e,SAAS7e,EAAE,GAAI,IAAW,IAANyC,EAAUqc,GAAK9e,GAC/E,IAANyC,EAAU,IAAIsc,GAAK/e,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,GAAiB,GAAJA,IAAY,EAAU,GAAJA,EAAU,GACzG,IAANyC,EAAUuc,GAAKhf,GAAK,GAAK,IAAMA,GAAK,GAAK,IAAMA,GAAK,EAAI,KAAW,IAAJA,GAAY,KACrE,IAANyC,EAAUuc,GAAMhf,GAAK,GAAK,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,IAAkB,GAAJA,IAAY,EAAU,GAAJA,GAAY,KAClJ,OACCA,EAAIwU,GAAaoK,KAAKF,IAAW,IAAIK,GAAI/e,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAI,IAC3DA,EAAI0U,GAAakK,KAAKF,IAAW,IAAIK,GAAW,IAAP/e,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAK,IAC/FA,EAAI2U,GAAciK,KAAKF,IAAWM,GAAKhf,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC3DA,EAAI4U,GAAcgK,KAAKF,IAAWM,GAAY,IAAPhf,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAKA,EAAE,KAC/FA,EAAI6U,GAAa+J,KAAKF,IAAWO,GAAKjf,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAK,IACpEA,EAAI8U,GAAc8J,KAAKF,IAAWO,GAAKjf,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAKA,EAAE,IACxE+U,GAAM/O,eAAe0Y,GAAUI,GAAK/J,GAAM2J,IAC/B,gBAAXA,EAA2B,IAAIK,GAAI3V,IAAKA,IAAKA,IAAK,GAClD,IACR,CAEA,SAAS0V,GAAKzf,GACZ,OAAO,IAAI0f,GAAI1f,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAU,IAAJA,EAAU,EAC1D,CAEA,SAAS2f,GAAKnhB,EAAGqhB,EAAG9rB,EAAGD,GAErB,OADIA,GAAK,IAAG0K,EAAIqhB,EAAI9rB,EAAIgW,KACjB,IAAI2V,GAAIlhB,EAAGqhB,EAAG9rB,EAAGD,EAC1B,CASO,SAASkrB,GAAIxgB,EAAGqhB,EAAG9rB,EAAG+rB,GAC3B,OAA4B,IAArB/Z,UAAUjQ,SARQkJ,EAQkBR,aAPxBoW,KAAQ5V,EAAIogB,GAAMpgB,IAChCA,EAEE,IAAI0gB,IADX1gB,EAAIA,EAAEggB,OACWxgB,EAAGQ,EAAE6gB,EAAG7gB,EAAEjL,EAAGiL,EAAE8gB,SAFjB,IAAIJ,IAM6B,IAAIA,GAAIlhB,EAAGqhB,EAAG9rB,EAAc,MAAX+rB,EAAkB,EAAIA,GARlF,IAAoB9gB,CAS3B,CAEO,SAAS0gB,GAAIlhB,EAAGqhB,EAAG9rB,EAAG+rB,GAC3BhjB,KAAK0B,GAAKA,EACV1B,KAAK+iB,GAAKA,EACV/iB,KAAK/I,GAAKA,EACV+I,KAAKgjB,SAAWA,CAClB,CA8BA,SAASC,KACP,MAAO,IAAIC,GAAIljB,KAAK0B,KAAKwhB,GAAIljB,KAAK+iB,KAAKG,GAAIljB,KAAK/I,IAClD,CAMA,SAASksB,KACP,MAAMnsB,EAAIosB,GAAOpjB,KAAKgjB,SACtB,MAAO,GAAS,IAANhsB,EAAU,OAAS,UAAUqsB,GAAOrjB,KAAK0B,OAAO2hB,GAAOrjB,KAAK+iB,OAAOM,GAAOrjB,KAAK/I,KAAW,IAAND,EAAU,IAAM,KAAKA,MACrH,CAEA,SAASosB,GAAOJ,GACd,OAAOM,MAAMN,GAAW,EAAIlqB,KAAKC,IAAI,EAAGD,KAAKsb,IAAI,EAAG4O,GACtD,CAEA,SAASK,GAAO1rB,GACd,OAAOmB,KAAKC,IAAI,EAAGD,KAAKsb,IAAI,IAAKtb,KAAKyqB,MAAM5rB,IAAU,GACxD,CAEA,SAASurB,GAAIvrB,GAEX,QADAA,EAAQ0rB,GAAO1rB,IACC,GAAK,IAAM,IAAMA,EAAM6rB,SAAS,GAClD,CAEA,SAASV,GAAKW,EAAGC,EAAGpd,EAAGtP,GAIrB,OAHIA,GAAK,EAAGysB,EAAIC,EAAIpd,EAAI2G,IACf3G,GAAK,GAAKA,GAAK,EAAGmd,EAAIC,EAAIzW,IAC1ByW,GAAK,IAAGD,EAAIxW,KACd,IAAI0W,GAAIF,EAAGC,EAAGpd,EAAGtP,EAC1B,CAEO,SAAS4sB,GAAW1hB,GACzB,GAAIA,aAAayhB,GAAK,OAAO,IAAIA,GAAIzhB,EAAEuhB,EAAGvhB,EAAEwhB,EAAGxhB,EAAEoE,EAAGpE,EAAE8gB,SAEtD,GADM9gB,aAAa4V,KAAQ5V,EAAIogB,GAAMpgB,KAChCA,EAAG,OAAO,IAAIyhB,GACnB,GAAIzhB,aAAayhB,GAAK,OAAOzhB,EAE7B,IAAIR,GADJQ,EAAIA,EAAEggB,OACIxgB,EAAI,IACVqhB,EAAI7gB,EAAE6gB,EAAI,IACV9rB,EAAIiL,EAAEjL,EAAI,IACVmd,EAAMtb,KAAKsb,IAAI1S,EAAGqhB,EAAG9rB,GACrB8B,EAAMD,KAAKC,IAAI2I,EAAGqhB,EAAG9rB,GACrBwsB,EAAIxW,IACJyW,EAAI3qB,EAAMqb,EACV9N,GAAKvN,EAAMqb,GAAO,EAUtB,OATIsP,GACaD,EAAX/hB,IAAM3I,GAAUgqB,EAAI9rB,GAAKysB,EAAc,GAATX,EAAI9rB,GAC7B8rB,IAAMhqB,GAAU9B,EAAIyK,GAAKgiB,EAAI,GAC5BhiB,EAAIqhB,GAAKW,EAAI,EACvBA,GAAKpd,EAAI,GAAMvN,EAAMqb,EAAM,EAAIrb,EAAMqb,EACrCqP,GAAK,IAELC,EAAIpd,EAAI,GAAKA,EAAI,EAAI,EAAImd,EAEpB,IAAIE,GAAIF,EAAGC,EAAGpd,EAAGpE,EAAE8gB,QAC5B,CAMA,SAASW,GAAIF,EAAGC,EAAGpd,EAAG0c,GACpBhjB,KAAKyjB,GAAKA,EACVzjB,KAAK0jB,GAAKA,EACV1jB,KAAKsG,GAAKA,EACVtG,KAAKgjB,SAAWA,CAClB,CAsCA,SAASa,GAAOlsB,GAEd,OADAA,GAASA,GAAS,GAAK,KACR,EAAIA,EAAQ,IAAMA,CACnC,CAEA,SAASmsB,GAAOnsB,GACd,OAAOmB,KAAKC,IAAI,EAAGD,KAAKsb,IAAI,EAAGzc,GAAS,GAC1C,CAGA,SAASosB,GAAQN,EAAGtP,EAAI6P,GACtB,OAGY,KAHJP,EAAI,GAAKtP,GAAM6P,EAAK7P,GAAMsP,EAAI,GAChCA,EAAI,IAAMO,EACVP,EAAI,IAAMtP,GAAM6P,EAAK7P,IAAO,IAAMsP,GAAK,GACvCtP,EACR,CAlOAwD,GAAOG,GAAOwK,GAAO,CACnB,IAAAxY,CAAKma,GACH,OAAOztB,OAAOP,OAAO,IAAI+J,KAAKsJ,YAAatJ,KAAMikB,EAClD,EACD,WAAAC,GACE,OAAOlkB,KAAKkiB,MAAMgC,aACnB,EACDhB,IAAKjB,GACLE,UAAWF,GACXkC,WAUF,WACE,OAAOnkB,KAAKkiB,MAAMiC,YACpB,EAXEC,UAaF,WACE,OAAOR,GAAW5jB,MAAMokB,WAC1B,EAdE/B,UAAWD,GACXoB,SAAUpB,KAiEZzK,GAAOiL,GAAKV,GAAKrK,GAAOC,GAAO,CAC7B,QAAAE,CAAS5hB,GAEP,OADAA,EAAS,MAALA,EAAY4hB,GAAWlf,KAAKurB,IAAIrM,GAAU5hB,GACvC,IAAIwsB,GAAI5iB,KAAK0B,EAAItL,EAAG4J,KAAK+iB,EAAI3sB,EAAG4J,KAAK/I,EAAIb,EAAG4J,KAAKgjB,QACzD,EACD,MAAAjL,CAAO3hB,GAEL,OADAA,EAAS,MAALA,EAAY2hB,GAASjf,KAAKurB,IAAItM,GAAQ3hB,GACnC,IAAIwsB,GAAI5iB,KAAK0B,EAAItL,EAAG4J,KAAK+iB,EAAI3sB,EAAG4J,KAAK/I,EAAIb,EAAG4J,KAAKgjB,QACzD,EACD,GAAAd,GACE,OAAOliB,IACR,EACD,KAAAskB,GACE,OAAO,IAAI1B,GAAIS,GAAOrjB,KAAK0B,GAAI2hB,GAAOrjB,KAAK+iB,GAAIM,GAAOrjB,KAAK/I,GAAImsB,GAAOpjB,KAAKgjB,SAC5E,EACD,WAAAkB,GACE,OAAS,IAAOlkB,KAAK0B,GAAK1B,KAAK0B,EAAI,QAC1B,IAAO1B,KAAK+iB,GAAK/iB,KAAK+iB,EAAI,QAC1B,IAAO/iB,KAAK/I,GAAK+I,KAAK/I,EAAI,OAC3B,GAAK+I,KAAKgjB,SAAWhjB,KAAKgjB,SAAW,CAC9C,EACDE,IAAKD,GACLd,UAAWc,GACXkB,WASF,WACE,MAAO,IAAIjB,GAAIljB,KAAK0B,KAAKwhB,GAAIljB,KAAK+iB,KAAKG,GAAIljB,KAAK/I,KAAKisB,GAA+C,KAA1CI,MAAMtjB,KAAKgjB,SAAW,EAAIhjB,KAAKgjB,WAC3F,EAVEX,UAAWc,GACXK,SAAUL,MAyEZxL,GAAOgM,IAXA,SAAaF,EAAGC,EAAGpd,EAAG0c,GAC3B,OAA4B,IAArB/Z,UAAUjQ,OAAe4qB,GAAWH,GAAK,IAAIE,GAAIF,EAAGC,EAAGpd,EAAc,MAAX0c,EAAkB,EAAIA,EACzF,GASiBnL,GAAOC,GAAO,CAC7B,QAAAE,CAAS5hB,GAEP,OADAA,EAAS,MAALA,EAAY4hB,GAAWlf,KAAKurB,IAAIrM,GAAU5hB,GACvC,IAAIutB,GAAI3jB,KAAKyjB,EAAGzjB,KAAK0jB,EAAG1jB,KAAKsG,EAAIlQ,EAAG4J,KAAKgjB,QACjD,EACD,MAAAjL,CAAO3hB,GAEL,OADAA,EAAS,MAALA,EAAY2hB,GAASjf,KAAKurB,IAAItM,GAAQ3hB,GACnC,IAAIutB,GAAI3jB,KAAKyjB,EAAGzjB,KAAK0jB,EAAG1jB,KAAKsG,EAAIlQ,EAAG4J,KAAKgjB,QACjD,EACD,GAAAd,GACE,IAAIuB,EAAIzjB,KAAKyjB,EAAI,IAAqB,KAAdzjB,KAAKyjB,EAAI,GAC7BC,EAAIJ,MAAMG,IAAMH,MAAMtjB,KAAK0jB,GAAK,EAAI1jB,KAAK0jB,EACzCpd,EAAItG,KAAKsG,EACT0d,EAAK1d,GAAKA,EAAI,GAAMA,EAAI,EAAIA,GAAKod,EACjCvP,EAAK,EAAI7N,EAAI0d,EACjB,OAAO,IAAIpB,GACTmB,GAAQN,GAAK,IAAMA,EAAI,IAAMA,EAAI,IAAKtP,EAAI6P,GAC1CD,GAAQN,EAAGtP,EAAI6P,GACfD,GAAQN,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAKtP,EAAI6P,GACzChkB,KAAKgjB,QAER,EACD,KAAAsB,GACE,OAAO,IAAIX,GAAIE,GAAO7jB,KAAKyjB,GAAIK,GAAO9jB,KAAK0jB,GAAII,GAAO9jB,KAAKsG,GAAI8c,GAAOpjB,KAAKgjB,SAC5E,EACD,WAAAkB,GACE,OAAQ,GAAKlkB,KAAK0jB,GAAK1jB,KAAK0jB,GAAK,GAAKJ,MAAMtjB,KAAK0jB,KACzC,GAAK1jB,KAAKsG,GAAKtG,KAAKsG,GAAK,GACzB,GAAKtG,KAAKgjB,SAAWhjB,KAAKgjB,SAAW,CAC9C,EACD,SAAAoB,GACE,MAAMptB,EAAIosB,GAAOpjB,KAAKgjB,SACtB,MAAO,GAAS,IAANhsB,EAAU,OAAS,UAAU6sB,GAAO7jB,KAAKyjB,OAAwB,IAAjBK,GAAO9jB,KAAK0jB,QAA+B,IAAjBI,GAAO9jB,KAAKsG,MAAkB,IAANtP,EAAU,IAAM,KAAKA,MAClI,KCzXH,IAAeutB,GAAA/Y,GAAK,IAAMA,ECmBnB,SAASgZ,GAAM1S,GACpB,OAAoB,IAAZA,GAAKA,GAAW2S,GAAU,SAASztB,EAAGC,GAC5C,OAAOA,EAAID,EAbf,SAAqBA,EAAGC,EAAG6a,GACzB,OAAO9a,EAAI8B,KAAKurB,IAAIrtB,EAAG8a,GAAI7a,EAAI6B,KAAKurB,IAAIptB,EAAG6a,GAAK9a,EAAG8a,EAAI,EAAIA,EAAG,SAAS9I,GACrE,OAAOlQ,KAAKurB,IAAIrtB,EAAIgS,EAAI/R,EAAG6a,EAC/B,CACA,CASmB4S,CAAY1tB,EAAGC,EAAG6a,GAAK6S,GAASrB,MAAMtsB,GAAKC,EAAID,EAClE,CACA,CAEe,SAASytB,GAAQztB,EAAGC,GACjC,IAAIkL,EAAIlL,EAAID,EACZ,OAAOmL,EAzBT,SAAgBnL,EAAGmL,GACjB,OAAO,SAAS6G,GACd,OAAOhS,EAAIgS,EAAI7G,CACnB,CACA,CAqBayiB,CAAO5tB,EAAGmL,GAAKwiB,GAASrB,MAAMtsB,GAAKC,EAAID,EACpD,CCvBA,IAAA6tB,GAAe,SAAUC,EAAShT,GAChC,IAAIwQ,EAAQkC,GAAM1S,GAElB,SAASoQ,EAAI/a,EAAO4d,GAClB,IAAIrjB,EAAI4gB,GAAOnb,EAAQ6d,GAAS7d,IAAQzF,GAAIqjB,EAAMC,GAASD,IAAMrjB,GAC7DqhB,EAAIT,EAAMnb,EAAM4b,EAAGgC,EAAIhC,GACvB9rB,EAAIqrB,EAAMnb,EAAMlQ,EAAG8tB,EAAI9tB,GACvB+rB,EAAUyB,GAAQtd,EAAM6b,QAAS+B,EAAI/B,SACzC,OAAO,SAASha,GAKd,OAJA7B,EAAMzF,EAAIA,EAAEsH,GACZ7B,EAAM4b,EAAIA,EAAE/Z,GACZ7B,EAAMlQ,EAAIA,EAAE+R,GACZ7B,EAAM6b,QAAUA,EAAQha,GACjB7B,EAAQ,EACrB,CACG,CAID,OAFA+a,EAAIsC,MAAQM,EAEL5C,CACR,CApBc,CAoBZ,GCzBY,SAAA+C,GAASjuB,EAAGC,GACzB,OAAOD,GAAKA,EAAGC,GAAKA,EAAG,SAAS+R,GAC9B,OAAOhS,GAAK,EAAIgS,GAAK/R,EAAI+R,CAC7B,CACA,CCFA,IAAIkc,GAAM,8CACNC,GAAM,IAAI7M,OAAO4M,GAAIE,OAAQ,KAclB,SAAAC,GAASruB,EAAGC,GACzB,IACIquB,EACAC,EACAC,EAHAC,EAAKP,GAAIQ,UAAYP,GAAIO,UAAY,EAIrCzsB,GAAK,EACLyqB,EAAI,GACJiC,EAAI,GAMR,IAHA3uB,GAAQ,GAAIC,GAAQ,IAGZquB,EAAKJ,GAAIzC,KAAKzrB,MACduuB,EAAKJ,GAAI1C,KAAKxrB,MACfuuB,EAAKD,EAAG7gB,OAAS+gB,IACpBD,EAAKvuB,EAAEuB,MAAMitB,EAAID,GACb9B,EAAEzqB,GAAIyqB,EAAEzqB,IAAMusB,EACb9B,IAAIzqB,GAAKusB,IAEXF,EAAKA,EAAG,OAASC,EAAKA,EAAG,IACxB7B,EAAEzqB,GAAIyqB,EAAEzqB,IAAMssB,EACb7B,IAAIzqB,GAAKssB,GAEd7B,IAAIzqB,GAAK,KACT0sB,EAAE1tB,KAAK,CAACgB,EAAGA,EAAGuS,EAAGoa,GAAON,EAAIC,MAE9BE,EAAKN,GAAIO,UAYX,OARID,EAAKxuB,EAAE+B,SACTwsB,EAAKvuB,EAAEuB,MAAMitB,GACT/B,EAAEzqB,GAAIyqB,EAAEzqB,IAAMusB,EACb9B,IAAIzqB,GAAKusB,GAKT9B,EAAE1qB,OAAS,EAAK2sB,EAAE,GA7C3B,SAAa1uB,GACX,OAAO,SAAS+R,GACd,OAAO/R,EAAE+R,GAAK,EAClB,CACA,CA0CQ6c,CAAIF,EAAE,GAAGna,GApDjB,SAAcvU,GACZ,OAAO,WACL,OAAOA,CACX,CACA,CAiDQ6uB,CAAK7uB,IACJA,EAAI0uB,EAAE3sB,OAAQ,SAASgQ,GACtB,IAAK,IAAW9G,EAAPjJ,EAAI,EAAMA,EAAIhC,IAAKgC,EAAGyqB,GAAGxhB,EAAIyjB,EAAE1sB,IAAIA,GAAKiJ,EAAEsJ,EAAExC,GACrD,OAAO0a,EAAE3S,KAAK,GACxB,EACA,CC/DA,ICEIgV,GDFAC,GAAU,IAAMltB,KAAKmtB,GAEdC,GAAW,CACpBC,WAAY,EACZC,WAAY,EACZC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRC,OAAQ,GAGK,SAAAC,GAASzvB,EAAGC,EAAG0K,EAAGQ,EAAGnB,EAAG0lB,GACrC,IAAIH,EAAQC,EAAQF,EAKpB,OAJIC,EAASztB,KAAK6tB,KAAK3vB,EAAIA,EAAIC,EAAIA,MAAID,GAAKuvB,EAAQtvB,GAAKsvB,IACrDD,EAAQtvB,EAAI2K,EAAI1K,EAAIkL,KAAGR,GAAK3K,EAAIsvB,EAAOnkB,GAAKlL,EAAIqvB,IAChDE,EAAS1tB,KAAK6tB,KAAKhlB,EAAIA,EAAIQ,EAAIA,MAAIR,GAAK6kB,EAAQrkB,GAAKqkB,EAAQF,GAASE,GACtExvB,EAAImL,EAAIlL,EAAI0K,IAAG3K,GAAKA,EAAGC,GAAKA,EAAGqvB,GAASA,EAAOC,GAAUA,GACtD,CACLJ,WAAYnlB,EACZolB,WAAYM,EACZL,OAAQvtB,KAAK8tB,MAAM3vB,EAAGD,GAAKgvB,GAC3BM,MAAOxtB,KAAK+tB,KAAKP,GAASN,GAC1BO,OAAQA,EACRC,OAAQA,EAEZ,CEtBA,SAASM,GAAqBC,EAAOC,EAASC,EAASC,GAErD,SAASjmB,EAAIyiB,GACX,OAAOA,EAAE1qB,OAAS0qB,EAAEziB,MAAQ,IAAM,EACnC,CAqCD,OAAO,SAASjK,EAAGC,GACjB,IAAIysB,EAAI,GACJiC,EAAI,GAOR,OANA3uB,EAAI+vB,EAAM/vB,GAAIC,EAAI8vB,EAAM9vB,GAtC1B,SAAmBkwB,EAAIC,EAAIC,EAAIC,EAAI5D,EAAGiC,GACpC,GAAIwB,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIruB,EAAIyqB,EAAEzrB,KAAK,aAAc,KAAM+uB,EAAS,KAAMC,GAClDtB,EAAE1tB,KAAK,CAACgB,EAAGA,EAAI,EAAGuS,EAAGoa,GAAOuB,EAAIE,IAAM,CAACpuB,EAAGA,EAAI,EAAGuS,EAAGoa,GAAOwB,EAAIE,IACrE,MAAeD,GAAMC,IACf5D,EAAEzrB,KAAK,aAAeovB,EAAKL,EAAUM,EAAKL,EAE7C,CAgCCM,CAAUvwB,EAAEmvB,WAAYnvB,EAAEovB,WAAYnvB,EAAEkvB,WAAYlvB,EAAEmvB,WAAY1C,EAAGiC,GA9BvE,SAAgB3uB,EAAGC,EAAGysB,EAAGiC,GACnB3uB,IAAMC,GACJD,EAAIC,EAAI,IAAKA,GAAK,IAAcA,EAAID,EAAI,MAAKA,GAAK,KACtD2uB,EAAE1tB,KAAK,CAACgB,EAAGyqB,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,UAAW,KAAMwD,GAAY,EAAG1b,EAAGoa,GAAO5uB,EAAGC,MAC/DA,GACTysB,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,UAAYzsB,EAAIiwB,EAEnC,CAwBCb,CAAOrvB,EAAEqvB,OAAQpvB,EAAEovB,OAAQ3C,EAAGiC,GAtBhC,SAAe3uB,EAAGC,EAAGysB,EAAGiC,GAClB3uB,IAAMC,EACR0uB,EAAE1tB,KAAK,CAACgB,EAAGyqB,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,SAAU,KAAMwD,GAAY,EAAG1b,EAAGoa,GAAO5uB,EAAGC,KAC9DA,GACTysB,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,SAAWzsB,EAAIiwB,EAElC,CAiBCZ,CAAMtvB,EAAEsvB,MAAOrvB,EAAEqvB,MAAO5C,EAAGiC,GAf7B,SAAewB,EAAIC,EAAIC,EAAIC,EAAI5D,EAAGiC,GAChC,GAAIwB,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIruB,EAAIyqB,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,SAAU,KAAM,IAAK,KAAM,KACnDiC,EAAE1tB,KAAK,CAACgB,EAAGA,EAAI,EAAGuS,EAAGoa,GAAOuB,EAAIE,IAAM,CAACpuB,EAAGA,EAAI,EAAGuS,EAAGoa,GAAOwB,EAAIE,IAChE,MAAiB,IAAPD,GAAmB,IAAPC,GACrB5D,EAAEzrB,KAAKgJ,EAAIyiB,GAAK,SAAW2D,EAAK,IAAMC,EAAK,IAE9C,CASCE,CAAMxwB,EAAEuvB,OAAQvvB,EAAEwvB,OAAQvvB,EAAEsvB,OAAQtvB,EAAEuvB,OAAQ9C,EAAGiC,GACjD3uB,EAAIC,EAAI,KACD,SAAS+R,GAEd,IADA,IAA0B9G,EAAtBjJ,GAAK,EAAGiK,EAAIyiB,EAAE3sB,SACTC,EAAIiK,GAAGwgB,GAAGxhB,EAAIyjB,EAAE1sB,IAAIA,GAAKiJ,EAAEsJ,EAAExC,GACtC,OAAO0a,EAAE3S,KAAK,GACpB,CACA,CACA,CAEO,IAAI0W,GAA0BX,IDxD9B,SAAkBnvB,GACvB,MAAMkM,EAAI,IAA0B,mBAAd6jB,UAA2BA,UAAYC,iBAAiBhwB,EAAQ,IACtF,OAAOkM,EAAE+jB,WAAa1B,GAAWO,GAAU5iB,EAAE7M,EAAG6M,EAAE5M,EAAG4M,EAAElC,EAAGkC,EAAE1B,EAAG0B,EAAE7C,EAAG6C,EAAE6iB,EACxE,GCqDoE,OAAQ,MAAO,QACxEmB,GAA0Bf,IDpD9B,SAAkBnvB,GACvB,OAAa,MAATA,EAAsBuuB,IACrBH,KAASA,GAAUtqB,SAASG,gBAAgB,6BAA8B,MAC/EmqB,GAAQnpB,aAAa,YAAajF,IAC5BA,EAAQouB,GAAQ+B,UAAUC,QAAQC,eAEjCvB,IADP9uB,EAAQA,EAAMswB,QACSjxB,EAAGW,EAAMV,EAAGU,EAAMgK,EAAGhK,EAAMwK,EAAGxK,EAAMqJ,EAAGrJ,EAAM+uB,GAFLR,GAGjE,GC6CoE,KAAM,IAAK,KC5D/E,SAASgC,GAAK1c,GACZ,QAASA,EAAI1S,KAAKqvB,IAAI3c,IAAM,EAAIA,GAAK,CACvC,CAUA,ICVI4c,GACAC,GDSWC,GAAA,SAAUC,EAAQC,EAAKC,EAAMC,GAI1C,SAASC,EAAKC,EAAIC,GAChB,IAKI5vB,EACA6vB,EANAC,EAAMH,EAAG,GAAII,EAAMJ,EAAG,GAAIK,EAAKL,EAAG,GAClCM,EAAML,EAAG,GAAIM,EAAMN,EAAG,GAAIO,EAAKP,EAAG,GAClC/R,EAAKoS,EAAMH,EACXhS,EAAKoS,EAAMH,EACXK,EAAKvS,EAAKA,EAAKC,EAAKA,EAKxB,GAAIsS,EA5BO,MA6BTP,EAAIhwB,KAAKwwB,IAAIF,EAAKH,GAAMT,EACxBvvB,EAAI,SAAS+P,GACX,MAAO,CACL+f,EAAM/f,EAAI8N,EACVkS,EAAMhgB,EAAI+N,EACVkS,EAAKnwB,KAAKqvB,IAAIK,EAAMxf,EAAI8f,GAE3B,MAIE,CACH,IAAIS,EAAKzwB,KAAK6tB,KAAK0C,GACfG,GAAMJ,EAAKA,EAAKH,EAAKA,EAAKP,EAAOW,IAAO,EAAIJ,EAAKR,EAAOc,GACxDE,GAAML,EAAKA,EAAKH,EAAKA,EAAKP,EAAOW,IAAO,EAAID,EAAKX,EAAOc,GACxDG,EAAK5wB,KAAKwwB,IAAIxwB,KAAK6tB,KAAK6C,EAAKA,EAAK,GAAKA,GACvCG,EAAK7wB,KAAKwwB,IAAIxwB,KAAK6tB,KAAK8C,EAAKA,EAAK,GAAKA,GAC3CX,GAAKa,EAAKD,GAAMlB,EAChBvvB,EAAI,SAAS+P,GACX,IAtCMwC,EAsCFkY,EAAI1a,EAAI8f,EACRc,EAAS1B,GAAKwB,GACdG,EAAIZ,GAAMR,EAAOc,IAAOK,GAxCtBpe,EAwCoCgd,EAAM9E,EAAIgG,IAvCjDle,EAAI1S,KAAKqvB,IAAI,EAAI3c,IAAM,IAAMA,EAAI,IAL5C,SAAcA,GACZ,QAASA,EAAI1S,KAAKqvB,IAAI3c,IAAM,EAAIA,GAAK,CACvC,CA0CkEse,CAAKJ,IAC/D,MAAO,CACLX,EAAMc,EAAI/S,EACVkS,EAAMa,EAAI9S,EACVkS,EAAKW,EAAS1B,GAAKM,EAAM9E,EAAIgG,GAEhC,CACF,CAID,OAFAzwB,EAAE8wB,SAAe,IAAJjB,EAAWN,EAAM1vB,KAAKkxB,MAE5B/wB,CACR,CAOD,OALA0vB,EAAKH,IAAM,SAAS5wB,GAClB,IAAIqyB,EAAKnxB,KAAKC,IAAI,MAAOnB,GAAIsyB,EAAKD,EAAKA,EACvC,OAAO1B,EAAQ0B,EAAIC,EAD6BA,EAAKA,EAEzD,EAESvB,CACR,CAxDc,CAwDZ7vB,KAAKkxB,MAAO,EAAG,GCtEdG,GAAQ,EACRC,GAAU,EACVC,GAAW,EAIXC,GAAY,EACZC,GAAW,EACXC,GAAY,EACZC,GAA+B,iBAAhBC,aAA4BA,YAAYC,IAAMD,YAAcE,KAC3EC,GAA6B,iBAAXnwB,QAAuBA,OAAOowB,sBAAwBpwB,OAAOowB,sBAAsBrmB,KAAK/J,QAAU,SAASgsB,GAAKlQ,WAAWkQ,EAAG,KAE7I,SAASiE,KACd,OAAOJ,KAAaM,GAASE,IAAWR,GAAWE,GAAME,MAAQH,GACnE,CAEA,SAASO,KACPR,GAAW,CACb,CAEO,SAASS,KACdhrB,KAAKirB,MACLjrB,KAAKkrB,MACLlrB,KAAKkM,MAAQ,IACf,CAyBO,SAASif,GAAM7zB,EAAU8zB,EAAOC,GACrC,IAAIriB,EAAI,IAAIgiB,GAEZ,OADAhiB,EAAEsiB,QAAQh0B,EAAU8zB,EAAOC,GACpBriB,CACT,CAaA,SAASuiB,KACPhB,IAAYD,GAAYG,GAAME,OAASH,GACvCL,GAAQC,GAAU,EAClB,KAdK,WACLO,OACER,GAEF,IADA,IAAkBnpB,EAAdgI,EAAIof,GACDpf,IACAhI,EAAIupB,GAAWvhB,EAAEkiB,QAAU,GAAGliB,EAAEiiB,MAAMxrB,UAAKlI,EAAWyJ,GAC3DgI,EAAIA,EAAEkD,QAENie,EACJ,CAMIqB,EACJ,CAAY,QACRrB,GAAQ,EAWZ,WACE,IAAIsB,EAAmBC,EAAfC,EAAKvD,GAAciD,EAAOO,IAClC,KAAOD,GACDA,EAAGV,OACDI,EAAOM,EAAGT,QAAOG,EAAOM,EAAGT,OAC/BO,EAAKE,EAAIA,EAAKA,EAAGzf,QAEjBwf,EAAKC,EAAGzf,MAAOyf,EAAGzf,MAAQ,KAC1Byf,EAAKF,EAAKA,EAAGvf,MAAQwf,EAAKtD,GAAWsD,GAGzCrD,GAAWoD,EACXI,GAAMR,EACR,CAvBIS,GACAvB,GAAW,CACZ,CACH,CAEA,SAASwB,KACP,IAAIpB,EAAMF,GAAME,MAAOS,EAAQT,EAAML,GACjCc,EA7EU,MA6ESZ,IAAaY,EAAOd,GAAYK,EACzD,CAiBA,SAASkB,GAAMR,GACTlB,KACAC,KAASA,GAAU4B,aAAa5B,KACxBiB,EAAOd,GACP,IACNc,EAAOO,MAAUxB,GAAU5T,WAAW+U,GAAMF,EAAOZ,GAAME,MAAQH,KACjEH,KAAUA,GAAW4B,cAAc5B,OAElCA,KAAUC,GAAYG,GAAME,MAAON,GAAW6B,YAAYH,GAvGnD,MAwGZ5B,GAAQ,EAAGU,GAASU,KAExB,CC3Ge,SAAAnB,GAAS9yB,EAAU8zB,EAAOC,GACvC,IAAIriB,EAAI,IAAIgiB,GAMZ,OALAI,EAAiB,MAATA,EAAgB,GAAKA,EAC7BpiB,EAAEsiB,SAAQa,IACRnjB,EAAE3B,OACF/P,EAAS60B,EAAUf,EAAM,GACxBA,EAAOC,GACHriB,CACT,CDgBAgiB,GAAM3hB,UAAY8hB,GAAM9hB,UAAY,CAClCC,YAAa0hB,GACbM,QAAS,SAASh0B,EAAU8zB,EAAOC,GACjC,GAAwB,mBAAb/zB,EAAyB,MAAM,IAAI80B,UAAU,8BACxDf,GAAgB,MAARA,EAAeV,MAASU,IAAkB,MAATD,EAAgB,GAAKA,GACzDprB,KAAKkM,OAASmc,KAAaroB,OAC1BqoB,GAAUA,GAASnc,MAAQlM,KAC1BooB,GAAWpoB,KAChBqoB,GAAWroB,MAEbA,KAAKirB,MAAQ3zB,EACb0I,KAAKkrB,MAAQG,EACbQ,IACD,EACDxkB,KAAM,WACArH,KAAKirB,QACPjrB,KAAKirB,MAAQ,KACbjrB,KAAKkrB,MAAQU,IACbC,KAEH,GE3CH,IAAIQ,GAAUtjB,GAAS,QAAS,MAAO,SAAU,aAC7CujB,GAAa,GAUF,SAAAC,GAASxxB,EAAMS,EAAMgxB,EAAI9nB,EAAO4H,EAAOmgB,GACpD,IAAIC,EAAY3xB,EAAK4xB,aACrB,GAAKD,GACA,GAAIF,KAAME,EAAW,YADV3xB,EAAK4xB,aAAe,CAAA,GAmCtC,SAAgB5xB,EAAMyxB,EAAII,GACxB,IACIC,EADAH,EAAY3xB,EAAK4xB,aAQrB,SAASJ,EAASJ,GAChBS,EAAKE,MAtDc,EAuDnBF,EAAKzB,MAAMG,QAAQnkB,EAAOylB,EAAKxB,MAAOwB,EAAKvB,MAGvCuB,EAAKxB,OAASe,GAAShlB,EAAMglB,EAAUS,EAAKxB,MACjD,CAED,SAASjkB,EAAMglB,GACb,IAAIlzB,EAAGmX,EAAGlN,EAAGhB,EAGb,GAjEmB,IAiEf0qB,EAAKE,MAAqB,OAAOzlB,IAErC,IAAKpO,KAAKyzB,EAER,IADAxqB,EAAIwqB,EAAUzzB,IACRuC,OAASoxB,EAAKpxB,KAApB,CAKA,GAxEe,IAwEX0G,EAAE4qB,MAAmB,OAAO1C,GAAQjjB,GAvEzB,IA0EXjF,EAAE4qB,OACJ5qB,EAAE4qB,MAzES,EA0EX5qB,EAAEipB,MAAM9jB,OACRnF,EAAEqH,GAAG9J,KAAK,YAAa1E,EAAMA,EAAKqR,SAAUlK,EAAEwC,MAAOxC,EAAEoK,cAChDogB,EAAUzzB,KAITA,EAAIuzB,IACZtqB,EAAE4qB,MAjFS,EAkFX5qB,EAAEipB,MAAM9jB,OACRnF,EAAEqH,GAAG9J,KAAK,SAAU1E,EAAMA,EAAKqR,SAAUlK,EAAEwC,MAAOxC,EAAEoK,cAC7CogB,EAAUzzB,GApBgB,CAwCrC,GAZAmxB,IAAQ,WA/FS,IAgGXwC,EAAKE,QACPF,EAAKE,MAhGQ,EAiGbF,EAAKzB,MAAMG,QAAQyB,EAAMH,EAAKxB,MAAOwB,EAAKvB,MAC1C0B,EAAKZ,GAEb,IAIIS,EAAKE,MA1Ga,EA2GlBF,EAAKrjB,GAAG9J,KAAK,QAAS1E,EAAMA,EAAKqR,SAAUwgB,EAAKloB,MAAOkoB,EAAKtgB,OA3G1C,IA4GdsgB,EAAKE,MAAT,CAKA,IAJAF,EAAKE,MA5GY,EA+GjBD,EAAQ,IAAIvqB,MAAMY,EAAI0pB,EAAKC,MAAM7zB,QAC5BC,EAAI,EAAGmX,GAAK,EAAGnX,EAAIiK,IAAKjK,GACvBiJ,EAAI0qB,EAAKC,MAAM5zB,GAAGtB,MAAM8H,KAAK1E,EAAMA,EAAKqR,SAAUwgB,EAAKloB,MAAOkoB,EAAKtgB,UACrEugB,IAAQzc,GAAKlO,GAGjB2qB,EAAM7zB,OAASoX,EAAI,CAViB,CAWrC,CAED,SAAS2c,EAAKZ,GAKZ,IAJA,IAAInjB,EAAImjB,EAAUS,EAAK7C,SAAW6C,EAAKI,KAAKvtB,KAAK,KAAM0sB,EAAUS,EAAK7C,WAAa6C,EAAKzB,MAAMG,QAAQjkB,GAAOulB,EAAKE,MAvHlG,EAuHkH,GAC9H7zB,GAAK,EACLiK,EAAI2pB,EAAM7zB,SAELC,EAAIiK,GACX2pB,EAAM5zB,GAAGwG,KAAK1E,EAAMiO,GA5HN,IAgIZ4jB,EAAKE,QACPF,EAAKrjB,GAAG9J,KAAK,MAAO1E,EAAMA,EAAKqR,SAAUwgB,EAAKloB,MAAOkoB,EAAKtgB,OAC1DjF,IAEH,CAED,SAASA,IAIP,IAAK,IAAIpO,KAHT2zB,EAAKE,MAtIU,EAuIfF,EAAKzB,MAAM9jB,cACJqlB,EAAUF,GACHE,EAAW,cAClB3xB,EAAK4xB,YACb,CA9FDD,EAAUF,GAAMI,EAChBA,EAAKzB,MAAQA,GAAMoB,EAAU,EAAGK,EAAKvB,KA8FvC,CAtIE50B,CAAOsE,EAAMyxB,EAAI,CACfhxB,KAAMA,EACNkJ,MAAOA,EACP4H,MAAOA,EACP/C,GAAI8iB,GACJQ,MAAOP,GACPjB,KAAMoB,EAAOpB,KACbD,MAAOqB,EAAOrB,MACdrB,SAAU0C,EAAO1C,SACjBiD,KAAMP,EAAOO,KACb7B,MAAO,KACP2B,MAvBiB,GAyBrB,CAEO,SAASrnB,GAAK1K,EAAMyxB,GACzB,IAAID,EAAWzsB,GAAI/E,EAAMyxB,GACzB,GAAID,EAASO,MA7BM,EA6BW,MAAM,IAAIhuB,MAAM,+BAC9C,OAAOytB,CACT,CAEO,SAASlyB,GAAIU,EAAMyxB,GACxB,IAAID,EAAWzsB,GAAI/E,EAAMyxB,GACzB,GAAID,EAASO,MAhCM,EAgCW,MAAM,IAAIhuB,MAAM,6BAC9C,OAAOytB,CACT,CAEO,SAASzsB,GAAI/E,EAAMyxB,GACxB,IAAID,EAAWxxB,EAAK4xB,aACpB,IAAKJ,KAAcA,EAAWA,EAASC,IAAM,MAAM,IAAI1tB,MAAM,wBAC7D,OAAOytB,CACT,CC/Ce,SAAAU,GAASlyB,EAAMS,GAC5B,IACI+wB,EACA1V,EAEA5d,EAJAyzB,EAAY3xB,EAAK4xB,aAGjB1wB,GAAQ,EAGZ,GAAKywB,EAAL,CAIA,IAAKzzB,KAFLuC,EAAe,MAARA,EAAe,KAAOA,EAAO,GAE1BkxB,GACHH,EAAWG,EAAUzzB,IAAIuC,OAASA,GACvCqb,EAAS0V,EAASO,MDPA,GCOoBP,EAASO,MDJ/B,ECKhBP,EAASO,MDJM,ECKfP,EAASpB,MAAM9jB,OACfklB,EAAShjB,GAAG9J,KAAKoX,EAAS,YAAc,SAAU9b,EAAMA,EAAKqR,SAAUmgB,EAAS7nB,MAAO6nB,EAASjgB,cACzFogB,EAAUzzB,IAL8BgD,GAAQ,EAQrDA,UAAclB,EAAK4xB,YAbA,CAczB,CCrBA,SAASO,GAAYV,EAAIhxB,GACvB,IAAI2xB,EAAQC,EACZ,OAAO,WACL,IAAIb,EAAWlyB,GAAI2F,KAAMwsB,GACrBK,EAAQN,EAASM,MAKrB,GAAIA,IAAUM,EAEZ,IAAK,IAAIl0B,EAAI,EAAGiK,GADhBkqB,EAASD,EAASN,GACS7zB,OAAQC,EAAIiK,IAAKjK,EAC1C,GAAIm0B,EAAOn0B,GAAGuC,OAASA,EAAM,EAC3B4xB,EAASA,EAAO50B,SACToO,OAAO3N,EAAG,GACjB,KACD,CAILszB,EAASM,MAAQO,CACrB,CACA,CAEA,SAASC,GAAcb,EAAIhxB,EAAM7D,GAC/B,IAAIw1B,EAAQC,EACZ,GAAqB,mBAAVz1B,EAAsB,MAAM,IAAImH,MAC3C,OAAO,WACL,IAAIytB,EAAWlyB,GAAI2F,KAAMwsB,GACrBK,EAAQN,EAASM,MAKrB,GAAIA,IAAUM,EAAQ,CACpBC,GAAUD,EAASN,GAAOr0B,QAC1B,IAAK,IAAIwQ,EAAI,CAACxN,KAAMA,EAAM7D,MAAOA,GAAQsB,EAAI,EAAGiK,EAAIkqB,EAAOp0B,OAAQC,EAAIiK,IAAKjK,EAC1E,GAAIm0B,EAAOn0B,GAAGuC,OAASA,EAAM,CAC3B4xB,EAAOn0B,GAAK+P,EACZ,KACD,CAEC/P,IAAMiK,GAAGkqB,EAAOn1B,KAAK+Q,EAC1B,CAEDujB,EAASM,MAAQO,CACrB,CACA,CAoBO,SAASE,GAAWC,EAAY/xB,EAAM7D,GAC3C,IAAI60B,EAAKe,EAAWC,IAOpB,OALAD,EAAWzY,MAAK,WACd,IAAIyX,EAAWlyB,GAAI2F,KAAMwsB,IACxBD,EAAS50B,QAAU40B,EAAS50B,MAAQ,CAAE,IAAG6D,GAAQ7D,EAAMsS,MAAMjK,KAAMiJ,UACxE,IAES,SAASlO,GACd,OAAO+E,GAAI/E,EAAMyxB,GAAI70B,MAAM6D,EAC/B,CACA,CC7Ee,SAAAiyB,GAASz2B,EAAGC,GACzB,IAAI0K,EACJ,OAAqB,iBAAN1K,EAAiBguB,GAC1BhuB,aAAaqrB,GAAQuC,IACpBljB,EAAI2gB,GAAMrrB,KAAOA,EAAI0K,EAAGkjB,IACzBQ,IAAmBruB,EAAGC,EAC9B,CCJA,SAASiW,GAAW1R,GAClB,OAAO,WACLwE,KAAKtD,gBAAgBlB,EACzB,CACA,CAEA,SAAS2R,GAAanC,GACpB,OAAO,WACLhL,KAAKoN,kBAAkBpC,EAAShP,MAAOgP,EAASjJ,MACpD,CACA,CAEA,SAASsL,GAAa7R,EAAMiyB,EAAaC,GACvC,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAU9tB,KAAKrD,aAAanB,GAChC,OAAOsyB,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACzD,CACA,CAEA,SAASpgB,GAAetC,EAAUyiB,EAAaC,GAC7C,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAU9tB,KAAK+U,eAAe/J,EAAShP,MAAOgP,EAASjJ,OAC3D,OAAO+rB,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACzD,CACA,CAEA,SAASlgB,GAAahS,EAAMiyB,EAAa91B,GACvC,IAAIg2B,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBH,EAAS/1B,EAAMqI,MAC5B,GAAc,MAAV0tB,EAGJ,OAFAI,EAAU9tB,KAAKrD,aAAanB,OAC5BqyB,EAAUH,EAAS,IACU,KACvBI,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,IAL1C1tB,KAAKtD,gBAAgBlB,EAMzD,CACA,CAEA,SAASiS,GAAezC,EAAUyiB,EAAa91B,GAC7C,IAAIg2B,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBH,EAAS/1B,EAAMqI,MAC5B,GAAc,MAAV0tB,EAGJ,OAFAI,EAAU9tB,KAAK+U,eAAe/J,EAAShP,MAAOgP,EAASjJ,WACvD8rB,EAAUH,EAAS,IACU,KACvBI,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,IAL1C1tB,KAAKoN,kBAAkBpC,EAAShP,MAAOgP,EAASjJ,MAMpF,CACA,CCvDA,SAASisB,GAAYhjB,EAAUrT,GAC7B,IAAI8zB,EAAIlY,EACR,SAASsZ,IACP,IAAI5zB,EAAItB,EAAMsS,MAAMjK,KAAMiJ,WAE1B,OADIhQ,IAAMsa,IAAIkY,GAAMlY,EAAKta,IAV7B,SAA2B+R,EAAU/R,GACnC,OAAO,SAAS+P,GACdhJ,KAAKuN,eAAevC,EAAShP,MAAOgP,EAASjJ,MAAO9I,EAAEwG,KAAKO,KAAMgJ,GACrE,CACA,CAMmCilB,CAAkBjjB,EAAU/R,IACpDwyB,CACR,CAED,OADAoB,EAAMqB,OAASv2B,EACRk1B,CACT,CAEA,SAASsB,GAAU3yB,EAAM7D,GACvB,IAAI8zB,EAAIlY,EACR,SAASsZ,IACP,IAAI5zB,EAAItB,EAAMsS,MAAMjK,KAAMiJ,WAE1B,OADIhQ,IAAMsa,IAAIkY,GAAMlY,EAAKta,IA3B7B,SAAyBuC,EAAMvC,GAC7B,OAAO,SAAS+P,GACdhJ,KAAKpD,aAAapB,EAAMvC,EAAEwG,KAAKO,KAAMgJ,GACzC,CACA,CAuBmColB,CAAgB5yB,EAAMvC,IAC9CwyB,CACR,CAED,OADAoB,EAAMqB,OAASv2B,EACRk1B,CACT,CChCA,SAASwB,GAAc7B,EAAI70B,GACzB,OAAO,WACL8N,GAAKzF,KAAMwsB,GAAIpB,OAASzzB,EAAMsS,MAAMjK,KAAMiJ,UAC9C,CACA,CAEA,SAASqlB,GAAc9B,EAAI70B,GACzB,OAAOA,GAASA,EAAO,WACrB8N,GAAKzF,KAAMwsB,GAAIpB,MAAQzzB,CAC3B,CACA,CCVA,SAAS42B,GAAiB/B,EAAI70B,GAC5B,OAAO,WACL0C,GAAI2F,KAAMwsB,GAAIzC,UAAYpyB,EAAMsS,MAAMjK,KAAMiJ,UAChD,CACA,CAEA,SAASulB,GAAiBhC,EAAI70B,GAC5B,OAAOA,GAASA,EAAO,WACrB0C,GAAI2F,KAAMwsB,GAAIzC,SAAWpyB,CAC7B,CACA,CCVA,IAAIsZ,GAAYK,GAAUjI,UAAUC,YCiBpC,SAASqE,GAAYnS,GACnB,OAAO,WACLwE,KAAK5C,MAAMM,eAAelC,EAC9B,CACA,CCDA,IAAIgxB,GAAK,EAEF,SAASiC,GAAWvd,EAAQC,EAAS3V,EAAMgxB,GAChDxsB,KAAKoR,QAAUF,EACflR,KAAKqR,SAAWF,EAChBnR,KAAK0uB,MAAQlzB,EACbwE,KAAKwtB,IAAMhB,CACb,CAMO,SAASmC,KACd,QAASnC,EACX,CAEA,IAAIoC,GAAsBtd,GAAUjI,UAEpColB,GAAWplB,UAAmC,CAC5CC,YAAamlB,GACb5wB,OCvCa,SAASA,GACtB,IAAIrC,EAAOwE,KAAK0uB,MACZlC,EAAKxsB,KAAKwtB,IAEQ,mBAAX3vB,IAAuBA,EAASsN,GAAStN,IAEpD,IAAK,IAAIqT,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,IAAIrQ,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAC3F,IAAK,IAAiFrV,EAAM6X,EAAnFtG,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAQ6Z,EAAWF,EAAUvC,GAAK,IAAI9N,MAAMY,GAAmBjK,EAAI,EAAGA,EAAIiK,IAAKjK,GAC9G8B,EAAOuR,EAAMrT,MAAQ2Z,EAAU/U,EAAO4B,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,MAClE,aAAcvR,IAAM6X,EAAQxG,SAAWrR,EAAKqR,UAChDyG,EAAS5Z,GAAK2Z,EACd2Z,GAAS1Z,EAAS5Z,GAAIuC,EAAMgxB,EAAIvzB,EAAG4Z,EAAU/S,GAAI/E,EAAMyxB,KAK7D,OAAO,IAAIiC,GAAW9b,EAAW3S,KAAKqR,SAAU7V,EAAMgxB,EACxD,EDuBE1Z,UExCa,SAASjV,GACtB,IAAIrC,EAAOwE,KAAK0uB,MACZlC,EAAKxsB,KAAKwtB,IAEQ,mBAAX3vB,IAAuBA,EAASwN,GAAYxN,IAEvD,IAAK,IAAIqT,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,GAAIxB,EAAU,GAAIf,EAAI,EAAGA,EAAIvM,IAAKuM,EAC/F,IAAK,IAAyCrV,EAArCuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAcC,EAAI,EAAGA,EAAIiK,IAAKjK,EAClE,GAAI8B,EAAOuR,EAAMrT,GAAI,CACnB,IAAK,IAA2D6X,EAAvDzK,EAAWxI,EAAO4B,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,GAAeuiB,EAAU/uB,GAAI/E,EAAMyxB,GAAKp2B,EAAI,EAAGkQ,EAAID,EAASrN,OAAQ5C,EAAIkQ,IAAKlQ,GAC/H0a,EAAQzK,EAASjQ,KACnBm2B,GAASzb,EAAOtV,EAAMgxB,EAAIp2B,EAAGiQ,EAAUwoB,GAG3Clc,EAAU1a,KAAKoO,GACf8K,EAAQlZ,KAAK8C,EACd,CAIL,OAAO,IAAI0zB,GAAW9b,EAAWxB,EAAS3V,EAAMgxB,EAClD,EFoBEzZ,YAAa6b,GAAoB7b,YACjCG,eAAgB0b,GAAoB1b,eACpClO,OG5Ca,SAASgO,GACD,mBAAVA,IAAsBA,EAAQvH,GAAQuH,IAEjD,IAAK,IAAI9B,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQ2Z,EAAY,IAAIrQ,MAAMuB,GAAIuM,EAAI,EAAGA,EAAIvM,IAAKuM,EAC3F,IAAK,IAAuErV,EAAnEuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAQ6Z,EAAWF,EAAUvC,GAAK,GAAUnX,EAAI,EAAGA,EAAIiK,IAAKjK,GAC3F8B,EAAOuR,EAAMrT,KAAO+Z,EAAMvT,KAAK1E,EAAMA,EAAKqR,SAAUnT,EAAGqT,IAC1DuG,EAAS5a,KAAK8C,GAKpB,OAAO,IAAI0zB,GAAW9b,EAAW3S,KAAKqR,SAAUrR,KAAK0uB,MAAO1uB,KAAKwtB,IACnE,EHiCE1Z,MI9Ca,SAASyZ,GACtB,GAAIA,EAAWC,MAAQxtB,KAAKwtB,IAAK,MAAM,IAAI1uB,MAE3C,IAAK,IAAIkV,EAAUhU,KAAKoR,QAAS6C,EAAUsZ,EAAWnc,QAAS8C,EAAKF,EAAQhb,OAAQmb,EAAKF,EAAQjb,OAAQ6K,EAAI/K,KAAKsb,IAAIF,EAAIC,GAAKE,EAAS,IAAI/R,MAAM4R,GAAK9D,EAAI,EAAGA,EAAIvM,IAAKuM,EACrK,IAAK,IAAmGrV,EAA/FuZ,EAASN,EAAQ5D,GAAImE,EAASN,EAAQ7D,GAAIlN,EAAIoR,EAAOtb,OAAQ8a,EAAQO,EAAOjE,GAAK,IAAI9N,MAAMY,GAAUjK,EAAI,EAAGA,EAAIiK,IAAKjK,GACxH8B,EAAOuZ,EAAOrb,IAAMsb,EAAOtb,MAC7B6a,EAAM7a,GAAK8B,GAKjB,KAAOqV,EAAI8D,IAAM9D,EACfiE,EAAOjE,GAAK4D,EAAQ5D,GAGtB,OAAO,IAAIqe,GAAWpa,EAAQrU,KAAKqR,SAAUrR,KAAK0uB,MAAO1uB,KAAKwtB,IAChE,EJ+BElc,UF7Ca,WACb,OAAO,IAAIL,GAAUjR,KAAKoR,QAASpR,KAAKqR,SAC1C,EE4CEkc,WK/Ca,WAKb,IAJA,IAAI/xB,EAAOwE,KAAK0uB,MACZI,EAAM9uB,KAAKwtB,IACXuB,EAAMJ,KAEDzd,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQoX,EAAI,EAAGA,EAAIvM,IAAKuM,EACjE,IAAK,IAAyCrV,EAArCuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAcC,EAAI,EAAGA,EAAIiK,IAAKjK,EAClE,GAAI8B,EAAOuR,EAAMrT,GAAI,CACnB,IAAI41B,EAAU/uB,GAAI/E,EAAM+zB,GACxBvC,GAASxxB,EAAMS,EAAMuzB,EAAK91B,EAAGqT,EAAO,CAClC+e,KAAMwD,EAAQxD,KAAOwD,EAAQzD,MAAQyD,EAAQ9E,SAC7CqB,MAAO,EACPrB,SAAU8E,EAAQ9E,SAClBiD,KAAM6B,EAAQ7B,MAEjB,CAIL,OAAO,IAAIyB,GAAWvd,EAAQlR,KAAKqR,SAAU7V,EAAMuzB,EACrD,EL4BEtvB,KAAMmvB,GAAoBnvB,KAC1B0G,MAAOyoB,GAAoBzoB,MAC3BpL,KAAM6zB,GAAoB7zB,KAC1B4M,KAAMinB,GAAoBjnB,KAC1B1L,MAAO2yB,GAAoB3yB,MAC3B6Y,KAAM8Z,GAAoB9Z,KAC1BvL,GMhCa,SAAS/N,EAAM6U,GAC5B,IAAImc,EAAKxsB,KAAKwtB,IAEd,OAAOvkB,UAAUjQ,OAAS,EACpB8G,GAAIE,KAAKjF,OAAQyxB,GAAIjjB,GAAGA,GAAG/N,GAC3BwE,KAAK8U,KApBb,SAAoB0X,EAAIhxB,EAAM6U,GAC5B,IAAI2e,EAAKC,EAAKC,EAThB,SAAe1zB,GACb,OAAQA,EAAO,IAAImO,OAAOC,MAAM,SAAS1B,OAAM,SAASc,GACtD,IAAI/P,EAAI+P,EAAE1L,QAAQ,KAElB,OADIrE,GAAK,IAAG+P,EAAIA,EAAExQ,MAAM,EAAGS,KACnB+P,GAAW,UAANA,CACjB,GACA,CAGsB7B,CAAM3L,GAAQiK,GAAOpL,GACzC,OAAO,WACL,IAAIkyB,EAAW2C,EAAIlvB,KAAMwsB,GACrBjjB,EAAKgjB,EAAShjB,GAKdA,IAAOylB,IAAMC,GAAOD,EAAMzlB,GAAIO,QAAQP,GAAG/N,EAAM6U,GAEnDkc,EAAShjB,GAAK0lB,CAClB,CACA,CAOkBE,CAAW3C,EAAIhxB,EAAM6U,GACvC,EN2BE7T,KNaa,SAAShB,EAAM7D,GAC5B,IAAIqT,EAAWR,GAAUhP,GAAOvC,EAAiB,cAAb+R,EAA2B8b,GAAuB2G,GACtF,OAAOztB,KAAKmuB,UAAU3yB,EAAuB,mBAAV7D,GAC5BqT,EAASjJ,MAAQ0L,GAAiBD,IAAcxC,EAAU/R,EAAGq0B,GAAWttB,KAAM,QAAUxE,EAAM7D,IACtF,MAATA,GAAiBqT,EAASjJ,MAAQoL,GAAeD,IAAYlC,IAC5DA,EAASjJ,MAAQuL,GAAiBD,IAAcrC,EAAU/R,EAAGtB,GACtE,EMlBEw2B,ULvBa,SAAS3yB,EAAM7D,GAC5B,IAAIwF,EAAM,QAAU3B,EACpB,GAAIyN,UAAUjQ,OAAS,EAAG,OAAQmE,EAAM6C,KAAK6sB,MAAM1vB,KAASA,EAAI+wB,OAChE,GAAa,MAATv2B,EAAe,OAAOqI,KAAK6sB,MAAM1vB,EAAK,MAC1C,GAAqB,mBAAVxF,EAAsB,MAAM,IAAImH,MAC3C,IAAIkM,EAAWR,GAAUhP,GACzB,OAAOwE,KAAK6sB,MAAM1vB,GAAM6N,EAASjJ,MAAQisB,GAAcG,IAAWnjB,EAAUrT,GAC9E,EKiBEyF,MDQa,SAAS5B,EAAM7D,EAAOkW,GACnC,IAAI5U,EAAqB,cAAhBuC,GAAQ,IAAsBsrB,GAAuB2G,GAC9D,OAAgB,MAAT91B,EAAgBqI,KAClBovB,WAAW5zB,EAjElB,SAAmBA,EAAMiyB,GACvB,IAAIE,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU1wB,GAAM4C,KAAMxE,GACtBqyB,GAAW7tB,KAAK5C,MAAMM,eAAelC,GAAO4B,GAAM4C,KAAMxE,IAC5D,OAAOsyB,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,EAC/CA,EAAeH,EAAYE,EAAWG,EAASC,EAAWF,EACpE,CACA,CAsDwBwB,CAAU7zB,EAAMvC,IACjCsQ,GAAG,aAAe/N,EAAMmS,GAAYnS,IACpB,mBAAV7D,EAAuBqI,KAC7BovB,WAAW5zB,EArClB,SAAuBA,EAAMiyB,EAAa91B,GACxC,IAAIg2B,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU1wB,GAAM4C,KAAMxE,GACtBkyB,EAAS/1B,EAAMqI,MACf6tB,EAAUH,EAAS,GAEvB,OADc,MAAVA,IAAoC1tB,KAAK5C,MAAMM,eAAelC,GAA9CqyB,EAAUH,EAA2CtwB,GAAM4C,KAAMxE,IAC9EsyB,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,GAC9E,CACA,CAwBwB5f,CAActS,EAAMvC,EAAGq0B,GAAWttB,KAAM,SAAWxE,EAAM7D,KAC1Emd,KAvBP,SAA0B0X,EAAIhxB,GAC5B,IAAIwzB,EAAKC,EAAKK,EAAwD1gB,EAA7CzR,EAAM,SAAW3B,EAAMW,EAAQ,OAASgB,EACjE,OAAO,WACL,IAAIovB,EAAWlyB,GAAI2F,KAAMwsB,GACrBjjB,EAAKgjB,EAAShjB,GACd8G,EAAkC,MAAvBkc,EAAS50B,MAAMwF,GAAeyR,IAAWA,EAASjB,GAAYnS,SAASjE,EAKlFgS,IAAOylB,GAAOM,IAAcjf,IAAW4e,GAAOD,EAAMzlB,GAAIO,QAAQP,GAAGpN,EAAOmzB,EAAYjf,GAE1Fkc,EAAShjB,GAAK0lB,CAClB,CACA,CASYM,CAAiBvvB,KAAKwtB,IAAKhyB,IACjCwE,KACCovB,WAAW5zB,EApDlB,SAAuBA,EAAMiyB,EAAaC,GACxC,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAU1wB,GAAM4C,KAAMxE,GAC1B,OAAOsyB,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACzD,CACA,CA0CwB9f,CAAcpS,EAAMvC,EAAGtB,GAAQkW,GAChDtE,GAAG,aAAe/N,EAAM,KAC/B,EClBE4zB,WO5Ca,SAAS5zB,EAAM7D,EAAOkW,GACnC,IAAI1Q,EAAM,UAAY3B,GAAQ,IAC9B,GAAIyN,UAAUjQ,OAAS,EAAG,OAAQmE,EAAM6C,KAAK6sB,MAAM1vB,KAASA,EAAI+wB,OAChE,GAAa,MAATv2B,EAAe,OAAOqI,KAAK6sB,MAAM1vB,EAAK,MAC1C,GAAqB,mBAAVxF,EAAsB,MAAM,IAAImH,MAC3C,OAAOkB,KAAK6sB,MAAM1vB,EAhBpB,SAAoB3B,EAAM7D,EAAOkW,GAC/B,IAAI7E,EAAGuK,EACP,SAASsZ,IACP,IAAI5zB,EAAItB,EAAMsS,MAAMjK,KAAMiJ,WAE1B,OADIhQ,IAAMsa,IAAIvK,GAAKuK,EAAKta,IAV5B,SAA0BuC,EAAMvC,EAAG4U,GACjC,OAAO,SAAS7E,GACdhJ,KAAK5C,MAAMO,YAAYnC,EAAMvC,EAAEwG,KAAKO,KAAMgJ,GAAI6E,EAClD,CACA,CAMkC2hB,CAAiBh0B,EAAMvC,EAAG4U,IACjD7E,CACR,CAED,OADA6jB,EAAMqB,OAASv2B,EACRk1B,CACT,CAOyBuC,CAAW5zB,EAAM7D,EAAmB,MAAZkW,EAAmB,GAAKA,GACzE,EPuCEhS,KQ/Ca,SAASlE,GACtB,OAAOqI,KAAK6sB,MAAM,OAAyB,mBAAVl1B,EARnC,SAAsBA,GACpB,OAAO,WACL,IAAI+1B,EAAS/1B,EAAMqI,MACnBA,KAAKiP,YAAwB,MAAVye,EAAiB,GAAKA,CAC7C,CACA,CAIQve,CAAame,GAAWttB,KAAM,OAAQrI,IAf9C,SAAsBA,GACpB,OAAO,WACLqI,KAAKiP,YAActX,CACvB,CACA,CAYQuX,CAAsB,MAATvX,EAAgB,GAAKA,EAAQ,IAClD,ER4CE83B,US9Ca,SAAS93B,GACtB,IAAIwF,EAAM,OACV,GAAI8L,UAAUjQ,OAAS,EAAG,OAAQmE,EAAM6C,KAAK6sB,MAAM1vB,KAASA,EAAI+wB,OAChE,GAAa,MAATv2B,EAAe,OAAOqI,KAAK6sB,MAAM1vB,EAAK,MAC1C,GAAqB,mBAAVxF,EAAsB,MAAM,IAAImH,MAC3C,OAAOkB,KAAK6sB,MAAM1vB,EAhBpB,SAAmBxF,GACjB,IAAI8zB,EAAIlY,EACR,SAASsZ,IACP,IAAI5zB,EAAItB,EAAMsS,MAAMjK,KAAMiJ,WAE1B,OADIhQ,IAAMsa,IAAIkY,GAAMlY,EAAKta,IAV7B,SAAyBA,GACvB,OAAO,SAAS+P,GACdhJ,KAAKiP,YAAchW,EAAEwG,KAAKO,KAAMgJ,EACpC,CACA,CAMmC0mB,CAAgBz2B,IACxCwyB,CACR,CAED,OADAoB,EAAMqB,OAASv2B,EACRk1B,CACT,CAOyB4C,CAAU93B,GACnC,ETyCEiX,OUxDa,WACb,OAAO5O,KAAKuJ,GAAG,aATjB,SAAwBijB,GACtB,OAAO,WACL,IAAIluB,EAAS0B,KAAK3E,WAClB,IAAK,IAAIpC,KAAK+G,KAAK2sB,aAAc,IAAK1zB,IAAMuzB,EAAI,OAC5CluB,GAAQA,EAAOhD,YAAY0E,KACnC,CACA,CAG+B2vB,CAAe3vB,KAAKwtB,KACnD,EVuDEX,MRda,SAASrxB,EAAM7D,GAC5B,IAAI60B,EAAKxsB,KAAKwtB,IAId,GAFAhyB,GAAQ,GAEJyN,UAAUjQ,OAAS,EAAG,CAExB,IADA,IACkCgQ,EAD9B6jB,EAAQ/sB,GAAIE,KAAKjF,OAAQyxB,GAAIK,MACxB5zB,EAAI,EAAGiK,EAAI2pB,EAAM7zB,OAAWC,EAAIiK,IAAKjK,EAC5C,IAAK+P,EAAI6jB,EAAM5zB,IAAIuC,OAASA,EAC1B,OAAOwN,EAAErR,MAGb,OAAO,IACR,CAED,OAAOqI,KAAK8U,MAAe,MAATnd,EAAgBu1B,GAAcG,IAAeb,EAAIhxB,EAAM7D,GAC3E,EQDEyzB,MJpDa,SAASzzB,GACtB,IAAI60B,EAAKxsB,KAAKwtB,IAEd,OAAOvkB,UAAUjQ,OACXgH,KAAK8U,MAAuB,mBAAVnd,EACd02B,GACAC,IAAe9B,EAAI70B,IACvBmI,GAAIE,KAAKjF,OAAQyxB,GAAIpB,KAC7B,EI6CErB,SHrDa,SAASpyB,GACtB,IAAI60B,EAAKxsB,KAAKwtB,IAEd,OAAOvkB,UAAUjQ,OACXgH,KAAK8U,MAAuB,mBAAVnd,EACd42B,GACAC,IAAkBhC,EAAI70B,IAC1BmI,GAAIE,KAAKjF,OAAQyxB,GAAIzC,QAC7B,EG8CEiD,KW3Da,SAASr1B,GACtB,IAAI60B,EAAKxsB,KAAKwtB,IAEd,OAAOvkB,UAAUjQ,OACXgH,KAAK8U,KAXb,SAAsB0X,EAAI70B,GACxB,GAAqB,mBAAVA,EAAsB,MAAM,IAAImH,MAC3C,OAAO,WACLzE,GAAI2F,KAAMwsB,GAAIQ,KAAOr1B,CACzB,CACA,CAMkBi4B,CAAapD,EAAI70B,IAC3BmI,GAAIE,KAAKjF,OAAQyxB,GAAIQ,IAC7B,EXsDE6C,YY3Da,SAASl4B,GACtB,GAAqB,mBAAVA,EAAsB,MAAM,IAAImH,MAC3C,OAAOkB,KAAK8U,KAVd,SAAqB0X,EAAI70B,GACvB,OAAO,WACL,IAAIqP,EAAIrP,EAAMsS,MAAMjK,KAAMiJ,WAC1B,GAAiB,mBAANjC,EAAkB,MAAM,IAAIlI,MACvCzE,GAAI2F,KAAMwsB,GAAIQ,KAAOhmB,CACzB,CACA,CAImB6oB,CAAY7vB,KAAKwtB,IAAK71B,GACzC,EZyDEotB,IapEa,WACb,IAAIiK,EAAKC,EAAKllB,EAAO/J,KAAMwsB,EAAKziB,EAAKyjB,IAAK7lB,EAAOoC,EAAKpC,OACtD,OAAO,IAAIrH,SAAQ,SAASC,EAASuvB,GACnC,IAAIC,EAAS,CAACp4B,MAAOm4B,GACjB/K,EAAM,CAACptB,MAAO,WAA4B,KAATgQ,GAAYpH,GAAU,GAE3DwJ,EAAK+K,MAAK,WACR,IAAIyX,EAAWlyB,GAAI2F,KAAMwsB,GACrBjjB,EAAKgjB,EAAShjB,GAKdA,IAAOylB,KACTC,GAAOD,EAAMzlB,GAAIO,QACblS,EAAEm4B,OAAO93B,KAAK83B,GAClBd,EAAIr3B,EAAEq1B,UAAUh1B,KAAK83B,GACrBd,EAAIr3B,EAAEmtB,IAAI9sB,KAAK8sB,IAGjBwH,EAAShjB,GAAK0lB,CACpB,IAGiB,IAATtnB,GAAYpH,GACpB,GACA,Eb2CE,CAACgV,OAAOC,UAAWoZ,GAAoBrZ,OAAOC,WclEhD,IAAIwa,GAAgB,CAClB3E,KAAM,KACND,MAAO,EACPrB,SAAU,IACViD,KCDK,SAAoBhkB,GACzB,QAASA,GAAK,IAAM,EAAIA,EAAIA,EAAIA,GAAKA,GAAK,GAAKA,EAAIA,EAAI,GAAK,CAC9D,GDEA,SAAS6lB,GAAQ9zB,EAAMyxB,GAErB,IADA,IAAIC,IACKA,EAAS1xB,EAAK4xB,iBAAmBF,EAASA,EAAOD,KACxD,KAAMzxB,EAAOA,EAAKM,YAChB,MAAM,IAAIyD,MAAM,cAAc0tB,eAGlC,OAAOC,CACT,CEhBAnb,GAAUjI,UAAU4jB,UCFL,SAASzxB,GACtB,OAAOwE,KAAK8U,MAAK,WACfmY,GAAUjtB,KAAMxE,EACpB,GACA,EDDA8V,GAAUjI,UAAUkkB,WFiBL,SAAS/xB,GACtB,IAAIgxB,EACAC,EAEAjxB,aAAgBizB,IAClBjC,EAAKhxB,EAAKgyB,IAAKhyB,EAAOA,EAAKkzB,QAE3BlC,EAAKmC,MAAUlC,EAASuD,IAAe3E,KAAOV,KAAOnvB,EAAe,MAARA,EAAe,KAAOA,EAAO,IAG3F,IAAK,IAAI0V,EAASlR,KAAKoR,QAASvN,EAAIqN,EAAOlY,OAAQoX,EAAI,EAAGA,EAAIvM,IAAKuM,EACjE,IAAK,IAAyCrV,EAArCuR,EAAQ4E,EAAOd,GAAIlN,EAAIoJ,EAAMtT,OAAcC,EAAI,EAAGA,EAAIiK,IAAKjK,GAC9D8B,EAAOuR,EAAMrT,KACfszB,GAASxxB,EAAMS,EAAMgxB,EAAIvzB,EAAGqT,EAAOmgB,GAAUoC,GAAQ9zB,EAAMyxB,IAKjE,OAAO,IAAIiC,GAAWvd,EAAQlR,KAAKqR,SAAU7V,EAAMgxB,EACrD,EIzCA,IAAe7H,GAAAnZ,GAAK,IAAMA,ECAX,SAASykB,GAAU9wB,GAAMqS,YACtCA,EAAW1W,OACXA,EAAMgtB,UACNA,EAAS/e,SACTA,IAEAvS,OAAOwgB,iBAAiBhX,KAAM,CAC5Bb,KAAM,CAACxH,MAAOwH,EAAM8X,YAAY,EAAMC,cAAc,GACpD1F,YAAa,CAAC7Z,MAAO6Z,EAAayF,YAAY,EAAMC,cAAc,GAClEpc,OAAQ,CAACnD,MAAOmD,EAAQmc,YAAY,EAAMC,cAAc,GACxD4Q,UAAW,CAACnwB,MAAOmwB,EAAW7Q,YAAY,EAAMC,cAAc,GAC9Dtf,EAAG,CAACD,MAAOoR,IAEf,CCbO,SAASmnB,GAAU95B,EAAGoV,EAAGsG,GAC9B9R,KAAK5J,EAAIA,EACT4J,KAAKwL,EAAIA,EACTxL,KAAK8R,EAAIA,CACX,CAEAoe,GAAU7mB,UAAY,CACpBC,YAAa4mB,GACb1I,MAAO,SAASpxB,GACd,OAAa,IAANA,EAAU4J,KAAO,IAAIkwB,GAAUlwB,KAAK5J,EAAIA,EAAG4J,KAAKwL,EAAGxL,KAAK8R,EAChE,EACDyV,UAAW,SAAS/b,EAAGsG,GACrB,OAAa,IAANtG,EAAgB,IAANsG,EAAU9R,KAAO,IAAIkwB,GAAUlwB,KAAK5J,EAAG4J,KAAKwL,EAAIxL,KAAK5J,EAAIoV,EAAGxL,KAAK8R,EAAI9R,KAAK5J,EAAI0b,EAChG,EACD7H,MAAO,SAAS2H,GACd,MAAO,CAACA,EAAM,GAAK5R,KAAK5J,EAAI4J,KAAKwL,EAAGoG,EAAM,GAAK5R,KAAK5J,EAAI4J,KAAK8R,EAC9D,EACDqe,OAAQ,SAAS3kB,GACf,OAAOA,EAAIxL,KAAK5J,EAAI4J,KAAKwL,CAC1B,EACD4kB,OAAQ,SAASte,GACf,OAAOA,EAAI9R,KAAK5J,EAAI4J,KAAK8R,CAC1B,EACDue,OAAQ,SAASC,GACf,MAAO,EAAEA,EAAS,GAAKtwB,KAAKwL,GAAKxL,KAAK5J,GAAIk6B,EAAS,GAAKtwB,KAAK8R,GAAK9R,KAAK5J,EACxE,EACDm6B,QAAS,SAAS/kB,GAChB,OAAQA,EAAIxL,KAAKwL,GAAKxL,KAAK5J,CAC5B,EACDo6B,QAAS,SAAS1e,GAChB,OAAQA,EAAI9R,KAAK8R,GAAK9R,KAAK5J,CAC5B,EACDq6B,SAAU,SAASjlB,GACjB,OAAOA,EAAE1B,OAAO4mB,OAAOllB,EAAEmlB,QAAQ5rB,IAAI/E,KAAKuwB,QAASvwB,MAAM+E,IAAIyG,EAAE6kB,OAAQ7kB,GACxE,EACDolB,SAAU,SAAS9e,GACjB,OAAOA,EAAEhI,OAAO4mB,OAAO5e,EAAE6e,QAAQ5rB,IAAI/E,KAAKwwB,QAASxwB,MAAM+E,IAAI+M,EAAEue,OAAQve,GACxE,EACD0R,SAAU,WACR,MAAO,aAAexjB,KAAKwL,EAAI,IAAMxL,KAAK8R,EAAI,WAAa9R,KAAK5J,EAAI,GACrE,GAGI,IAAI8vB,GAAW,IAAIgK,GAAU,EAAG,EAAG,GAI3B,SAASpI,GAAU/sB,GAChC,MAAQA,EAAK81B,aAAc91B,EAAOA,EAAKM,YAAa,OAAO6qB,GAC3D,OAAOnrB,EAAK81B,MACd,CClDO,SAAShb,GAAc1Z,GAC5BA,EAAM2Z,0BACR,CAEe,SAAQK,GAACha,GACtBA,EAAM6Z,iBACN7Z,EAAM2Z,0BACR,CCKA,SAASqB,GAAchb,GACrB,QAASA,EAAMib,SAA0B,UAAfjb,EAAMgD,MAAsBhD,EAAMkb,OAC9D,CAEA,SAASyZ,KACP,IAAI9vB,EAAIhB,KACR,OAAIgB,aAAa+vB,YACf/vB,EAAIA,EAAE0Q,iBAAmB1Q,GACnBgwB,aAAa,WAEV,CAAC,EADRhwB,EAAIA,EAAEiwB,QAAQlJ,SACHvc,EAAGxK,EAAE8Q,GAAI,CAAC9Q,EAAEwK,EAAIxK,EAAEkwB,MAAOlwB,EAAE8Q,EAAI9Q,EAAEmwB,SAEvC,CAAC,CAAC,EAAG,GAAI,CAACnwB,EAAEkwB,MAAMnJ,QAAQpwB,MAAOqJ,EAAEmwB,OAAOpJ,QAAQpwB,QAEpD,CAAC,CAAC,EAAG,GAAI,CAACqJ,EAAEowB,YAAapwB,EAAEqwB,cACpC,CAEA,SAASC,KACP,OAAOtxB,KAAK6wB,QAAU3K,EACxB,CAEA,SAASqL,GAAkBp1B,GACzB,OAAQA,EAAMq1B,QAA8B,IAApBr1B,EAAMs1B,UAAkB,IAAOt1B,EAAMs1B,UAAY,EAAI,OAAUt1B,EAAMib,QAAU,GAAK,EAC9G,CAEA,SAASI,KACP,OAAOC,UAAUC,gBAAmB,iBAAkB1X,IACxD,CAEA,SAAS0xB,GAAiB5J,EAAW6J,EAAQC,GAC3C,IAAIC,EAAM/J,EAAUyI,QAAQoB,EAAO,GAAG,IAAMC,EAAgB,GAAG,GAC3DE,EAAMhK,EAAUyI,QAAQoB,EAAO,GAAG,IAAMC,EAAgB,GAAG,GAC3DG,EAAMjK,EAAU0I,QAAQmB,EAAO,GAAG,IAAMC,EAAgB,GAAG,GAC3DI,EAAMlK,EAAU0I,QAAQmB,EAAO,GAAG,IAAMC,EAAgB,GAAG,GAC/D,OAAO9J,EAAUP,UACfuK,EAAMD,GAAOA,EAAMC,GAAO,EAAIh5B,KAAKsb,IAAI,EAAGyd,IAAQ/4B,KAAKC,IAAI,EAAG+4B,GAC9DE,EAAMD,GAAOA,EAAMC,GAAO,EAAIl5B,KAAKsb,IAAI,EAAG2d,IAAQj5B,KAAKC,IAAI,EAAGi5B,GAElE,CAEe,SAAAC,KACb,IAUIC,EACAC,EACAC,EAZAptB,EAASmS,GACTwa,EAASb,GACTuB,EAAYX,GACZY,EAAaf,GACbgB,EAAY/a,GACZgb,EAAc,CAAC,EAAG5G,KAClBgG,EAAkB,CAAC,EAAEhG,KAAWA,KAAW,CAACA,IAAUA,MACtD7B,EAAW,IACX0D,EAAcnF,GACdmK,EAAY1pB,GAAS,QAAS,OAAQ,OAMtC2pB,EAAiB,EACjBC,EAAc,GAElB,SAAShK,EAAKrX,GACZA,EACK0D,SAAS,SAAUsc,IACnB/nB,GAAG,aAAcqpB,EAAS,CAACld,SAAS,IACpCnM,GAAG,iBAAkBspB,GACrBtpB,GAAG,gBAAiBupB,GACtB9tB,OAAOutB,GACLhpB,GAAG,kBAAmBwpB,GACtBxpB,GAAG,iBAAkBypB,GACrBzpB,GAAG,iCAAkC0pB,GACrC71B,MAAM,8BAA+B,gBAC3C,CA0DD,SAASoqB,EAAMM,EAAW1xB,GAExB,OADAA,EAAI0C,KAAKC,IAAIy5B,EAAY,GAAI15B,KAAKsb,IAAIoe,EAAY,GAAIp8B,OACzC0xB,EAAU1xB,EAAI0xB,EAAY,IAAIoI,GAAU95B,EAAG0xB,EAAUtc,EAAGsc,EAAUhW,EAChF,CAED,SAASyV,EAAUO,EAAWc,EAAIC,GAChC,IAAIrd,EAAIod,EAAG,GAAKC,EAAG,GAAKf,EAAU1xB,EAAG0b,EAAI8W,EAAG,GAAKC,EAAG,GAAKf,EAAU1xB,EACnE,OAAOoV,IAAMsc,EAAUtc,GAAKsG,IAAMgW,EAAUhW,EAAIgW,EAAY,IAAIoI,GAAUpI,EAAU1xB,EAAGoV,EAAGsG,EAC3F,CAED,SAASohB,EAASvB,GAChB,MAAO,GAAGA,EAAO,GAAG,KAAMA,EAAO,GAAG,IAAM,IAAKA,EAAO,GAAG,KAAMA,EAAO,GAAG,IAAM,EAChF,CAED,SAASpF,EAASgB,EAAYzF,EAAWlW,EAAOzV,GAC9CoxB,EACKhkB,GAAG,cAAc,WAAa4pB,EAAQnzB,KAAMiJ,WAAW9M,MAAMA,GAAOgL,OAAQ,IAC5EoC,GAAG,2BAA2B,WAAa4pB,EAAQnzB,KAAMiJ,WAAW9M,MAAMA,GAAO4oB,KAAM,IACvF8H,MAAM,QAAQ,WACb,IAAI9iB,EAAO/J,KACPgK,EAAOf,UACP8Z,EAAIoQ,EAAQppB,EAAMC,GAAM7N,MAAMA,GAC9B6E,EAAI2wB,EAAO1nB,MAAMF,EAAMC,GACvBxQ,EAAa,MAAToY,EAAgBshB,EAASlyB,GAAsB,mBAAV4Q,EAAuBA,EAAM3H,MAAMF,EAAMC,GAAQ4H,EAC1FwhB,EAAIt6B,KAAKC,IAAIiI,EAAE,GAAG,GAAKA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAKA,EAAE,GAAG,IAC/ChK,EAAI+S,EAAK8mB,OACT55B,EAAyB,mBAAd6wB,EAA2BA,EAAU7d,MAAMF,EAAMC,GAAQ8d,EACpE7uB,EAAIw0B,EAAYz2B,EAAEq5B,OAAO72B,GAAG4P,OAAOgqB,EAAIp8B,EAAEZ,GAAIa,EAAEo5B,OAAO72B,GAAG4P,OAAOgqB,EAAIn8B,EAAEb,IAC1E,OAAO,SAAS4S,GACd,GAAU,IAANA,EAASA,EAAI/R,MACZ,CAAE,IAAIqP,EAAIrN,EAAE+P,GAAI5S,EAAIg9B,EAAI9sB,EAAE,GAAI0C,EAAI,IAAIknB,GAAU95B,EAAGoD,EAAE,GAAK8M,EAAE,GAAKlQ,EAAGoD,EAAE,GAAK8M,EAAE,GAAKlQ,EAAK,CAC5F2sB,EAAE4F,KAAK,KAAM3f,EACzB,CACA,GACG,CAED,SAASmqB,EAAQppB,EAAMC,EAAMqpB,GAC3B,OAASA,GAAStpB,EAAKupB,WAAc,IAAIC,EAAQxpB,EAAMC,EACxD,CAED,SAASupB,EAAQxpB,EAAMC,GACrBhK,KAAK+J,KAAOA,EACZ/J,KAAKgK,KAAOA,EACZhK,KAAK6W,OAAS,EACd7W,KAAKwR,YAAc,KACnBxR,KAAK2xB,OAASA,EAAO1nB,MAAMF,EAAMC,GACjChK,KAAKwzB,KAAO,CACb,CA8CD,SAASZ,EAAQz2B,KAAU6N,GACzB,GAAKhF,EAAOiF,MAAMjK,KAAMiJ,WAAxB,CACA,IAAI8Z,EAAIoQ,EAAQnzB,KAAMgK,GAAM7N,MAAMA,GAC9B6M,EAAIhJ,KAAK6wB,OACTz6B,EAAI0C,KAAKC,IAAIy5B,EAAY,GAAI15B,KAAKsb,IAAIoe,EAAY,GAAIxpB,EAAE5S,EAAI0C,KAAKurB,IAAI,EAAGiO,EAAWroB,MAAMjK,KAAMiJ,cAC/FzP,EAAI+X,GAAQpV,GAIhB,GAAI4mB,EAAE0Q,MACA1Q,EAAE2Q,MAAM,GAAG,KAAOl6B,EAAE,IAAMupB,EAAE2Q,MAAM,GAAG,KAAOl6B,EAAE,KAChDupB,EAAE2Q,MAAM,GAAK1qB,EAAEqnB,OAAOtN,EAAE2Q,MAAM,GAAKl6B,IAErCwyB,aAAajJ,EAAE0Q,WAIZ,IAAIzqB,EAAE5S,IAAMA,EAAG,OAIlB2sB,EAAE2Q,MAAQ,CAACl6B,EAAGwP,EAAEqnB,OAAO72B,IACvByzB,GAAUjtB,MACV+iB,EAAE5b,OACH,CAEDgP,GAAQha,GACR4mB,EAAE0Q,MAAQjd,YAGV,WACEuM,EAAE0Q,MAAQ,KACV1Q,EAAEgC,KACH,GAvMc,KAkMfhC,EAAE4F,KAAK,QAAS0J,EAAU9K,EAAUC,EAAMxe,EAAG5S,GAAI2sB,EAAE2Q,MAAM,GAAI3Q,EAAE2Q,MAAM,IAAK3Q,EAAE4O,OAAQC,GA3BzC,CAiC5C,CAED,SAASiB,EAAY12B,KAAU6N,GAC7B,IAAIooB,GAAgBptB,EAAOiF,MAAMjK,KAAMiJ,WAAvC,CACA,IAAIwI,EAAgBtV,EAAMsV,cACtBsR,EAAIoQ,EAAQnzB,KAAMgK,GAAM,GAAM7N,MAAMA,GACpC6K,EAAInJ,GAAO1B,EAAM+Z,MAAM3M,GAAG,kBAW9B,SAAoBpN,GAElB,GADAga,GAAQha,IACH4mB,EAAE4Q,MAAO,CACZ,IAAI7c,EAAK3a,EAAM0V,QAAU+hB,EAAI7c,EAAK5a,EAAM4V,QAAU8hB,EAClD9Q,EAAE4Q,MAAQ7c,EAAKA,EAAKC,EAAKA,EAAK2b,CAC/B,CACD3P,EAAE5mB,MAAMA,GACNwsB,KAAK,QAAS0J,EAAU9K,EAAUxE,EAAEhZ,KAAK8mB,OAAQ9N,EAAE2Q,MAAM,GAAKniB,GAAQpV,EAAOsV,GAAgBsR,EAAE2Q,MAAM,IAAK3Q,EAAE4O,OAAQC,GACvH,IAnB2D,GAAMroB,GAAG,gBAqBrE,SAAoBpN,GAClB6K,EAAEuC,GAAG,8BAA+B,MACpCuqB,GAAW33B,EAAM+Z,KAAM6M,EAAE4Q,OACzBxd,GAAQha,GACR4mB,EAAE5mB,MAAMA,GAAO4oB,KAChB,IA1BgG,GAC7FvrB,EAAI+X,GAAQpV,EAAOsV,GACnBmiB,EAAKz3B,EAAM0V,QACXgiB,EAAK13B,EAAM4V,QAEfkE,GAAY9Z,EAAM+Z,MAClBL,GAAc1Z,GACd4mB,EAAE2Q,MAAQ,CAACl6B,EAAGwG,KAAK6wB,OAAOR,OAAO72B,IACjCyzB,GAAUjtB,MACV+iB,EAAE5b,OAZwD,CA8B3D,CAED,SAAS2rB,EAAW32B,KAAU6N,GAC5B,GAAKhF,EAAOiF,MAAMjK,KAAMiJ,WAAxB,CACA,IAAIwiB,EAAKzrB,KAAK6wB,OACVjI,EAAKrX,GAAQpV,EAAM43B,eAAiB53B,EAAM43B,eAAe,GAAK53B,EAAO6D,MACrE6oB,EAAK4C,EAAG4E,OAAOzH,GACfoL,EAAKvI,EAAGr1B,GAAK+F,EAAM83B,SAAW,GAAM,GACpCtI,EAAK0G,EAAU9K,EAAUC,EAAMiE,EAAIuI,GAAKpL,EAAIC,GAAK8I,EAAO1nB,MAAMjK,KAAMgK,GAAO4nB,GAE/Ezb,GAAQha,GACJ4tB,EAAW,EAAGlsB,GAAOmC,MAAMutB,aAAaxD,SAASA,GAAUtqB,KAAK8sB,EAAUZ,EAAI/C,EAAIzsB,GACjF0B,GAAOmC,MAAMP,KAAKkpB,EAAKb,UAAW6D,EAAI/C,EAAIzsB,EATJ,CAU5C,CAED,SAAS42B,EAAa52B,KAAU6N,GAC9B,GAAKhF,EAAOiF,MAAMjK,KAAMiJ,WAAxB,CACA,IAGIZ,EAASpP,EAAG+P,EAAGxP,EAHf06B,EAAU/3B,EAAM+3B,QAChBhxB,EAAIgxB,EAAQl7B,OACZ+pB,EAAIoQ,EAAQnzB,KAAMgK,EAAM7N,EAAM43B,eAAe/6B,SAAWkK,GAAG/G,MAAMA,GAIrE,IADA0Z,GAAc1Z,GACTlD,EAAI,EAAGA,EAAIiK,IAAKjK,EAEnBO,EAAI,CADYA,EAAI+X,GAApBvI,EAAIkrB,EAAQj7B,GAAmB+G,MACvBA,KAAK6wB,OAAOR,OAAO72B,GAAIwP,EAAE4N,YAC5BmM,EAAEoR,OACGpR,EAAEqR,QAAUrR,EAAEoR,OAAO,KAAO36B,EAAE,KAAIupB,EAAEqR,OAAS56B,EAAGupB,EAAEyQ,KAAO,IADpDzQ,EAAEoR,OAAS36B,EAAG6O,GAAU,EAAM0a,EAAEyQ,KAAO,IAAMtB,GAI1DA,IAAeA,EAAgBlG,aAAakG,IAE5C7pB,IACE0a,EAAEyQ,KAAO,IAAGrB,EAAa34B,EAAE,GAAI04B,EAAgB1b,YAAW,WAAa0b,EAAgB,IAAO,GA3QrF,MA4QbjF,GAAUjtB,MACV+iB,EAAE5b,QAnBuC,CAqB5C,CAED,SAAS6rB,EAAW72B,KAAU6N,GAC5B,GAAKhK,KAAKszB,UAAV,CACA,IAEwBr6B,EAAG+P,EAAGxP,EAAG8M,EAF7Byc,EAAIoQ,EAAQnzB,KAAMgK,GAAM7N,MAAMA,GAC9B+3B,EAAU/3B,EAAM43B,eAChB7wB,EAAIgxB,EAAQl7B,OAGhB,IADAmd,GAAQha,GACHlD,EAAI,EAAGA,EAAIiK,IAAKjK,EACHO,EAAI+X,GAApBvI,EAAIkrB,EAAQj7B,GAAmB+G,MAC3B+iB,EAAEoR,QAAUpR,EAAEoR,OAAO,KAAOnrB,EAAE4N,WAAYmM,EAAEoR,OAAO,GAAK36B,EACnDupB,EAAEqR,QAAUrR,EAAEqR,OAAO,KAAOprB,EAAE4N,aAAYmM,EAAEqR,OAAO,GAAK56B,GAGnE,GADAwP,EAAI+Z,EAAEhZ,KAAK8mB,OACP9N,EAAEqR,OAAQ,CACZ,IAAIxL,EAAK7F,EAAEoR,OAAO,GAAIE,EAAKtR,EAAEoR,OAAO,GAChCtL,EAAK9F,EAAEqR,OAAO,GAAIE,EAAKvR,EAAEqR,OAAO,GAChCG,GAAMA,EAAK1L,EAAG,GAAKD,EAAG,IAAM2L,GAAMA,EAAK1L,EAAG,GAAKD,EAAG,IAAM2L,EACxDC,GAAMA,EAAKF,EAAG,GAAKD,EAAG,IAAMG,GAAMA,EAAKF,EAAG,GAAKD,EAAG,IAAMG,EAC5DxrB,EAAIwe,EAAMxe,EAAGlQ,KAAK6tB,KAAK4N,EAAKC,IAC5Bh7B,EAAI,EAAEovB,EAAG,GAAKC,EAAG,IAAM,GAAID,EAAG,GAAKC,EAAG,IAAM,GAC5CviB,EAAI,EAAE+tB,EAAG,GAAKC,EAAG,IAAM,GAAID,EAAG,GAAKC,EAAG,IAAM,EAC7C,KACI,KAAIvR,EAAEoR,OACN,OADc36B,EAAIupB,EAAEoR,OAAO,GAAI7tB,EAAIyc,EAAEoR,OAAO,EACrC,CAEZpR,EAAE4F,KAAK,QAAS0J,EAAU9K,EAAUve,EAAGxP,EAAG8M,GAAIyc,EAAE4O,OAAQC,GAxB5B,CAyB7B,CAED,SAASqB,EAAW92B,KAAU6N,GAC5B,GAAKhK,KAAKszB,UAAV,CACA,IAEwBr6B,EAAG+P,EAFvB+Z,EAAIoQ,EAAQnzB,KAAMgK,GAAM7N,MAAMA,GAC9B+3B,EAAU/3B,EAAM43B,eAChB7wB,EAAIgxB,EAAQl7B,OAKhB,IAHA6c,GAAc1Z,GACVi2B,GAAapG,aAAaoG,GAC9BA,EAAc5b,YAAW,WAAa4b,EAAc,IAAK,GArT1C,KAsTVn5B,EAAI,EAAGA,EAAIiK,IAAKjK,EACnB+P,EAAIkrB,EAAQj7B,GACR8pB,EAAEoR,QAAUpR,EAAEoR,OAAO,KAAOnrB,EAAE4N,kBAAmBmM,EAAEoR,OAC9CpR,EAAEqR,QAAUrR,EAAEqR,OAAO,KAAOprB,EAAE4N,mBAAmBmM,EAAEqR,OAG9D,GADIrR,EAAEqR,SAAWrR,EAAEoR,SAAQpR,EAAEoR,OAASpR,EAAEqR,cAAerR,EAAEqR,QACrDrR,EAAEoR,OAAQpR,EAAEoR,OAAO,GAAKn0B,KAAK6wB,OAAOR,OAAOtN,EAAEoR,OAAO,SAItD,GAFApR,EAAEgC,MAEa,IAAXhC,EAAEyQ,OACJxqB,EAAIuI,GAAQvI,EAAGhJ,MACXlH,KAAK27B,MAAMtC,EAAW,GAAKnpB,EAAE,GAAImpB,EAAW,GAAKnpB,EAAE,IAAM2pB,GAAa,CACxE,IAAIn5B,EAAIqE,GAAOmC,MAAMuJ,GAAG,iBACpB/P,GAAGA,EAAEyQ,MAAMjK,KAAMiJ,UACtB,CAvBuB,CA0B7B,CAmDD,OAzWA0f,EAAKb,UAAY,SAAS4M,EAAY5M,EAAWlW,EAAOzV,GACtD,IAAImV,EAAYojB,EAAWpjB,UAAYojB,EAAWpjB,YAAcojB,EAChEpjB,EAAU0D,SAAS,SAAUsc,IACzBoD,IAAepjB,EACjBib,EAASmI,EAAY5M,EAAWlW,EAAOzV,GAEvCmV,EAAU2b,YAAYnY,MAAK,WACzBqe,EAAQnzB,KAAMiJ,WACX9M,MAAMA,GACNgL,QACAwhB,KAAK,KAA2B,mBAAdb,EAA2BA,EAAU7d,MAAMjK,KAAMiJ,WAAa6e,GAChF/C,KACX,GAEA,EAEE4D,EAAKgM,QAAU,SAASrjB,EAAWlb,EAAGoD,EAAG2C,GACvCwsB,EAAKiM,QAAQtjB,GAAW,WAGtB,OAFStR,KAAK6wB,OAAOz6B,GACC,mBAANA,EAAmBA,EAAE6T,MAAMjK,KAAMiJ,WAAa7S,EAEpE,GAAOoD,EAAG2C,EACV,EAEEwsB,EAAKiM,QAAU,SAAStjB,EAAWlb,EAAGoD,EAAG2C,GACvCwsB,EAAKb,UAAUxW,GAAW,WACxB,IAAItQ,EAAI2wB,EAAO1nB,MAAMjK,KAAMiJ,WACvBwiB,EAAKzrB,KAAK6wB,OACVjI,EAAU,MAALpvB,EAAY05B,EAASlyB,GAAkB,mBAANxH,EAAmBA,EAAEyQ,MAAMjK,KAAMiJ,WAAazP,EACpFqvB,EAAK4C,EAAG4E,OAAOzH,GACfoL,EAAkB,mBAAN59B,EAAmBA,EAAE6T,MAAMjK,KAAMiJ,WAAa7S,EAC9D,OAAOi8B,EAAU9K,EAAUC,EAAMiE,EAAIuI,GAAKpL,EAAIC,GAAK7nB,EAAG4wB,EAC5D,GAAOp4B,EAAG2C,EACV,EAEEwsB,EAAKkM,YAAc,SAASvjB,EAAW9F,EAAGsG,EAAG3V,GAC3CwsB,EAAKb,UAAUxW,GAAW,WACxB,OAAO+gB,EAAUryB,KAAK6wB,OAAOtJ,UACd,mBAAN/b,EAAmBA,EAAEvB,MAAMjK,KAAMiJ,WAAauC,EACxC,mBAANsG,EAAmBA,EAAE7H,MAAMjK,KAAMiJ,WAAa6I,GACpD6f,EAAO1nB,MAAMjK,KAAMiJ,WAAY2oB,EACxC,GAAO,KAAMz1B,EACb,EAEEwsB,EAAKmM,YAAc,SAASxjB,EAAW9F,EAAGsG,EAAGtY,EAAG2C,GAC9CwsB,EAAKb,UAAUxW,GAAW,WACxB,IAAItQ,EAAI2wB,EAAO1nB,MAAMjK,KAAMiJ,WACvBD,EAAIhJ,KAAK6wB,OACTjI,EAAU,MAALpvB,EAAY05B,EAASlyB,GAAkB,mBAANxH,EAAmBA,EAAEyQ,MAAMjK,KAAMiJ,WAAazP,EACxF,OAAO64B,EAAUnM,GAASqB,UAAUqB,EAAG,GAAIA,EAAG,IAAIpB,MAAMxe,EAAE5S,GAAGmxB,UAC9C,mBAAN/b,GAAoBA,EAAEvB,MAAMjK,KAAMiJ,YAAcuC,EAC1C,mBAANsG,GAAoBA,EAAE7H,MAAMjK,KAAMiJ,YAAc6I,GACtD9Q,EAAG4wB,EACZ,GAAOp4B,EAAG2C,EACV,EAmDEo3B,EAAQlqB,UAAY,CAClBlN,MAAO,SAASA,GAEd,OADIA,IAAO6D,KAAKwR,YAAcrV,GACvB6D,IACR,EACDmH,MAAO,WAKL,OAJsB,KAAhBnH,KAAK6W,SACT7W,KAAK+J,KAAKupB,UAAYtzB,KACtBA,KAAK+0B,KAAK,UAEL/0B,IACR,EACD2oB,KAAM,SAASxrB,EAAK2qB,GAMlB,OALI9nB,KAAK0zB,OAAiB,UAARv2B,IAAiB6C,KAAK0zB,MAAM,GAAK5L,EAAUuI,OAAOrwB,KAAK0zB,MAAM,KAC3E1zB,KAAKm0B,QAAkB,UAARh3B,IAAiB6C,KAAKm0B,OAAO,GAAKrM,EAAUuI,OAAOrwB,KAAKm0B,OAAO,KAC9En0B,KAAKo0B,QAAkB,UAARj3B,IAAiB6C,KAAKo0B,OAAO,GAAKtM,EAAUuI,OAAOrwB,KAAKo0B,OAAO,KAClFp0B,KAAK+J,KAAK8mB,OAAS/I,EACnB9nB,KAAK+0B,KAAK,QACH/0B,IACR,EACD+kB,IAAK,WAKH,OAJsB,KAAhB/kB,KAAK6W,gBACF7W,KAAK+J,KAAKupB,UACjBtzB,KAAK+0B,KAAK,QAEL/0B,IACR,EACD+0B,KAAM,SAAS51B,GACb,IAAIgD,EAAItE,GAAOmC,KAAK+J,MAAMkC,QAC1BwmB,EAAUhzB,KACRN,EACAa,KAAK+J,KACL,IAAIkmB,GAAU9wB,EAAM,CAClBqS,YAAaxR,KAAKwR,YAClB1W,OAAQ6tB,EACRxpB,OACA2oB,UAAW9nB,KAAK+J,KAAK8mB,OACrB9nB,SAAU0pB,IAEZtwB,EAEH,GAsKHwmB,EAAK2J,WAAa,SAAS16B,GACzB,OAAOqR,UAAUjQ,QAAUs5B,EAA0B,mBAAN16B,EAAmBA,EAAI+sB,IAAU/sB,GAAI+wB,GAAQ2J,CAChG,EAEE3J,EAAK3jB,OAAS,SAASpN,GACrB,OAAOqR,UAAUjQ,QAAUgM,EAAsB,mBAANpN,EAAmBA,EAAI+sB,KAAW/sB,GAAI+wB,GAAQ3jB,CAC7F,EAEE2jB,EAAK4J,UAAY,SAAS36B,GACxB,OAAOqR,UAAUjQ,QAAUu5B,EAAyB,mBAAN36B,EAAmBA,EAAI+sB,KAAW/sB,GAAI+wB,GAAQ4J,CAChG,EAEE5J,EAAKgJ,OAAS,SAAS/5B,GACrB,OAAOqR,UAAUjQ,QAAU24B,EAAsB,mBAAN/5B,EAAmBA,EAAI+sB,GAAS,CAAC,EAAE/sB,EAAE,GAAG,IAAKA,EAAE,GAAG,IAAK,EAAEA,EAAE,GAAG,IAAKA,EAAE,GAAG,MAAO+wB,GAAQgJ,CACtI,EAEEhJ,EAAK6J,YAAc,SAAS56B,GAC1B,OAAOqR,UAAUjQ,QAAUw5B,EAAY,IAAM56B,EAAE,GAAI46B,EAAY,IAAM56B,EAAE,GAAI+wB,GAAQ,CAAC6J,EAAY,GAAIA,EAAY,GACpH,EAEE7J,EAAKiJ,gBAAkB,SAASh6B,GAC9B,OAAOqR,UAAUjQ,QAAU44B,EAAgB,GAAG,IAAMh6B,EAAE,GAAG,GAAIg6B,EAAgB,GAAG,IAAMh6B,EAAE,GAAG,GAAIg6B,EAAgB,GAAG,IAAMh6B,EAAE,GAAG,GAAIg6B,EAAgB,GAAG,IAAMh6B,EAAE,GAAG,GAAI+wB,GAAQ,CAAC,CAACiJ,EAAgB,GAAG,GAAIA,EAAgB,GAAG,IAAK,CAACA,EAAgB,GAAG,GAAIA,EAAgB,GAAG,IAC3Q,EAEEjJ,EAAK0J,UAAY,SAASz6B,GACxB,OAAOqR,UAAUjQ,QAAUq5B,EAAYz6B,EAAG+wB,GAAQ0J,CACtD,EAEE1J,EAAKoB,SAAW,SAASnyB,GACvB,OAAOqR,UAAUjQ,QAAU+wB,GAAYnyB,EAAG+wB,GAAQoB,CACtD,EAEEpB,EAAK8E,YAAc,SAAS71B,GAC1B,OAAOqR,UAAUjQ,QAAUy0B,EAAc71B,EAAG+wB,GAAQ8E,CACxD,EAEE9E,EAAKpf,GAAK,WACR,IAAI5R,EAAQ86B,EAAUlpB,GAAGU,MAAMwoB,EAAWxpB,WAC1C,OAAOtR,IAAU86B,EAAY9J,EAAOhxB,CACxC,EAEEgxB,EAAKqM,cAAgB,SAASp9B,GAC5B,OAAOqR,UAAUjQ,QAAU05B,GAAkB96B,GAAKA,GAAKA,EAAG+wB,GAAQ7vB,KAAK6tB,KAAK+L,EAChF,EAEE/J,EAAKgK,YAAc,SAAS/6B,GAC1B,OAAOqR,UAAUjQ,QAAU25B,GAAe/6B,EAAG+wB,GAAQgK,CACzD,EAEShK,CACT,CFjZAb,GAAUze,UAAY6mB,GAAU7mB,UGzChC,MAAM4rB,GAGSC,GAAa,cAAcA,+CAHpCD,GAKQ,IAAM,4CALdA,GASQ,CAACE,GAAc3I,KAAI4I,eAAcC,kBAAmB,4BAA4BF,iBAAyC,WAAfA,EAA0BC,EAAeC,gBAA2B7I,KATtLyI,GAYSzI,GAAO,iBAAiBA,kIAGjC8I,GAAiB,CACnB,CAACC,OAAOC,kBAAmBD,OAAOC,mBAClC,CAACD,OAAOE,kBAAmBF,OAAOE,oBAItC,IAAIC,GAKAC,GAMAC,IAVJ,SAAWF,GACPA,EAAuB,OAAI,SAC3BA,EAAsB,MAAI,OAC7B,CAHD,CAGGA,KAAmBA,GAAiB,CAAE,IAEzC,SAAWC,GACPA,EAAsB,KAAI,OAC1BA,EAA0B,SAAI,WAC9BA,EAA4B,WAAI,YACnC,CAJD,CAIGA,KAAoBA,GAAkB,CAAE,IAE3C,SAAWC,GACPA,EAAuB,QAAI,UAC3BA,EAAoB,KAAI,MAC3B,CAHD,CAGGA,KAAkBA,GAAgB,CAAE,IACvC,MAAMC,GAAoB,CACtBC,YAAY,EACZC,QAAS,KACTxzB,KAAM,KACNyzB,WAAY,KACZC,aAAc,KACdC,SAAU,KACVC,GAAI,KACJC,SAAU,KACVC,WAAY,KACZC,OAAQ,MAGZ,IAAIC,GAQAC,GAMAC,IAbJ,SAAWF,GACPA,EAA2B,OAAI,UAC/BA,EAA6B,SAAI,WACjCA,EAAyB,KAAI,OAC7BA,EAA+B,WAAI,aACnCA,EAAiC,aAAI,cACxC,CAND,CAMGA,KAAuBA,GAAqB,CAAE,IAEjD,SAAWC,GACPA,EAAkB,MAAI,QACtBA,EAAwB,YAAI,aAC/B,CAHD,CAGGA,KAAeA,GAAa,CAAE,IAGjC,SAAWC,GACPA,EAAe,KAAI,OACnBA,EAAc,IAAI,MAClBA,EAAgB,MAAI,QACpBA,EAAiB,OAAI,QACxB,CALD,CAKGA,KAAaA,GAAW,CAAE,IAC7B,MAAMC,GAAmB,CACrB,CAACD,GAASE,MAAOF,GAASG,MAC1B,CAACH,GAASG,OAAQH,GAASE,KAC3B,CAACF,GAASI,KAAMJ,GAASK,OACzB,CAACL,GAASK,QAASL,GAASI,KA4BhC,SAASE,GAAuB//B,EAAGC,EAAG+/B,GAClC,IAAKA,EACD,OAEJ,MAAMC,EAAO,GACbjgC,EAAEJ,SAAQ,CAACsgC,EAAY/5B,KACdlG,GAAGgD,IAAIkD,IACR85B,EAAKh/B,KAAKi/B,EACd,IAEAD,EAAKj+B,QACLg+B,EAAGC,EAEX,CACA,SAASE,GAAoBpB,GACzB,OAAmB,OAAZA,EAAmB,KAAOA,EAAU,QAAU,SACzD,CAUA,MASMqB,GAAsB77B,GAAY,OAAQA,GAAW,cAAeA,KAAa,WAAYA,MAAc,WAAYA,GAyCvH87B,GAA4B,CAACt8B,EAAMu8B,EAAa,CAAC,EAAG,MACtD,MAAMpG,MAAEA,EAAKC,OAAEA,GAAWoG,GAAkBx8B,GACtCy8B,EAASz8B,EAAKy8B,QAAUF,EACxBG,EAAUvG,EAAQsG,EAAO,GACzBE,EAAUvG,EAASqG,EAAO,GAChC,MAAO,CACHhsB,EAAGzQ,EAAK48B,SAASnsB,EAAIisB,EACrB3lB,EAAG/W,EAAK48B,SAAS7lB,EAAI4lB,EACxB,EAoCCE,GAAyB,CAACC,EAAYpnB,EAAS,MACjD,GAAwB,IAApBonB,EAAWlwB,KACX,MAAO,CAAE6D,EAAG,EAAGsG,EAAG,EAAGof,MAAO,EAAGC,OAAQ,GAE3C,IAAI2G,EAAM,CAAEtsB,EAAGogB,IAAU9Z,EAAG8Z,IAAUmM,IAAKnM,IAAUoM,IAAKpM,KAO1D,OANAiM,EAAWjhC,SAASmE,IAChB,QAAsBxD,IAAlBkZ,EAAOzL,QAAwByL,EAAOzL,OAAOjK,GAAO,CACpD,MAAMk9B,EAAUC,GAAUn9B,GAC1B+8B,EAAMK,GAAiBL,EAAKG,EAChC,KAEGG,GAAUN,EAAI,EAEnBO,GAAiB,CAAClyB,EAAOiM,GAAOkmB,EAAIC,EAAIC,GAAU,CAAC,EAAG,EAAG,GAAIC,GAAY,EAE/EC,GAA4B,KACxB,MAAMC,EAAW,IACVC,GAAqBxmB,EAAM,CAACkmB,EAAIC,EAAIC,IACvCtH,MAAO9e,EAAK8e,MAAQsH,EACpBrH,OAAQ/e,EAAK+e,OAASqH,GAEpBK,EAAe,GACrB,IAAK,MAAM99B,KAAQoL,EAAMmC,SAAU,CAC/B,MAAMwwB,SAAEA,EAAQC,WAAEA,GAAa,EAAIC,OAAEA,GAAS,GAAUj+B,EACxD,GAAK29B,IAA8BK,GAAeC,EAC9C,SAEJ,MAAM9H,EAAQ4H,EAAS5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,cAAgB,KAC7D9H,EAAS2H,EAAS3H,QAAUp2B,EAAKo2B,QAAUp2B,EAAKm+B,eAAiB,KACjEC,EAAkBC,GAAmBT,EAAUU,GAAWt+B,IAC1Du+B,GAAQpI,GAAS,IAAMC,GAAU,GACjCoI,EAAmBd,GAAaU,EAAkB,IAC5Bp+B,EAAKy+B,UAAUC,cACHF,GAAoBJ,GAAmBG,GAC9Dv+B,EAAK2+B,WAClBb,EAAa5gC,KAAK8C,EAE1B,CACA,OAAO89B,CAAY,EAQjBc,GAAoB,CAACxzB,EAAOyzB,KAC9B,MAAMC,EAAU,IAAI7/B,IAIpB,OAHAmM,EAAMvP,SAASmE,IACX8+B,EAAQ34B,IAAInG,EAAKyxB,GAAG,IAEjBoN,EAAM50B,QAAQ80B,GAASD,EAAQ5/B,IAAI6/B,EAAK1U,SAAWyU,EAAQ5/B,IAAI6/B,EAAKh/B,SAAQ,EAEvF,SAASi/B,GAAgBlC,EAAYx7B,GACjC,MAAM29B,EAAe,IAAI12B,IACnB22B,EAAgB59B,GAAS8J,MAAQ,IAAInM,IAAIqC,EAAQ8J,MAAMpB,KAAKhK,GAASA,EAAKyxB,MAAO,KAOvF,OANAqL,EAAWjhC,SAASsM,MACEA,EAAE41B,SAAS5H,OAAShuB,EAAE41B,SAAS3H,SAAW90B,GAAS69B,qBAAuBh3B,EAAE81B,UAC3EiB,IAAiBA,EAAchgC,IAAIiJ,EAAEspB,KACpDwN,EAAa3/B,IAAI6I,EAAEspB,GAAItpB,EAC3B,IAEG82B,CACX,CACAG,eAAeC,IAAQj0B,MAAEA,EAAK+qB,MAAEA,EAAKC,OAAEA,EAAMkJ,QAAEA,EAAOC,QAAEA,EAAOC,QAAEA,GAAWl+B,GACxE,GAAmB,IAAf8J,EAAMwB,KACN,OAAOrH,QAAQC,SAAQ,GAE3B,MAAMi6B,EAAS5C,GAAuBzxB,GAChCs0B,EAAWC,GAAqBF,EAAQtJ,EAAOC,EAAQ90B,GAASi+B,SAAWA,EAASj+B,GAASk+B,SAAWA,EAASl+B,GAASs+B,SAAW,IAE3I,aADMN,EAAQO,YAAYH,EAAU,CAAE1Q,SAAU1tB,GAAS0tB,WAClDzpB,QAAQC,SAAQ,EAC3B,CAOA,SAASs6B,IAAsBC,OAAEA,EAAMC,aAAEA,EAAYlD,WAAEA,EAAUP,WAAEA,EAAa,CAAC,EAAG,GAAE0D,WAAEA,EAAUC,QAAEA,IAChG,MAAMlgC,EAAO88B,EAAW/3B,IAAIg7B,GACtBz/B,EAAaN,EAAKmgC,SAAWrD,EAAW/3B,IAAI/E,EAAKmgC,eAAY3jC,GAC3DiU,EAAG2vB,EAASrpB,EAAGspB,GAAY//B,EAAaA,EAAWm+B,UAAU6B,iBAAmB,CAAE7vB,EAAG,EAAGsG,EAAG,GAC7F0lB,EAASz8B,EAAKy8B,QAAUF,EAC9B,IAAI3F,EAASqJ,EACb,GAAoB,WAAhBjgC,EAAK42B,QAAwB52B,EAAKugC,aAe7BjgC,GAAckgC,GAAmBxgC,EAAK42B,UAC3CA,EAAS,CACL,CAAC52B,EAAK42B,OAAO,GAAG,GAAKwJ,EAASpgC,EAAK42B,OAAO,GAAG,GAAKyJ,GAClD,CAACrgC,EAAK42B,OAAO,GAAG,GAAKwJ,EAASpgC,EAAK42B,OAAO,GAAG,GAAKyJ,UAjBtD,GAAK//B,EAGA,CACD,MAAMmgC,EAAcngC,EAAWy9B,SAAS5H,MAClCuK,EAAepgC,EAAWy9B,SAAS3H,OACrCqK,GAAeC,IACf9J,EAAS,CACL,CAACwJ,EAASC,GACV,CAACD,EAAUK,EAAaJ,EAAUK,IAG9C,MAXIR,IAAU,MAAOhG,MAmBzB,MAAMoG,EAAmBE,GAAmB5J,GACtC+J,GAAcX,EAAcpJ,EAAQ52B,EAAK+9B,UACzCiC,EACN,MAAO,CACHpD,SAAU,CACNnsB,EAAG6vB,EAAiB7vB,EAAI2vB,EAAUpgC,EAAK+9B,SAAS5H,MAAQsG,EAAO,GAC/D1lB,EAAGupB,EAAiBvpB,EAAIspB,EAAUrgC,EAAK+9B,SAAS3H,OAASqG,EAAO,IAEpE6D,mBAER,CAkDA,MAAM/W,GAAQ,CAACqX,EAAKvnB,EAAM,EAAGrb,EAAM,IAAMD,KAAKsb,IAAItb,KAAKC,IAAI4iC,EAAKvnB,GAAMrb,GAChE2iC,GAAgB,CAAC/D,EAAW,CAAEnsB,EAAG,EAAGsG,EAAG,GAAK6f,EAAQiK,KAAgB,CACtEpwB,EAAG8Y,GAAMqT,EAASnsB,EAAGmmB,EAAO,GAAG,GAAIA,EAAO,GAAG,IAAMiK,GAAY1K,OAAS,IACxEpf,EAAGwS,GAAMqT,EAAS7lB,EAAG6f,EAAO,GAAG,GAAIA,EAAO,GAAG,IAAMiK,GAAYzK,QAAU,MAE7E,SAAS0K,GAAsBC,EAAeC,EAAiBz9B,GAC3D,MAAQ4yB,MAAOsK,EAAarK,OAAQsK,GAAiBlE,GAAkBj5B,IAC/DkN,EAAG2vB,EAASrpB,EAAGspB,GAAY98B,EAAOk7B,UAAU6B,iBACpD,OAAOK,GAAcI,EAAe,CAChC,CAACX,EAASC,GACV,CAACD,EAAUK,EAAaJ,EAAUK,IACnCM,EACP,CASA,MAAMC,GAAsB,CAACrkC,EAAOyc,EAAKrb,IACjCpB,EAAQyc,EACDkQ,GAAMxrB,KAAK4K,IAAI/L,EAAQyc,GAAM,EAAGA,GAAOA,EAEzCzc,EAAQoB,GACLurB,GAAMxrB,KAAK4K,IAAI/L,EAAQoB,GAAM,EAAGqb,GAAOA,EAE5C,EAEL6nB,GAAc,CAACC,EAAK1B,EAAQ2B,EAAQ,GAAIC,EAAW,KAG9C,CAFWJ,GAAoBE,EAAI1wB,EAAG4wB,EAAU5B,EAAOtJ,MAAQkL,GAAYD,EAChEH,GAAoBE,EAAIpqB,EAAGsqB,EAAU5B,EAAOrJ,OAASiL,GAAYD,GAGjFhE,GAAmB,CAACkE,EAAMC,KAAU,CACtC9wB,EAAG1S,KAAKsb,IAAIioB,EAAK7wB,EAAG8wB,EAAK9wB,GACzBsG,EAAGhZ,KAAKsb,IAAIioB,EAAKvqB,EAAGwqB,EAAKxqB,GACzBimB,GAAIj/B,KAAKC,IAAIsjC,EAAKtE,GAAIuE,EAAKvE,IAC3BC,GAAIl/B,KAAKC,IAAIsjC,EAAKrE,GAAIsE,EAAKtE,MAEzBuE,GAAY,EAAG/wB,IAAGsG,IAAGof,QAAOC,aAAc,CAC5C3lB,IACAsG,IACAimB,GAAIvsB,EAAI0lB,EACR8G,GAAIlmB,EAAIqf,IAENiH,GAAY,EAAG5sB,IAAGsG,IAAGimB,KAAIC,SAAU,CACrCxsB,IACAsG,IACAof,MAAO6G,EAAKvsB,EACZ2lB,OAAQ6G,EAAKlmB,IAEXunB,GAAa,CAACt+B,EAAMu8B,EAAa,CAAC,EAAG,MACvC,MAAM9rB,EAAEA,EAACsG,EAAEA,GAAMslB,GAAmBr8B,GAC9BA,EAAKy+B,UAAU6B,iBACfhE,GAA0Bt8B,EAAMu8B,GACtC,MAAO,CACH9rB,IACAsG,IACAof,MAAOn2B,EAAK+9B,UAAU5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,cAAgB,EAClE9H,OAAQp2B,EAAK+9B,UAAU3H,QAAUp2B,EAAKo2B,QAAUp2B,EAAKm+B,eAAiB,EACzE,EAEChB,GAAY,CAACn9B,EAAMu8B,EAAa,CAAC,EAAG,MACtC,MAAM9rB,EAAEA,EAACsG,EAAEA,GAAMslB,GAAmBr8B,GAC9BA,EAAKy+B,UAAU6B,iBACfhE,GAA0Bt8B,EAAMu8B,GACtC,MAAO,CACH9rB,IACAsG,IACAimB,GAAIvsB,GAAKzQ,EAAK+9B,UAAU5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,cAAgB,GACpEjB,GAAIlmB,GAAK/W,EAAK+9B,UAAU3H,QAAUp2B,EAAKo2B,QAAUp2B,EAAKm+B,eAAiB,GAC1E,EAECsD,GAAmB,CAACC,EAAOC,IAAUtE,GAAUD,GAAiBoE,GAAUE,GAAQF,GAAUG,KAC5FtD,GAAqB,CAACuD,EAAOC,KAC/B,MAAMC,EAAW/jC,KAAKC,IAAI,EAAGD,KAAKsb,IAAIuoB,EAAMnxB,EAAImxB,EAAMzL,MAAO0L,EAAMpxB,EAAIoxB,EAAM1L,OAASp4B,KAAKC,IAAI4jC,EAAMnxB,EAAGoxB,EAAMpxB,IACxGsxB,EAAWhkC,KAAKC,IAAI,EAAGD,KAAKsb,IAAIuoB,EAAM7qB,EAAI6qB,EAAMxL,OAAQyL,EAAM9qB,EAAI8qB,EAAMzL,QAAUr4B,KAAKC,IAAI4jC,EAAM7qB,EAAG8qB,EAAM9qB,IAChH,OAAOhZ,KAAKikC,KAAKF,EAAWC,EAAS,EAKnCE,GAAa95B,IAAOogB,MAAMpgB,IAAM+5B,SAAS/5B,GAEzCg6B,GAAU,CAAC1Q,EAAI2Q,KAAL,EAKVC,GAAe,CAACzF,EAAU0F,EAAW,CAAC,EAAG,MACpC,CACH7xB,EAAG6xB,EAAS,GAAKvkC,KAAKyqB,MAAMoU,EAASnsB,EAAI6xB,EAAS,IAClDvrB,EAAGurB,EAAS,GAAKvkC,KAAKyqB,MAAMoU,EAAS7lB,EAAIurB,EAAS,MAGpDzE,GAAuB,EAAGptB,IAAGsG,MAAMwmB,EAAIC,EAAIC,GAAS8E,GAAa,EAAOD,EAAW,CAAC,EAAG,MACzF,MAAM1F,EAAW,CACbnsB,GAAIA,EAAI8sB,GAAME,EACd1mB,GAAIA,EAAIymB,GAAMC,GAElB,OAAO8E,EAAaF,GAAazF,EAAU0F,GAAY1F,CAAQ,EAE7D4F,GAAuB,EAAG/xB,IAAGsG,MAAMwmB,EAAIC,EAAIC,MACtC,CACHhtB,EAAGA,EAAIgtB,EAASF,EAChBxmB,EAAGA,EAAI0mB,EAASD,IAmBlBmC,GAAuB,CAACF,EAAQtJ,EAAOC,EAAQmJ,EAASC,EAASI,KACnE,MAAM6C,EAAQtM,GAASsJ,EAAOtJ,OAAS,EAAIyJ,IACrC8C,EAAQtM,GAAUqJ,EAAOrJ,QAAU,EAAIwJ,IACvChS,EAAO7vB,KAAKsb,IAAIopB,EAAOC,GACvBC,EAAcpZ,GAAMqE,EAAM2R,EAASC,GAKzC,MAAO,CAAE/uB,EAFC0lB,EAAQ,GAFIsJ,EAAOhvB,EAAIgvB,EAAOtJ,MAAQ,GAEVwM,EAE1B5rB,EADFqf,EAAS,GAFGqJ,EAAO1oB,EAAI0oB,EAAOrJ,OAAS,GAEVuM,EACxB/U,KAAM+U,EAAa,EAEhCC,GAAU,IAA2B,oBAAdlmB,WAA6BA,WAAWmmB,WAAWtgC,QAAQ,QAAU,EAClG,SAASi+B,GAAmB5J,GACxB,YAAkBp6B,IAAXo6B,GAAmC,WAAXA,CACnC,CACA,SAAS4F,GAAkBx8B,GACvB,MAAO,CACHm2B,MAAOn2B,EAAK+9B,UAAU5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,cAAgB,EAClE9H,OAAQp2B,EAAK+9B,UAAU3H,QAAUp2B,EAAKo2B,QAAUp2B,EAAKm+B,eAAiB,EAE9E,CACA,SAAS2E,GAAkB9iC,GACvB,YAAsExD,KAA7DwD,EAAK+9B,UAAU5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,oBACiB1hC,KAAhEwD,EAAK+9B,UAAU3H,QAAUp2B,EAAKo2B,QAAUp2B,EAAKm+B,cACtD,CA0BA,SAAS4E,GAAmB3hC,GAAOkhC,SAAEA,EAAW,CAAC,EAAG,GAAEC,WAAEA,GAAa,EAAKxV,UAAEA,IACxE,MAAMtc,EAAEA,EAACsG,EAAEA,GAAMisB,GAAiB5hC,GAC5B6hC,EAAapF,GAAqB,CAAEptB,IAAGsG,KAAKgW,IAC1Ctc,EAAGyyB,EAAUnsB,EAAGosB,GAAaZ,EAAaF,GAAaY,EAAYX,GAAYW,EAEvF,MAAO,CACHC,WACAC,cACGF,EAEX,CACA,MAAMG,GAAiBpjC,IAAU,CAC7Bm2B,MAAOn2B,EAAKqjC,YACZjN,OAAQp2B,EAAKsjC,eAGXC,GAAY,CAAC,QAAS,SAAU,YAQtC,MAAMC,GAAgBpiC,GAAU,YAAaA,EACvC4hC,GAAmB,CAAC5hC,EAAOq+B,KAC7B,MAAMgE,EAAUD,GAAapiC,GACvBsiC,EAAOD,EAAUriC,EAAM0V,QAAU1V,EAAM+3B,UAAU,GAAGriB,QACpD6sB,EAAOF,EAAUriC,EAAM4V,QAAU5V,EAAM+3B,UAAU,GAAGniB,QAC1D,MAAO,CACHvG,EAAGizB,GAAQjE,GAAQnoB,MAAQ,GAC3BP,EAAG4sB,GAAQlE,GAAQjoB,KAAO,GAC7B,EAKCosB,GAAkB,CAACx/B,EAAMy/B,EAAaC,EAAYlW,EAAMmS,KAC1D,MAAMgE,EAAUF,EAAYtzB,iBAAiB,IAAInM,KACjD,OAAK2/B,GAAYA,EAAQ9lC,OAGlBsJ,MAAMC,KAAKu8B,GAAS/5B,KAAKg6B,IAC5B,MAAMtF,EAAesF,EAAO5sB,wBAC5B,MAAO,CACHqa,GAAIuS,EAAOpiC,aAAa,iBACxBwC,OACA27B,SACAnD,SAAUoH,EAAOpiC,aAAa,kBAC9B6O,GAAIiuB,EAAapnB,KAAOwsB,EAAWxsB,MAAQsW,EAC3C7W,GAAI2nB,EAAalnB,IAAMssB,EAAWtsB,KAAOoW,KACtCwV,GAAcY,GACpB,IAZM,IAaT,EAYN,SAASC,GAAuB5C,EAAU6C,GACtC,OAAI7C,GAAY,EACL,GAAMA,EAEE,GAAZ6C,EAAiBnmC,KAAK6tB,MAAMyV,EACvC,CACA,SAAS8C,IAAwBhD,IAAEA,EAAGiD,GAAEA,EAAEC,GAAEA,EAAErH,GAAEA,EAAEC,GAAEA,EAAEr2B,EAAEA,IACpD,OAAQu6B,GACJ,KAAKzF,GAASE,KACV,MAAO,CAACwI,EAAKH,GAAuBG,EAAKpH,EAAIp2B,GAAIy9B,GACrD,KAAK3I,GAASG,MACV,MAAO,CAACuI,EAAKH,GAAuBjH,EAAKoH,EAAIx9B,GAAIy9B,GACrD,KAAK3I,GAASI,IACV,MAAO,CAACsI,EAAIC,EAAKJ,GAAuBI,EAAKpH,EAAIr2B,IACrD,KAAK80B,GAASK,OACV,MAAO,CAACqI,EAAIC,EAAKJ,GAAuBhH,EAAKoH,EAAIz9B,IAE7D,CAwBA,SAAS09B,IAAcC,QAAEA,EAAOC,QAAEA,EAAOC,eAAEA,EAAiB/I,GAASK,OAAM2I,QAAEA,EAAOC,QAAEA,EAAOC,eAAEA,EAAiBlJ,GAASI,IAAGoI,UAAEA,EAAY,MACtI,MAAOW,EAAgBC,GAAkBX,GAAwB,CAC7DhD,IAAKsD,EACLL,GAAIG,EACJF,GAAIG,EACJxH,GAAI0H,EACJzH,GAAI0H,EACJ/9B,EAAGs9B,KAEAa,EAAgBC,GAAkBb,GAAwB,CAC7DhD,IAAKyD,EACLR,GAAIM,EACJL,GAAIM,EACJ3H,GAAIuH,EACJtH,GAAIuH,EACJ59B,EAAGs9B,KAEAe,EAAQC,EAAQxI,EAASC,GAnEpC,UAA6B4H,QAAEA,EAAOC,QAAEA,EAAOE,QAAEA,EAAOC,QAAEA,EAAOE,eAAEA,EAAcC,eAAEA,EAAcC,eAAEA,EAAcC,eAAEA,IAG/G,MAAMG,EAAoB,KAAVZ,EAAmC,KAAjBM,EAA0C,KAAjBE,EAAmC,KAAVL,EAC9EU,EAAoB,KAAVZ,EAAmC,KAAjBM,EAA0C,KAAjBE,EAAmC,KAAVL,EAGpF,MAAO,CAACQ,EAASC,EAFDrnC,KAAK4K,IAAIw8B,EAAUZ,GACnBxmC,KAAK4K,IAAIy8B,EAAUZ,GAEvC,CA2D+Ca,CAAoB,CAC3Dd,UACAC,UACAE,UACAC,UACAE,iBACAC,iBACAC,iBACAC,mBAEJ,MAAO,CACH,IAAIT,KAAWC,MAAYK,KAAkBC,KAAkBC,KAAkBC,KAAkBN,KAAWC,IAC9GM,EACAC,EACAxI,EACAC,EAER,CAGA,SAAS2I,IAAcf,QAAEA,EAAOC,QAAEA,EAAOE,QAAEA,EAAOC,QAAEA,IAChD,MAAMY,EAAUxnC,KAAK4K,IAAI+7B,EAAUH,GAAW,EACxCY,EAAUT,EAAUH,EAAUG,EAAUa,EAAUb,EAAUa,EAC5DC,EAAUznC,KAAK4K,IAAIg8B,EAAUH,GAAW,EAE9C,MAAO,CAACW,EADQR,EAAUH,EAAUG,EAAUa,EAAUb,EAAUa,EACxCD,EAASC,EACvC,CACA,SAASC,IAAsBC,WAAEA,EAAUC,WAAEA,EAAUziC,SAAEA,GAAW,EAAK0iC,OAAEA,EAAS,EAACC,gBAAEA,GAAkB,IACrG,IAAKA,EACD,OAAOD,EAEX,MAAME,EAA8B5iC,GAAYyiC,EAAWziC,UAAYwiC,EAAWxiC,SAC5E6iC,EAAiBhoC,KAAKC,IAAI0nC,EAAWjH,UAAUuH,GAAK,EAAGL,EAAWlH,UAAUuH,GAAK,EAAG,KAC1F,OAAOJ,GAAUE,EAA8BC,EAAiB,EACpE,CAiBA,MAAME,GAAY,EAAG5b,SAAQgQ,eAAct6B,SAAQu6B,kBAAmB,YAAYjQ,IAASgQ,GAAgB,MAAMt6B,IAASu6B,GAAgB,KA4F1I,SAAS4L,IAAgB3B,QAAEA,EAAOC,QAAEA,EAAOE,QAAEA,EAAOC,QAAEA,IAClD,MAAOM,EAAQC,EAAQxI,EAASC,GAAW2I,GAAc,CACrDf,UACAC,UACAE,UACAC,YAEJ,MAAO,CAAC,KAAKJ,KAAWC,MAAYE,KAAWC,IAAWM,EAAQC,EAAQxI,EAASC,EACvF,CAEA,MAAMwJ,GAAmB,CACrB,CAACzK,GAASE,MAAO,CAAEnrB,GAAI,EAAGsG,EAAG,GAC7B,CAAC2kB,GAASG,OAAQ,CAAEprB,EAAG,EAAGsG,EAAG,GAC7B,CAAC2kB,GAASI,KAAM,CAAErrB,EAAG,EAAGsG,GAAI,GAC5B,CAAC2kB,GAASK,QAAS,CAAEtrB,EAAG,EAAGsG,EAAG,IAQ5BsqB,GAAW,CAACplC,EAAGC,IAAM6B,KAAK6tB,KAAK7tB,KAAKurB,IAAIptB,EAAEuU,EAAIxU,EAAEwU,EAAG,GAAK1S,KAAKurB,IAAIptB,EAAE6a,EAAI9a,EAAE8a,EAAG,IAGlF,SAASqvB,IAAU/b,OAAEA,EAAMoa,eAAEA,EAAiB/I,GAASK,OAAMh8B,OAAEA,EAAM6kC,eAAEA,EAAiBlJ,GAASI,IAAGuK,OAAEA,EAAMC,OAAEA,IAC1G,MAAMC,EAAYJ,GAAiB1B,GAC7B+B,EAAYL,GAAiBvB,GAC7B6B,EAAe,CAAEh2B,EAAG4Z,EAAO5Z,EAAI81B,EAAU91B,EAAI61B,EAAQvvB,EAAGsT,EAAOtT,EAAIwvB,EAAUxvB,EAAIuvB,GACjFI,EAAe,CAAEj2B,EAAG1Q,EAAO0Q,EAAI+1B,EAAU/1B,EAAI61B,EAAQvvB,EAAGhX,EAAOgX,EAAIyvB,EAAUzvB,EAAIuvB,GACjFK,EAdW,GAAGtc,SAAQoa,iBAAiB/I,GAASK,OAAQh8B,YAC1D0kC,IAAmB/I,GAASE,MAAQ6I,IAAmB/I,GAASG,MACzDxR,EAAO5Z,EAAI1Q,EAAO0Q,EAAI,CAAEA,EAAG,EAAGsG,EAAG,GAAM,CAAEtG,GAAI,EAAGsG,EAAG,GAEvDsT,EAAOtT,EAAIhX,EAAOgX,EAAI,CAAEtG,EAAG,EAAGsG,EAAG,GAAM,CAAEtG,EAAG,EAAGsG,GAAI,GAU9C6vB,CAAa,CACrBvc,OAAQoc,EACRhC,iBACA1kC,OAAQ2mC,IAENG,EAAwB,IAAVF,EAAIl2B,EAAU,IAAM,IAClCq2B,EAAUH,EAAIE,GACpB,IACI1B,EAASC,EADT2B,EAAS,GAEb,MAAMC,EAAkB,CAAEv2B,EAAG,EAAGsG,EAAG,GAC7BkwB,EAAkB,CAAEx2B,EAAG,EAAGsG,EAAG,IAC5BmwB,EAAgBC,EAAgBC,EAAgBC,GAAkB/B,GAAc,CACnFf,QAASla,EAAO5Z,EAChB+zB,QAASna,EAAOtT,EAChB2tB,QAAS3kC,EAAO0Q,EAChBk0B,QAAS5kC,EAAOgX,IAGpB,GAAIwvB,EAAUM,GAAeL,EAAUK,KAAkB,EAAG,CACxD1B,EAAUkB,EAAO51B,GAAKy2B,EACtB9B,EAAUiB,EAAOtvB,GAAKowB,EAItB,MAAMG,EAAgB,CAClB,CAAE72B,EAAG00B,EAASpuB,EAAG0vB,EAAa1vB,GAC9B,CAAEtG,EAAG00B,EAASpuB,EAAG2vB,EAAa3vB,IAK5BwwB,EAAkB,CACpB,CAAE92B,EAAGg2B,EAAah2B,EAAGsG,EAAGquB,GACxB,CAAE30B,EAAGi2B,EAAaj2B,EAAGsG,EAAGquB,IAGxB2B,EADAR,EAAUM,KAAiBC,EACF,MAAhBD,EAAsBS,EAAgBC,EAGtB,MAAhBV,EAAsBU,EAAkBD,CAEzD,KACK,CAED,MAAME,EAAe,CAAC,CAAE/2B,EAAGg2B,EAAah2B,EAAGsG,EAAG2vB,EAAa3vB,IACrD0wB,EAAe,CAAC,CAAEh3B,EAAGi2B,EAAaj2B,EAAGsG,EAAG0vB,EAAa1vB,IAQ3D,GALIgwB,EADgB,MAAhBF,EACSN,EAAU91B,IAAMq2B,EAAUW,EAAeD,EAGzCjB,EAAUxvB,IAAM+vB,EAAUU,EAAeC,EAElDhD,IAAmBG,EAAgB,CACnC,MAAM1I,EAAOn+B,KAAK4K,IAAI0hB,EAAOwc,GAAe9mC,EAAO8mC,IAEnD,GAAI3K,GAAQoK,EAAQ,CAChB,MAAMoB,EAAY3pC,KAAKsb,IAAIitB,EAAS,EAAGA,EAASpK,GAC5CqK,EAAUM,KAAiBC,EAC3BE,EAAgBH,IAAgBJ,EAAaI,GAAexc,EAAOwc,IAAgB,EAAI,GAAKa,EAG5FT,EAAgBJ,IAAgBH,EAAaG,GAAe9mC,EAAO8mC,IAAgB,EAAI,GAAKa,CAEpG,CACJ,CAEA,GAAIjD,IAAmBG,EAAgB,CACnC,MAAM+C,EAAsC,MAAhBd,EAAsB,IAAM,IAClDe,EAAYrB,EAAUM,KAAiBL,EAAUmB,GACjDE,EAAqBpB,EAAakB,GAAuBjB,EAAaiB,GACtEG,EAAqBrB,EAAakB,GAAuBjB,EAAaiB,IACvB,IAA3BpB,EAAUM,MAAyBe,GAAaC,GAAwBD,GAAaE,IAC/E,IAA3BvB,EAAUM,MAAyBe,GAAaE,GAAwBF,GAAaC,MAEtFd,EAAyB,MAAhBF,EAAsBW,EAAeC,EAEtD,CACA,MAAMM,EAAiB,CAAEt3B,EAAGg2B,EAAah2B,EAAIu2B,EAAgBv2B,EAAGsG,EAAG0vB,EAAa1vB,EAAIiwB,EAAgBjwB,GAC9FixB,EAAiB,CAAEv3B,EAAGi2B,EAAaj2B,EAAIw2B,EAAgBx2B,EAAGsG,EAAG2vB,EAAa3vB,EAAIkwB,EAAgBlwB,GAC/EhZ,KAAKC,IAAID,KAAK4K,IAAIo/B,EAAet3B,EAAIs2B,EAAO,GAAGt2B,GAAI1S,KAAK4K,IAAIq/B,EAAev3B,EAAIs2B,EAAO,GAAGt2B,KACzF1S,KAAKC,IAAID,KAAK4K,IAAIo/B,EAAehxB,EAAIgwB,EAAO,GAAGhwB,GAAIhZ,KAAK4K,IAAIq/B,EAAejxB,EAAIgwB,EAAO,GAAGhwB,KAG1GouB,GAAW4C,EAAet3B,EAAIu3B,EAAev3B,GAAK,EAClD20B,EAAU2B,EAAO,GAAGhwB,IAGpBouB,EAAU4B,EAAO,GAAGt2B,EACpB20B,GAAW2C,EAAehxB,EAAIixB,EAAejxB,GAAK,EAE1D,CAQA,MAAO,CAPY,CACfsT,EACA,CAAE5Z,EAAGg2B,EAAah2B,EAAIu2B,EAAgBv2B,EAAGsG,EAAG0vB,EAAa1vB,EAAIiwB,EAAgBjwB,MAC1EgwB,EACH,CAAEt2B,EAAGi2B,EAAaj2B,EAAIw2B,EAAgBx2B,EAAGsG,EAAG2vB,EAAa3vB,EAAIkwB,EAAgBlwB,GAC7EhX,GAEgBolC,EAASC,EAASgC,EAAgBC,EAC1D,CAwCA,SAASY,IAAkB1D,QAAEA,EAAOC,QAAEA,EAAOC,eAAEA,EAAiB/I,GAASK,OAAM2I,QAAEA,EAAOC,QAAEA,EAAOC,eAAEA,EAAiBlJ,GAASI,IAAGoM,aAAEA,EAAe,EAAC/C,QAAEA,EAAOC,QAAEA,EAAOkB,OAAEA,EAAS,KAC3K,MAAOS,EAAQ9B,EAAQC,EAAQxI,EAASC,GAAWyJ,GAAU,CACzD/b,OAAQ,CAAE5Z,EAAG8zB,EAASxtB,EAAGytB,GACzBC,iBACA1kC,OAAQ,CAAE0Q,EAAGi0B,EAAS3tB,EAAG4tB,GACzBC,iBACAyB,OAAQ,CAAE51B,EAAG00B,EAASpuB,EAAGquB,GACzBkB,WAaJ,MAAO,CAXMS,EAAOoB,QAAO,CAACC,EAAK3pC,EAAGP,KAChC,IAAImqC,EAAU,GAQd,OANIA,EADAnqC,EAAI,GAAKA,EAAI6oC,EAAO9oC,OAAS,EAlDzC,SAAiBhC,EAAGC,EAAG0K,EAAGgG,GACtB,MAAM07B,EAAWvqC,KAAKsb,IAAIgoB,GAASplC,EAAGC,GAAK,EAAGmlC,GAASnlC,EAAG0K,GAAK,EAAGgG,IAC5D6D,EAAEA,EAACsG,EAAEA,GAAM7a,EAEjB,GAAKD,EAAEwU,IAAMA,GAAKA,IAAM7J,EAAE6J,GAAOxU,EAAE8a,IAAMA,GAAKA,IAAMnQ,EAAEmQ,EAClD,MAAO,IAAItG,KAAKsG,IAGpB,GAAI9a,EAAE8a,IAAMA,EAGR,MAAO,KAAKtG,EAAI63B,GAFHrsC,EAAEwU,EAAI7J,EAAE6J,GAAK,EAAI,MAEKsG,MAAMtG,KAAKsG,KAAKtG,KAAKsG,EAAIuxB,GAD/CrsC,EAAE8a,EAAInQ,EAAEmQ,EAAI,GAAK,KAGlC,MAAMwxB,EAAOtsC,EAAEwU,EAAI7J,EAAE6J,EAAI,GAAK,EAE9B,MAAO,KAAKA,KAAKsG,EAAIuxB,GADRrsC,EAAE8a,EAAInQ,EAAEmQ,GAAK,EAAI,OACWtG,KAAKsG,KAAKtG,EAAI63B,EAAWC,KAAQxxB,GAC9E,CAmCsByxB,CAAQzB,EAAO7oC,EAAI,GAAIO,EAAGsoC,EAAO7oC,EAAI,GAAIgqC,GAGzC,GAAS,IAANhqC,EAAU,IAAM,MAAMO,EAAEgS,KAAKhS,EAAEsY,IAEhDqxB,GAAOC,CACG,GACX,IACWpD,EAAQC,EAAQxI,EAASC,EAC3C,CAEA,SAAS8L,GAAkBzoC,GACvB,OAAQA,MACDA,EAAKy+B,UAAUC,eAAgB1+B,EAAK+jC,SAAS9lC,YAC7C+B,EAAK+9B,SAAS5H,OAASn2B,EAAKm2B,OAASn2B,EAAKk+B,aACrD,CAmCA,SAASwK,GAAe3E,GACpB,IAAKA,EACD,OAAO,KAEX,MAAM1Z,EAAS,GACTtqB,EAAS,GACf,IAAK,MAAMikC,KAAUD,EACjBC,EAAO7N,MAAQ6N,EAAO7N,OAAS,EAC/B6N,EAAO5N,OAAS4N,EAAO5N,QAAU,EACb,WAAhB4N,EAAO5/B,KACPimB,EAAOntB,KAAK8mC,GAES,WAAhBA,EAAO5/B,MACZrE,EAAO7C,KAAK8mC,GAGpB,MAAO,CACH3Z,SACAtqB,SAER,CACA,SAAS4oC,GAAkB3oC,EAAMgkC,EAAQ4E,EAAmBlN,GAASE,KAAMyK,GAAS,GAChF,MAAM51B,GAAKuzB,GAAQvzB,GAAK,GAAKzQ,EAAKy+B,UAAU6B,iBAAiB7vB,EACvDsG,GAAKitB,GAAQjtB,GAAK,GAAK/W,EAAKy+B,UAAU6B,iBAAiBvpB,GACvDof,MAAEA,EAAKC,OAAEA,GAAW4N,GAAUxH,GAAkBx8B,GACtD,GAAIqmC,EACA,MAAO,CAAE51B,EAAGA,EAAI0lB,EAAQ,EAAGpf,EAAGA,EAAIqf,EAAS,GAG/C,OADiB4N,GAAQpH,UAAYgM,GAEjC,KAAKlN,GAASI,IACV,MAAO,CAAErrB,EAAGA,EAAI0lB,EAAQ,EAAGpf,KAC/B,KAAK2kB,GAASG,MACV,MAAO,CAAEprB,EAAGA,EAAI0lB,EAAOpf,EAAGA,EAAIqf,EAAS,GAC3C,KAAKsF,GAASK,OACV,MAAO,CAAEtrB,EAAGA,EAAI0lB,EAAQ,EAAGpf,EAAGA,EAAIqf,GACtC,KAAKsF,GAASE,KACV,MAAO,CAAEnrB,IAAGsG,EAAGA,EAAIqf,EAAS,GAExC,CACA,SAASyS,GAAYpJ,EAAQqJ,GACzB,OAAKrJ,IAIIqJ,EAAuBrJ,EAAO5uB,MAAMzJ,GAAMA,EAAEqqB,KAAOqX,IAAxCrJ,EAAO,KAHhB,IAIf,CAEA,SAASsJ,GAAYC,EAAQvX,GACzB,IAAKuX,EACD,MAAO,GAEX,GAAsB,iBAAXA,EACP,OAAOA,EAGX,MAAO,GADUvX,EAAK,GAAGA,MAAS,KACbh2B,OAAOsD,KAAKiqC,GAC5BtvB,OACA1P,KAAK5H,GAAQ,GAAGA,KAAO4mC,EAAO5mC,OAC9B4T,KAAK,MACd,CA0DA,MAAMizB,GAAiB,CACnB1M,WAAY,CAAC,EAAG,GAChB0D,WAAY1F,GACZ2O,sBAAsB,EACtBC,SAAU,CAAE,GAEVC,GAA+B,IAC9BH,GACHI,eAAe,GAEnB,SAASC,GAAaC,EAAMC,GACxB,MAAM3qC,EAAS,IAAK0qC,GACpB,IAAK,MAAMnnC,KAAOonC,OACQhtC,IAAlBgtC,EAASpnC,KAETvD,EAAOuD,GAAOonC,EAASpnC,IAG/B,OAAOvD,CACX,CAeA,SAAS4qC,GAAer+B,EAAO0xB,EAAY4M,EAAcpoC,GACrD,MAAMqoC,EAAWL,GAAaF,GAA8B9nC,GACtDsoC,EAAY,IAAIrhC,IAAIu0B,GACpB+M,EAAgBF,GAAUT,qBAAuB,IAAO,EAC9DpM,EAAW12B,QACXsjC,EAAatjC,QACb,IAAK,MAAM0jC,KAAY1+B,EAAO,CAC1B,IAAI2+B,EAAeH,EAAU7kC,IAAI+kC,EAASrY,IAC1C,GAAIkY,EAASN,eAAiBS,IAAaC,GAActL,UAAUqL,SAC/DhN,EAAWx9B,IAAIwqC,EAASrY,GAAIsY,OAE3B,CACD,MAAMC,EAAqB1N,GAA0BwN,EAAUH,EAASpN,YAClE3F,EAAS4J,GAAmBsJ,EAASlT,QAAUkT,EAASlT,OAAS+S,EAAS1J,WAC1EgK,EAAkBtJ,GAAcqJ,EAAoBpT,EAAQ4F,GAAkBsN,IACpFC,EAAe,IACRJ,EAASR,YACTW,EACH/L,SAAU,CACN5H,MAAO2T,EAAS/L,UAAU5H,MAC1BC,OAAQ0T,EAAS/L,UAAU3H,QAE/BqI,UAAW,CACP6B,iBAAkB2J,EAElBvL,aAAeoL,EAAS/L,SAAuBgM,GAActL,UAAUC,kBAApCliC,EACnCwpC,EAAGkE,GAAWJ,EAAUD,GACxBC,aAGRhN,EAAWx9B,IAAIwqC,EAASrY,GAAIsY,EAChC,CACID,EAAS3J,UACTgK,GAAgBJ,EAAcjN,EAAY4M,EAAcpoC,EAEhE,CACJ,CAgBA,SAAS6oC,GAAgBnqC,EAAM88B,EAAY4M,EAAcpoC,GACrD,MAAM4nC,qBAAEA,EAAoB3M,WAAEA,EAAU0D,WAAEA,GAAeqJ,GAAaL,GAAgB3nC,GAChF6+B,EAAWngC,EAAKmgC,SAChB7/B,EAAaw8B,EAAW/3B,IAAIo7B,GAClC,IAAK7/B,EAED,YADA8pC,QAAQC,KAAK,eAAelK,0GApBpC,SAA4BngC,EAAM0pC,GAC9B,IAAK1pC,EAAKmgC,SACN,OAEJ,MAAM90B,EAAaq+B,EAAa3kC,IAAI/E,EAAKmgC,UACrC90B,EACAA,EAAW/L,IAAIU,EAAKyxB,GAAIzxB,GAGxB0pC,EAAapqC,IAAIU,EAAKmgC,SAAU,IAAI53B,IAAI,CAAC,CAACvI,EAAKyxB,GAAIzxB,KAE3D,CAYIsqC,CAAmBtqC,EAAM0pC,GACzB,MAAMG,EAAgBX,EAAuB,IAAO,GAC9Cz4B,EAAEA,EAACsG,EAAEA,EAACivB,EAAEA,GAclB,SAA2BuE,EAAWjqC,EAAYi8B,EAAY0D,EAAY4J,GACtE,MAAQp5B,EAAG2vB,EAASrpB,EAAGspB,GAAY//B,EAAWm+B,UAAU6B,iBAClDU,EAAkBxE,GAAkB+N,GACpCP,EAAqB1N,GAA0BiO,EAAWhO,GAC1D0N,EAAkBzJ,GAAmB+J,EAAU3T,QAC/C+J,GAAcqJ,EAAoBO,EAAU3T,OAAQoK,GACpDgJ,EACN,IAAIQ,EAAmB7J,GAAc,CAAElwB,EAAG2vB,EAAU6J,EAAgBx5B,EAAGsG,EAAGspB,EAAU4J,EAAgBlzB,GAAKkpB,EAAYe,GAC5F,WAArBuJ,EAAU3T,SACV4T,EAAmB1J,GAAsB0J,EAAkBxJ,EAAiB1gC,IAEhF,MAAMmqC,EAASP,GAAWK,EAAWV,GAC/Ba,EAAUpqC,EAAWm+B,UAAUuH,GAAK,EAC1C,MAAO,CACHv1B,EAAG+5B,EAAiB/5B,EACpBsG,EAAGyzB,EAAiBzzB,EACpBivB,EAAG0E,EAAUD,EAASC,EAAUD,EAExC,CAhCwBE,CAAkB3qC,EAAMM,EAAYi8B,EAAY0D,EAAY4J,IAC1EvJ,iBAAEA,GAAqBtgC,EAAKy+B,UAC5BmM,EAAkBn6B,IAAM6vB,EAAiB7vB,GAAKsG,IAAMupB,EAAiBvpB,GACvE6zB,GAAmB5E,IAAMhmC,EAAKy+B,UAAUuH,KACxChmC,EAAKy+B,UAAY,IACVz+B,EAAKy+B,UACR6B,iBAAkBsK,EAAkB,CAAEn6B,IAAGsG,KAAMupB,EAC/C0F,KAGZ,CACA,SAASkE,GAAWlqC,EAAM6pC,GACtB,OAAQ5H,GAAUjiC,EAAK4lC,QAAU5lC,EAAK4lC,OAAS,IAAM5lC,EAAKkD,SAAW2mC,EAAgB,EACzF,CAuFA,SAASgB,GAAoBpiC,EAASq0B,EAAY4M,EAAcoB,EAASvO,EAAY0D,GACjF,MAAM8K,EAAeD,GAASz6B,cAAc,qBAC5C,IAAI26B,GAAmB,EACvB,IAAKD,EACD,MAAO,CAAEE,QAAS,GAAID,oBAE1B,MAAMC,EAAU,GACV5oC,EAAQ1C,OAAOuT,iBAAiB63B,IAC9BG,IAAKtd,GAAS,IAAIjuB,OAAOwrC,kBAAkB9oC,EAAM0qB,WAEnDqe,EAAuB,GAC7B,IAAK,MAAMplC,KAAUyC,EAAQ8E,SAAU,CACnC,MAAMvN,EAAO88B,EAAW/3B,IAAIiB,EAAOyrB,IACnC,GAAKzxB,EAGL,GAAIA,EAAKi+B,OACLj+B,EAAKy+B,UAAY,IACVz+B,EAAKy+B,UACRC,kBAAcliC,GAElBwuC,GAAmB,MAElB,CACD,MAAMnK,EAAauC,GAAcp9B,EAAO69B,aAClCwH,EAAmBrrC,EAAK+9B,SAAS5H,QAAU0K,EAAW1K,OAASn2B,EAAK+9B,SAAS3H,SAAWyK,EAAWzK,OAIzG,MAHoByK,EAAW1K,QAC3B0K,EAAWzK,SACViV,GAAqBrrC,EAAKy+B,UAAUC,eAAgB14B,EAAOslC,OAClD,CACV,MAAMxH,EAAa99B,EAAO69B,YAAYzsB,wBAChCwf,EAAS4J,GAAmBxgC,EAAK42B,QAAU52B,EAAK42B,OAASqJ,EAC/D,IAAIK,iBAAEA,GAAqBtgC,EAAKy+B,UAC5Bz+B,EAAKmgC,UAA4B,WAAhBngC,EAAK42B,OACtB0J,EAAmBQ,GAAsBR,EAAkBO,EAAY/D,EAAW/3B,IAAI/E,EAAKmgC,WAEtFvJ,IACL0J,EAAmBK,GAAcL,EAAkB1J,EAAQiK,IAE/D7gC,EAAK+9B,SAAW8C,EAChB7gC,EAAKy+B,UAAY,IACVz+B,EAAKy+B,UACR6B,mBACA5B,aAAc,CACVrU,OAAQuZ,GAAgB,SAAU59B,EAAO69B,YAAaC,EAAYlW,EAAM5tB,EAAKyxB,IAC7E1xB,OAAQ6jC,GAAgB,SAAU59B,EAAO69B,YAAaC,EAAYlW,EAAM5tB,EAAKyxB,MAGjFzxB,EAAKmgC,UACLgK,GAAgBnqC,EAAM88B,EAAY4M,EAAc,CAAEnN,eAEtDyO,GAAmB,EACfK,IACAJ,EAAQ/tC,KAAK,CACTu0B,GAAIzxB,EAAKyxB,GACTrtB,KAAM,aACNy8B,eAEA7gC,EAAKugC,cAAgBvgC,EAAKmgC,UAC1BiL,EAAqBluC,KAAK,CACtBu0B,GAAIzxB,EAAKyxB,GACT0O,SAAUngC,EAAKmgC,SACf9oB,KAAMinB,GAAWt+B,EAAMu8B,KAIvC,CACJ,CACJ,CACA,GAAI6O,EAAqBntC,OAAS,EAAG,CACjC,MAAMstC,EAzId,SAA4BjgC,EAAUwxB,EAAY4M,EAAcnN,EAAa,CAAC,EAAG,IAC7E,MAAM0O,EAAU,GACVO,EAAmB,IAAIjjC,IAE7B,IAAK,MAAMwN,KAASzK,EAAU,CAC1B,MAAM/H,EAASu5B,EAAW/3B,IAAIgR,EAAMoqB,UACpC,IAAK58B,EACD,SAEJ,MAAMkoC,EAAaD,EAAiBzmC,IAAIgR,EAAMoqB,WAAWuL,cAAgBpN,GAAW/6B,GAC9EmoC,EAAejK,GAAiBgK,EAAY11B,EAAMsB,MACxDm0B,EAAiBlsC,IAAIyW,EAAMoqB,SAAU,CAAEuL,eAAcnoC,UACzD,CAqDA,OApDIioC,EAAiB5+B,KAAO,GACxB4+B,EAAiB3vC,SAAQ,EAAG6vC,eAAcnoC,UAAU48B,KAEhD,MAAMG,EAAmB/8B,EAAOk7B,UAAU6B,iBACpCO,EAAarE,GAAkBj5B,GAC/Bk5B,EAASl5B,EAAOk5B,QAAUF,EAE1BoP,EAAUD,EAAaj7B,EAAI6vB,EAAiB7vB,EAAI1S,KAAKyqB,MAAMzqB,KAAK4K,IAAI23B,EAAiB7vB,EAAIi7B,EAAaj7B,IAAM,EAC5Gm7B,EAAUF,EAAa30B,EAAIupB,EAAiBvpB,EAAIhZ,KAAKyqB,MAAMzqB,KAAK4K,IAAI23B,EAAiBvpB,EAAI20B,EAAa30B,IAAM,EAC5G80B,EAAW9tC,KAAKC,IAAI6iC,EAAW1K,MAAOp4B,KAAKyqB,MAAMkjB,EAAavV,QAC9D2V,EAAY/tC,KAAKC,IAAI6iC,EAAWzK,OAAQr4B,KAAKyqB,MAAMkjB,EAAatV,SAChE2V,GAAeF,EAAWhL,EAAW1K,OAASsG,EAAO,GACrDuP,GAAgBF,EAAYjL,EAAWzK,QAAUqG,EAAO,IAE1DkP,EAAU,GAAKC,EAAU,GAAKG,GAAeC,KAC7Cf,EAAQ/tC,KAAK,CACTu0B,GAAI0O,EACJ/7B,KAAM,WACNw4B,SAAU,CACNnsB,EAAGlN,EAAOq5B,SAASnsB,EAAIk7B,EAAUI,EACjCh1B,EAAGxT,EAAOq5B,SAAS7lB,EAAI60B,EAAUI,KAKzCtC,EAAa3kC,IAAIo7B,IAAWtkC,SAAS0uC,IAC5Bj/B,EAAS2gC,MAAMl2B,GAAUA,EAAM0b,KAAO8Y,EAAU9Y,MACjDwZ,EAAQ/tC,KAAK,CACTu0B,GAAI8Y,EAAU9Y,GACdrtB,KAAM,WACNw4B,SAAU,CACNnsB,EAAG85B,EAAU3N,SAASnsB,EAAIk7B,EAC1B50B,EAAGwzB,EAAU3N,SAAS7lB,EAAI60B,IAGtC,MAIJ/K,EAAW1K,MAAQuV,EAAavV,OAAS0K,EAAWzK,OAASsV,EAAatV,QAAUuV,GAAWC,IAC/FX,EAAQ/tC,KAAK,CACTu0B,GAAI0O,EACJ/7B,KAAM,aACN8nC,eAAe,EACfrL,WAAY,CACR1K,MAAO0V,GAAYF,EAAUlP,EAAO,GAAKkP,EAAUI,EAAc,GACjE3V,OAAQ0V,GAAaF,EAAUnP,EAAO,GAAKmP,EAAUI,EAAe,KAGhF,IAGDf,CACX,CAuEoCkB,CAAmBf,EAAsBtO,EAAY4M,EAAcnN,GAC/F0O,EAAQ/tC,QAAQquC,EACpB,CACA,MAAO,CAAEN,UAASD,mBACtB,CAiBA,SAASoB,GAAuBC,EAAkBC,EAAYzN,GAC1DwN,EAAiBjmC,QACjBkmC,EAAWlmC,QACX,IAAK,MAAM24B,KAAQF,EAAO,CACtB,MAAMxU,OAAEA,EAAMtqB,OAAEA,EAAMs6B,aAAEA,EAAe,KAAIC,aAAEA,EAAe,MAASyE,EAC/DwN,EAAY,GAAGliB,YAAiBgQ,IAChCmS,EAAY,GAAGzsC,YAAiBu6B,IAChCmS,EAAaJ,EAAiBtnC,IAAIwnC,IAAc,IAAIhkC,IACpDmkC,EAAaL,EAAiBtnC,IAAIynC,IAAc,IAAIjkC,IACpD4zB,EAAa,CAAEwQ,OAAQ5N,EAAKtN,GAAIpH,SAAQtqB,SAAQs6B,eAAcC,gBACpEgS,EAAWhtC,IAAIy/B,EAAKtN,GAAIsN,GACxBsN,EAAiB/sC,IAAIitC,EAAWE,EAAWntC,IAAI,GAAGS,KAAUu6B,IAAgB6B,IAC5EkQ,EAAiB/sC,IAAIktC,EAAWE,EAAWptC,IAAI,GAAG+qB,KAAUgQ,IAAgB8B,GAChF,CACJ,CAmBA,SAASyQ,GAAiB5sC,EAAM88B,GAC5B,IAAK98B,EAAKmgC,SACN,OAAO,EAEX,MAAM7/B,EAAaw8B,EAAW/3B,IAAI/E,EAAKmgC,UACvC,QAAK7/B,MAGDA,EAAW4C,UAGR0pC,GAAiBtsC,EAAYw8B,GACxC,CACA,SAAS+P,GAAY9sC,EAAQqQ,EAAU06B,GACnC,IAAIgC,EAAU/sC,EACd,EAAG,CACC,GAAI+sC,GAASn8B,QAAQP,GACjB,OAAO,EACX,GAAI08B,IAAYhC,EACZ,OAAO,EACXgC,EAAUA,EAAQC,aACrB,OAAQD,GACT,OAAO,CACX,CAqCA,SAASE,IAAsBjN,OAAEA,EAAMkN,UAAEA,EAASnQ,WAAEA,EAAU6B,SAAEA,GAAW,IACvE,MAAMuO,EAAqB,GAC3B,IAAK,MAAOzb,EAAI0b,KAAaF,EAAW,CACpC,MAAMjtC,EAAO88B,EAAW/3B,IAAI0sB,IAAKgN,UAAUqL,SACvC9pC,GACAktC,EAAmBhwC,KAAK,IACjB8C,EACH48B,SAAUuQ,EAASvQ,SACnB+B,YAGZ,CACA,IAAKoB,EACD,MAAO,CAACmN,EAAmB,GAAIA,GAEnC,MAAMltC,EAAO88B,EAAW/3B,IAAIg7B,IAAStB,UAAUqL,SAC/C,MAAO,CACF9pC,EAEK,IACKA,EACH48B,SAAUqQ,EAAUloC,IAAIg7B,IAASnD,UAAY58B,EAAK48B,SAClD+B,YAJFuO,EAAmB,GAMzBA,EAER,CAGA,SAASE,IAAOC,gBAAEA,EAAeC,cAAEA,EAAaC,YAAEA,EAAWC,OAAEA,EAAMC,WAAEA,IACnE,IAAIC,EAAU,CAAEj9B,EAAG,KAAMsG,EAAG,MACxB42B,EAAY,EACZV,EAAY,IAAI1kC,IAChBqlC,GAAiB,EACjBC,EAAgB,CAAEp9B,EAAG,EAAGsG,EAAG,GAC3B+2B,EAAkB,KAClBC,GAAc,EACdC,EAAc,KACdC,GAAY,EAiMhB,MAAO,CACHjoC,OAhMJ,UAAgBkoC,gBAAEA,EAAeC,eAAEA,EAAcrD,QAAEA,EAAOsD,aAAEA,EAAYrO,OAAEA,EAAMsO,kBAAEA,EAAoB,IAElG,SAASC,GAAY79B,EAAEA,EAACsG,EAAEA,GAAKw3B,GAC3B,MAAMzR,WAAEA,EAAUmD,WAAEA,EAAUqC,SAAEA,EAAQC,WAAEA,EAAUhG,WAAEA,EAAUiS,WAAEA,EAAUC,gBAAEA,EAAevO,QAAEA,EAAOwO,oBAAEA,GAAyBpB,IACjII,EAAU,CAAEj9B,IAAGsG,KACf,IAAI43B,GAAY,EACZC,EAAW,CAAEn+B,EAAG,EAAGsG,EAAG,EAAGimB,GAAI,EAAGC,GAAI,GACxC,GAAIgQ,EAAUrgC,KAAO,GAAKqzB,EAAY,CAClC,MAAM5oB,EAAOwlB,GAAuBoQ,GACpC2B,EAAWpN,GAAUnqB,EACzB,CACA,IAAK,MAAOoa,EAAI0b,KAAaF,EAAW,CACpC,IAAKnQ,EAAW59B,IAAIuyB,GAGhB,SAEJ,IAAIuO,EAAe,CAAEvvB,EAAGA,EAAI08B,EAAS9L,SAAS5wB,EAAGsG,EAAGA,EAAIo2B,EAAS9L,SAAStqB,GACtEwrB,IACAvC,EAAeqC,GAAarC,EAAcsC,IAI9C,IAAIuM,EAAqB,CACrB,CAAC5O,EAAW,GAAG,GAAIA,EAAW,GAAG,IACjC,CAACA,EAAW,GAAG,GAAIA,EAAW,GAAG,KAErC,GAAIgN,EAAUrgC,KAAO,GAAKqzB,IAAekN,EAASvW,OAAQ,CACtD,MAAM0J,iBAAEA,GAAqB6M,EAAS1O,UAChC2F,EAAK9D,EAAiB7vB,EAAIm+B,EAASn+B,EAAIwvB,EAAW,GAAG,GACrDjD,EAAKsD,EAAiB7vB,EAAI08B,EAASpP,SAAS5H,MAAQyY,EAAS5R,GAAKiD,EAAW,GAAG,GAGtF4O,EAAqB,CACjB,CAACzK,EAHM9D,EAAiBvpB,EAAI63B,EAAS73B,EAAIkpB,EAAW,GAAG,IAIvD,CAACjD,EAHMsD,EAAiBvpB,EAAIo2B,EAASpP,SAAS3H,OAASwY,EAAS3R,GAAKgD,EAAW,GAAG,IAK3F,CACA,MAAMrD,SAAEA,EAAQ0D,iBAAEA,GAAqBR,GAAsB,CACzDC,OAAQtO,EACRuO,eACAlD,aACAmD,WAAY4O,EACZtS,aACA2D,YAGJyO,EAAYA,GAAaxB,EAASvQ,SAASnsB,IAAMmsB,EAASnsB,GAAK08B,EAASvQ,SAAS7lB,IAAM6lB,EAAS7lB,EAChGo2B,EAASvQ,SAAWA,EACpBuQ,EAAS1O,UAAU6B,iBAAmBA,CAC1C,CACA,GAAKqO,IAGLD,EAAoBzB,GAAW,GAC3BsB,IAAcf,GAAUgB,IAAgBzO,GAAU0O,IAAmB,CACrE,MAAOK,EAAaC,GAAgB/B,GAAsB,CACtDjN,SACAkN,YACAnQ,eAEJ0Q,IAASe,EAAWtB,EAAW6B,EAAaC,GAC5CP,IAAaD,EAAWO,EAAaC,GAChChP,GACD0O,IAAkBF,EAAWQ,EAErC,CACJ,CACA3P,eAAe4P,IACX,IAAKlB,EACD,OAEJ,MAAM/gB,UAAEA,EAASkiB,MAAEA,EAAKC,aAAEA,GAAiB5B,KACpC6B,EAAWC,GAAalO,GAAY2M,EAAeC,EAAiBoB,GACzD,IAAdC,GAAiC,IAAdC,IACnB1B,EAAQj9B,GAAKi9B,EAAQj9B,GAAK,GAAK0+B,EAAYpiB,EAAU,GACrD2gB,EAAQ32B,GAAK22B,EAAQ32B,GAAK,GAAKq4B,EAAYriB,EAAU,SAC3CkiB,EAAM,CAAEx+B,EAAG0+B,EAAWp4B,EAAGq4B,KAC/Bd,EAAYZ,EAAS,OAG7BC,EAAY5d,sBAAsBif,EACtC,CACA,SAASK,EAAUjuC,GACf,MAAM07B,WAAEA,EAAUwS,qBAAEA,EAAoBC,eAAEA,EAAcxiB,UAAEA,EAASuV,SAAEA,EAAQC,WAAEA,EAAUiN,kBAAEA,EAAiBC,gBAAEA,EAAeC,qBAAEA,EAAoBC,sBAAEA,GAA2BrC,IAChLS,GAAc,EACRyB,GAAsBpB,GAAkBkB,IAAwBvP,GAC7DjD,EAAW/3B,IAAIg7B,IAAS78B,UAEzBysC,IAGJvB,GAAgBoB,GAAqBzP,GACrCsN,IAAkBtN,GAEtB,MAAMkD,EAAaF,GAAmB3hC,EAAMqV,YAAa,CAAEsW,YAAWuV,WAAUC,eAGhF,GAFAmL,EAAUzK,EACVgK,EA5KZ,SAAsBnQ,EAAYyS,EAAgBK,EAAU7P,GACxD,MAAMkN,EAAY,IAAI1kC,IACtB,IAAK,MAAOkpB,EAAIzxB,KAAS88B,EACrB,IAAK98B,EAAKkD,UAAYlD,EAAKyxB,KAAOsO,MAC5B//B,EAAKmgC,WAAayM,GAAiB5sC,EAAM88B,MAC1C98B,EAAK6vC,WAAcN,QAA4C,IAAnBvvC,EAAK6vC,WAA6B,CAC/E,MAAM9F,EAAejN,EAAW/3B,IAAI0sB,GAChCsY,GACAkD,EAAU3tC,IAAImyB,EAAI,CACdA,KACAmL,SAAUmN,EAAanN,UAAY,CAAEnsB,EAAG,EAAGsG,EAAG,GAC9CsqB,SAAU,CACN5wB,EAAGm/B,EAASn/B,EAAIs5B,EAAatL,UAAU6B,iBAAiB7vB,EACxDsG,EAAG64B,EAAS74B,EAAIgzB,EAAatL,UAAU6B,iBAAiBvpB,GAE5D6f,OAAQmT,EAAanT,OACrBuJ,SAAU4J,EAAa5J,SACvB1D,OAAQsN,EAAatN,OACrB8D,aAAcwJ,EAAaxJ,aAC3B9B,UAAW,CACP6B,iBAAkByJ,EAAatL,UAAU6B,kBAAoB,CAAE7vB,EAAG,EAAGsG,EAAG,IAE5EgnB,SAAU,CACN5H,MAAO4T,EAAahM,SAAS5H,OAAS,EACtCC,OAAQ2T,EAAahM,SAAS3H,QAAU,IAIxD,CAEJ,OAAO6W,CACX,CA6IwB6C,CAAahT,EAAYyS,EAAgBtM,EAAYlD,GAC7DkN,EAAUrgC,KAAO,IAAM2gC,GAAekC,IAAqB1P,GAAU2P,GAAwB,CAC7F,MAAOZ,EAAaC,GAAgB/B,GAAsB,CACtDjN,SACAkN,YACAnQ,eAEJyQ,IAAcnsC,EAAMqV,YAAaw2B,EAAW6B,EAAaC,GACzDU,IAAkBruC,EAAMqV,YAAaq4B,EAAaC,GAC7ChP,GACD2P,IAAuBtuC,EAAMqV,YAAas4B,EAElD,CACJ,CA7GAf,EAAclrC,GAAOgoC,GA8GrB,MAAMiF,E/C5pDC,WACb,IAOIC,EACAC,EACAC,EACA7Y,EAVAptB,EAASmS,GACT+zB,EAAY5zB,GACZX,EAAUY,GACVgb,EAAY/a,GACZ2zB,EAAW,CAAE,EACb1Y,EAAY1pB,GAAS,QAAS,OAAQ,OACtC8N,EAAS,EAKT6b,EAAiB,EAErB,SAAS0Y,EAAK95B,GACZA,EACK/H,GAAG,iBAAkBspB,GACvB7tB,OAAOutB,GACLhpB,GAAG,kBAAmBwpB,GACtBxpB,GAAG,iBAAkBypB,EAAYvd,IACjClM,GAAG,iCAAkC0pB,GACrC71B,MAAM,eAAgB,QACtBA,MAAM,8BAA+B,gBAC3C,CAED,SAASy1B,EAAY12B,EAAOgG,GAC1B,IAAIiwB,GAAgBptB,EAAOvF,KAAKO,KAAM7D,EAAOgG,GAA7C,CACA,IAAIgxB,EAAUkY,EAAYrrC,KAAMkrC,EAAUzrC,KAAKO,KAAM7D,EAAOgG,GAAIhG,EAAOgG,EAAG,SACrEgxB,IACLt1B,GAAO1B,EAAM+Z,MACV3M,GAAG,iBAAkB+hC,EAAY31B,IACjCpM,GAAG,eAAgBgiC,EAAY51B,IAClC61B,GAAOrvC,EAAM+Z,MACbL,GAAc1Z,GACd8uC,GAAc,EACdF,EAAa5uC,EAAM0V,QACnBm5B,EAAa7uC,EAAM4V,QACnBohB,EAAQ,QAASh3B,GAXuC,CAYzD,CAED,SAASmvC,EAAWnvC,GAElB,GADAga,GAAQha,IACH8uC,EAAa,CAChB,IAAIn0B,EAAK3a,EAAM0V,QAAUk5B,EAAYh0B,EAAK5a,EAAM4V,QAAUi5B,EAC1DC,EAAcn0B,EAAKA,EAAKC,EAAKA,EAAK2b,CACnC,CACDyY,EAASzX,MAAM,OAAQv3B,EACxB,CAED,SAASovC,EAAWpvC,GAClB0B,GAAO1B,EAAM+Z,MAAM3M,GAAG,8BAA+B,MACrD+M,GAAQna,EAAM+Z,KAAM+0B,GACpB90B,GAAQha,GACRgvC,EAASzX,MAAM,MAAOv3B,EACvB,CAED,SAAS42B,EAAa52B,EAAOgG,GAC3B,GAAK6C,EAAOvF,KAAKO,KAAM7D,EAAOgG,GAA9B,CACA,IAEwBlJ,EAAGk6B,EAFvBe,EAAU/3B,EAAM43B,eAChBpyB,EAAIupC,EAAUzrC,KAAKO,KAAM7D,EAAOgG,GAChCe,EAAIgxB,EAAQl7B,OAEhB,IAAKC,EAAI,EAAGA,EAAIiK,IAAKjK,GACfk6B,EAAUkY,EAAYrrC,KAAM2B,EAAGxF,EAAOgG,EAAG+xB,EAAQj7B,GAAG2d,WAAYsd,EAAQj7B,OAC1E4c,GAAc1Z,GACdg3B,EAAQ,QAASh3B,EAAO+3B,EAAQj7B,IARK,CAW1C,CAED,SAAS+5B,EAAW72B,GAClB,IACwBlD,EAAGk6B,EADvBe,EAAU/3B,EAAM43B,eAChB7wB,EAAIgxB,EAAQl7B,OAEhB,IAAKC,EAAI,EAAGA,EAAIiK,IAAKjK,GACfk6B,EAAUgY,EAASjX,EAAQj7B,GAAG2d,eAChCT,GAAQha,GACRg3B,EAAQ,OAAQh3B,EAAO+3B,EAAQj7B,IAGpC,CAED,SAASg6B,EAAW92B,GAClB,IACwBlD,EAAGk6B,EADvBe,EAAU/3B,EAAM43B,eAChB7wB,EAAIgxB,EAAQl7B,OAIhB,IAFIo5B,GAAapG,aAAaoG,GAC9BA,EAAc5b,YAAW,WAAa4b,EAAc,IAAK,GAAI,KACxDn5B,EAAI,EAAGA,EAAIiK,IAAKjK,GACfk6B,EAAUgY,EAASjX,EAAQj7B,GAAG2d,eAChCf,GAAc1Z,GACdg3B,EAAQ,MAAOh3B,EAAO+3B,EAAQj7B,IAGnC,CAED,SAASoyC,EAAYthC,EAAMmhC,EAAW/uC,EAAOgG,EAAGyU,EAAY60B,GAC1D,IAC4C30B,EAAIC,EAC5C2M,EAFA3a,EAAW0pB,EAAU3oB,OACrBtQ,EAAI+X,GAAQk6B,GAAStvC,EAAO+uC,GAGhC,GAUa,OAVRxnB,EAAI/M,EAAQlX,KAAKsK,EAAM,IAAI2M,GAAU,cAAe,CACrDlF,YAAarV,EACbrB,OAAQswC,EACRx0B,aACAC,SACArL,EAAGhS,EAAE,GACLsY,EAAGtY,EAAE,GACLsd,GAAI,EACJC,GAAI,EACJhO,aACE5G,IAKN,OAHA2U,EAAK4M,EAAElY,EAAIhS,EAAE,IAAM,EACnBud,EAAK2M,EAAE5R,EAAItY,EAAE,IAAM,EAEZ,SAAS25B,EAAQh0B,EAAMhD,EAAOsvC,GACnC,IAAYvoC,EAAR0lB,EAAKpvB,EACT,OAAQ2F,GACN,IAAK,QAASgsC,EAASv0B,GAAcuc,EAASjwB,EAAI2T,IAAU,MAC5D,IAAK,aAAcs0B,EAASv0B,KAAeC,EAC3C,IAAK,OAAQrd,EAAI+X,GAAQk6B,GAAStvC,EAAO+uC,GAAYhoC,EAAI2T,EAE3D9N,EAAStJ,KACPN,EACA4K,EACA,IAAI2M,GAAUvX,EAAM,CAClBqS,YAAarV,EACbwa,QAAS+M,EACT5oB,OAAQswC,EACRx0B,aACAC,OAAQ3T,EACRsI,EAAGhS,EAAE,GAAKsd,EACVhF,EAAGtY,EAAE,GAAKud,EACVD,GAAItd,EAAE,GAAKovB,EAAG,GACd7R,GAAIvd,EAAE,GAAKovB,EAAG,GACd7f,aAEF5G,EAER,CACG,CA2BD,OAzBAipC,EAAKpmC,OAAS,SAASpN,GACrB,OAAOqR,UAAUjQ,QAAUgM,EAAsB,mBAANpN,EAAmBA,EAAI+sB,KAAW/sB,GAAIwzC,GAAQpmC,CAC7F,EAEEomC,EAAKF,UAAY,SAAStzC,GACxB,OAAOqR,UAAUjQ,QAAUkyC,EAAyB,mBAANtzC,EAAmBA,EAAI+sB,GAAS/sB,GAAIwzC,GAAQF,CAC9F,EAEEE,EAAKz0B,QAAU,SAAS/e,GACtB,OAAOqR,UAAUjQ,QAAU2d,EAAuB,mBAAN/e,EAAmBA,EAAI+sB,GAAS/sB,GAAIwzC,GAAQz0B,CAC5F,EAEEy0B,EAAK7Y,UAAY,SAAS36B,GACxB,OAAOqR,UAAUjQ,QAAUu5B,EAAyB,mBAAN36B,EAAmBA,EAAI+sB,KAAW/sB,GAAIwzC,GAAQ7Y,CAChG,EAEE6Y,EAAK7hC,GAAK,WACR,IAAI5R,EAAQ86B,EAAUlpB,GAAGU,MAAMwoB,EAAWxpB,WAC1C,OAAOtR,IAAU86B,EAAY2Y,EAAOzzC,CACxC,EAEEyzC,EAAKpW,cAAgB,SAASp9B,GAC5B,OAAOqR,UAAUjQ,QAAU05B,GAAkB96B,GAAKA,GAAKA,EAAGwzC,GAAQtyC,KAAK6tB,KAAK+L,EAChF,EAES0Y,CACT,C+Cm/C+BA,GAClBpW,cAAcoU,GACd7/B,GAAG,SAAUpN,IACd,MAAM0pC,QAAEA,EAAO6F,kBAAEA,EAAiB5jB,UAAEA,EAASuV,SAAEA,EAAQC,WAAEA,GAAe+K,IACxEW,GAAY,EACc,IAAtB0C,GACAtB,EAAUjuC,GAEd,MAAM6hC,EAAaF,GAAmB3hC,EAAMqV,YAAa,CAAEsW,YAAWuV,WAAUC,eAChFmL,EAAUzK,EACV6K,EAAkBhD,GAAS1zB,yBAA2B,KACtDy2B,EAAgB7K,GAAiB5hC,EAAMqV,YAAaq3B,EAAgB,IAEnEt/B,GAAG,QAASpN,IACb,MAAMwvC,kBAAEA,EAAiB7jB,UAAEA,EAASuV,SAAEA,EAAQC,WAAEA,EAAUoO,kBAAEA,EAAiB7T,WAAEA,GAAewQ,IACxFrK,EAAaF,GAAmB3hC,EAAMqV,YAAa,CAAEsW,YAAWuV,WAAUC,eAMhF,IALgC,cAA3BnhC,EAAMqV,YAAYrS,MAAwBhD,EAAMqV,YAAY0iB,QAAQl7B,OAAS,GAE7E8hC,IAAWjD,EAAW59B,IAAI6gC,MAC3BkO,GAAY,IAEZA,EAAJ,CAOA,IAJKL,GAAkBgD,GAAqB7C,IACxCH,GAAiB,EACjBoB,MAECjB,EAAa,CACd,MAAMt9B,EAAIwyB,EAAWC,UAAYwK,EAAQj9B,GAAK,GACxCsG,EAAIksB,EAAWE,UAAYuK,EAAQ32B,GAAK,GAC7BhZ,KAAK6tB,KAAKnb,EAAIA,EAAIsG,EAAIA,GACxB45B,GACXtB,EAAUjuC,EAElB,EAEKssC,EAAQj9B,IAAMwyB,EAAWC,UAAYwK,EAAQ32B,IAAMksB,EAAWE,WAAa8J,GAAac,IAEzFF,EAAgB7K,GAAiB5hC,EAAMqV,YAAaq3B,GACpDQ,EAAYrL,EAAY7hC,EAAMqV,aAjBlC,CAkBA,IAECjI,GAAG,OAAQpN,IACZ,GAAK2sC,IAAeE,IAGpBL,GAAiB,EACjBG,GAAc,EACd8C,qBAAqBlD,GACjBV,EAAUrgC,KAAO,GAAG,CACpB,MAAMkwB,WAAEA,EAAU4R,oBAAEA,EAAmBoC,eAAEA,EAAcC,oBAAEA,GAAwBzD,IAEjF,GADAoB,EAAoBzB,GAAW,GAC3BQ,GAAcqD,IAAoB/Q,GAAUgR,EAAsB,CAClE,MAAOjC,EAAaC,GAAgB/B,GAAsB,CACtDjN,SACAkN,YACAnQ,aACA6B,UAAU,IAEd8O,IAAarsC,EAAMqV,YAAaw2B,EAAW6B,EAAaC,GACxD+B,IAAiB1vC,EAAMqV,YAAaq4B,EAAaC,GAC5ChP,GACDgR,IAAsB3vC,EAAMqV,YAAas4B,EAEjD,CACJ,KAEC9kC,QAAQ7I,IACT,MAAMrB,EAASqB,EAAMrB,OAIrB,OAHqBqB,EAAMkb,UACrB4xB,IAAoBrB,GAAY9sC,EAAQ,IAAImuC,IAAmBpD,OAC/DqD,GAAkBtB,GAAY9sC,EAAQouC,EAAgBrD,GAC1C,IAEtBkD,EAAYtpC,KAAKqrC,EACrB,EAMItwC,QALJ,WACIuuC,GAAax/B,GAAG,QAAS,KAC7B,EAKJ,CAoBA,SAASwiC,GAAiBpU,EAAUqU,EAAkBnU,EAAY7B,GAC9D,IAAIiW,EAAiB,GACjBC,EAActgB,IAClB,MAAMugB,EArBV,SAAgCxU,EAAUE,EAAYuE,GAClD,MAAMj2B,EAAQ,GACRiM,EAAO,CACT5G,EAAGmsB,EAASnsB,EAAI4wB,EAChBtqB,EAAG6lB,EAAS7lB,EAAIsqB,EAChBlL,MAAkB,EAAXkL,EACPjL,OAAmB,EAAXiL,GAEZ,IAAK,MAAMrhC,KAAQ88B,EAAWvvB,SACtB8wB,GAAmBhnB,EAAMinB,GAAWt+B,IAAS,GAC7CoL,EAAMlO,KAAK8C,GAGnB,OAAOoL,CACX,CAOuBimC,CAAuBzU,EAAUE,EAAYmU,EAJxC,KAKxB,IAAK,MAAMjxC,KAAQoxC,EAAY,CAC3B,MAAME,EAAa,IAAKtxC,EAAKy+B,UAAUC,cAAcrU,QAAU,MAASrqB,EAAKy+B,UAAUC,cAAc3+B,QAAU,IAC/G,IAAK,MAAMikC,KAAUsN,EAAY,CAE7B,GAAIrW,EAAW8E,SAAWiE,EAAOjE,QAAU9E,EAAW72B,OAAS4/B,EAAO5/B,MAAQ62B,EAAWxJ,KAAOuS,EAAOvS,GACnG,SAGJ,MAAMhhB,EAAEA,EAACsG,EAAEA,GAAM4xB,GAAkB3oC,EAAMgkC,EAAQA,EAAOpH,UAAU,GAC5DyE,EAAWtjC,KAAK6tB,KAAK7tB,KAAKurB,IAAI7Y,EAAImsB,EAASnsB,EAAG,GAAK1S,KAAKurB,IAAIvS,EAAI6lB,EAAS7lB,EAAG,IAC9EsqB,EAAW4P,IAGX5P,EAAW8P,GACXD,EAAiB,CAAC,IAAKlN,EAAQvzB,IAAGsG,MAClCo6B,EAAc9P,GAETA,IAAa8P,GAElBD,EAAeh0C,KAAK,IAAK8mC,EAAQvzB,IAAGsG,MAE5C,CACJ,CACA,IAAKm6B,EAAejzC,OAChB,OAAO,KAGX,GAAIizC,EAAejzC,OAAS,EAAG,CAC3B,MAAMszC,EAAyC,WAApBtW,EAAW72B,KAAoB,SAAW,SACrE,OAAO8sC,EAAergC,MAAMmzB,GAAWA,EAAO5/B,OAASmtC,KAAuBL,EAAe,EACjG,CACA,OAAOA,EAAe,EAC1B,CACA,SAASM,GAAUzR,EAAQ3F,EAAY0O,EAAUhM,EAAY2U,EAAgBC,GAAuB,GAChG,MAAM1xC,EAAO88B,EAAW/3B,IAAIg7B,GAC5B,IAAK//B,EACD,OAAO,KAEX,MAAM+jC,EAA6B,WAAnB0N,EACVzxC,EAAKy+B,UAAUC,eAAetE,GAC9B,IAAKp6B,EAAKy+B,UAAUC,cAAcrU,QAAU,MAASrqB,EAAKy+B,UAAUC,cAAc3+B,QAAU,IAC5FikC,GAAU8E,EAAW/E,GAASlzB,MAAM6X,GAAMA,EAAE+I,KAAOqX,IAAY/E,IAAU,KAAO,KACtF,OAAOC,GAAU0N,EACX,IAAK1N,KAAW2E,GAAkB3oC,EAAMgkC,EAAQA,EAAOpH,UAAU,IACjEoH,CACV,CACA,SAAS2N,GAAcC,EAAiBC,GACpC,OAAID,IAGKC,GAAeluC,UAAUsS,SAAS,UAChC,SAEF47B,GAAeluC,UAAUsS,SAAS,UAChC,SAEJ,KACX,CAYA,MAAM67B,GAAc,KAAM,EA8I1B,SAASC,GAAc3wC,GAAO4iC,OAAEA,EAAMyN,eAAEA,EAAcO,WAAEA,EAAUC,aAAEA,EAAYC,SAAEA,EAAQC,IAAEA,EAAGC,IAAEA,EAAGC,OAAEA,EAAMC,kBAAEA,EAAoBR,GAAWhV,WAAEA,IAC3I,MAAMyV,EAAwB,WAAbL,EACXL,EAAgB7N,EAChBmO,EAAI9hC,cAAc,IAAI+hC,2BAA6BC,KAAUrO,GAAQjE,UAAUiE,GAAQvS,MAAMuS,GAAQ5/B,UACrG,MACAqM,EAAEA,EAACsG,EAAEA,GAAMisB,GAAiB5hC,GAC5BoxC,EAAcL,EAAIM,iBAAiBhiC,EAAGsG,GAGtC27B,EAAgBF,GAAa7uC,UAAUsS,SAAS,GAAGm8B,kBAAsBI,EAAcX,EACvFhzC,EAAS,CACXgzC,cAAea,EACf1X,SAAS,EACTmB,WAAY,KACZd,SAAU,MAEd,GAAIqX,EAAe,CACf,MAAMtY,EAAauX,QAAcn1C,EAAWk2C,GACtCC,EAAeD,EAAc9wC,aAAa,eAC1CknC,EAAW4J,EAAc9wC,aAAa,iBACtCgxC,EAAcF,EAAc/uC,UAAUsS,SAAS,eAC/C48B,EAAiBH,EAAc/uC,UAAUsS,SAAS,kBACxD,IAAK08B,IAAiBvY,EAClB,OAAOv7B,EAEX,MAAMs9B,EAAa,CACf9R,OAAQkoB,EAAWI,EAAeX,EAClC3X,aAAckY,EAAWzJ,EAAWmJ,EACpClyC,OAAQwyC,EAAWP,EAAaW,EAChCrY,aAAciY,EAAWN,EAAenJ,GAE5CjqC,EAAOs9B,WAAaA,EACpB,MAEMnB,EAFgB4X,GAAeC,IAGhCpB,IAAmB9W,GAAemY,OAC5BP,GAA2B,WAAfnY,IAA8BmY,GAA2B,WAAfnY,EACvDuY,IAAiBX,GAAclJ,IAAamJ,GACtDpzC,EAAOm8B,QAAUA,GAAWsX,EAAkBnW,GAC9Ct9B,EAAOw8B,SAAWmW,GAAUmB,EAAcvY,EAAY0O,EAAUhM,EAAY2U,GAAgB,EAChG,CACA,OAAO5yC,CACX,CACA,MAAMk0C,GAAW,CACbC,cAzLJ,SAAuB5xC,GAAOqwC,eAAEA,EAAcR,iBAAEA,EAAgBnI,SAAEA,EAAQ/I,OAAEA,EAAM6R,gBAAEA,EAAeW,SAAEA,EAAQzH,QAAEA,EAAOhO,WAAEA,EAAUsV,IAAEA,EAAGa,iBAAEA,EAAgBZ,OAAEA,EAAMpD,MAAEA,EAAKiE,iBAAEA,EAAgBC,eAAEA,EAAcC,UAAEA,EAASC,aAAEA,EAAYf,kBAAEA,EAAoBR,GAAWwB,eAAEA,EAAcC,iBAAEA,EAAgBC,aAAEA,EAAYC,cAAEA,EAAavE,aAAEA,IAEjU,MAAMiD,EAhyCgB,CAAC3xC,GAAYA,EAAQkzC,iBAAmB/zC,QAAQe,SAgyC1DizC,CAAkBvyC,EAAMrB,QACpC,IACI6zC,EADAjG,EAAY,EAEhB,MAAMl9B,EAAEA,EAACsG,EAAEA,GAAMisB,GAAiB5hC,GAC5ByyC,EAAgB1B,GAAKM,iBAAiBhiC,EAAGsG,GACzCqjB,EAAauX,GAAcC,EAAiBiC,GAC5C/F,EAAkBhD,GAAS1zB,wBACjC,IAAK02B,IAAoB1T,EACrB,OAEJ,MAAM0Z,EAAqBtC,GAAUzR,EAAQ3F,EAAY0O,EAAUhM,EAAY2U,GAC/E,IAAKqC,EACD,OAEJ,IAAIlX,EAAWoG,GAAiB5hC,EAAO0sC,GACnCF,GAAiB,EACjBzR,EAAa,KACbnB,GAAU,EACV6W,EAAgB,KAEpB,SAAS7C,IACL,IAAKiE,IAAqBnF,EACtB,OAEJ,MAAOr9B,EAAGsG,GAAKmqB,GAAYtE,EAAUkR,EAAiBoB,GACtDD,EAAM,CAAEx+B,IAAGsG,MACX42B,EAAY5d,sBAAsBif,EACtC,CAEA,MAAM/T,EAAa,IACZ6Y,EACH/T,SACA37B,KAAMg2B,EACNwC,SAAUkX,EAAmBlX,UAE3BmX,EAAmBjX,EAAW/3B,IAAIg7B,GAElCiU,EAAgB,CAClBjZ,YAAY,EACZC,QAAS,KACTxzB,KAJSmhC,GAAkBoL,EAAkB9Y,EAAYS,GAASE,MAAM,GAKxEX,aACAC,aAAcD,EAAW2B,SACzBzB,SAAU4Y,EACV3Y,GAAIwB,EACJvB,SAAU,KACVC,WAAYK,GAAiBV,EAAW2B,UACxCrB,OAAQ,MAEZgY,EAAiBS,GACjB,IAAIC,EAAqBD,EAEzB,SAASE,EAAc9yC,GACnB,IAAKqyC,MAAoBxY,EAErB,YADAkZ,EAAY/yC,GAGhB,MAAM2rB,EAAYymB,IAClB5W,EAAWoG,GAAiB5hC,EAAO0sC,GACnC8F,EAAgB5C,GAAiBnT,GAAqBjB,EAAU7P,GAAW,EAAO,CAAC,EAAG,IAAKkkB,EAAkBnU,EAAY7B,GACpH2S,IACDoB,IACApB,GAAiB,GAErB,MAAM/uC,EAASkzC,GAAc3wC,EAAO,CAChC4iC,OAAQ4P,EACRnC,iBACAO,WAAYjS,EACZkS,aAAcnJ,EACdoJ,SAAUK,EAAW,SAAW,SAChCD,oBACAH,MACAC,MACAC,SACAvV,eAEJ+U,EAAgBhzC,EAAOgzC,cACvB1V,EAAat9B,EAAOs9B,WACpBnB,EA5FR,SAA2BoZ,EAA0BC,GACjD,IAAIrZ,EAAU,KAOd,OANIqZ,EACArZ,GAAU,EAELoZ,IAA6BC,IAClCrZ,GAAU,GAEPA,CACX,CAmFkBsZ,GAAoBV,EAAe/0C,EAAOm8B,SACpD,MAAMgZ,EAAgB,IAEfC,EACHjZ,UACAI,GAAIwY,GAAiB5Y,EACfwH,GAAqB,CAAE/xB,EAAGmjC,EAAcnjC,EAAGsG,EAAG68B,EAAc78B,GAAKgW,GACjE6P,EACNvB,SAAUx8B,EAAOw8B,SACjBC,WAAYN,GAAWn8B,EAAOw8B,SAAWx8B,EAAOw8B,SAASuB,SAAWjB,GAAiBV,EAAW2B,UAChGrB,OAAQ18B,EAAOw8B,SAAWyB,EAAW/3B,IAAIlG,EAAOw8B,SAAS0E,QAAU,MAInE/E,GACA4Y,GACAK,EAAmB5Y,UACnB2Y,EAAc3Y,UACd4Y,EAAmB5Y,SAASj3B,OAAS4vC,EAAc3Y,SAASj3B,MAC5D6vC,EAAmB5Y,SAAS0E,SAAWiU,EAAc3Y,SAAS0E,QAC9DkU,EAAmB5Y,SAAS5J,KAAOuiB,EAAc3Y,SAAS5J,IAC1DwiB,EAAmB7Y,GAAG3qB,IAAMujC,EAAc5Y,GAAG3qB,GAC7CwjC,EAAmB7Y,GAAGrkB,IAAMi9B,EAAc5Y,GAAGrkB,IAGjDw8B,EAAiBS,GACjBC,EAAqBD,EACzB,CACA,SAASG,EAAY/yC,IACZwyC,GAAiB/B,IAAkB1V,GAAcnB,GAClDoY,IAAYjX,GAKhB,MAAMpB,WAAEA,KAAewZ,GAAoBN,EACrCO,EAAuB,IACtBD,EACHjZ,WAAY2Y,EAAmB5Y,SAAW4Y,EAAmB3Y,WAAa,MAE9E+X,IAAejyC,EAAOozC,GAClB5C,GACA0B,IAAiBlyC,EAAOozC,GAE5BtB,IACArC,qBAAqBlD,GACrBC,GAAiB,EACjB5S,GAAU,EACVmB,EAAa,KACb0V,EAAgB,KAChBM,EAAI3wC,oBAAoB,YAAa0yC,GACrC/B,EAAI3wC,oBAAoB,UAAW2yC,GACnChC,EAAI3wC,oBAAoB,YAAa0yC,GACrC/B,EAAI3wC,oBAAoB,WAAY2yC,EACxC,CAjFAhB,IAAiB/xC,EAAO,CAAE2+B,SAAQ+I,WAAU1O,eAkF5C+X,EAAI5wC,iBAAiB,YAAa2yC,GAClC/B,EAAI5wC,iBAAiB,UAAW4yC,GAChChC,EAAI5wC,iBAAiB,YAAa2yC,GAClC/B,EAAI5wC,iBAAiB,WAAY4yC,EACrC,EA+CInZ,QAAS+W,IA4Eb,MACM0C,GAAuB1nB,IAAe,CACxCtc,EAAGsc,EAAUtc,EACbsG,EAAGgW,EAAUhW,EACb6W,KAAMb,EAAU1xB,IAEdq5C,GAAsB,EAAGjkC,IAAGsG,IAAG6W,UAAW+mB,GAAanoB,UAAU/b,EAAGsG,GAAG0V,MAAMmB,GAC7EgnB,GAAqB,CAACxzC,EAAOyzC,IAAczzC,EAAMrB,OAAO+0C,QAAQ,IAAID,KACpEE,GAAkB,CAACC,EAAWC,IAA8B,IAAfA,GAAoB1tC,MAAM0F,QAAQ+nC,IAAcA,EAAUE,SAAS,GAChHC,GAAkB,CAAC5+B,EAAWyY,EAAW,EAAGomB,EAAQ,UACtD,MAAMC,EAAkC,iBAAbrmB,GAAyBA,EAAW,EAI/D,OAHKqmB,GACDD,IAEGC,EAAc9+B,EAAUic,aAAaxD,SAASA,GAAUxgB,GAAG,MAAO4mC,GAAS7+B,CAAS,EAEzFghB,GAAcn2B,IAChB,MAAMk0C,EAASl0C,EAAMib,SAAWumB,KAAY,GAAK,EACjD,OAAQxhC,EAAMq1B,QAA8B,IAApBr1B,EAAMs1B,UAAkB,IAAOt1B,EAAMs1B,UAAY,EAAI,MAAS4e,CAAM,EA2KhG,SAASC,IAAUzK,QAAEA,EAAOvL,QAAEA,EAAOC,QAAEA,EAAOgW,kBAAEA,EAAiB3e,gBAAEA,EAAe6I,SAAEA,EAAQ+V,UAAEA,EAASC,eAAEA,EAAcC,aAAEA,EAAYC,iBAAEA,IACnI,MAAMC,EAAgB,CAClBC,oBAAoB,EACpBC,sBAAsB,EACtBC,aAAc,CAAEvlC,EAAG,EAAGsG,EAAG,EAAG6W,KAAM,GAClCqoB,YAAa,EACbC,aAAS15C,EACT25C,sBAAkB35C,EAClB45C,gBAAgB,GAEdC,EAAOvL,EAAQ1zB,wBACfk/B,EAAiB1oB,KAClBqM,eAAegI,GAAUuT,IAAsBA,EAAoB,EAAI,EAAIA,GAC3E/d,YAAY,CAAC8H,EAASC,IACtB3I,gBAAgBA,GACfmX,EAAclrC,GAAOgoC,GAASpmC,KAAK4xC,GACzCC,EAAuB,CACnB9lC,EAAGivB,EAASjvB,EACZsG,EAAG2oB,EAAS3oB,EACZ6W,KAAMrE,GAAMmW,EAAS9R,KAAM2R,EAASC,IACrC,CACC,CAAC,EAAG,GACJ,CAAC6W,EAAKlgB,MAAOkgB,EAAKjgB,SACnBS,GACH,MAAM2f,EAAgBxI,EAAYx/B,GAAG,cAC/BioC,EAAwBzI,EAAYx/B,GAAG,iBAE7C,SAASkoC,EAAa3pB,EAAWzrB,GAC7B,OAAI0sC,EACO,IAAIzoC,SAASC,IAChB8wC,GAAgBvpB,UAAUooB,GAAgBnH,EAAa1sC,GAAS0tB,UAAU,IAAMxpB,GAAQ,KAAQunB,EAAU,IAG3GxnB,QAAQC,SAAQ,EAC3B,CA6EA,SAAS/F,IACL62C,EAAe9nC,GAAG,OAAQ,KAC9B,CACA4wB,eAAemX,EAAuB7W,EAAU9I,EAAQC,GACpD,MAAM8f,EAAgBjC,GAAoBhV,GACpCkX,EAAsBN,GAAgBhf,WAAhBgf,CAA4BK,EAAe/f,EAAQC,GAI/E,OAHI+f,SACMF,EAAaE,GAEhB,IAAIrxC,SAASC,GAAYA,EAAQoxC,IAC5C,CAiDA,OAhJAN,EAAe/e,WAAWA,IAgJnB,CACHvxB,OAvIJ,UAAgB6wC,iBAAEA,EAAgBC,eAAEA,EAAcC,kBAAEA,EAAiBC,oBAAEA,EAAmBC,YAAEA,EAAWjC,UAAEA,EAASkC,gBAAEA,EAAeC,iBAAEA,EAAgBC,iBAAEA,EAAgBC,YAAEA,EAAWC,aAAEA,EAAYC,kBAAEA,EAAiBC,yBAAEA,EAAwBpF,IAAEA,EAAGqF,kBAAEA,IAC9OT,IAAwBnB,EAAcC,oBACtCr2C,IAEJ,MACMi4C,EADgBT,IAAgBO,IAA6BR,EAhN3E,UAAkCnB,cAAEA,EAAagB,iBAAEA,EAAgB7I,YAAEA,EAAW2J,OAAEA,EAAMT,gBAAEA,EAAeC,iBAAEA,EAAgBE,YAAEA,EAAW3B,eAAEA,EAAcD,UAAEA,EAASE,aAAEA,IACjK,OAAQv0C,IACJ,GAAIwzC,GAAmBxzC,EAAOy1C,GAC1B,OAAO,EAEXz1C,EAAM6Z,iBACN7Z,EAAM2Z,2BACN,MAAM68B,EAAc5J,EAAY/zB,SAAS,UAAU5e,GAAK,EAExD,GAAI+F,EAAMib,SAAWg7B,EAAa,CAC9B,MAAMxgC,EAAQL,GAAQpV,GAChBy2C,EAAatgB,GAAWn2B,GACxBwsB,EAAOgqB,EAAc75C,KAAKurB,IAAI,EAAGuuB,GAGvC,YADAF,EAAO9d,QAAQmU,EAAapgB,EAAM/W,EAAOzV,EAE7C,CAGA,MAAM02C,EAAqC,IAApB12C,EAAMs1B,UAAkB,GAAK,EACpD,IAAIqhB,EAASb,IAAoBtc,GAAgBod,SAAW,EAAI52C,EAAM22C,OAASD,EAC3ErhB,EAASygB,IAAoBtc,GAAgBqd,WAAa,EAAI72C,EAAMq1B,OAASqhB,GAE5ElV,MAAaxhC,EAAM83B,UAAYge,IAAoBtc,GAAgBod,WACpED,EAAS32C,EAAMq1B,OAASqhB,EACxBrhB,EAAS,GAEbkhB,EAAO7d,YAAYkU,GAAe+J,EAASH,EAAeT,GAAoB1gB,EAASmhB,EAAeT,EAEtG,CAAEe,UAAU,IACZ,MAAMC,EAAe1D,GAAoBzG,EAAY/zB,SAAS,WAC9DgX,aAAa4kB,EAAcM,kBAItBN,EAAcO,iBACfP,EAAcO,gBAAiB,EAC/BV,IAAiBt0C,EAAO+2C,IAExBtC,EAAcO,iBACdX,IAAYr0C,EAAO+2C,GACnBtC,EAAcM,iBAAmB16B,YAAW,KACxCk6B,IAAev0C,EAAO+2C,GACtBtC,EAAcO,gBAAiB,CAAK,GACrC,KACP,CAER,CAmKcgC,CAAyB,CACvBvC,gBACAgB,mBACA7I,cACA2J,OAAQrB,EACRY,kBACAC,mBACAE,cACA3B,iBACAD,YACAE,iBA5KhB,UAAmCkB,iBAAEA,EAAgBO,iBAAEA,EAAgBZ,cAAEA,IACrE,OAAO,SAAUp1C,EAAOgG,GAGpB,IADqBgwC,GAAmC,UAAfh2C,EAAMgD,OAAqBhD,EAAMib,SACvDu4B,GAAmBxzC,EAAOy1C,GACzC,OAAO,KAEXz1C,EAAM6Z,iBACNu7B,EAAc9xC,KAAKO,KAAM7D,EAAOgG,EACxC,CACA,CAoKcixC,CAA0B,CACxBxB,mBACAO,mBACAZ,kBAGR,GADAxI,EAAYx/B,GAAG,aAAckpC,EAAc,CAAE/8B,SAAS,KACjDq8B,EAAqB,CAEtB,MAAMsB,EA3KlB,UAAmCzC,cAAEA,EAAaD,iBAAEA,EAAgBF,eAAEA,IAClE,OAAQt0C,IACJ,GAAIA,EAAMqV,aAAayhC,SACnB,OAEJ,MAAMxY,EAAW+U,GAAoBrzC,EAAM2rB,WAE3C8oB,EAAcI,YAAc70C,EAAMqV,aAAa6F,QAAU,EACzDu5B,EAAcC,oBAAqB,EACnCD,EAAcG,aAAetW,EACG,cAA5Bt+B,EAAMqV,aAAarS,MACnBwxC,GAAiB,GAEjBF,GACAA,IAAiBt0C,EAAMqV,YAAaipB,EACxC,CAER,CA0JiC6Y,CAA0B,CAC3C1C,gBACAD,mBACAF,mBAEJY,EAAe9nC,GAAG,QAAS8pC,GAE3B,MAAME,EAhKlB,UAA8B3C,cAAEA,EAAab,UAAEA,EAAS+B,kBAAEA,EAAiBU,kBAAEA,EAAiBhC,UAAEA,IAC5F,OAAQr0C,IACJy0C,EAAcE,wBAA0BgB,IAAqBhC,GAAgBC,EAAWa,EAAcI,aAAe,IAChH70C,EAAMqV,aAAa/I,MACpB+pC,EAAkB,CAACr2C,EAAM2rB,UAAUtc,EAAGrP,EAAM2rB,UAAUhW,EAAG3V,EAAM2rB,UAAU1xB,IAEzEo6C,IAAcr0C,EAAMqV,aAAayhC,UACjCzC,IAAYr0C,EAAMqV,YAAag+B,GAAoBrzC,EAAM2rB,WAC7D,CAER,CAsJmC0rB,CAAqB,CACxC5C,gBACAb,YACA+B,oBAAqBA,EACrBtB,YACAgC,sBAEJnB,EAAe9nC,GAAG,OAAQgqC,GAE1B,MAAME,EA9JlB,UAAiC7C,cAAEA,EAAab,UAAEA,EAASiC,YAAEA,EAAWrB,iBAAEA,EAAgBD,aAAEA,EAAYoB,kBAAEA,IACtG,OAAQ31C,IA9GQ,IAAC40C,EAAc2C,EA+G3B,IAAIv3C,EAAMqV,aAAayhC,WAGvBrC,EAAcC,oBAAqB,EAC/BiB,GACAhC,GAAgBC,EAAWa,EAAcI,aAAe,KACvDJ,EAAcE,sBACf30C,EAAMqV,aACNsgC,EAAkB31C,EAAMqV,aAE5Bo/B,EAAcE,sBAAuB,EACrCH,GAAiB,GACbD,IA3HSK,EA2HmBH,EAAcG,aA3HnB2C,EA2HiCv3C,EAAM2rB,UA3HrBipB,EAAavlC,IAAMkoC,EAAcloC,GAAKulC,EAAaj/B,IAAM4hC,EAAc5hC,GAAKi/B,EAAapoB,OAAS+qB,EAAct9C,IA2H/E,CAC1E,MAAMqkC,EAAW+U,GAAoBrzC,EAAM2rB,WAC3C8oB,EAAcG,aAAetW,EAC7BzO,aAAa4kB,EAAcK,SAC3BL,EAAcK,QAAUz6B,YAAW,KAC/Bk6B,IAAev0C,EAAMqV,YAAaipB,EAAS,GAG/CuX,EAAc,IAAM,EACxB,EAER,CAqIsC2B,CAAwB,CAC9C/C,gBACAb,YACAiC,cACAF,oBACApB,eACAC,qBAEJU,EAAe9nC,GAAG,MAAOkqC,EAC7B,CACA,MAAMzuC,EA5Id,UAAsButC,yBAAEA,EAAwBF,aAAEA,EAAYD,YAAEA,EAAWrC,UAAEA,EAASiC,YAAEA,EAAWM,kBAAEA,EAAiBP,oBAAEA,EAAmBH,iBAAEA,EAAgBC,eAAEA,EAAc1E,IAAEA,IAC3K,OAAQhxC,IACJ,MAAMy3C,EAAarB,GAA4BF,EACzCwB,EAAYzB,GAAej2C,EAAMib,QACvC,GAAqB,IAAjBjb,EAAMkb,QACS,cAAflb,EAAMgD,OACLwwC,GAAmBxzC,EAAO,GAAGgxC,iBAAqBwC,GAAmBxzC,EAAO,GAAGgxC,iBAChF,OAAO,EAGX,KAAK4C,GAAc6D,GAAe5B,GAAgBM,GAAsBF,GACpE,OAAO,EAGX,GAAIL,EACA,OAAO,EAGX,GAAIpC,GAAmBxzC,EAAOy1C,IAAoC,UAAfz1C,EAAMgD,KACrD,OAAO,EAGX,GAAIwwC,GAAmBxzC,EAAO01C,KACV,UAAf11C,EAAMgD,MAAqB6yC,GAA8B,UAAf71C,EAAMgD,OAAqBozC,GACtE,OAAO,EAEX,IAAKH,GAAej2C,EAAMib,SAA0B,UAAfjb,EAAMgD,KACvC,OAAO,EAEX,IAAKizC,GAA8B,eAAfj2C,EAAMgD,MAAyBhD,EAAM+3B,SAASl7B,OAAS,EAEvE,OADAmD,EAAM6Z,kBACC,EAGX,IAAK49B,IAAe5B,IAAgB6B,GAA4B,UAAf13C,EAAMgD,KACnD,OAAO,EAGX,IAAK4wC,IAA6B,cAAf5zC,EAAMgD,MAAuC,eAAfhD,EAAMgD,MACnD,OAAO,EAGX,GAAImD,MAAM0F,QAAQ+nC,KAAeA,EAAUE,SAAS9zC,EAAMkb,SAA0B,cAAflb,EAAMgD,KACvE,OAAO,EAGX,MAAM20C,EAAiBxxC,MAAM0F,QAAQ+nC,IAAcA,EAAUE,SAAS9zC,EAAMkb,UAAalb,EAAMkb,QAAUlb,EAAMkb,QAAU,EAEzH,QAASlb,EAAMib,SAA0B,UAAfjb,EAAMgD,OAAqB20C,CAAa,CAE1E,CA0FuBC,CAAa,CACxBxB,2BACAxC,YACAsC,eACAL,cACAM,oBACAF,cACAL,sBACAF,iBACAD,mBACAzE,QAEJkE,EAAersC,OAAOA,GAIlBstC,EACAvJ,EAAYx/B,GAAG,gBAAiBioC,GAGhCzI,EAAYx/B,GAAG,gBAAiB,KAExC,EA8DI/O,UACAogC,YAnDJT,eAA2BM,EAAUp+B,GACjC,MAAMq1C,EAAgBjC,GAAoBhV,GAE1C,aADMgX,EAAaC,EAAer1C,GAC3B,IAAIiE,SAASC,GAAYA,EAAQmxC,IAC5C,EAgDIJ,yBACA0C,YAnCJ,WACI,MAAMlsB,EAAYihB,EAAckL,GAAclL,EAAYhuC,QAAU,CAAEyQ,EAAG,EAAGsG,EAAG,EAAG1b,EAAG,GACrF,MAAO,CAAEoV,EAAGsc,EAAUtc,EAAGsG,EAAGgW,EAAUhW,EAAG6W,KAAMb,EAAU1xB,EAC7D,EAiCIw+B,QAhCJ,SAAiBjM,EAAMtsB,GACnB,OAAI0sC,EACO,IAAIzoC,SAASC,IAChB8wC,GAAgBzc,QAAQsb,GAAgBnH,EAAa1sC,GAAS0tB,UAAU,IAAMxpB,GAAQ,KAAQooB,EAAK,IAGpGroB,QAAQC,SAAQ,EAC3B,EA0BIo0B,QAzBJ,SAAiB0b,EAAQh0C,GACrB,OAAI0sC,EACO,IAAIzoC,SAASC,IAChB8wC,GAAgB1c,QAAQub,GAAgBnH,EAAa1sC,GAAS0tB,UAAU,IAAMxpB,GAAQ,KAAQ8vC,EAAO,IAGtG/vC,QAAQC,SAAQ,EAC3B,EAmBI2zC,eAlBJ,SAAwB1hB,GACpB6e,GAAgB7e,YAAYA,EAChC,EAiBI2hB,mBAhBJ,SAA4BviB,GACxByf,GAAgBzf,gBAAgBA,EACpC,EAeIwiB,aArDJ,SAAsB3Z,GAClB,GAAIsO,EAAa,CACb,MAAM2I,EAAgBjC,GAAoBhV,GACpC4Z,EAAmBtL,EAAY/zB,SAAS,UAC1Cq/B,EAAiBj+C,IAAMqkC,EAAS9R,MAChC0rB,EAAiB7oC,IAAMivB,EAASjvB,GAChC6oC,EAAiBviC,IAAM2oB,EAAS3oB,GAGhCu/B,GAAgBvpB,UAAUihB,EAAa2I,EAAe,KAAM,CAAEjpC,MAAM,GAE5E,CACJ,EA0CI6rC,iBAfJ,SAA0BlY,GACtB,MAAMmY,GAAiBvX,GAAUZ,IAAaA,EAAW,EAAI,EAAIA,EACjEiV,GAAgBrc,cAAcuf,EAClC,EAcJ,CAEA,IAAIC,+HC53Eap8C,EAAQ,sBACVA,EAAM,0BACHA,EAAQ,IACdoE,EAAAi4C,EAAA,UAAAC,EAAAt8C,UAAUA,EAAM,IAAA,KAAGA,EAAM,IAAA,UAAOA,EAAI,kBACvCuQ,GAAE,CACP,6CACuBvQ,EAAQ,KAC/B,SACA,QACAA,EAAQ,GACRA,EAAS,uGAGSA,EAAY,yBACVA,EAAc,kBACrBA,EAAQ,kBACTA,EAAQ,4BACEA,EAAa,0BACfA,EAAa,uBAChBA,EAAa,+BACLA,EAAa,OAAMA,EAAmB,KAAIA,EAAmB,aArB1F6C,EA6BMH,EAAA25C,EAAAv5C,8CAPU9C,EAAa,sBACZA,EAAa,iIAtBbA,EAAQ,uCAEPA,EAAQ,MACdyvC,GAAA,KAAAnvC,EAAA,IAAAg8C,KAAAA,EAAAt8C,UAAUA,EAAM,IAAA,KAAGA,EAAM,IAAA,UAAOA,EAAI,4CACvCuQ,GAAE,CACP,6CACuBvQ,EAAQ,KAC/B,SACA,QACAA,EAAQ,GACRA,EAAS,2HAGSA,EAAY,yCACVA,EAAc,mCACrBA,EAAQ,mCACTA,EAAQ,6CACEA,EAAa,2CACfA,EAAa,wCAChBA,EAAa,gDACLA,EAAa,OAAMA,EAAmB,KAAIA,EAAmB,yLAtH/Eo0B,GAAAA,GAAcmoB,GACdx1C,KAAAA,EAAO,UAAQw1C,YACfhd,EAAWlB,GAASI,KAAG8d,GACvBv3C,MAAAA,GAAiBu3C,GACjBtH,kBAAAA,GAA6BsH,GAC7BC,UAAAA,GAAqBD,GACrBE,aAAAA,GAAwBF,GAI/BG,cAAAC,GAA6BJ,GAE7BK,MAAApF,GAAqB+E,QAGnB7Z,EAASj7B,EAAW,uBACpB8tC,EAAc9tC,EAAW,sDAGzB,MAAAzI,EAAQ69C,qBACNzI,EAAc3G,QAAEA,EAAOhO,WAAEA,EAAUmU,iBAAEA,EAAgBvR,SAAEA,EAAU4S,kBAAmB6H,EAAsB/H,IAAEA,EAAGgI,QAAEA,EAAOC,aAAEA,EAAYpL,MAAEA,EAAKiE,iBAAEA,GAAgBK,iBAAEA,GAAgBN,iBAAEA,GAAgBpU,MAAEA,GAAKwN,iBAAEA,GAAkBwN,UAAWS,GAAiBC,eAAgBC,GAAsBC,aAAcC,GAAkBrI,OAAEA,GAAMlW,WAAEA,IAAe9/B,0WA0C7V,IACAs+C,GADAC,GAAkB,2ZAhDnBC,EAAA,GAAAtI,EAAoB,WAATnuC,uBAGXy2C,EAAA,GAAAd,OAAsCv9C,IAAtBw9C,EAAkCA,EAAoBc,oBACtED,EAAA,EAAA/R,EAAWrX,GAAM,2CA8CbooB,GAAaC,SAGhBa,GAAcI,EAAkBh2C,IAAG,GAAIg7B,KAAU37B,KAAQqtB,GAAM,4BAG3D,GAAAmpB,KDWR,SAAgC3+C,EAAGC,GAC/B,IAAKD,IAAMC,EACP,OAAO,EAEX,IAAKD,IAAMC,GAAKD,EAAE2Q,OAAS1Q,EAAE0Q,KACzB,OAAO,EAEX,IAAK3Q,EAAE2Q,OAAS1Q,EAAE0Q,KACd,OAAO,EAEX,IAAK,MAAMxK,KAAOnG,EAAE8C,OAChB,IAAK7C,EAAEgD,IAAIkD,GACP,OAAO,EAGf,OAAO,CACX,CC3B4B44C,CAAuBL,GAAaC,IAAe,OACjEK,EAAeN,IAAW,IAAQpyC,IACxCyzB,GAAuB4e,GAAiBK,EAAcnB,GACtD9d,GAAuBif,EAAcL,GAAiBf,QAE1De,GAAkBD,IAAW,IAAQpyC,wBAEtCsyC,EAAA,GAAAK,IAAwBC,EAAYlgB,gDACtC4f,EAAA,EAAEO,EACCD,EAAYlgB,YAAY8E,SAAWA,GAC/Bob,EAAYlgB,YAAY72B,OAASA,GACjC+2C,EAAYlgB,YAAYxJ,KAAOqX,uCACtC+R,EAAA,EAAEQ,EACCF,EAAY9f,UAAU0E,SAAWA,GAC7Bob,EAAY9f,UAAUj3B,OAASA,GAC/B+2C,EAAY9f,UAAU5J,KAAOqX,2CAClCwS,EACCC,IAAoB5gB,GAAemY,OAC7BqI,EAAYlgB,YAAY72B,OAASA,EACjC27B,IAAWob,EAAYlgB,YAAY8E,QAAU+I,IAAaqS,EAAYlgB,YAAYxJ,4CACzF+pB,EAAQH,GAAgBF,EAAYngB,mFArE9B,SAAc55B,SACbq6C,EAAmBjY,GAAapiC,IACjCq6C,GAAqC,IAAjBr6C,EAAMkb,SAAkBm/B,IAC7C1I,GAASC,cAAc5xC,EAAK,CACxB0nC,WACA/I,SACAwS,WACAtB,iBAAkByK,EAClB5Q,QAAS6Q,EACT7e,WAAY8e,EACZnK,eAAgB8J,EAChBnJ,IAAKyJ,EACL5I,iBAAkB6I,EAClBzJ,OAAQ0J,EACRzJ,kBAAmBA,GAAqB0J,EACxCzI,oBACAL,oBACAjE,QACAmE,UAAYjX,IACF,MAAA4C,EAAOkd,EAAgBA,EAAc9f,GAAcA,EACpD4C,IAGLqb,EAAQrb,GACRmd,IAAmB/f,GAAU,EAEjCgX,eAAc,CAAG/xC,EAAO+6C,KACpBC,IAAwBh7C,EAAK,CACzB2+B,OAAQoc,EAAYpc,OACpB+I,SAAUqT,EAAYrT,SACtB1O,WAAY+hB,EAAY/hB,cAGhCiZ,aAAY,CAAGjyC,EAAOmzC,KAClB8H,IAAsBj7C,EAAOmzC,EAAe,EAEhDf,aAAY,IAAA,CAAS8I,EAAU7rC,EAAG6rC,EAAUvlC,EAAGulC,EAAU1uB,MACzD6lB,cAAa,IAAQ0H,EAAYlgB,4CDq6E7C,SAAWwe,GACPA,EAA2B,KAAI,OAC/BA,EAA6B,OAAI,QACpC,CAHD,CAGGA,KAAyBA,GAAuB,CAAA,gOE59ElD8C,EAAAl/C,MAAMm/C,MAAK,kDADoBn/C,EAAc,IAAIq+B,GAASI,+CAE3Bz+B,EAAc,IAAIq+B,GAASK,wKAF3B1+B,EAAc,IAAIq+B,GAASI,iBAC1DgR,GAAA,EAAAnvC,IAAA4+C,KAAAA,EAAAl/C,MAAMm/C,MAAK,KAAAh6C,EAAAouB,EAAA2rB,+BACoBl/C,EAAc,IAAIq+B,GAASK,+PAThDh7B,EAAI,CAAKy7C,MAAO,SAAM5C,GACtBhV,eAAAA,GAA0BgV,GAC1BnV,eAAAA,GAA0BmV,gTCIpC,YAAA6C,EAAAp/C,MAAMm/C,MAAK,kDACoBn/C,EAAc,IAAIq+B,GAASK,mGAD1D+Q,GAAA,EAAAnvC,IAAA8+C,KAAAA,EAAAp/C,MAAMm/C,MAAK,KAAAh6C,EAAAkuB,EAAA+rB,+BACoBp/C,EAAc,IAAIq+B,GAASK,yLAPhDh7B,EAAI,CAAKy7C,MAAO,SAAM5C,GACtBnV,eAAAA,GAA0BmV,+OCKpC,YAAA6C,EAAAp/C,MAAMm/C,MAAK,kDACoBn/C,EAAc,IAAIq+B,GAASI,gGAD1DgR,GAAA,EAAAnvC,IAAA8+C,KAAAA,EAAAp/C,MAAMm/C,MAAK,KAAAh6C,EAAAkuB,EAAA+rB,+BACoBp/C,EAAc,IAAIq+B,GAASI,sLAPhD/6B,EAAI,CAAKy7C,MAAO,SAAM5C,GACtBhV,eAAAA,GAA0BgV,mYCHrC,SAAS8C,GAAW18C,EAAM8qC,EAAS/qC,GAC/B,IAAK+qC,EACD,OAEJ,MAAM6R,EAAW58C,EAAS+qC,EAAQz6B,cAActQ,GAAU+qC,EACtD6R,GACAA,EAAS18C,YAAYD,EAE7B,CACe,SAAQ48C,GAAE58C,GAAMD,OAAEA,EAAM+qC,QAAEA,IAErC,OADA4R,GAAW18C,EAAM8qC,EAAS/qC,GACnB,CACH,YAAMiG,EAAOjG,OAAEA,EAAM+qC,QAAEA,IACnB4R,GAAW18C,EAAM8qC,EAAS/qC,EAC7B,EACD,OAAAN,GACQO,EAAKM,YACLN,EAAKM,WAAWC,YAAYP,EAEnC,EAET,6GChBAE,EAEMH,EAAA25C,EAAAv5C,iDAFaJ,OAAQ,mCAAoC+qC,QAASztC,EAAQ,gIAA7D0C,OAAQ,mCAAoC+qC,QAASztC,EAAQ,uIAHxE,MAAAytC,QAAAA,GAAYoP,+JCCb,SAAS2C,KACZ,MAAMvQ,WAAEA,EAAUwQ,cAAEA,EAAaC,kBAAEA,EAAiBC,yBAAEA,EAAwBC,iBAAEA,EAAgBtN,sBAAEA,EAAqBuN,mBAAEA,GAAuBhD,KAChJ,OAAQzoB,IACJ,MAAMsN,EAAOh6B,EAAIunC,GAAYvnC,IAAI0sB,GACjC,IAAKsN,EAED,YADAqL,QAAQC,KAAK,MAAOnQ,GAA0BzI,KAG/BsN,EAAKf,YAAej5B,EAAIm4C,SAAkD,IAApBne,EAAKf,cAE1E8e,EAAcx9C,IAAI,MAClBy9C,EAAkBz9C,IAAI,MACjBy/B,EAAK77B,SAGD67B,EAAK77B,UAAY6B,EAAIi4C,IAC1BrN,EAAsB,CAAEvkC,MAAO,GAAIyzB,MAAO,CAACE,KAH3Cke,EAAiB,CAACxrB,IAKzB,CAET,8BCVsD0rB,EAAA,mCAAA9/C,UAAMA,EAAC,sHAClDoE,EAAAi4C,EAAA,QAAA0D,EAAA,uBAAyB//C,EAAK,yEAHvC6C,EAYMH,EAAA25C,EAAAv5C,oJATG2sC,GAAA,EAAAnvC,GAAAy/C,KAAAA,EAAA,uBAAyB//C,EAAK,kCADa,EAAAM,GAAAw/C,KAAAA,EAAA,mCAAA9/C,UAAMA,EAAC,UAAAggD,ocAVlDh7C,MAAAA,GAAiBu3C,GACjBnpC,EAAAA,GAAampC,GACb7iC,EAAAA,GAAa6iC,EAClB,MAAA0D,EAAmBT,KACnBprB,EAAK3sB,EAAW,iKAYZ2sB,GAAI6rB,EAAiB7rB,EAAE,4ICmBjBp0B,EAAM,KAAKA,EAAM,SAASA,EAAU,wHAApCA,EAAM,eAAKA,EAAM,mBAASA,EAAU,yKAC/CA,EAAK,sCAALA,EAAK,qDAZLA,EAAqB,sDAEnBA,EAAI,yBACS,sBACFA,EAAqB,6EAHrC6C,EAMEH,EAAAw9C,EAAAp9C,wBALG9C,EAAI,oBAFemgD,CAAAngD,KAUrBA,EAAK,IAAAogD,GAAApgD,qFAlBLA,EAAI,kBACAuQ,GAAE,CAAE,yBAA0BvQ,EAAS,yBAChCA,EAAW,qBACbA,EAAS,iDALvB6C,EAQEH,EAAAw9C,EAAAp9C,kHANG9C,EAAI,uBACAuQ,GAAE,CAAE,yBAA0BvQ,EAAS,sDAChCA,EAAW,kCACbA,EAAS,mCAKlBA,EAAqB,KAAAqgD,EAAAj/C,EAAApB,EAAAM,GAUrBN,EAAK,gOAnCC,IAAAo0B,GAAAA,GAAcmoB,QACd+D,GAAI/D,GACJ4C,MAAAA,GAAiB5C,GACjB3U,OAAAA,GAAkB2U,GAClB1U,OAAAA,GAAkB0U,GAClBgE,WAAAA,GAAsBhE,GACtBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBv3C,MAAAA,GAAiBu3C,GACjBmE,iBAAAA,EAAmB,IAAEnE,GAC5BK,MAAApF,GAAqB+E,EAErBoE,OAA6CxhD,IAArBuhD,EAAiC,GAAKA,ozCCZvD,IAAAvB,MAAAA,GAAiB5C,GACjBgE,WAAAA,GAAsBhE,GACtBv3C,MAAAA,GAAiBu3C,GACjBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBmE,iBAAAA,GAA4BnE,WAC5BrV,GAAOqV,WACPpV,GAAOoV,kBACPnV,GAAcmV,WACdlV,GAAOkV,WACPjV,GAAOiV,kBACPhV,GAAcgV,qhBACxBiB,KAAG8C,EAAM1Y,EAAQC,GAAUZ,GAAa,CACrCC,UACAC,UACAE,UACAC,UACAF,iBACAG,8mCClBO,IAAA4X,MAAAA,GAAiB5C,GACjBgE,WAAAA,GAAsBhE,GACtBv3C,MAAAA,GAAiBu3C,GACjBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBmE,iBAAAA,GAA4BnE,WAC5BrV,GAAOqV,WACPpV,GAAOoV,kBACPnV,GAAcmV,WACdlV,GAAOkV,WACPjV,GAAOiV,kBACPhV,GAAcgV,qhBACxBiB,KAAG8C,EAAM1Y,EAAQC,GAAU+C,GAAiB,CACzC1D,UACAC,UACAE,UACAC,UACAF,iBACAG,4kCClBO,IAAA4X,MAAAA,GAAiB5C,GACjBgE,WAAAA,GAAsBhE,GACtBv3C,MAAAA,GAAiBu3C,GACjBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBmE,iBAAAA,GAA4BnE,WAC5BrV,GAAOqV,WACPpV,GAAOoV,WACPlV,GAAOkV,WACPjV,GAAOiV,sbACdiB,EAAA,GAAA8C,EAAM1Y,EAAQC,GAAUgB,GAAe,CACvC3B,UACAC,UACAE,UACAC,YAAOgZ,GAAA9C,EAAA,EAAA5V,GAAA4V,EAAA,EAAAtW,GAAAsW,EAAA,GAAArW,GAAAqW,EAAA,GAAAnW,GAAAmW,EAAA,GAAAlW,KAAAkW,EAAA,EAAA3V,GAAA2V,EAAA,EAAAtW,GAAAsW,EAAA,GAAArW,GAAAqW,EAAA,GAAAnW,GAAAmW,EAAA,GAAAlW,q8BCdA,IAAA6X,MAAAA,GAAiB5C,GACjBgE,WAAAA,GAAsBhE,GACtBv3C,MAAAA,GAAiBu3C,GACjBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBmE,iBAAAA,GAA4BnE,WAC5BrV,GAAOqV,WACPpV,GAAOoV,kBACPnV,GAAcmV,WACdlV,GAAOkV,WACPjV,GAAOiV,kBACPhV,GAAcgV,qhBACxBiB,KAAG8C,EAAM1Y,EAAQC,GAAU+C,GAAiB,CACzC1D,UACAC,UACAE,UACAC,UACAF,iBACAG,iBACAsD,aAAc,wJCoBX,MA+BM+V,GAAmB,CAAC7yC,EAAO0xB,EAAY4M,EAAcnN,EAAa,CAAC,EAAG,GAAI0D,EAAa1F,MAChG,MAAMn+B,UAAEA,EAASkD,IAAEA,EAAG0G,OAAEA,GAAWqG,GAAS,IAC5C,IAAIzP,EAAQwO,EACR+9B,EAAW,CAAA,EACXD,GAAuB,EAC3B,MAAMgV,EAAQC,IACV1U,GAAe0U,EAAKrhB,EAAY4M,EAAc,CAC1CR,uBACA3M,aACA0D,aACAkJ,WACAE,eAAe,IAEnBzsC,EAAQuhD,EACR7+C,EAAI1C,GACGA,GAUX,OADAshD,EAAKthD,GACE,CACHR,YACAkD,IAAK4+C,EACLl4C,OAXazK,GAAO2iD,EAAK3iD,EAAGqB,IAY5BwhD,kBAXuB98C,IACvB6nC,EAAW7nC,CAAO,EAWlB+8C,WATgB/8C,IAChB4nC,EAAuB5nC,EAAQ4nC,sBAAwBA,CAAoB,EAS9E,EAEQoV,GAAmB,CAACzf,EAAOwN,EAAkBC,EAAYrD,KAClE,MAAM7sC,UAAEA,EAASkD,IAAEA,EAAG0G,OAAEA,GAAWqG,GAAS,IAC5C,IAAIzP,EAAQiiC,EACRsK,EAAWF,GAAkB,GACjC,MAAMiV,EAAQK,IACV,MAAMC,EAAYrV,EAAWoV,EAAIv0C,KAAK+0B,QAAeoK,KAAapK,MAAWwf,EAC7EnS,GAAuBC,EAAkBC,EAAYkS,GACrD5hD,EAAQ4hD,EACRl/C,EAAI1C,EAAM,EAOd,OADAshD,EAAKthD,GACE,CACHR,YACAkD,IAAK4+C,EACLl4C,OARazK,GAAO2iD,EAAK3iD,EAAGqB,IAS5BwhD,kBARuB98C,IACvB6nC,EAAW7nC,CAAO,EAQrB,ECrHQm9C,GAAmB,CAC5BC,MAAOC,GACPC,OAAQC,GACRC,QAASC,GACTxtC,MAAOytC,IAEEC,GAAmB,CAC5BC,SAAUC,GACVC,WAAYC,GACZP,QAASQ,GACTC,8NChBG,SAASC,GAAgBnjD,GAC5B,MAAMojD,EAAe5yC,GAAQ,CACzBxQ,EAAMwiC,MACNxiC,EAAM+O,MACN/O,EAAMygC,WACNzgC,EAAMqjD,0BACNrjD,EAAMqjC,SACNrjC,EAAM85B,MACN95B,EAAM+5B,SACP,EAAEyI,GAAS/B,EAAY4iB,EAA2BhgB,EAAUvJ,EAAOC,MAClE,MAAMqpB,EAAeC,GAA6BvpB,GAASC,EACrDyI,EAAM50B,QAAQ80B,IACZ,MAAM2G,EAAa5I,EAAW/3B,IAAIg6B,EAAK1U,QACjCsb,EAAa7I,EAAW/3B,IAAIg6B,EAAKh/B,QACvC,OAAQ2lC,GACJC,GhBssBpB,UAAuBD,WAAEA,EAAUC,WAAEA,EAAUxP,MAAEA,EAAKC,OAAEA,EAAMrJ,UAAEA,IAC5D,MAAM4yB,EAAUviB,GAAiBD,GAAUuI,GAAavI,GAAUwI,IAC9Dga,EAAQlvC,IAAMkvC,EAAQ3iB,KACtB2iB,EAAQ3iB,IAAM,GAEd2iB,EAAQ5oC,IAAM4oC,EAAQ1iB,KACtB0iB,EAAQ1iB,IAAM,GAElB,MAAM2iB,EAAW,CACbnvC,GAAIsc,EAAU,GAAKA,EAAU,GAC7BhW,GAAIgW,EAAU,GAAKA,EAAU,GAC7BoJ,MAAOA,EAAQpJ,EAAU,GACzBqJ,OAAQA,EAASrJ,EAAU,IAE/B,OAAOsR,GAAmBuhB,EAAUviB,GAAUsiB,IAAY,CAC9D,CgBptBoBE,CAAc,CACVna,aACAC,aACAxP,QACAC,SACArJ,UAAW,CAAC2S,EAASjvB,EAAGivB,EAAS3oB,EAAG2oB,EAAS9R,OAC7C,IAEViR,EACN,OAAO4gB,CAAY,IAEvB,OAAO5yC,GAAQ,CAAC4yC,EAAcpjD,EAAM+O,MAAO/O,EAAMygC,WAAYzgC,EAAMo1C,eAAgBp1C,EAAMyjD,UAAU,EAAEL,EAAY,CAAI3iB,EAAY2U,EAAgBqO,KACvHL,EAAatX,QAAO,CAACC,EAAKrJ,KAC5C,MAAM2G,EAAa5I,EAAW/3B,IAAIg6B,EAAK1U,QACjCsb,EAAa7I,EAAW/3B,IAAIg6B,EAAKh/B,QACvC,IAAK2lC,IAAeC,EAChB,OAAOyC,EAEX,MAAM2X,EhBq+BlB,SAAyBrqC,GACrB,MAAMgwB,WAAEA,EAAUC,WAAEA,GAAejwB,EACnC,IAAK+yB,GAAkB/C,KAAgB+C,GAAkB9C,GACrD,OAAO,KAEX,MAAMqa,EAAqBta,EAAWjH,UAAUC,cAAgBgK,GAAehD,EAAW3B,SACpFkc,EAAqBta,EAAWlH,UAAUC,cAAgBgK,GAAe/C,EAAW5B,SACpF1J,EAAewO,GAAYmX,GAAoB31B,QAAU,GAAI3U,EAAO2kB,cACpEC,EAAeuO,GAErBnzB,EAAO+7B,iBAAmB9W,GAAemY,OACnCmN,GAAoBlgD,QAAU,IAC7BkgD,GAAoBlgD,QAAU,IAAIsO,OAAO4xC,GAAoB51B,QAAU,IAAK3U,EAAO4kB,cAC1F,IAAKD,IAAiBC,EAMlB,OALA5kB,EAAOwqB,UAAU,MAAOhG,GAA2BG,EAA0B,SAAX,SAAqB,CACnF5I,GAAI/b,EAAO+b,GACX4I,aAAc3kB,EAAO2kB,aACrBC,aAAc5kB,EAAO4kB,gBAElB,KAEX,MAAMmK,EAAiBpK,GAAcuC,UAAYlB,GAASK,OACpD6I,EAAiBtK,GAAcsC,UAAYlB,GAASI,IACpDzR,EAASse,GAAkBjD,EAAYrL,EAAcoK,GACrD1kC,EAAS4oC,GAAkBhD,EAAYrL,EAAcsK,GAC3D,MAAO,CACHL,QAASla,EAAO5Z,EAChB+zB,QAASna,EAAOtT,EAChB2tB,QAAS3kC,EAAO0Q,EAChBk0B,QAAS5kC,EAAOgX,EAChB0tB,iBACAG,iBAER,CgBtgCiCsb,CAAgB,CACjCzuB,GAAIsN,EAAKtN,GACTiU,aACAC,aACAtL,aAAc0E,EAAK1E,cAAgB,KACnCC,aAAcyE,EAAKzE,cAAgB,KACnCmX,iBACAvR,QAAS4f,IAeb,OAbIC,GACA3X,EAAIlrC,KAAK,IACF6hC,EACH6G,OAAQH,GAAsB,CAC1BviC,SAAU67B,EAAK77B,SACf0iC,OAAQ7G,EAAK6G,OACbF,aACAC,aACAE,iBAAiB,OAElBka,IAGJ3X,CAAG,GACX,KAGX,CC5DO,SAAS+X,GAAgB9jD,GAC5B,OAAOwQ,GAAQ,CACXxQ,EAAMygC,WACNzgC,EAAMqjD,0BACNrjD,EAAM85B,MACN95B,EAAM+5B,OACN/5B,EAAMqjC,SACNrjC,EAAM+O,QACP,EAAE0xB,EAAY4iB,EAA2BvpB,EAAOC,EAAQsJ,MACvD,MAAM3S,EAAY,CAAC2S,EAASjvB,EAAGivB,EAAS3oB,EAAG2oB,EAAS9R,MACpD,OAAO8xB,EACDpiB,GAAeR,EAAY,CAAErsB,EAAG,EAAGsG,EAAG,EAAGof,QAAOC,UAAUrJ,GAAW,GACrExlB,MAAMC,KAAKs1B,EAAWvvB,SAAS,GAE7C,CCTO,MAAMnL,GAAMoY,SACZ,SAAS4lC,IAAYh1C,MAAEA,EAAKyzB,MAAEA,EAAK1I,MAAEA,EAAKC,OAAEA,EAAQiJ,QAASghB,EAAe9jB,WAAEA,EAAU0D,WAAEA,IAC7F,MAAM5jC,EHWqB,GAAG+O,QAAQ,GAAIyzB,QAAQ,GAAI1I,QAAOC,SAAQiJ,UAAS9C,aAAY0D,iBAC1F,MAAMnD,EAAa,IAAIv0B,IACjBmhC,EAAe,IAAInhC,IACnB8jC,EAAmB,IAAI9jC,IACvB+jC,EAAa,IAAI/jC,IACjB+3C,EAAkB/jB,GAAc,CAAC,EAAG,GACpCgkB,EAAkBtgB,GAAc1F,GACtCkP,GAAer+B,EAAO0xB,EAAY4M,EAAc,CAC5CzJ,WAAYsgB,EACZhkB,WAAY+jB,EACZpX,sBAAsB,EACtBG,eAAe,IAEnB+C,GAAuBC,EAAkBC,EAAYzN,GACrD,IAAIa,EAAW,CAAEjvB,EAAG,EAAGsG,EAAG,EAAG6W,KAAM,GACnC,GAAIyR,GAAWlJ,GAASC,EAAQ,CAC5B,MAAMqJ,EAAS5C,GAAuBC,EAAY,CAC9C7yB,OAASjK,MAAaA,EAAKm2B,QAASn2B,EAAKk+B,eAAkBl+B,EAAKo2B,SAAUp2B,EAAKm+B,iBAEnFuB,EAAWC,GAAqBF,EAAQtJ,EAAOC,EAAQ,GAAK,EAAG,GAClE,CACD,MAAO,CACHic,OAAQhmC,GAAS,MACjBjB,MAAO6yC,GAAiB7yC,EAAO0xB,EAAY4M,EAAc4W,EAAiBC,GAC1EzjB,WAAY3wB,GAAS2wB,GACrB4M,aAAcv9B,GAASu9B,GACvB4C,WAAYngC,GAASmgC,GACrBxO,aAAc3xB,GAAS,IACvB0yB,MAAOyf,GAAiBzf,EAAOwN,EAAkBC,GACjDmT,aAActzC,GAAS,IACvBkgC,iBAAkBlgC,GAASkgC,GAC3BjW,OAAQ/pB,GAAS,KACjB8pB,MAAO9pB,GAAS,KAChBkzB,QAASlzB,GAAS,IAClBmzB,QAASnzB,GAAS,GAClBkwB,WAAYlwB,GAASi0C,GACrB3P,kBAAmBtkC,GAAS,GAC5B4zB,WAAY5zB,GAASk0C,GACrB1pB,gBAAiBxqB,GAASkuB,IAC1BqW,kBAAmBvkC,IAAS,GAC5B4mC,iBAAkB5mC,IAAS,GAC3Bm0C,cAAen0C,IAAS,GACxBo0C,kBAAmBp0C,IAAS,GAC5Bq0C,eAAgBr0C,QAAS7P,GACzB8iC,QAASjzB,GAAS,MAClBi2B,SAAUj2B,GAAS,MACnBsyB,SAAUtyB,IAAS,GACnBywC,cAAezwC,GAAS,MACxBs0C,oBAAqBt0C,IAAS,GAC9B2wC,yBAA0B3wC,IAAS,GACnCu0C,iBAAkBv0C,IAAS,GAC3Bw0C,wBAAyBx0C,IAAS,GAClCmrC,yBAA0BnrC,IAAS,GACnC0wC,kBAAmB1wC,GAAS,MAC5By0C,cAAez0C,GAASwuB,GAAckmB,SACtCC,UAAW30C,GAASoyC,IACpBwC,UAAW50C,GAAS4yC,IACpBvf,SAAUrzB,GAASqzB,GACnB+R,eAAgBplC,GAASsuB,GAAemY,QACxChI,QAASz+B,GAAS,MAClB8vB,WAAYhwB,GAAS2uB,IACrBomB,mBAAoB70C,GAASmvB,GAAmB2lB,QAChDlQ,iBAAkB5kC,GAAS,IAC3BimC,kBAAmBjmC,IAAS,KAAM,IAClCkjC,eAAgBljC,IAAS,GACzB+0C,iBAAkB/0C,IAAS,GAC3B6wC,mBAAoB7wC,IAAS,GAC7BmjC,kBAAmBnjC,IAAS,GAC5Bg1C,QAASl1C,GAAS,IAClBm1C,mBAAoBj1C,GAAS,WAC7B+lC,IAAKjmC,GAAS,UACduzC,0BAA2BrzC,IAAS,GACpCyzC,QAASzzC,GAAS81B,IAClBof,SAAUl1C,QAAS7P,GACnB69C,aAAchuC,QAAS7P,GACvBq9C,UAAWxtC,QAAS7P,GACpB+9C,eAAgBluC,QAAS7P,GACzBi+C,aAAcpuC,QAAS7P,GACvBglD,eAAgBn1C,QAAS7P,GACzBilD,iBAAkBp1C,IAAS,GAC3Bq1C,iBAAkBr1C,IAAS,GAC3Bs1C,oBAAqBt1C,IAAS,GAC9Bu1C,YAAaz1C,IAAS,GACzB,EG9Fa01C,CAAgB,CAC1Bz2C,QACAyzB,QACA1I,QACAC,SACAiJ,QAASghB,EACT9jB,aACA0D,eAwGJ,SAAS6hB,EAAOxM,EAAQh0C,GACpB,MAAMg+B,EAAUv6B,EAAI1I,EAAMijC,SAC1B,OAAKA,EAGEA,EAAQ1F,QAAQ0b,EAAQh0C,GAFpBiE,QAAQC,SAAQ,EAG9B,CA4BD,SAASu8C,EAAsBC,GAC3B,IAAIC,GAAkB,EAOtB,OANAD,EAASnmD,SAAS2E,IACVA,EAAQ0C,WACR1C,EAAQ0C,UAAW,EACnB++C,GAAkB,EACrB,IAEEA,CACV,CAID,SAAStS,EAAsBj6B,GACRqsC,EAAsBrsC,GAAQtK,OAASrG,EAAI1I,EAAM+O,SAEhE/O,EAAM+O,MAAM9L,IAAIyF,EAAI1I,EAAM+O,QACX22C,EAAsBrsC,GAAQmpB,OAAS95B,EAAI1I,EAAMwiC,SAEhExiC,EAAMwiC,MAAMv/B,IAAIyF,EAAI1I,EAAMwiC,OACjC,CAwBD,SAASqjB,EAAiBC,GACtB,MAAMC,EAAmBr9C,EAAI1I,EAAM2gD,0BACnC3gD,EAAM+O,MAAMpF,QAAQq8C,GAAOA,EAAGr4C,KAAKhK,IAC/B,MAAMsiD,EAAqBH,EAAIjN,SAASl1C,EAAKyxB,IACvCvuB,EAAWk/C,GACXpiD,EAAKkD,UACLo/C,EAGN,OADAtiD,EAAKkD,SAAWA,EACTlD,CAAI,MAEVoiD,GACD/lD,EAAMwiC,MAAM74B,QAAQu8C,GAAOA,EAAGv4C,KAAK+0B,IAC/BA,EAAK77B,UAAW,EACT67B,MAGlB,CAxCD1iC,EAAMukD,iBAAiBxkD,WAAUgjC,MAAOwhB,IACpC,GAAIA,EAAkB,CAClB,MAAMx1C,EAAQrG,EAAI1I,EAAM+O,OAClByzB,EAAQ95B,EAAI1I,EAAMwiC,OAClB2jB,EAAgBp3C,EAAMnB,QAAQjK,GAASA,EAAKkD,WAC5Cu/C,EAAgB5jB,EAAM50B,QAAQ80B,GAASA,EAAK77B,YAC1CkI,MAAOs3C,EAAe7jB,MAAO8jB,SlB6KjDvjB,gBAAmCwjB,cAAEA,EAAgB,GAAEC,cAAEA,EAAgB,GAAEz3C,MAAEA,EAAKyzB,MAAEA,EAAKikB,eAAEA,IACvF,MAAMhkB,EAAU,IAAI7/B,IAAI2jD,EAAc54C,KAAKhK,GAASA,EAAKyxB,MACnDixB,EAAgB,GACtB,IAAK,MAAM1iD,KAAQoL,EAAO,CACtB,IAAuB,IAAnBpL,EAAK+iD,UACL,SAEJ,MAAMC,EAAalkB,EAAQ5/B,IAAIc,EAAKyxB,IAC9BwxB,GAAaD,GAAchjD,EAAKmgC,UAAYuiB,EAAc7xC,MAAM1I,GAAMA,EAAEspB,KAAOzxB,EAAKmgC,YACtF6iB,GAAcC,IACdP,EAAcxlD,KAAK8C,EAE3B,CACA,MAAMkjD,EAAU,IAAIjkD,IAAI4jD,EAAc74C,KAAK+0B,GAASA,EAAKtN,MACnD0xB,EAAiBtkB,EAAM50B,QAAQ80B,IAA4B,IAAnBA,EAAKgkB,YAE7CJ,EADiB/jB,GAAkB8jB,EAAeS,GAExD,IAAK,MAAMpkB,KAAQokB,EACID,EAAQhkD,IAAI6/B,EAAKtN,MACjBkxB,EAAc9xC,MAAM5K,GAAMA,EAAEwrB,KAAOsN,EAAKtN,MACvDkxB,EAAczlD,KAAK6hC,GAG3B,IAAK+jB,EACD,MAAO,CACHjkB,MAAO8jB,EACPv3C,MAAOs3C,GAGf,MAAMU,QAA6BN,EAAe,CAC9C13C,MAAOs3C,EACP7jB,MAAO8jB,IAEX,MAAoC,kBAAzBS,EACAA,EAAuB,CAAEvkB,MAAO8jB,EAAev3C,MAAOs3C,GAAkB,CAAE7jB,MAAO,GAAIzzB,MAAO,IAEhGg4C,CACX,CkBlNyEC,CAAoB,CAC7ET,cAAeJ,EACfK,cAAeJ,EACfr3C,QACAyzB,QACAikB,eAAgB/9C,EAAI1I,EAAMmlD,mBAE1BkB,EAAczkD,QAAU0kD,EAAc1kD,UACtC5B,EAAM+O,MAAMpF,QAAQm4C,GAAQA,EAAIl0C,QAAQjK,IAAU0iD,EAAczW,MAAMqX,GAAOA,EAAG7xB,KAAOzxB,EAAKyxB,SAC5Fp1B,EAAMwiC,MAAM74B,QAAQu4C,GAAQA,EAAIt0C,QAAQ80B,IAAU4jB,EAAc1W,MAAMsX,GAAOA,EAAG9xB,KAAOsN,EAAKtN,SAC5F1sB,EAAI1I,EAAMklD,SAAVx8C,GAAsB,CAClBqG,MAAOs3C,EACP7jB,MAAO8jB,IAGlB,KA+DL,MAAMa,EAAcn3C,GAASyuB,IAI7B,SAASoY,IACLsQ,EAAYlkD,IAAIw7B,GACnB,CAUD,MAAO,IAEAz+B,EAEHojD,aAAcD,GAAgBnjD,GAC9ByhC,aAAcqiB,GAAgB9jD,GAC9B8/B,WAAYtvB,GAAQ,CAAC22C,EAAannD,EAAMqjC,WAAW,EAAEvD,EAAYuD,KACtDvD,EAAWpB,WACZ,IACKoB,EACHf,GAAIyC,GAAqB1B,EAAWf,GAAI,CAACsE,EAASjvB,EAAGivB,EAAS3oB,EAAG2oB,EAAS9R,QAE5E,IAAKuO,KAEfklB,QAASx0C,GAAQ,CAACxQ,EAAMwiC,MAAOxiC,EAAMilD,mBAAoBjlD,EAAMg2C,SAAS,EAAExT,EAAO4kB,EAAchyB,KlBu0BvG,SAAyBoN,GAAOpN,GAAEA,EAAEgyB,aAAEA,EAAYC,mBAAEA,EAAkBC,iBAAEA,IACpE,MAAMxB,EAAM,IAAIljD,IAChB,OAAO4/B,EACFsJ,QAAO,CAACkZ,EAAStiB,KAClB,CAACA,EAAK8e,aAAe6F,EAAoB3kB,EAAK+e,WAAa6F,GAAkB9nD,SAASmtC,IAClF,GAAIA,GAA4B,iBAAXA,EAAqB,CACtC,MAAM4a,EAAW7a,GAAYC,EAAQvX,GAChC0wB,EAAIjjD,IAAI0kD,KACTvC,EAAQnkD,KAAK,CAAEu0B,GAAImyB,EAAUr8B,MAAOyhB,EAAOzhB,OAASk8B,KAAiBza,IACrEmZ,EAAIh8C,IAAIy9C,GAEhB,KAEGvC,IACR,IACE3nC,MAAK,CAACzd,EAAGC,IAAMD,EAAEw1B,GAAGoyB,cAAc3nD,EAAEu1B,KAC7C,CkBv1B+GqyB,CAAgBjlB,EAAO,CAAE4kB,eAAchyB,SAC9ImwB,YAAa,MACT,IAAIA,GAAc,EAClB,MAAMmC,EAAqBh/C,EAAI1I,EAAM+O,OAAOnN,OACtC+lD,EAAqBj/C,EAAI1I,EAAMwiC,OAAO5gC,OAC5C,OAAO4O,GAAQ,CAACxQ,EAAMolD,iBAAkBplD,EAAMqlD,iBAAkBrlD,EAAMslD,sBAAsB,EAAEF,EAAkBC,EAAkBC,KAE1HC,IAIAA,EADuB,IAAvBmC,EACcpC,EAEc,IAAvBqC,EACSrC,GAAuBF,EAGvBE,GAAuBF,GAAoBC,EAEtDE,IAEd,EApBY,GAsBbqC,eAAiB74C,GJpTlB,SAAwB84C,EAAYC,GACvC,MAAMC,EAAmBF,EAAW5kD,IAC9B+kD,EAAuBF,EAAe7kD,IACtCglD,EAAoBv/C,EAAIm/C,GACxBK,EAAwBx/C,EAAIo/C,GAMlC,IAAIvjB,EADmD,IAA7B0jB,EAAkBrmD,QAAgBsmD,EAAsBtmD,OAAS,EAC7DsmD,EAAwBD,EACtDJ,EAAW5kD,IAAIshC,GACf,MAAMsd,EAAQC,IACV,MAAMqG,EAAeJ,EAAiBjG,GAGtC,OAFAvd,EAAM4jB,EACNH,EAAqBzjB,GACd4jB,CAAY,EAEvBN,EAAW5kD,IAAM6kD,EAAe7kD,IAAM4+C,EACtCgG,EAAWl+C,OAASm+C,EAAen+C,OAAUzK,GAAO2iD,EAAK3iD,EAAGqlC,GAChE,CIgSmCqjB,CAAe5nD,EAAM+O,MAAOA,GACvDq5C,eAAiB5lB,GJ/RlB,SAAwB6lB,EAAYC,GACvC,MAAMP,EAAmBM,EAAWplD,IAC9BslD,EAAuBD,EAAerlD,IAC5C,IAAIshC,EAAM77B,EAAI4/C,GACdD,EAAWplD,IAAIshC,GACf,MAAMsd,EAAQK,IACV6F,EAAiB7F,GACjBqG,EAAqBrG,GACrB3d,EAAM2d,CAAG,EAEbmG,EAAWplD,IAAMqlD,EAAerlD,IAAM4+C,EACtCwG,EAAW1+C,OAAS2+C,EAAe3+C,OAAUzK,GAAO2iD,EAAK3iD,EAAGqlC,GAChE,CImRmC6jB,CAAepoD,EAAMwiC,MAAOA,GACvDwa,aAAe3Z,GJjRW,EAACmlB,EAAcC,EAAeC,KAC5D,IAAKA,EACD,OAEJ,MAAMzlB,EAAUv6B,EAAI8/C,GACdG,EAAsBF,EAAcxlD,IACpC2lD,EAA0BF,EAAkBzlD,IAClD,IAAIshC,EAAMmkB,EAAoBhgD,EAAIggD,GAAqB,CAAEt0C,EAAG,EAAGsG,EAAG,EAAG6W,KAAM,GAC3Ek3B,EAAcxlD,IAAIshC,GAClBkkB,EAAcxlD,IAAO4lD,IACjBF,EAAoBE,GACpBD,EAAwBC,GACxBtkB,EAAMskB,EACCA,GAEXH,EAAkBzlD,IAAO4lD,IACrB5lB,GAAS+Z,aAAa6L,GACtBF,EAAoBE,GACpBD,EAAwBC,GACxBtkB,EAAMskB,EACCA,GAEXJ,EAAc9+C,OAAUzK,IACpBupD,EAAcxlD,IAAI/D,EAAGqlC,GAAK,EAE9BmkB,EAAkB/+C,OAAUzK,IACxBwpD,EAAkBzlD,IAAI/D,EAAGqlC,GAAK,CACjC,EIsP+BukB,CAAmB9oD,EAAMijC,QAASjjC,EAAMqjC,SAAUA,GAC9E0lB,aAzSJ,SAAsBpE,GAClB3kD,EAAM2kD,UAAU1hD,IAAI,IACbm/C,MACAuC,GAEV,EAqSGqE,aApSJ,SAAsBpE,GAClB5kD,EAAM4kD,UAAU3hD,IAAI,IACb2/C,MACAgC,GAEV,EAgSL7G,QA/RI,SAAiBkL,GACb,MAAMzmB,EAAQ95B,EAAI1I,EAAMwiC,OACxBxiC,EAAMwiC,MAAMv/B,IlBstBJ,EAACgmD,EAAYzmB,KACzB,IAAKymB,EAAWj7B,SAAWi7B,EAAWvlD,OAElC,OAAO8+B,EAEX,IAAIE,EAUJ,OARIA,EAxnBW,CAACv+B,GAAY,OAAQA,GAAW,WAAYA,GAAW,WAAYA,EAunB9E+kD,CAAWD,GACJ,IAAKA,GAGL,IACAA,EACH7zB,GAAIwU,GAAUqf,IA1BD,EAACvmB,EAAMF,IACrBA,EAAMoN,MAAMuZ,KAAOA,EAAGn7B,SAAW0U,EAAK1U,QACzCm7B,EAAGzlD,SAAWg/B,EAAKh/B,QAClBylD,EAAGnrB,eAAiB0E,EAAK1E,eAAkBmrB,EAAGnrB,cAAiB0E,EAAK1E,eACpEmrB,EAAGlrB,eAAiByE,EAAKzE,eAAkBkrB,EAAGlrB,cAAiByE,EAAKzE,iBAyBrEmrB,CAAiB1mB,EAAMF,GAChBA,GAEe,OAAtBE,EAAK1E,qBACE0E,EAAK1E,aAEU,OAAtB0E,EAAKzE,qBACEyE,EAAKzE,aAETuE,EAAMxwB,OAAO0wB,GAAK,EkB9uBL2mB,CAAYJ,EAAYzmB,GAC3C,EA6RG6P,oBA5RwB,CAACiX,EAAehnB,GAAW,KACnD,MAAM7B,EAAa/3B,EAAI1I,EAAMygC,YAC7B,IAAK,MAAOrL,EAAI0b,KAAawY,EAAe,CACxC,MAAM3lD,EAAO88B,EAAW/3B,IAAI0sB,IAAKgN,UAAUqL,SACtC9pC,IAGLA,EAAK48B,SAAWuQ,EAASvQ,SACzB58B,EAAK2+B,SAAWA,EACnB,CACDtiC,EAAM+O,MAAMpF,QAAQm4C,GAAQA,GAAI,EAmRxCtT,oBAjRI,SAA6BpiC,GACzB,MAAMq0B,EAAa/3B,EAAI1I,EAAMygC,YACvB4M,EAAe3kC,EAAI1I,EAAMqtC,eACzBuB,QAAEA,EAAOD,iBAAEA,GAAqB4a,GAA0Bn9C,EAASq0B,EAAY/3B,EAAI1I,EAAMqtC,cAAe3kC,EAAI1I,EAAMyuC,SAAU/lC,EAAI1I,EAAMkgC,aAC5I,GAAKyO,EAAL,CAIA,GlB+nCR,SAAiClO,EAAY4M,EAAcpoC,GACvD,MAAMqoC,EAAWL,GAAaL,GAAgB3nC,GAC9C,IAAK,MAAMtB,KAAQ88B,EAAWvvB,SAC1B,GAAIvN,EAAKmgC,SACLgK,GAAgBnqC,EAAM88B,EAAY4M,EAAcC,OAE/C,CACD,MAAMK,EAAqB1N,GAA0Bt8B,EAAM2pC,EAASpN,YAC9D3F,EAAS4J,GAAmBxgC,EAAK42B,QAAU52B,EAAK42B,OAAS+S,EAAS1J,WAClEgK,EAAkBtJ,GAAcqJ,EAAoBpT,EAAQ4F,GAAkBx8B,IACpFA,EAAKy+B,UAAU6B,iBAAmB2J,CACtC,CAER,CkB7oCQ4b,CAAwB/oB,EAAY4M,EAAc,CAAEnN,aAAY0D,gBAC3Dl7B,EAAI1I,EAAMokD,oBAAsB17C,EAAI1I,EAAMmkD,eAAgB,CAC3D,MAAME,EAAiB37C,EAAI1I,EAAMqkD,gBAC3BD,EAgDd,SAAqBn/C,GACjB,MAAMg+B,EAAUv6B,EAAI1I,EAAMijC,SAC1B,IAAKA,EACD,OAAO,EAEX,MAAML,EAAeD,GAAgBj6B,EAAI1I,EAAMygC,YAAax7B,GAS5D,OARAwkD,GAAc,CACV16C,MAAO6zB,EACP9I,MAAOpxB,EAAI1I,EAAM85B,OACjBC,OAAQrxB,EAAI1I,EAAM+5B,QAClBmJ,QAASx6B,EAAI1I,EAAMkjC,SACnBC,QAASz6B,EAAI1I,EAAMmjC,SACnBF,WACDh+B,GACI29B,EAAaryB,KAAO,CAC9B,CA/DiCm5C,CAAY,IAC/BrF,EACHt1C,MAAOs1C,GAAgBt1C,QAE3B/O,EAAMokD,kBAAkBnhD,IAAImhD,EAC/B,CACD,IAAK,MAAMuF,KAAU/a,EAAS,CAC1B,MAAMjrC,EAAO88B,EAAW/3B,IAAIihD,EAAOv0B,KAAKgN,UAAUqL,SAClD,GAAK9pC,EAGL,OAAQgmD,EAAO5hD,MACX,IAAK,aAAc,CACf,MAAM25B,EAAW,IAAK/9B,EAAK+9B,YAAaioB,EAAOnlB,YAC3CmlB,EAAO9Z,gBACPlsC,EAAKm2B,MAAQ6vB,EAAOnlB,YAAY1K,OAASn2B,EAAKm2B,MAC9Cn2B,EAAKo2B,OAAS4vB,EAAOnlB,YAAYzK,QAAUp2B,EAAKo2B,QAEpDp2B,EAAK+9B,SAAWA,EAChB,KACH,CACD,IAAK,WACD/9B,EAAK48B,SAAWopB,EAAOppB,UAAY58B,EAAK48B,SAGnD,CACDvgC,EAAM+O,MAAMpF,QAAQm4C,GAAQA,IACvBp5C,EAAI1I,EAAMolD,mBACXplD,EAAMolD,iBAAiBniD,KAAI,EAhC9B,CAkCJ,EA0OG2mD,OAjMJ,SAAgB3kD,GACZ,OAAOwgD,EAAO,IAAKxgD,EACtB,EAgMG4kD,QA/LJ,SAAiB5kD,GACb,OAAOwgD,EAAO,EAAI,IAAKxgD,EAC1B,EA8LG+9B,QAAU/9B,GA3Od,SAAiBA,GACb,MAAMg+B,EAAUv6B,EAAI1I,EAAMijC,SACpBwL,EAAU/lC,EAAI1I,EAAMyuC,SAC1B,IAAKxL,IAAYwL,EACb,OAAOvlC,QAAQC,SAAQ,GAE3B,MAAM2wB,MAAEA,EAAKC,OAAEA,GAAWgN,GAAc0H,GAExC,OAAOgb,GAAc,CACjB16C,MAFiB4zB,GAAgBj6B,EAAI1I,EAAMygC,YAAax7B,GAGxD60B,QACAC,SACAmJ,QAASx6B,EAAI1I,EAAMkjC,SACnBC,QAASz6B,EAAI1I,EAAMmjC,SACnBF,WACDh+B,EACN,CA2NyB+9B,CAAQ/9B,GAC9B6kD,WA9LJ,SAAoB5mB,GAChB,MAAMD,EAAUv6B,EAAI1I,EAAMijC,SACtBA,IACAA,EAAQ6Z,eAAe,CAAC5Z,EAASx6B,EAAI1I,EAAMmjC,WAC3CnjC,EAAMkjC,QAAQjgC,IAAIigC,GAEzB,EAyLG6mB,WAxLJ,SAAoB5mB,GAChB,MAAMF,EAAUv6B,EAAI1I,EAAMijC,SACtBA,IACAA,EAAQ6Z,eAAe,CAACp0C,EAAI1I,EAAMkjC,SAAUC,IAC5CnjC,EAAMmjC,QAAQlgC,IAAIkgC,GAEzB,EAmLG4Z,mBAlLJ,SAA4BxiB,GACxB,MAAM0I,EAAUv6B,EAAI1I,EAAMijC,SACtBA,IACAA,EAAQ8Z,mBAAmBxiB,GAC3Bv6B,EAAMw6B,gBAAgBv3B,IAAIs3B,GAEjC,EA6KGyvB,qBAlKJ,SAA8BhlB,GAC1Bt8B,EAAI1I,EAAMijC,UAAUia,iBAAiBlY,EACxC,EAiKGsO,wBACAuS,mBACAjF,iBAjHJ,SAA0BkF,GACtB,MAAMC,EAAmBr9C,EAAI1I,EAAM2gD,0BACnC3gD,EAAMwiC,MAAM74B,QAAQ64B,GAAUA,EAAM70B,KAAK+0B,IACrC,MAAMunB,EAAqBnE,EAAIjN,SAASnW,EAAKtN,IACvCvuB,EAAWk/C,GACXrjB,EAAK77B,UACLojD,EAEN,OADAvnB,EAAK77B,SAAWA,EACT67B,CAAI,MAEVqjB,GACD/lD,EAAM+O,MAAMpF,QAAQq8C,GAAOA,EAAGr4C,KAAKhK,IAC/BA,EAAKkD,UAAW,EACTlD,MAGlB,EAkGGumD,oBAjGJ,SAA6B90B,GACzB,MAAMzxB,EAAO+E,EAAI1I,EAAM+O,QAAQyF,MAAM1I,GAAMA,EAAEspB,KAAOA,IAC/CzxB,GAIL3D,EAAMygD,cAAcx9C,IAAI,MACxBjD,EAAM0gD,kBAAkBz9C,IAAI,MACvBU,EAAKkD,SAGDlD,EAAKkD,UAAY6B,EAAI1I,EAAM2gD,2BAChCrN,EAAsB,CAAEvkC,MAAO,CAACpL,GAAO6+B,MAAO,KAH9CqjB,EAAiB,CAACzwB,KANlB2Y,QAAQC,KAAK,MAAOnQ,GAA0BzI,GAWrD,EAoFLwd,MAnFI,SAAeuX,GACX,MAAM9mB,EAAW36B,EAAI1I,EAAMqjC,UAC3B,OlBsrCRN,gBAAqBonB,MAAEA,EAAKlnB,QAAEA,EAAOvS,UAAEA,EAAS8J,gBAAEA,EAAeV,MAAEA,EAAKC,OAAEA,IACtE,IAAKkJ,IAAaknB,EAAM/1C,IAAM+1C,EAAMzvC,EAChC,OAAOxR,QAAQC,SAAQ,GAE3B,MAAM2yC,QAAqB7Y,EAAQiX,uBAAuB,CACtD9lC,EAAGsc,EAAU,GAAKy5B,EAAM/1C,EACxBsG,EAAGgW,EAAU,GAAKy5B,EAAMzvC,EACxB6W,KAAMb,EAAU,IACjB,CACC,CAAC,EAAG,GACJ,CAACoJ,EAAOC,IACTS,GACG4vB,IAAqBtO,IACtBA,EAAa1nC,IAAMsc,EAAU,IAAMorB,EAAaphC,IAAMgW,EAAU,IAAMorB,EAAa98C,IAAM0xB,EAAU,IACxG,OAAOxnB,QAAQC,QAAQihD,EAC3B,CkBrsCeC,CAAY,CACfF,QACAlnB,QAASv6B,EAAI1I,EAAMijC,SACnBvS,UAAW,CAAC2S,EAASjvB,EAAGivB,EAAS3oB,EAAG2oB,EAAS9R,MAC7CiJ,gBAAiB9xB,EAAI1I,EAAMw6B,iBAC3BV,MAAOpxB,EAAI1I,EAAM85B,OACjBC,OAAQrxB,EAAI1I,EAAM+5B,SAEzB,EA0EGmd,iBAxEsBS,IACtBwP,EAAYlkD,IAAI,IAAK00C,GAAgB,EAwErCd,mBACAyT,MApEJ,WACItqD,EAAMokD,kBAAkBnhD,KAAI,GAC5BjD,EAAMygD,cAAcx9C,IAAI,MACxBjD,EAAM0gD,kBAAkBz9C,IAAI,MAC5BjD,EAAMimC,SAAShjC,IAAI,MACnBjD,EAAMi2C,kBAAkBhzC,KAAI,KAAM,IAClCqwC,IACAuD,GACH,EA8DL,CACO,SAASgH,KACZ,MAAM79C,EAAQyI,EAAW1C,IACzB,IAAK/F,EACD,MAAM,IAAI0H,MAAM,wFAEpB,OAAO1H,EAAMuqD,UACjB,CCtVe,SAASh5B,GAAKkd,EAASp1B,GAClC,MAAM4pB,QAAEA,EAAOC,QAAEA,EAAOC,QAAEA,EAAOqnB,gBAAEA,EAAennB,SAAEA,EAAQf,SAAEA,EAAQ9H,gBAAEA,EAAe2e,kBAAEA,GAAsB9/B,EACzGoxC,EAAkBvR,GAAU,CAC9BzK,UACAvL,UACAC,UACA3I,kBACA6I,SAAUmnB,EACVrR,oBACAI,iBAAkBjX,EAASr/B,MAEzBynD,EAAkBD,EAAgB7N,cAIxC,OAHAvZ,EAASpgC,IAAIynD,GACbznB,EAAQhgC,IAAIwnD,GACZA,EAAgB9gD,OAAO0P,GAChB,CACH,MAAA1P,CAAO0P,GACHoxC,EAAgB9gD,OAAO0P,EAC1B,EAET,8JCKAxV,EA+BMH,EAAA25C,EAAAv5C,iDA5BFu/B,SAAAriC,EAAQ,IACRkiC,QAASliC,EAAQ,IACjBmiC,QAASniC,EAAQ,IACjBwpD,gBAAiBxpD,EAAQ,IACzBshC,SAAAthC,EAAQ,IACRiiC,QAAAjiC,EAAO,IACPq4C,eAAgBr4C,EAAW,GAC3Bo4C,UAAWp4C,EAAM,GACjBs4C,aAAct4C,EAAS,GACvBi6C,aAAAj6C,EAAY,GACZk6C,kBAAAl6C,EAAiB,GACjBg6C,YAAAh6C,EAAW,GACX45C,YAAa55C,EAAY,GACzB23C,UAAW33C,EAAU,IACrB85C,iBAAkB,GAClBD,gBAAiB75C,EAAmB,IAAAu9B,GAAgBosB,KACpDxP,yBAA0Bn6C,EAAyB,IACnD+5C,iBAA8C,kBAArB/5C,EAAgB,IAAiBA,EAAgB,GAC1Ey5C,eAAgB,QAChBD,iBAAkB,UAClBG,sBAAuB35C,EAAc,IACrCw5B,gBAAiBx5B,EAAgB,IACjC+0C,IAAK/0C,EAAI,IACTm4C,kBAAAn4C,EAAiB,GACjBo6C,kBAAAp6C,EAAiB,6IAxBjBqiC,SAAAriC,EAAQ,IACRkiC,QAASliC,EAAQ,IACjBmiC,QAASniC,EAAQ,IACjBwpD,gBAAiBxpD,EAAQ,IACzBshC,SAAAthC,EAAQ,IACRiiC,QAAAjiC,EAAO,IACPq4C,eAAgBr4C,EAAW,GAC3Bo4C,UAAWp4C,EAAM,GACjBs4C,aAAct4C,EAAS,GACvBi6C,aAAAj6C,EAAY,GACZk6C,kBAAAl6C,EAAiB,GACjBg6C,YAAAh6C,EAAW,GACX45C,YAAa55C,EAAY,GACzB23C,UAAW33C,EAAU,IACrB85C,iBAAkB,GAClBD,gBAAiB75C,EAAmB,IAAAu9B,GAAgBosB,KACpDxP,yBAA0Bn6C,EAAyB,IACnD+5C,iBAA8C,kBAArB/5C,EAAgB,IAAiBA,EAAgB,GAC1Ey5C,eAAgB,QAChBD,iBAAkB,UAClBG,sBAAuB35C,EAAc,IACrCw5B,gBAAiBx5B,EAAgB,IACjC+0C,IAAK/0C,EAAI,IACTm4C,kBAAAn4C,EAAiB,GACjBo6C,kBAAAp6C,EAAiB,6JAjDVwpD,gBAAAA,GAA2BjN,GAC3BqN,YAAAA,GAAuBrN,GACvBsN,OAAAA,GAAkBtN,GAClBuN,UAAAA,GAAqBvN,mBACrB1C,GAAe0C,oBACfxC,GAAgBwC,gBAChBtC,GAAYsC,qBACZrC,GAAiBqC,eACjBvC,GAAWuC,aACX5E,GAAS4E,eACT3C,GAAW2C,qBACXpE,GAAiBoE,iBACpBla,EAAQJ,QAAEA,EAAOwd,cAAEA,EAAavd,QAAEA,EAAOC,QAAEA,EAAOb,SAAEA,EAAQ9H,gBAAEA,EAAeub,IAAEA,EAAGyO,wBAAEA,EAAuBrJ,yBAAEA,EAAwBmK,oBAAEA,GAAwBzH,4LAKvKl2C,GAAO,KACH5E,EAAAuiD,EAAAyF,GAAuB,EAAIA,EAAA,kmBAL5BvM,EAAA,GAAAwM,EAAWR,IAAqBp2C,EAAG,EAAGsG,EAAG,EAAG6W,KAAM,qBAClDitB,EAAA,GAAAyM,EAAaC,GAA4BvS,oBACzC6F,EAAA,EAAA2M,EAAeD,GAA4BtQ,+DACnBlqB,GAAc2S,EAASpgC,IAAG,CAAGmR,EAAGsc,EAAU,GAAIhW,EAAGgW,EAAU,GAAIa,KAAMb,EAAU,qbCkHvFtpB,EAAAi2C,EAAA,aAAc,IAAdr8C,EAAc,IAASkK,MAAM0F,QAAQ5P,EAAc,KAAAA,EAAU,GAAA63C,SAAS,mBACvE73C,EAAS,oBACRA,EAAW,YAL9B6C,EAaMH,EAAA25C,EAAAv5C,iEAPM9C,EAAkB,QAAGb,EAAYirD,GAAYpqD,EAAS,IAAAA,SAAtDA,EAAkB,QAAGb,EAAYirD,GAAYpqD,EAAO,IAAEA,EAAS,KAAA6R,MAAAjK,KAAAiJ,8CACzD7Q,EAAkB,GAAGA,EAAa,SAAGb,KAArCa,EAAkB,GAAGA,EAAa,SAAGb,GAAS0S,MAAAjK,KAAAiJ,8CAC9C7Q,EAAkB,GAAGA,EAAa,SAAGb,KAArCa,EAAkB,GAAGA,EAAa,SAAGb,GAAS0S,MAAAjK,KAAAiJ,4CAChD7Q,EAAkB,GAAGA,EAAW,SAAGb,KAAnCa,EAAkB,GAAGA,EAAW,SAAGb,GAAS0S,MAAAjK,KAAAiJ,8CAC1Cu5C,GAAYpqD,EAAe,IAAAA,QAA3BoqD,GAAYpqD,EAAa,IAAEA,EAAS,IAAA6R,MAAAjK,KAAAiJ,8HAPnCzK,EAAAi2C,EAAA,aAAc,IAAdr8C,EAAc,IAASkK,MAAM0F,QAAQ5P,EAAc,KAAAA,EAAU,GAAA63C,SAAS,kCACvE73C,EAAS,kCACRA,EAAW,wGAxIWoqD,GAAYpmD,EAAS8uC,UAClD/uC,IACAA,EAAMrB,SAAWowC,GAGrB9uC,IAAUD,EAAK,EAGP,SAAAsmD,GAAevF,UACnBwF,IACE,MAAAC,EAAazF,EAAIjN,SAASyS,EAAKl2B,WACjCk2B,EAAKzkD,WAAa0kD,IAClBD,EAAKzkD,SAAW0kD,GAEbD,CAAI,+EAQR3S,UAAAA,GAAqB4E,GACrBiO,gBAAAA,GAA2BjO,EAChC,MAAA5rC,EAAW7J,WACTiH,EAAK0xB,WAAEA,EAAU+B,MAAEA,EAAKa,SAAEA,EAAQf,SAAEA,EAAQue,mBAAEA,EAAkBJ,cAAEA,EAAaC,kBAAEA,EAAiB4D,oBAAEA,EAAmBG,cAAEA,EAAaD,wBAAEA,EAAuBlR,sBAAEA,GAA0BuK,SAC/L/J,6NACA,IAAArC,EAAkB,KAClB0U,EAAa,GAMbsF,GAAsB,EACjB,SAAAC,EAAQ3mD,GAET0mD,EACAA,GAAsB,GAG1B95C,EAAS,YAAW,CAAI5M,UACxBuuC,IACAoN,EAAkBz9C,IAAI,0LAdvBu7C,EAAA,GAAAyM,EAAaC,GAA4BvS,2BAC3C6F,EAAA,EAAEmN,EACCC,GAAwBC,GAAmBL,IAAkC,IAAfP,2BACjEzM,EAAA,EAAEsN,EAAqBC,IAAwBJ,GAAsC,SAAvBK,sCAatD,SAAcjnD,GAEd,GADL0sC,EAAkBqC,EAAU/4B,yBACvB8lC,IACA8K,GACgB,IAAjB5mD,EAAMkb,QACNlb,EAAMrB,SAAWowC,IAChBrC,SAGL1sC,EAAMrB,QAAQuoD,oBAAoBlnD,EAAMmnD,WAChC,MAAA93C,EAAAA,EAACsG,EAAEA,GAAMisB,GAAiB5hC,EAAO0sC,GACzC6B,IACAmN,EAAcx9C,IAAG,CACb62B,MAAO,EACPC,OAAQ,EACRoyB,OAAQ/3C,EACRg4C,OAAQ1xC,EACRtG,IACAsG,OAIC,SAAc3V,OACd4mD,IAAgBla,IAAoBoa,SAGzCJ,GAAsB,EAChB,MAAAlY,EAAW5M,GAAiB5hC,EAAO0sC,GACnC0a,EAASN,EAAeM,QAAU,EAClCC,EAASP,EAAeO,QAAU,EAClCC,EAAkB,IACjBR,EACHz3C,EAAGm/B,EAASn/B,EAAI+3C,EAAS5Y,EAASn/B,EAAI+3C,EACtCzxC,EAAG64B,EAAS74B,EAAI0xC,EAAS7Y,EAAS74B,EAAI0xC,EACtCtyB,MAAOp4B,KAAK4K,IAAIinC,EAASn/B,EAAI+3C,GAC7BpyB,OAAQr4B,KAAK4K,IAAIinC,EAAS74B,EAAI0xC,IAE5BE,EAAsBnG,EAAcx4C,KAAK7B,GAAMA,EAAEspB,KACjDm3B,EAAsBhqB,GAAkB4jB,EAAeqG,GAAQ7+C,KAAK/D,GAAMA,EAAEwrB,KAClF+wB,EAAgBllB,GAAese,EAAa8M,EAAqB,CAAApM,EAAU7rC,EAAG6rC,EAAUvlC,EAAGulC,EAAU1uB,MAAOk7B,IAAmBjuB,GAAckmB,SAAS,GAChJ,MAAAgI,EAAkBnqB,GAAkB4jB,EAAeqG,GAAQ7+C,KAAK/D,GAAMA,EAAEwrB,KACxEu3B,EAAkBxG,EAAcx4C,KAAK7B,GAAMA,EAAEspB,MAE/Ck3B,EAAoB1qD,SAAW+qD,EAAgB/qD,QAC/C+qD,EAAgB/c,MAAMxa,IAAQk3B,EAAoBzT,SAASzjB,OAC3DrmB,EAAMpF,QAAQoF,GAAUA,EAAMpB,IAAI09C,GAAesB,OAEjDJ,EAAoB3qD,SAAW8qD,EAAgB9qD,QAC/C8qD,EAAgB9c,MAAMxa,IAAQm3B,EAAoB1T,SAASzjB,OAC3DoN,EAAM74B,QAAQ64B,GAAUA,EAAM70B,IAAI09C,GAAeqB,MAErDhM,EAAkBz9C,IAAI,QACtBw9C,EAAcx9C,IAAIopD,IAEb,SAAYtnD,GACI,IAAjBA,EAAMkb,SAGVlb,EAAMrB,QAAQkpD,wBAAwB7nD,EAAMmnD,WAGvCP,GAAsC,SAAvBK,GAAiCjnD,EAAMrB,SAAWowC,GAClE4X,IAAU3mD,GAEd07C,EAAcx9C,IAAI,MACdkjD,EAAcvkD,OAAS,GACvBmB,EAAA29C,EAAAsL,EAAqB,QAAOA,GAI5BJ,IACAH,GAAsB,KAIP1mD,IACfmG,MAAM0F,QAAQq6C,IAAeA,GAAYpS,SAAS,GAClD9zC,EAAM6Z,iBAGVjN,EAAS,kBAAiB,CAAI5M,SAAK,4DAO1B+uC,EAAS+Y,gUC9HS7rD,EAAS,GAACoT,EAAO,OAAApT,KAAU0Z,EAAC,aAAY1Z,EAAS,GAACuwB,KAAI,aAFrF1tB,EAKMH,EAAA25C,EAAAv5C,0IAHyB9C,EAAS,GAACoT,EAAO,OAAApT,KAAU0Z,EAAC,aAAY1Z,EAAS,GAACuwB,KAAI,8HAL7E,MAAA8R,SAAAA,GAAawa,+JCCN,SAAS7J,GAAKvF,EAASp1B,GAClC,MAAMrZ,MAAEA,EAAKmxC,OAAEA,EAAMD,YAAEA,EAAWE,WAAEA,EAAUJ,gBAAEA,GAAoB33B,EAC9DyzC,EAAe/b,GAAO,CACxBI,SACAD,cACAE,aACAJ,kBACAC,cAAe,KACX,MAAMhL,EAAWv9B,EAAI1I,EAAMimC,UACrB4iB,EAAKngD,EAAI1I,EAAMqjC,UACrB,MAAO,CACHt0B,MAAOrG,EAAI1I,EAAM+O,OACjB0xB,WAAY/3B,EAAI1I,EAAMygC,YACtB+B,MAAO95B,EAAI1I,EAAMwiC,OACjBoB,WAAYl7B,EAAI1I,EAAM4jC,YACtBqC,SAAUA,GAAsB,CAAC,EAAG,GACpCC,aAAcD,EACd/F,WAAYx3B,EAAI1I,EAAMkgC,YACtB+S,qBAAsBvqC,EAAI1I,EAAM2gD,0BAChClS,QAAS/lC,EAAI1I,EAAMyuC,SACnB/d,UAAW,CAACm4B,EAAGz0C,EAAGy0C,EAAGnuC,EAAGmuC,EAAGt3B,MAC3BgjB,kBAAmB7rC,EAAI1I,EAAMu0C,mBAC7BrB,eAAgBxqC,EAAI1I,EAAMkzC,gBAC1BC,kBAAmBzqC,EAAI1I,EAAMmzC,mBAC7BmB,kBAAmB5rC,EAAI1I,EAAMs0C,mBAC7BhB,sBAAuBtzC,EAAMszC,sBAC7BjB,oBAAqBryC,EAAMqyC,oBAC3BO,MAAO5yC,EAAM4yC,MAChB,IAGT,SAASma,EAAWte,EAASp1B,GACrBA,EAAO2zC,SACPF,EAAa1pD,UAGjB0pD,EAAanjD,OAAO,CAChB8kC,UACAoD,gBAAiBx4B,EAAO4zC,YACxBnb,eAAgBz4B,EAAOy4B,eACvBpO,OAAQrqB,EAAOqqB,OACfqO,aAAc14B,EAAO04B,aACrBC,kBAAmB34B,EAAO24B,mBAEjC,CAED,OADA+a,EAAWte,EAASp1B,GACb,CACH,MAAA1P,CAAO0P,GACH0zC,EAAWte,EAASp1B,EACvB,EACD,OAAAjW,GACI0pD,EAAa1pD,SAChB,EAET,oCC6FgC09C,EAAA,aAAA9/C,YAAeA,EAAS,eAU5CA,EAAa,0NAabA,EAAQ,kBACCA,EAAiB,sBACbA,EAAS,sBACTA,EAAS,0GApCrBA,EAAE,kBACJuQ,GAAE,CAAE,yCAA0CvQ,EAAQ,MAAIA,EAAS,sBAWlEA,EAAK,KAAI,IAAK,IAAAA,MAAsB84B,MAAO94B,EAAqB,IAAC+4B,mIAL5D/4B,EAAS,iBACRA,EAAQ,mBACPA,EAAM,yCAEHA,EAAW,IAAG,UAAY,kBAhC9C6C,EA6DMH,EAAA25C,EAAAv5C,4DA3DF4/B,OAAQ1iC,EAAE,GACV+wC,aAAc/wC,EAAU,GACxBgsD,UAAU,EACVlb,eAAgB9wC,EAAU,IAC1BisD,YAAa,SACbjb,kBAAAhxC,EAAiB,IACjBgwC,gBAAiBhwC,EAAmB,IACpCmwC,OAAMnwC,EAAA,IAGNkwC,YAAWlwC,EAAA,IAGXowC,WAAUpwC,EAAA,IAGVhB,MAAAgB,EAAK,mBAgBGA,EAAmB,8IAOrBA,EAAa,KAAA,whBAabA,EAAQ,sCACCA,EAAiB,qCACbA,EAAS,qCACTA,EAAS,sGApCrBA,EAAE,+BACJuQ,GAAE,CAAE,yCAA0CvQ,EAAQ,MAAIA,EAAS,oDAWlEA,EAAK,KAAI,IAAK,IAAAA,MAAsB84B,MAAO94B,EAAqB,IAAC+4B,2EA/BvE2J,OAAQ1iC,EAAE,GACV+wC,aAAc/wC,EAAU,GACxBgsD,UAAU,EACVlb,eAAgB9wC,EAAU,IAC1BisD,YAAa,SACbjb,kBAAAhxC,EAAiB,IACjBgwC,gBAAiBhwC,EAAmB,IACpCmwC,OAAMnwC,EAAA,IAGNkwC,YAAWlwC,EAAA,IAGXowC,WAAUpwC,EAAA,IAGVhB,MAAAgB,EAAK,+PAUMA,EAAS,sCACRA,EAAQ,6DACPA,EAAM,MACO,SAAAM,EAAA,IAAAw/C,KAAAA,EAAA,aAAA9/C,YAAeA,EAAS,WAAAggD,4DAClChgD,EAAW,IAAG,UAAY,4JAjC1CA,EAAM,IAAAogD,GAAApgD,uEAANA,EAAM,gOA3GD2C,GAAI45C,MACJnoB,GAAEmoB,QACF74C,EAAI,IAAA64C,GACJ12C,SAAAA,GAAW,GAAK02C,GAChB/J,UAAAA,GAAqB+J,GACrB5b,WAAAA,GAAsB4b,GACtBhH,YAAAA,GAAc,GAAIgH,GAClBmJ,UAAAA,GAAY,GAAInJ,GAChB3b,OAAAA,GAAS,GAAK2b,GACdjb,SAAAA,GAAW,GAAKib,GAChB2P,eAAAA,EAAiB,MAAI3P,GACrBv3C,MAAAA,GAAiBu3C,GACjBx1C,KAAAA,EAAO,WAASw1C,GAChB4P,SAAAA,GAAW,GAAK5P,aAChB6P,GAAS7P,aACT8P,GAAS9P,GACTnV,eAAAA,GAA0BmV,GAC1BhV,eAAAA,GAA0BgV,UAC1BhU,GAAMgU,GACN+P,cAAAA,GAAyB/P,GACzBgQ,eAAAA,GAA0BhQ,GAC1B1b,aAAAA,GAAwB0b,GACxBzb,cAAAA,GAAyByb,GACzBzjB,MAAAA,GAAiByjB,GACjBxjB,OAAAA,GAAkBwjB,GAClBiQ,WAAAA,GAAsBjQ,GACtBgI,YAAAA,GAAc,GAAKhI,GACnBzZ,SAAAA,GAAoByZ,GACpBvL,kBAAAA,GAA6BuL,GACpCK,MAAApF,EAAY,IAAE+E,EAEZ,MAAAv9C,EAAQ69C,gBACN8G,EAASrQ,kBAAEA,EAAiBnB,kBAAEA,EAAiB+W,oBAAEA,EAAmB1b,oBAAEA,GAAwBxuC,MAClGytD,wBACA,IAAAC,EAAc,KACZ,MAAAC,EAAoB7lD,IACpB8lD,GAAmB59C,GAASumC,GAC9B,IAAAsX,GACAC,GACAC,0BA0CJxlD,EAAW,sBAAuB6sB,GAClC7sB,EAAW,+BAAgCqlD,IAQ3C/lD,GAAS,KACD6lD,GACAR,GAAgBc,UAAUN,woCApD/BlP,EAAA,GAAA1gB,EAAW/1B,GAAQ,uDACnBy2C,EAAA,GAAAyP,IAAkBC,EAAWpwB,qDAC7BqwB,EAAgBD,EAAWpwB,IAAa4kB,0BAElCuL,GACDlgB,QAAQC,KAAK,MAAOnQ,GAA0B91B,6CAGrDy2C,EAAA,GAAE4P,EC1DI,UAAsCt0B,MAAEA,EAAKC,OAAEA,EAAM8H,aAAEA,EAAYC,cAAEA,EAAawrB,cAAEA,EAAaC,eAAEA,IACtG,QAAsBptD,IAAlBmtD,QAAkDntD,IAAnBotD,EAA8B,CAC7D,MAAMc,EAAav0B,GAAS+H,EACtBysB,EAAcv0B,GAAU+H,EAC9B,MAAO,CACHhI,MAAOu0B,EAAa,SAASA,OAAkB,GAC/Ct0B,OAAQu0B,EAAc,UAAUA,OAAmB,GAE1D,CACD,MAAO,CACHx0B,MAAOA,EAAQ,SAASA,OAAa,GACrCC,OAAQA,EAAS,UAAUA,OAAc,GAEjD,CD6C2Bw0B,CAA4B,CACnDz0B,QACAC,SACA8H,eACAC,gBACAwrB,gBACAC,sCAGAK,GAAiB3qD,MAAMszC,8CAE1B,EAGqBsX,IAAY/vB,IAAa+vB,IACtCC,IAAsB1lB,IAAmB0lB,IACzCC,IAAsBxlB,IAAmBwlB,KAE1Cr6B,uBAA4B,IAAA8a,EAAwB,IAAAtiC,MAE5CkpB,EAAE,CAEEA,KACAoS,YAAaimB,EACbxe,OAAO,SAKvBuP,EAAA,GAAAqP,GAAW/vB,GACX0gB,EAAA,GAAAsP,GAAqB1lB,GACrBoW,EAAA,GAAAuP,GAAqBxlB,gDAKjB2kB,GAAmBO,IAAYC,GAAgBnI,IAC/CmI,GAAeR,EAAec,UAAUN,GACxCD,GAAWP,EAAesB,QAAQf,GAClCjP,EAAA,GAAAkP,EAAcD,4EAQb,SAAoB1oD,GACrB48B,KAAgBj5B,EAAIyqC,KAAuBK,GAAa9qC,EAAI4rC,GAAqB,IAGjF4V,EAAoB90B,GAExBu4B,EAAkB,YAAW,CAAIhqD,KAAMA,EAAKy+B,UAAUqL,SAAU1oC,sCAgBrD,CAAAA,EAAOvE,EAAG8oC,EAAYv6B,KAC7B4+C,EAAkB,WAAU,CAAI5oD,QAAOukC,aAAYv6B,SAAK,EAE5C,CAAAhK,EAAOvE,EAAG8oC,EAAYv6B,KAClC4+C,EAAkB,gBAAe,CAAI5oD,QAAOukC,aAAYv6B,SAAK,EAElD,CAAAhK,EAAOvE,EAAG8oC,EAAYv6B,KACjC4+C,EAAkB,eAAc,CAAI5oD,QAAOukC,aAAYv6B,SAAK,0CAIrD0+C,EAAOZ,cAeF9nD,GAAU4oD,EAAkB,iBAAoB,CAAAhqD,OAAMoB,UACtDA,GAAU4oD,EAAkB,iBAAoB,CAAAhqD,OAAMoB,UACvDA,GAAU4oD,EAAkB,gBAAmB,CAAAhqD,OAAMoB,UACnDA,GAAU4oD,EAAkB,kBAAqB,CAAAhqD,OAAMoB,+lBE/HlEqwB,GAAAp0B,MAAKo0B,GACH1wB,KAAA1D,MAAK0D,KACCmC,WAAA7F,MAAK6F,SACP+6B,SAAA5gC,MAAK4gC,oBACD5gC,EAAI,IAACwyC,WAAcxyC,WAA6C,IAAnBA,EAAI,IAACwyC,yBAE9DxyC,EAAI,IAAC2gC,YACJ3gC,WAAkD,IAApBA,EAAI,IAAC2gC,2BAGpC3gC,EAAI,IAACu1C,aACJv1C,WAAiD,IAArBA,EAAI,IAACu1C,uBAEzBv1C,EAAI,IAAC0lD,YAAa,EAClB0G,UAAApsD,EAAK,IAAAohC,UAAU6B,iBAAiB7vB,EAChCi5C,UAAArsD,EAAK,IAAAohC,UAAU6B,iBAAiBvpB,EACjCyyC,SAAAnsD,EAAc,GAAA6B,IAAI7B,MAAKo0B,IAC1BpvB,MAAAhF,MAAKgF,MACL43C,MAAA58C,MAAK48C,WACN58C,EAAI,IAAC+G,MAAQ,UACHqgC,eAAApnC,MAAKonC,eACLG,eAAAvnC,MAAKunC,eACXjG,SAAAthC,MAAKshC,SACPiH,OAAAvoC,EAAK,IAAAohC,UAAUuH,GAAK,EAChB6jB,WAAAxsD,MAAKwsD,WACJjI,YAAA9e,GAAkBzlC,EAAI,KAC5B84B,MAAA94B,MAAK84B,MACJC,OAAA/4B,MAAK+4B,OACC8H,aAAA7gC,MAAK6gC,aACJC,cAAA9gC,MAAK8gC,4BACL9gC,EAAI,IAAC0gC,SAAS5H,qBACb94B,EAAI,IAAC0gC,SAAS3H,OACpB+J,SAAA9iC,MAAK8iC,gaAhCX,EAAAxiC,IAAAmtD,EAAAr5B,GAAAp0B,MAAKo0B,IACH,EAAA9zB,IAAAmtD,EAAA/pD,KAAA1D,MAAK0D,MACC,EAAApD,IAAAmtD,EAAA5nD,WAAA7F,MAAK6F,UACP,EAAAvF,IAAAmtD,EAAA7sB,SAAA5gC,MAAK4gC,6BACD5gC,EAAI,IAACwyC,WAAcxyC,WAA6C,IAAnBA,EAAI,IAACwyC,mCAE9DxyC,EAAI,IAAC2gC,YACJ3gC,WAAkD,IAApBA,EAAI,IAAC2gC,qCAGpC3gC,EAAI,IAACu1C,aACJv1C,WAAiD,IAArBA,EAAI,IAACu1C,gCAEzBv1C,EAAI,IAAC0lD,YAAa,GAClB,EAAAplD,IAAAmtD,EAAArB,UAAApsD,EAAK,IAAAohC,UAAU6B,iBAAiB7vB,GAChC,EAAA9S,IAAAmtD,EAAApB,UAAArsD,EAAK,IAAAohC,UAAU6B,iBAAiBvpB,GACjC,GAAApZ,IAAAmtD,EAAAtB,SAAAnsD,EAAc,GAAA6B,IAAI7B,MAAKo0B,KAC1B,EAAA9zB,IAAAmtD,EAAAzoD,MAAAhF,MAAKgF,OACL,EAAA1E,IAAAmtD,EAAA7Q,MAAA58C,MAAK48C,oBACN58C,EAAI,IAAC+G,MAAQ,WACH,EAAAzG,IAAAmtD,EAAArmB,eAAApnC,MAAKonC,gBACL,EAAA9mC,IAAAmtD,EAAAlmB,eAAAvnC,MAAKunC,gBACX,EAAAjnC,IAAAmtD,EAAAnsB,SAAAthC,MAAKshC,UACP,EAAAhhC,IAAAmtD,EAAAllB,OAAAvoC,EAAK,IAAAohC,UAAUuH,GAAK,GAChB,EAAAroC,IAAAmtD,EAAAjB,WAAAxsD,MAAKwsD,YACJ,EAAAlsD,IAAAmtD,EAAAlJ,YAAA9e,GAAkBzlC,EAAI,MAC5B,EAAAM,IAAAmtD,EAAA30B,MAAA94B,MAAK84B,OACJ,EAAAx4B,IAAAmtD,EAAA10B,OAAA/4B,MAAK+4B,QACC,EAAAz4B,IAAAmtD,EAAA5sB,aAAA7gC,MAAK6gC,cACJ,EAAAvgC,IAAAmtD,EAAA3sB,cAAA9gC,MAAK8gC,qCACL9gC,EAAI,IAAC0gC,SAAS5H,8BACb94B,EAAI,IAAC0gC,SAAS3H,QACpB,EAAAz4B,IAAAmtD,EAAA3qB,SAAA9iC,MAAK8iC,yLAnCZ9iC,EAAa,IAAU,MAAAwK,EAAAxK,GAAAA,MAAKo0B,mBAAjCxzB,OAAIC,GAAA,EAAA,iKADRgC,EAiDMH,EAAA25C,EAAAv5C,iFAhDG9C,EAAa,gFAAlBY,OAAIC,GAAA,wJAtBGmwC,kBAAAA,EAAoB,GAACuL,qBACxB9b,EAAYyR,eAAEA,EAAc6R,iBAAEA,EAAgBlE,mBAAEA,EAAkBrS,oBAAEA,EAAmBnB,aAAEA,GAAiBwQ,oHAC5GqP,EAA2C,oBAAnBwB,eACxB,KACI,IAAAA,gBAAgBC,IACZ,MAAAviD,MAAcF,IACpByiD,EAAQnvD,SAASovD,IACP,MAAAx5B,EAAKw5B,EAAMlrD,OAAO6B,aAAa,WACrC6G,EAAQnJ,IAAImyB,EAAE,CACVA,KACAoS,YAAaonB,EAAMlrD,OACnBurC,OAAO,OAGfT,EAAoBpiC,EAAO,WAEnCvE,GAAS,KACLqlD,GAAgB2B,YAAU,kdCoEhB7tD,EAAa,oRAiBPA,EAAY,IACb0lD,UAAA1lD,OAAa,OAClBA,EAAQ,mBACEA,EAAY,mBACZA,EAAY,gBACfA,EAAc,cAChBA,EAAY,0FA9ClBuQ,GAAE,CAAE,oBAAqBvQ,EAAS,qBAIhCA,EAAE,IAWCoE,EAAAumB,EAAA,aAAAmjC,EAAc,OAAd9tD,WACRb,EACAa,EAAS,IACPA,EAAS,IACI,aAAAA,WAAaA,EAAM,mFAhBpBA,EAAY,mBALdA,EAAM,YAA1B6C,EAmDMH,EAAAsP,EAAAlP,GAlDJL,EAiDIuP,EAAA2Y,2CA3CQ3qB,EAAO,uHAkBTA,EAAa,KAAA,gpBAiBPA,EAAY,KACb,IAAAM,EAAA,KAAAytD,EAAArI,UAAA1lD,OAAa,yBAClBA,EAAQ,kCACEA,EAAY,kCACZA,EAAY,mCACfA,EAAc,iCAChBA,EAAY,yCA9ClBuQ,GAAE,CAAE,oBAAqBvQ,EAAS,oDAIhCA,EAAE,MAWCyvC,GAAA,QAAAnvC,EAAA,IAAAwtD,KAAAA,EAAc,OAAd9tD,WACRb,EACAa,EAAS,IACPA,EAAS,IACI,aAAAA,WAAaA,EAAM,oJAhBpBA,EAAY,4BALdA,EAAM,0IADtBA,EAAM,IAAAogD,GAAApgD,uEAANA,EAAM,oOAvDDo0B,GAAEmoB,GACFx1C,KAAAA,EAAO,WAASw1C,GAChBvvB,OAAAA,EAAS,IAAEuvB,GACX75C,OAAAA,EAAS,IAAE65C,QACX74C,EAAI,IAAA64C,GACJv3C,MAAAA,GAAiBu3C,GACjBhU,OAAAA,GAAkBgU,GAClByR,SAAAA,GAAW,GAAKzR,GAChB12C,SAAAA,GAAW,GAAK02C,GAChB5b,WAAAA,GAAsB4b,GACtBmJ,UAAAA,GAAqBnJ,GACrB3b,OAAAA,GAAS,GAAK2b,GACd4C,MAAAA,GAAiB5C,GACjBgE,WAAAA,GAAsBhE,GACtBiE,YAAAA,GAAuBjE,GACvBkE,UAAAA,GAAqBlE,GACrBvf,aAAAA,GAAwBuf,GACxBtf,aAAAA,GAAwBsf,WACxBrV,GAAOqV,WACPpV,GAAOoV,WACPlV,GAAOkV,WACPjV,GAAOiV,kBACPnV,GAAcmV,kBACdhV,GAAcgV,GACd0R,UAAAA,GAAqB1R,GACrBmE,iBAAAA,GAA4BnE,GAEnCK,MAAApF,EAAY,IAAE+E,EAElBh1C,EAAW,sBAAuB6sB,GAC1B,MAAA6a,WAAAA,EAAU2U,UAAEA,EAAS5O,OAAEA,EAAM6K,mBAAEA,GAAuBhD,6FACxD,MAAAlsC,EAAW7J,IAMXm5C,EAAmBT,cAQhB0O,EAAanqD,EAAOgD,GACnB,MAAA26B,EAAOysB,EAAYzmD,IAAI0sB,GACzBsN,GACA/wB,EAAS5J,EAAQ,CAAAhD,QAAO29B,4+BAhB7B8b,EAAA,GAAA4Q,EAAWrnD,GAAQ,yDACnBsnD,EAAgBC,EAAWF,IAAanM,uBAC1CzE,EAAA,GAAE+Q,EAAiB/N,WAAuB9U,GAAY8U,EAAa9B,YAAev/C,sBAClFq+C,EAAA,GAAEgR,EAAe/N,WAAqB/U,GAAY+U,EAAW/B,YAAev/C,sBAC1Eq+C,EAAA,GAAAzM,EAAepQ,GAAcoqB,qEAEvB,SAAQhnD,GACP,MAAA29B,EAAOysB,EAAYzmD,IAAI0sB,GACzBsN,IACAue,EAAiB7rB,GACjBzjB,EAAS,YAAe,CAAA5M,QAAO29B,2BAsBhB94B,IACfslD,EAAatlD,EAAG,kBAAiB,EAEnBA,IACdslD,EAAatlD,EAAG,iBAAgB,EAElBA,IACdslD,EAAatlD,EAAG,iBAAgB,saC9EpC,IAAAjC,QAAA8nD,GAAoBlS,GAEpB11C,UAAA6nD,GAAsBnS,SAE1B51C,GAAO,KACH8nD,MACOC,sRCAK1uD,EAAM,4MAANA,EAAM,yJADbA,EAAQ,IAAY,MAAAwK,EAAAxK,GAAAA,KAAOo0B,mBAAhCxzB,OAAIC,GAAA,EAAA,kHADRgC,EAIOH,EAAAisD,EAAA7rD,8EAHE9C,EAAQ,gFAAbY,OAAIC,GAAA,+IAJA,MAAAmjD,QAAAA,GAAYnH,2KC+BN78C,EAAK,oFAGCA,EAAW,eACnBA,EAAK,iDALb6C,EAOEH,EAAAksD,EAAA9rD,8BANQ9C,EAAK,8BAGCA,EAAW,qBACnBA,EAAK,iFAbHA,EAAK,oFAGCA,EAAW,8DAJ3B6C,EAOEH,EAAAksD,EAAA9rD,8BANQ9C,EAAK,8BAGCA,EAAW,oEALxBA,EAAI,KAAKo+B,GAAWywB,MAAKzO,GASpBpgD,EAAI,KAAKo+B,GAAW0wB,YAAW3O,6IAjBzBngD,EAAK,8BACJA,EAAM,wHAJzB6C,EA8BSH,EAAAipC,EAAA7oC,qIA3BS9C,EAAK,2CACJA,EAAM,+IAddo0B,GAAEmoB,QACFx1C,GAAIw1C,GACJzjB,MAAAA,EAAQ,MAAIyjB,GACZxjB,OAAAA,EAAS,MAAIwjB,GACbwS,YAAAA,EAAc,eAAaxS,GAC3ByS,OAAAA,EAAS,sBAAoBzS,GAC7BryB,MAAAA,GAAiBqyB,GACjB0S,YAAAA,GAAuB1S,whBCYxBnoB,GAAAp0B,MAAKo0B,GACDpH,OAAAhtB,MAAKgtB,OACLtqB,OAAA1C,MAAK0C,OACPgB,KAAA1D,MAAK0D,KACJsB,MAAAhF,MAAKgF,MACFgpD,SAAAhuD,MAAKguD,SACLnoD,SAAA7F,MAAK6F,oBACH7F,EAAI,IAAC2gC,YAAc3gC,EAAmB,GACvC0lD,UAAA1lD,MAAK0lD,UACR9kB,OAAA5gC,MAAK4gC,OACNue,MAAAn/C,MAAKm/C,MACAoB,WAAAvgD,MAAKugD,WACJC,YAAAxgD,MAAKwgD,YACPC,UAAAzgD,MAAKygD,UACFzjB,aAAAh9B,MAAKg9B,aACLC,aAAAj9B,MAAKi9B,aACViK,QAAAlnC,MAAKknC,QACLC,QAAAnnC,MAAKmnC,QACLE,QAAArnC,MAAKqnC,QACLC,QAAAtnC,MAAKsnC,QACEF,eAAApnC,MAAKonC,eACLG,eAAAvnC,MAAKunC,eACV0mB,UAAAjuD,MAAKiuD,UACEvN,iBAAA1gD,MAAK0gD,iBAChB9D,MAAA58C,MAAK48C,WACN58C,EAAI,IAAC+G,MAAQ,UACXwhC,OAAAvoC,MAAKuoC,6OA1BT,EAAAjoC,IAAA4uD,EAAA96B,GAAAp0B,MAAKo0B,IACD,EAAA9zB,IAAA4uD,EAAAliC,OAAAhtB,MAAKgtB,QACL,EAAA1sB,IAAA4uD,EAAAxsD,OAAA1C,MAAK0C,QACP,EAAApC,IAAA4uD,EAAAxrD,KAAA1D,MAAK0D,MACJ,EAAApD,IAAA4uD,EAAAlqD,MAAAhF,MAAKgF,OACF,EAAA1E,IAAA4uD,EAAAlB,SAAAhuD,MAAKguD,UACL,EAAA1tD,IAAA4uD,EAAArpD,SAAA7F,MAAK6F,6BACH7F,EAAI,IAAC2gC,YAAc3gC,EAAmB,IACvC,EAAAM,IAAA4uD,EAAAxJ,UAAA1lD,MAAK0lD,WACR,EAAAplD,IAAA4uD,EAAAtuB,OAAA5gC,MAAK4gC,QACN,EAAAtgC,IAAA4uD,EAAA/P,MAAAn/C,MAAKm/C,OACA,EAAA7+C,IAAA4uD,EAAA3O,WAAAvgD,MAAKugD,YACJ,EAAAjgD,IAAA4uD,EAAA1O,YAAAxgD,MAAKwgD,aACP,EAAAlgD,IAAA4uD,EAAAzO,UAAAzgD,MAAKygD,WACF,EAAAngD,IAAA4uD,EAAAlyB,aAAAh9B,MAAKg9B,cACL,EAAA18B,IAAA4uD,EAAAjyB,aAAAj9B,MAAKi9B,cACV,EAAA38B,IAAA4uD,EAAAhoB,QAAAlnC,MAAKknC,SACL,EAAA5mC,IAAA4uD,EAAA/nB,QAAAnnC,MAAKmnC,SACL,EAAA7mC,IAAA4uD,EAAA7nB,QAAArnC,MAAKqnC,SACL,EAAA/mC,IAAA4uD,EAAA5nB,QAAAtnC,MAAKsnC,SACE,EAAAhnC,IAAA4uD,EAAA9nB,eAAApnC,MAAKonC,gBACL,EAAA9mC,IAAA4uD,EAAA3nB,eAAAvnC,MAAKunC,gBACV,EAAAjnC,IAAA4uD,EAAAjB,UAAAjuD,MAAKiuD,WACE,EAAA3tD,IAAA4uD,EAAAxO,iBAAA1gD,MAAK0gD,kBAChB,EAAApgD,IAAA4uD,EAAAtS,MAAA58C,MAAK48C,oBACN58C,EAAI,IAAC+G,MAAQ,WACX,EAAAzG,IAAA4uD,EAAA3mB,OAAAvoC,MAAKuoC,+cA5BVvoC,EAAa,IAAU,MAAAwK,EAAAxK,GAAAA,MAAKo0B,mBAAjCxzB,OAAIC,GAAA,EAAA,oDAoCDb,EAAa,GAACY,OAAS,GAACw/C,GAAApgD,6LAzC/B6C,EAmDMH,EAAA25C,EAAAv5C,GAlDJL,EAEM45C,EAAArqC,wHAEChS,EAAa,gDAoCfA,EAAa,GAACY,OAAS,yJApC1BA,OAAIC,GAAA,sNAbGsuD,GAAkB5S,qBACrB6F,EAAYiC,iBAAEA,EAAkB7iB,yBAASuf,GAAiBlB,mBAAIA,GAAuBhD,oEAC7Fl2C,GAAO,KACCwoD,GACApO,EAAkBoO,EAAkB,0NAgDpCptD,EAAAsiD,EAAA+K,GAAoB,EAAIA,EAAA,OAGxBrtD,EAAAsiD,EAAA+K,GAAoB,EAAKA,EAAA,8LClDThqD,EAAAi3C,EAAA,QAAU,iBAAVr8C,KAAqBA,EAAK,MAAMA,EAAK,QACpCoF,EAAAi3C,EAAA,SAAW,iBAAXr8C,KAAsBA,EAAM,MAAMA,EAAM,QAC/BoF,EAAAi3C,EAAA,YAAA,aAAAr8C,WAAQA,EAAC,iBAJzC6C,EAKEH,EAAA25C,EAAAv5C,gBAHoBsC,EAAAi3C,EAAA,QAAU,iBAAVr8C,KAAqBA,EAAK,MAAMA,EAAK,aACpCoF,EAAAi3C,EAAA,SAAW,iBAAXr8C,KAAsBA,EAAM,MAAMA,EAAM,aAC/BoF,EAAAi3C,EAAA,YAAA,aAAAr8C,WAAQA,EAAC,gDALtCA,EAAS,IAAAogD,GAAApgD,oEAATA,EAAS,0HAPK,IAAAoT,EAAAA,EAAI,GAACmpC,GACb7iC,EAAAA,EAAI,GAAC6iC,GACLzjB,MAAAA,EAAQ,GAACyjB,GACTxjB,OAAAA,EAAS,GAACwjB,GACV8S,UAAAA,GAAY,GAAI9S,+UCEXv8C,EAAc,IAA2B,SAAvBA,EAAkB,IAC3C84B,MAAA94B,MAAgB84B,MACfC,OAAA/4B,MAAgB+4B,OACrB3lB,EAAApT,MAAgBoT,EAChBsG,EAAA1Z,MAAgB0Z,6FAJL1Z,EAAc,IAA2B,SAAvBA,EAAkB,KAC3C,EAAAM,IAAAgvD,EAAAx2B,MAAA94B,MAAgB84B,OACf,EAAAx4B,IAAAgvD,EAAAv2B,OAAA/4B,MAAgB+4B,QACrB,EAAAz4B,IAAAgvD,EAAAl8C,EAAApT,MAAgBoT,GAChB,EAAA9S,IAAAgvD,EAAA51C,EAAA1Z,MAAgB0Z,+IARb+lC,EAAaC,kBAAEA,GAAsB7C,yNC4CA,IAAM,2FApBhCz3C,EAAAi3C,EAAA,QAAAr8C,KAAO84B,MAAK,MAAc1zB,EAAAi3C,EAAA,SAAAr8C,KAAO+4B,OAAM,MAA2B3zB,EAAAi3C,EAAA,YAAA,aAAAr8C,EAAO,GAAAoT,EAAO,OAAApT,KAAO0Z,EAAC,yDAFzG7W,EAuBMH,EAAA25C,EAAAv5C,8CAnBFkpD,UAAU,EACVhtD,MAAAgB,EAAK,GACLmwC,OAAMnwC,EAAA,IAGNkwC,YAAWlwC,EAAA,IAGXowC,WAAUpwC,EAAA,yBAIIA,EAAa,gBACnBA,EAAO,8CAfFoF,EAAAi3C,EAAA,QAAAr8C,KAAO84B,MAAK,iBAAc1zB,EAAAi3C,EAAA,SAAAr8C,KAAO+4B,OAAM,iBAA2B3zB,EAAAi3C,EAAA,YAAA,aAAAr8C,EAAO,GAAAoT,EAAO,OAAApT,KAAO0Z,EAAC,yHAHtG,QAAA61C,EAAuB,UAAvBvvD,EAAuB,IAAWA,MAAU4kC,GAAU5kC,EAAM,GAACoT,IAAMwxB,GAAU5kC,KAAO0Z,oFAApF,EAAApZ,IAAAivD,EAAuB,UAAvBvvD,EAAuB,IAAWA,MAAU4kC,GAAU5kC,EAAM,GAACoT,IAAMwxB,GAAU5kC,KAAO0Z,kOAlBnF,MAAA1a,EAAQ69C,MACN6C,kBAAAA,EAAiB3xC,MAAEA,EAAK0xB,WAAEA,GAAezgC,kEAC3C,MAAA2R,EAAW7J,IACb,IAAAs7B,EAAS,8CACiB,UAAvB4oB,OACH5oB,EAAS5C,GAAuB+e,EAAW,CAAI3xC,OAASjK,KAAWA,EAAKkD,4BAGnE,SAAc9B,SACbohD,EAAgBqK,EAAO5iD,QAAQ9B,GAAMA,EAAEjF,WAC7C8K,EAAS,uBAAsB,CAAI5C,MAAOo3C,EAAephD,WAEpD,SAAQA,SACPohD,EAAgBqK,EAAO5iD,QAAQ9B,GAAMA,EAAEjF,WAC7C8K,EAAS,iBAAgB,CAAI5C,MAAOo3C,EAAephD,eAWxC,CAAAA,EAAOvE,EAAGiwD,EAAI1hD,KACrB4C,EAAS,WAAc,CAAA5M,QAAOukC,WAAY,KAAMv6B,SAAK,EAEzC,CAAAhK,EAAOvE,EAAGiwD,EAAI1hD,KAC1B4C,EAAS,gBAAmB,CAAA5M,QAAOukC,WAAY,KAAMv6B,SAAK,EAE/C,CAAAhK,EAAOvE,EAAGiwD,EAAI1hD,KACzB4C,EAAS,eAAkB,CAAA5M,QAAOukC,WAAY,KAAMv6B,SAAK,0ECuD1D,SAAS2hD,GAAS/sD,EAAMgtD,GAC9B,IAAIC,QAAEA,GAAU,EAAIC,QAAEA,EAAO9oD,KAAEA,EAAO,WAAc4oD,EAKpD,SAAS3rD,EAAQD,GAChB,MAAM+rD,EAAqB5lD,MAAM0F,QAAQigD,GAAWA,EAAU,CAACA,GAEzDE,EAAc,CACnBC,IAAKjsD,EAAMksD,OACXC,KAAMnsD,EAAMib,QACZmxC,MAAOpsD,EAAM83B,SACbu0B,KAAMrsD,EAAMssD,SAEb,IAAK,MAAMR,KAAWC,EAAoB,CACzC,MAAMQ,EAAgB,CACrBC,SAAU,GACV3yC,gBAAgB,EAChBgyC,SAAS,KACNC,IAEEU,SAAEA,EAAQxrD,IAAEA,EAAG7F,SAAEA,EAAQ0e,eAAEA,EAAgBgyC,QAASY,GAAmBF,EAC7E,GAAIE,EAAgB,CACnB,GAAID,EAAS3vD,OAAQ,CAOpB,KANsBsJ,MAAM0F,QAAQ2gD,GAAYA,EAAW,CAACA,IAAW5jD,KAAK8jD,GAC5D,iBAARA,EAAmB,CAACA,GAAOA,IAEL7hB,MAAM6hB,GACnCA,EAAI3gD,OAAOygD,GAAaR,EAAYQ,OAEtB,QACf,CACD,GAAIxsD,EAAMgB,MAAQA,EAAK,CAClB6Y,GAAgB7Z,EAAM6Z,iBAE1B,MAAM5W,EAAS,CACdrE,OACAktD,QAASS,EACTI,cAAe3sD,GAEhBpB,EAAKyV,cAAc,IAAIjR,YAAY,WAAY,CAAEH,YACjD9H,IAAW8H,EACX,CACD,CACD,CACD,CAID,OAFI4oD,GAASjtD,EAAKuB,iBAAiB6C,EAAM/C,GAElC,CACN2E,OAASA,IACR,MAAQinD,QAASe,GAAa,EAAM5pD,KAAM6pD,EAAU,WAAcjoD,GAE9DinD,GAAae,GAAc5pD,IAAS6pD,GAE5BhB,GAAWe,GACtBhuD,EAAKuB,iBAAiB0sD,EAAS5sD,GAF/BrB,EAAKwB,oBAAoB4C,EAAM/C,GAKhC4rD,EAAUe,EACV5pD,EAAO6pD,EACPf,EAAUlnD,EAAOknD,OAAO,EAEzBztD,QAAS,KACRO,EAAKwB,oBAAoB4C,EAAM/C,EAAQ,EAG1C,8FC/GI6rD,QAASgB,GAAmB7wD,EAAY,GAAAA,EAAA,KACxC+G,KAAM,sCAGN8oD,QAASgB,GAAmB7wD,EAAY,GAAAA,EAAA,KACxC+G,KAAM,oCAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,sCAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,oCAGN8oD,QAASgB,GAAmB7wD,EAAS,GAAAA,EAAA,KASrC+G,KAAM,sCAGN8oD,QAASgB,GAAmB7wD,EAAS,GAAAA,EAAA,KACrC+G,KAAM,oCAGN8oD,QAASgB,GAAmB7wD,EAAgB,GAAAA,EAAA,KAC5C+G,KAAM,sCAGN8oD,QAASgB,GAAmB7wD,EAAgB,GAAAA,EAAA,KAC5C+G,KAAM,oCAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,sCAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,2BAhDC/G,EAAqB,4BACdA,EAAqB,+DAEnC6vD,QAASgB,GAAmB7wD,EAAY,GAAAA,EAAA,KACxC+G,KAAM,qDAGN8oD,QAASgB,GAAmB7wD,EAAY,GAAAA,EAAA,KACxC+G,KAAM,mDAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,qDAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,mDAGN8oD,QAASgB,GAAmB7wD,EAAS,GAAAA,EAAA,KASrC+G,KAAM,qDAGN8oD,QAASgB,GAAmB7wD,EAAS,GAAAA,EAAA,KACrC+G,KAAM,mDAGN8oD,QAASgB,GAAmB7wD,EAAgB,GAAAA,EAAA,KAC5C+G,KAAM,qDAGN8oD,QAASgB,GAAmB7wD,EAAgB,GAAAA,EAAA,KAC5C+G,KAAM,oDAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,sDAGN8oD,QAASgB,GAAmB7wD,EAAiB,GAAAA,EAAA,KAC7C+G,KAAM,oCArFD,SAAA+pD,GAAY/rD,GACV,OAAQ,OAARA,GAA+B,iBAARA,EAEzB,SAAAgsD,GAAYhsD,GACV,OAAA+rD,GAAY/rD,IAAOA,EAAIwrD,UAAQ,YAUjCM,GAAmB9rD,EAAK7F,UAChBgL,MAAM0F,QAAQ7K,GAAOA,EAAG,CAAIA,IAC7B4H,KAAKqkD,UACPC,EAXL,SAAalsD,GACd,OAAAA,QAGO,GAEJ+rD,GAAY/rD,GAAOA,EAAIA,IAAMA,EAKdmsD,CAAaF,UAE3BjsD,IAAKksD,EACLV,SAAUQ,GAAYC,GACtBpB,QAAuB,OAAdqB,EACT/xD,kCA5BD,IAAAiyD,aAAAA,EAAe,SAAO5U,GACtB6U,kBAAAA,GAAoB7rB,KAAY,OAAS,YAASgX,GAClD8U,UAAAA,EAAY,aAAW9U,GACvB+U,iBAAAA,EAAmB,KAAG/U,GACtBgV,kBAAAA,GAAoBhsB,KAAY,OAAS,YAASgX,4BACrD+G,EAAmB3D,yBAAEA,EAAwB4D,iBAAEA,EAAgBC,wBAAEA,EAAuBrJ,yBAAEA,EAAwBsF,cAAEA,GAAkB5C,iSA4B1I4C,EAAcx9C,IAAI,MAClBqhD,EAAoBrhD,KAAI,GACxB09C,EAAyB19C,KAAI,GAC7BshD,EAAiBthD,KAAI,GACrBuhD,EAAwBvhD,KAAI,GAC5Bk4C,EAAyBl4C,KAAI,QAQmBqhD,EAAoBrhD,KAAI,OAIxBqhD,EAAoBrhD,KAAI,OAInB09C,EAAyB19C,KAAI,OAI7B09C,EAAyB19C,KAAI,GAI1C+E,IAEpCA,EAAO0pD,cAAc1xC,SACrBhY,EAAO0pD,cAAcL,SACrBrpD,EAAO0pD,cAAc70B,UpCqgB7B,SAAwB93B,GAEpB,MAAMrB,EAAUqB,EAAMytD,mBAAmB,IAAMztD,EAAMrB,OAGrD,OAFgBwjC,GAAU2R,SAASn1C,GAAQ+uD,WAAa/uD,GAAQk2B,aAAa,sBAEzDl2B,GAAQ+0C,QAAQ,SACxC,CoC1gB6Bia,CAAe1qD,EAAO0pD,gBAC3CnN,EAAiBthD,KAAI,QAMoBshD,EAAiBthD,KAAI,OAIduhD,EAAwBvhD,KAAI,OAI5BuhD,EAAwBvhD,KAAI,OAI3Bk4C,EAAyBl4C,KAAI,OAI7Bk4C,EAAyBl4C,KAAI,6QCnD1EjC,EAAiB,IAAAmgD,GAAAngD,kEAHfuQ,GAAE,CAAE,0BAA2BwuB,GAAoB/+B,EAAW,GAAC29B,wBAD/D39B,EAAM,iBAAUA,EAAO,2DAA6CA,EAAc,YAA9F6C,EAQMH,EAAAsP,EAAAlP,GAPJL,EAMIuP,EAAA2Y,iHAHI3qB,EAAiB,8EAHfuQ,GAAE,CAAE,0BAA2BwuB,GAAoB/+B,EAAW,GAAC29B,qDAD/D39B,EAAM,6BAAUA,EAAO,2BAA6CA,EAAc,sIAK/EA,EAAI,6FAAb6C,EAA0EH,EAAAw9C,EAAAp9C,yBAAjE9C,EAAI,kEANhB2xD,EAAA3xD,KAAY09B,YAAU0iB,GAAApgD,yEAAtBA,KAAY09B,qPAlCNk0B,eAAAA,EAAiB,IAAErV,GACnBv3C,MAAAA,EAAQ,IAAEu3C,GACVsV,kBAAAA,GAAoB,GAAKtV,EAC5B,MAAAzjB,MAAAA,EAAKC,OAAEA,EAAM+F,WAAEA,EAAU+kB,mBAAEA,GAAuBhH,0FACtD,IAAAyD,EAAO,6NACJxC,EAAYpgB,aAAem0B,EAAiB,CACvC,MAAA1nD,KAAAA,EAAI4zB,GAAEA,EAAEF,aAAEA,EAAYI,WAAEA,GAAe6f,EACzCgU,EAAU,CACZ5qB,QAAS/8B,EAAKiJ,EACd+zB,QAASh9B,EAAKuP,EACd0tB,eAAgBvJ,EAChBwJ,QAAStJ,EAAG3qB,EACZk0B,QAASvJ,EAAGrkB,EACZ6tB,eAAgBtJ,UAEZ8zB,GACC,KAAA5zB,GAAmB2lB,YACnBxD,GAAQrZ,GAAc6qB,GAAUxR,SAEhC,KAAAniB,GAAmB6zB,KACnBxU,EAAA,GAAA8C,GAAQ1V,GAAiB,IACnBknB,EACHjnB,aAAc,IAACyV,SAGlB,KAAAniB,GAAmB8zB,gBACnB3R,GAAQ1V,GAAkBknB,GAAUxR,sBAGpCA,GAAQzX,GAAgBipB,GAAUxR,gOCrBtC1D,MAAAsV,EAAA3hD,GAAI,CAAA,qBAAsBvQ,QAAcA,EAAe,mBAG1DA,EAAW,4GADOA,EAAkB,GAAG,OAAS,YAHtD6C,EAOMH,EAAA25C,EAAAv5C,iIANGyN,GAAE,CAAE,qBAAsBvQ,EAAS,MAAKA,EAAe,gDAG1DA,EAAW,2BADOA,EAAkB,GAAG,OAAS,kLAX3Cu/B,SAAAA,EAAW,aAAWgd,GACtBv3C,MAAAA,GAAiBu3C,GACxBK,MAAApF,GAAqB+E,EAEjB,MAAAmD,kBAAAA,GAAsB7C,4OAC3BsV,EAAe,GAAM5yB,IAAW/tB,MAAM,8yBCIrC3O,EAOIH,EAAA9D,EAAAkE,8CAbF6uD,GAAA3xD,MAAYoyD,iBAAehS,GAAApgD,yEAA3BA,MAAYoyD,kNAJP,IAAAC,WAAAA,GAAsB9V,GACtBhd,SAAAA,EAAW,gBAAcgd,kMCA7B,SAAS+V,GAAYtzD,GAAO2kD,UAAEA,EAASC,UAAEA,EAAS1hB,QAAEA,EAAOC,QAAEA,EAAO3I,gBAAEA,EAAe2e,kBAAEA,SACxEh5C,IAAdwkD,GACA3kD,EAAM+oD,aAAapE,QAELxkD,IAAdykD,GACA5kD,EAAMgpD,aAAapE,QAEPzkD,IAAZ+iC,GACAljC,EAAM8pD,WAAW5mB,QAEL/iC,IAAZgjC,GACAnjC,EAAM+pD,WAAW5mB,QAEGhjC,IAApBq6B,GACAx6B,EAAM+8C,mBAAmBviB,QAEHr6B,IAAtBg5C,GACAn5C,EAAMgqD,qBAAqB7Q,EAEnC,CAEO,SAASoa,GAAkBvzD,EAAO0C,GADzB,IAACgN,KAELhN,EAFatD,OAAOsD,KAAKgN,IAEnBlQ,SAASg0D,IACnB,MAAM7pD,EAASjH,EAAK8wD,QACLrzD,IAAXwJ,GAEA3J,EAAMwzD,GAAMvwD,IAAI0G,EACnB,GAET,CClBO,SAAS8pD,GAAkBC,EAAY,SAC1C,MAAMC,EAAiB7jD,GAAS,SAAU7M,IACtC,GAAkB,WAAdywD,EAEA,YADAzwD,EAAIywD,GAGR,MAAME,EAjBY,oBAAXtwD,QAA2BA,OAAOuwD,WAGtCvwD,OAAOuwD,WAAW,gCAFd,KAiBDC,EAAuB,IAAM7wD,EAAI2wD,GAAYt/C,QAAU,OAAS,SAGtE,OAFArR,EAAI2wD,GAAYt/C,QAAU,OAAS,SACnCs/C,GAAY1uD,iBAAiB,SAAU4uD,GAChC,KACHF,GAAYzuD,oBAAoB,SAAU2uD,EAAqB,CAClE,IAEL,OAAOH,CACX,+hBCuM0B3yD,EAA4B,SACrCA,EAAmB,GACP6xD,kBAAA7xD,MAAQ+yD,wvBAI7BlwD,EAA+CH,EAAAswD,EAAAlwD,YAC/CD,EAA4CH,EAAAuwD,EAAAnwD,6JAP1B9C,EAA4B,sBACrCA,EAAmB,IACP,EAAAM,EAAA,KAAA4yD,EAAArB,kBAAA7xD,MAAQ+yD,61BAdpBpb,eAAcx4C,IAAda,OAAiCA,EAAS,6LAA1C,OAAAM,EAAA,KAAA6yD,EAAAxb,eAAcx4C,IAAda,OAAiCA,EAAS,wYAhBtCA,EAAY,iDAIZ65C,qBAAoB16C,IAApBa,MAAgCu9B,GAAgBosB,KAAO3pD,EAAe,IACrE+5C,sBAAqB56C,IAArBa,OAAwCA,EAAgB,IAC5Di6C,kBAAiB96C,IAAjBa,OAAoCA,EAAY,IAC3Ck6C,uBAAsB/6C,IAAtBa,OAAyCA,EAAiB,IAChEg6C,iBAAgB76C,IAAhBa,OAAmCA,EAAW,IAC9C45C,iBAAgBz6C,IAAhBa,OAAoCA,EAAW,IACjD23C,eAAcx4C,IAAda,OAAiCA,EAAS,IAClCm4C,uBAAsBh5C,IAAtBa,MAAkC,EAAIA,EAAiB,yFA+CxCA,EAAmB,uEAzEhD48C,MAAAsV,EAAA3hD,GAAI,CAAA,cAAevQ,MAAWA,EAAe,8CAIhDA,EAAW,8OATjB6C,EAgFMH,EAAA25C,EAAAv5C,yFzJ0qBC,SAAoCH,EAAMzE,GAEhB,WADT2X,iBAAiBlT,GACrB48B,WAClB58B,EAAKqC,MAAMu6B,SAAW,YAEvB,MAAM6zB,EAASjwD,EAAQ,UACvBiwD,EAAO5uD,aACN,QACA,+JAGD4uD,EAAO5uD,aAAa,cAAe,QACnC4uD,EAAOC,UAAY,EACnB,MAAMttD,EAAcE,IAKpB,IAAI5G,EAoBJ,OAnBI0G,GACHqtD,EAAOr1D,IAAM,kFACbsB,EAAcyE,EACbxB,OACA,WACoCyB,IAC/BA,EAAMipB,SAAWomC,EAAOE,eAAep1D,GAAI,MAIjDk1D,EAAOr1D,IAAM,cACbq1D,EAAOG,OAAS,KACfl0D,EAAcyE,EAAOsvD,EAAOE,cAAe,SAAUp1D,GAGrDA,GAAI,GAGNuE,EAAOE,EAAMywD,GACN,MACFrtD,GAEO1G,GAAe+zD,EAAOE,gBADhCj0D,IAID2D,EAAOowD,EAAO,CAEhB,iXyJhxBqB,KAAA9yD,EAAA,KAAAkzD,EAAA3Z,qBAAoB16C,IAApBa,MAAgCu9B,GAAgBosB,KAAO3pD,EAAe,KACrE,KAAAM,EAAA,KAAAkzD,EAAAzZ,sBAAqB56C,IAArBa,OAAwCA,EAAgB,KAC5D,KAAAM,EAAA,KAAAkzD,EAAAvZ,kBAAiB96C,IAAjBa,OAAoCA,EAAY,KAC3C,MAAAM,EAAA,KAAAkzD,EAAAtZ,uBAAsB/6C,IAAtBa,OAAyCA,EAAiB,KAChE,MAAAM,EAAA,KAAAkzD,EAAAxZ,iBAAgB76C,IAAhBa,OAAmCA,EAAW,KAC9C,MAAAM,EAAA,KAAAkzD,EAAA5Z,iBAAgBz6C,IAAhBa,OAAoCA,EAAW,KACjD,OAAAM,EAAA,KAAAkzD,EAAA7b,eAAcx4C,IAAda,OAAiCA,EAAS,KAClC,QAAAM,EAAA,KAAAkzD,EAAArb,uBAAsBh5C,IAAtBa,MAAkC,EAAIA,EAAiB,gJA+CxCA,EAAmB,wIAzEhDyvC,GAAA,WAAAnvC,EAAA,IAAA4xD,KAAAA,EAAA3hD,GAAI,CAAA,cAAevQ,MAAWA,EAAe,SAAA,CAAA48C,MAAAsV,kDAIhDlyD,EAAW,g8C3J6DV,SAAuByzD,GAC7B,MAAMjyD,EAAS,CAAA,EACf,IAAK,MAAMuD,KAAO0uD,EACjBjyD,EAAOuD,IAAO,EAEf,OAAOvD,CACR,K2J9OW,IAAA4yB,GAAAA,EAAK,KAAGmoB,SACRxuC,GAAKwuC,SACL/a,GAAK+a,GACLva,QAAAA,GAAmBua,GACnB8G,eAAAA,GAA0B9G,GAC1Bra,QAAAA,GAAmBqa,GACnBpa,QAAAA,GAAmBoa,GACnBiN,gBAAAA,GAA2BjN,GAC3Bla,SAAAA,GAAoBka,MACpB,IAwDP9O,EACAzU,EACAC,GA1DO0qB,UAAAA,GAAqBpH,GACrBqH,UAAAA,GAAqBrH,GACrB4U,aAAAA,GAAwB5U,GACxBkH,cAAAA,GAAyBlH,GACzB+U,iBAAAA,GAA4B/U,GAC5B6U,kBAAAA,GAA6B7U,GAC7BgV,kBAAAA,GAA6BhV,GAC7BrK,eAAAA,GAA0BqK,GAC1BwH,iBAAAA,GAA4BxH,GAC5BjJ,kBAAAA,GAA6BiJ,GAC7BsD,mBAAAA,GAA8BtD,GAC9BtX,SAAAA,GAAoBsX,GACpB8U,UAAAA,GAAqB9U,GACrB3I,iBAAAA,GAA4B2I,GAC5BsH,mBAAAA,GAA8BtH,kBAC9BnI,GAAiB9W,GAAemY,QAAM8G,GACtCmX,oBAAAA,GAAsB,IAAEnX,GACxBoX,6BAAAA,GAA+B,IAAEpX,GACjCqN,YAAAA,IAAuBrN,GACvBsN,OAAAA,IAAkBtN,GAClBuN,UAAAA,IAAqBvN,GACrBtH,kBAAAA,IAA6BsH,GAC7B/iB,gBAAAA,IAA2B+iB,GAC3B3Z,WAAAA,IAAsB2Z,GACtB8F,0BAAAA,IAAqC9F,mBACrC1C,GAAkBtc,GAAgBosB,MAAIpN,GACtCxC,iBAAAA,IAAmB,GAAIwC,GACvBtC,aAAAA,IAAe,GAAIsC,GACnBrC,kBAAAA,IAAoB,GAAIqC,GACxBvC,YAAAA,IAAc,GAAIuC,GAClB3C,YAAAA,IAAc,GAAK2C,GACnB5E,UAAAA,IAAY,GAAI4E,GAChBiO,gBAAAA,IAA2BjO,GAC3B3G,iBAAAA,IAAmB,GAAI2G,GACvBhJ,kBAAAA,IAAoB,GAAIgJ,GACxBkG,QAAAA,IAAmBlG,GACnB2H,SAAAA,IAAoB3H,GACpBS,aAAAA,IAAwBT,GACxBqX,oBAAAA,IAA+BrX,GAC/B8V,WAAAA,IAAsB9V,GACtB4S,mBAAAA,IAA8B5S,GAC9BzjB,MAAAA,IAAiByjB,GACjBxjB,OAAAA,IAAkBwjB,GAClBmW,UAAAA,GAAY,SAAOnW,GACnBC,UAAAA,IAAqBD,GACrBW,eAAAA,IAA0BX,GAC1Ba,aAAAA,IAAwBb,GACxB4H,eAAAA,IAA0B5H,GAC1BsX,OAAAA,IAAkBtX,GAClBrd,WAAAA,IAAsBqd,GACtBpE,kBAAAA,GAAoB,GAACoE,GACrBvL,kBAAAA,GAAoB,GAACuL,GACrB0H,mBAAAA,GAAqB,WAAS1H,GAC9Bv3C,MAAAA,IAAiBu3C,GACxBK,MAAApF,IAAqB+E,QAKnBuX,GAAe7U,GAAauK,EAC5BxqD,GxJ8EC,SAAoB+F,GAC1B,OAAO0B,IAAwB9G,GAAG6H,QAAQ3F,IAAIkD,EAC/C,CwJhFcgvD,CAAWhvD,IACnB83C,KxBiQC,UAA4B9uC,MAAEA,EAAKyzB,MAAEA,EAAK1I,MAAEA,EAAKC,OAAEA,EAAMiJ,QAAEA,EAAO9C,WAAEA,EAAU0D,WAAEA,IACnF,MAAM5jC,EAAQ+jD,GAAY,CAAEh1C,QAAOyzB,QAAO1I,QAAOC,SAAQiJ,UAAS9C,aAAY0D,eAI9E,OAHAr7B,EAAWxC,GAAK,CACZwkD,SAAU,IAAMvqD,IAEbA,CACX,CwBtQMg1D,CAAkB,CAChBjmD,MAAOrG,EAAIqG,GACXyzB,MAAO95B,EAAI85B,GACX1I,SACAC,UACAiJ,UACA9C,cACA0D,gBAERj8B,GAAO,KACH3H,GAAM85B,MAAM72B,IAAI+2B,GAChBh6B,GAAM+5B,OAAO92B,IAAIg3B,GACjBj6B,GAAMyuC,QAAQxrC,IAAIwrC,GAClBzuC,GAAM4nD,eAAe74C,GACrB/O,GAAMooD,eAAe5lB,GACrBxiC,GAAMg9C,aAAa3Z,QACHljC,IAAZ6iC,GACAhjC,GAAMmkD,cAAclhD,IAAI+/B,GAExBqhB,GACArkD,GAAMqkD,eAAephD,IAAIohD,GAE7BiP,GAAYtzD,GAAK,CACb2kD,YACAC,YACA1hB,UACAC,UACA3I,mBACA2e,4BAGAn5C,GAAMsqD,OAAK,KAWX,MAAA/E,YAAAA,IAAgBvlD,0BACpB,IAAAi1D,IAAe,65FAPK90D,IAAhB65B,QAA8C75B,IAAjB85B,IAC7Bj6B,GAAM85B,MAAM72B,IAAI+2B,GAChBh6B,GAAM+5B,OAAO92B,IAAIg3B,yBAOhBg7B,IAAgBC,IACjBL,OACArW,EAAA,GAAAyW,IAAe,gDAKtB,CA0BG1B,GAAkBvzD,GAzBE,CAChBg2C,OAAQ5gB,EACRyvB,qBACAjQ,mBACA6P,gBACAxe,WACAgf,sBACA/R,iBACA6R,mBACAlE,qBACAwC,6BACApN,qBACAW,oBACArC,qBACAkP,WACAyB,YACAlH,gBACA5I,kBACAd,oBACAkJ,aACAU,kBACAE,gBACA+G,kBACAjlB,8DAILozB,GAAYtzD,GAAK,CAChB2kD,YACAC,YACA1hB,UACAC,UACA3I,mBACA2e,yCAEDqF,EAAA,GAAAmV,EAAiBF,GAAkBC,m4BAIzBjlB,EAAOoe,i+CClLTsI,aAAAA,GAAwB5X,GACxB6X,aAAAA,GAAwB7X,GACxB1b,aAAAA,GAAwB0b,GACxBzb,cAAAA,GAAyByb,GACzBva,QAAAA,GAAmBua,GACnBrd,WAAAA,GAAsBqd,EAC3B,MAAAv9C,EAAQ+jD,GAAW,CACrBh1C,MAAOomD,EACP3yB,MAAO4yB,EACPt7B,MAAO+H,EACP9H,OAAQ+H,EACR5B,aACA8C,mBAEJz6B,EAAWxC,GACP,CAAAwkD,aAAgBvqD,IAEpB6H,GAAS,KACL7H,EAAMsqD,OAAK,8lBCPN/4C,GAAE,CAAE,+BAAgCvQ,EAAS,MAMhDA,EAAW,4IALoCA,EAAO,4DACDA,EAAY,2CAC7BA,EAAK,iDACCA,EAAU,kDACTA,EAAW,YAR5D6C,EAYSH,EAAAuc,EAAAnc,kMATAyN,GAAE,CAAE,+BAAgCvQ,EAAS,QAAA,CAAA48C,MAAAyX,SAMhDr0D,EAAW,wDALoCA,EAAO,4DACDA,EAAY,2CAC7BA,EAAK,iDACCA,EAAU,kDACTA,EAAW,2HAhBxDs0D,EACAC,EACArqC,EACAsqC,EACAC,uCALA7X,MAAApF,GAAqB+E,ycCDzB15C,EAEMH,EAAAsP,EAAAlP,GADJL,EAAkFuP,EAAAsuC,uQCDpFz9C,EAEMH,EAAAsP,EAAAlP,GADJL,EAA2BuP,EAAAsuC,qnBCD7Bz9C,EAIMH,EAAAsP,EAAAlP,GAHJL,EAEEuP,EAAAsuC,wrBCHJz9C,EAIMH,EAAAsP,EAAAlP,GAHJL,EAEEuP,EAAAsuC,8nBCHJz9C,EAIMH,EAAAsP,EAAAlP,GAHJL,EAEEuP,EAAAsuC,0RCgEYtgD,EAAc,IACpBA,EAAW,8HALLA,EAAe,6GAcfA,EAAc,KACpBA,EAAW,qIALLA,EAAgB,mKANhBA,EAAc,oBACpBA,EAAW,uHASLA,EAAc,qBACpBA,EAAW,ipBAWXA,EAAW,qIAHLA,EAAgB,uGAGtBA,EAAW,ycAWXA,EAAW,qIAHLA,EAAqB,uGAG3BA,EAAW,ojBAEVA,EAAa,GAAA,uWAzCjBA,EAAQ,IAAA00D,GAAA10D,KAsBRA,EAAW,IAAA20D,GAAA30D,KAWXA,EAAQ,IAAAogD,GAAApgD,0XAjCRA,EAAQ,oHAsBRA,EAAW,oHAWXA,EAAQ,sgBAxCNuQ,GAAE,CAAE,wBAAyBvQ,EAAgB,GAAEA,EAAS,yDAGnD,aAAAA,MAAa,6IAHlB,IAAAM,EAAA,KAAAs0D,EAAAhY,MAAArsC,GAAI,CAAA,wBAAyBvQ,KAAkBA,EAAS,gCAGnD,GAAAM,EAAA,KAAAs0D,EAAA,cAAA50D,MAAa,mQAhDhBu/B,SAAAA,EAAW,eAAagd,GACxBsY,SAAAA,GAAW,GAAItY,GACfuY,YAAAA,GAAc,GAAIvY,GAClBwY,SAAAA,GAAW,GAAIxY,GACfyY,cAAAA,GAAyBzY,GACzB0Y,mBAAAA,GAA8B1Y,GAC9B2Y,YAAAA,GAAuB3Y,GACvB4Y,iBAAAA,GAA4B5Y,GAC5B6Y,kBAAAA,GAA6B7Y,GAC7B0R,UAAAA,GAAqB1R,GACrBv3C,MAAAA,GAAiBu3C,GACjB8Y,YAAAA,EAAc,YAAU9Y,GACxB8G,eAAAA,GAA0B9G,GACjCK,MAAApF,EAAY,IAAE+E,EAEV,MAAAqM,OAAAA,EAAMC,QAAEA,EAAO7mB,QAAEA,EAAOK,SAAEA,EAAQH,QAAEA,EAAOC,QAAEA,EAAO+P,eAAEA,EAAc6R,iBAAEA,EAAgBlE,mBAAEA,GAAuBhD,+IACjHyY,EAAW,CACbhB,QAASU,EACTT,aAAcU,EACd/qC,MAAOgrC,EACPV,WAAYW,EACZV,YAAaW,spBAEdG,EAAgBC,GAAmBC,GAAqB1K,kDACxD2K,EAAiBzW,EAAU1uB,MAAQolC,iCACnCC,EAAiB3W,EAAU1uB,MAAQslC,4BAgBrCrY,EAAA,EAAEsY,EAAmC,eAAhBT,EAA+B,aAAe,kDAf/C,KACjBzM,GAAM,EAEY,KAClBC,GAAO,EAEW,KAClB7mB,EAAQqhB,EAAc,EAEC,KACvB7F,EAAA,EAAA+X,GAAiBA,GACjBrjB,EAAejwC,IAAIszD,GACnBxR,EAAiB9hD,IAAIszD,GACrB1V,EAAmB59C,IAAIszD,EAAa,qCChD7BQ,sVCOL/1D,EAAM,aACNA,EAAM,YACPA,EAAM,IACFoE,EAAA4xD,EAAA,QAAAC,EAAA1lD,GAAI,CAAA,kCAAmC,OAAQvQ,EAAS,cAJjE6C,EAKEH,EAAAszD,EAAAlzD,2BAJI9C,EAAM,kBACNA,EAAM,iBACPA,EAAM,IACF,EAAAM,GAAA21D,KAAAA,EAAA1lD,GAAI,CAAA,kCAAmC,OAAQvQ,EAAS,iEATtD,IAAAk2D,OAAAA,EAAS,GAAC3Z,GACjBK,MAAApF,EAAY,IAAE+E,uFDDlB,SAAWwZ,GACPA,EAAyB,MAAI,QAC7BA,EAAwB,KAAI,OAC5BA,EAAyB,MAAI,OAChC,CAJD,CAIGA,KAAsBA,GAAoB,CAAA,8JEI7B/1D,EAAS,IAChBoE,EAAAk8C,EAAA,IAAA6V,EAAA,IAAAn2D,KAAW,GAAK,QAAQA,EAAW,GAAA,SAASA,KAAW,GAAK,MAAMA,KAAW,oBAC7EuQ,GAAE,CAAE,kCAAmCvQ,EAAO,GAAEA,EAAS,cAHlE6C,EAIEH,EAAA49C,EAAAx9C,qCAHc9C,EAAS,IAChB,EAAAM,GAAA61D,KAAAA,EAAA,IAAAn2D,KAAW,GAAK,QAAQA,EAAW,GAAA,SAASA,KAAW,GAAK,MAAMA,KAAW,+BAC7EuQ,GAAE,CAAE,kCAAmCvQ,EAAO,GAAEA,EAAS,iEAVvD,IAAAo2D,UAAAA,EAAY,GAAC7Z,cACb/Y,GAAU+Y,GACV8Z,QAAAA,GAAmB9Z,GAC1BK,MAAApF,EAAY,IAAE+E,iVCmDav8C,EAAiB,qCAA+BA,EAAY,2FAA5DA,EAAiB,iEAA+BA,EAAY,gJAFjEk2D,OAAAl2D,KAAa,QAAUA,EAAY,uEAAnC,IAAAM,IAAAg2D,EAAAJ,OAAAl2D,KAAa,kBAAUA,EAAY,+LADpDA,EAAM,IAAA,iFARPA,EAAS,KACVoE,EAAAmyD,EAAA,IAAAC,EAAAx2D,EAAU,GAAAoT,EAAIpT,KAAU,IACxBoE,EAAAmyD,EAAA,IAAAE,EAAAz2D,EAAU,GAAA0Z,EAAI1Z,KAAU,IACpBoE,EAAAmyD,EAAA,QAAAG,EAAA12D,KAAU,IACToE,EAAAmyD,EAAA,SAAAI,EAAA32D,KAAU,yCAEcoE,EAAAmyD,EAAA,mBAAAK,EAAA,cAAA52D,EAAc,IAAA,OAAOA,MAAc,+FAQVA,EAAS,wBApB7DuQ,GAAE,CAAE,0BAA2BvQ,EAAS,MAAA,kGAEZA,EAAO,8CACCA,EAAY,YAJzD6C,EAsBMH,EAAAsP,EAAAlP,GAhBJL,EAcUuP,EAAAukD,kBACV9zD,EAA2EuP,EAAAgI,kDAdrEha,EAAS,OACVyvC,GAAA,IAAAnvC,GAAAk2D,KAAAA,EAAAx2D,EAAU,GAAAoT,EAAIpT,KAAU,mBACxByvC,GAAA,IAAAnvC,GAAAm2D,KAAAA,EAAAz2D,EAAU,GAAA0Z,EAAI1Z,KAAU,mBACpByvC,GAAA,IAAAnvC,GAAAo2D,KAAAA,EAAA12D,KAAU,uBACTyvC,GAAA,IAAAnvC,GAAAq2D,KAAAA,EAAA32D,KAAU,wBAEcyvC,GAAA,KAAAnvC,GAAAs2D,KAAAA,EAAA,cAAA52D,EAAc,IAAA,OAAOA,MAAc,+DAQVA,EAAS,4CApB7DuQ,GAAE,CAAE,0BAA2BvQ,EAAS,MAAA,2EAEZA,EAAO,mDACCA,EAAY,0EAxCjD62D,GAAW,EACdd,GAAkBe,MAAO,GACzBf,GAAkBgB,OAAQ,GAC1BhB,GAAkBiB,OAAQ,yCASpB5iC,GAAAA,GAAcmoB,WACd8Z,EAAUN,GAAkBe,MAAIva,GAChC0a,IAAAA,EAAM,IAAE1a,GACRhtC,KAAAA,EAAO,GAACgtC,GACR6Z,UAAAA,EAAY,GAAC7Z,GACb+X,QAAAA,GAAmB/X,GACnB2a,aAAAA,GAAwB3a,GACxB4a,aAAAA,GAAwB5a,GAC/BK,MAAApF,EAAY,IAAE+E,iBAEVla,EAAQ2S,OAAEA,GAAW6H,gDACvB,MAAAua,EAAc7nD,GAAQsnD,GAAYR,GAClCgB,EAAShB,IAAYN,GAAkBe,KACvCQ,EAAUjB,IAAYN,GAAkBiB,MACxCO,EAAQrtD,MAAM0F,QAAQqnD,GAAOA,EAAG,CAAIA,EAAKA,0VAC9CzZ,EAAA,GAAEga,EAAkC,sBAAA9Y,KAAWtqB,GAAU,sBACzDopB,EAAA,EAAEia,EAAa,CAAAF,EAAM,GAAKtY,EAAU1uB,MAAQ,EAAGgnC,EAAM,GAAKtY,EAAU1uB,MAAQ,wBAC1EmnC,EAAaN,EAAcnY,EAAU1uB,sBACvCitB,EAAA,EAAEma,EAAqBL,GAAWI,EAAYA,GAAcD,mBAC5Dja,EAAA,GAAEoa,EAAgBP,EACZ,CAAAK,EAAa,EAAGA,EAAa,IAC7BC,EAAkB,GAAK,EAAGA,EAAkB,GAAK,4QClB/CpnD,GAAE,CAAE,4BAA6BvQ,EAAS,4CAI7CA,EAAY,aACZA,EAAY,yCAGNoE,EAAA4V,EAAA,QAAA69C,EAAA,GAAA73D,EAAiB,GAAA,SAAAA,EAAW,MAAA,KAAKA,EAAW,cAAcA,EAAW,MAAM,KACnFA,EAAW,oBAAoBA,EAAW,MAAM,4BAEjCA,EAAc,iCAZjC6C,EAaEH,EAAAsX,EAAAlX,4BAZOyN,GAAE,CAAE,4BAA6BvQ,EAAS,4EAI7CA,EAAY,mBACZA,EAAY,mDAGN,IAAAM,GAAAu3D,KAAAA,EAAA,GAAA73D,EAAiB,GAAA,SAAAA,EAAW,MAAA,KAAKA,EAAW,cAAcA,EAAW,MAAM,KACnFA,EAAW,oBAAoBA,EAAW,MAAM,kDAEjCA,EAAc,kFA1BtBoT,GAACmpC,KACD7iC,GAAC6iC,GACDzjB,MAAAA,EAAQ,GAACyjB,GACTxjB,OAAAA,EAAS,GAACwjB,GACV1R,aAAAA,EAAe,GAAC0R,GAChBryB,MAAAA,GAAiBqyB,kBACjBub,GAAcvb,GACdwb,YAAAA,GAAuBxb,GACvB0S,YAAAA,EAAc,GAAC1S,GACf12C,SAAAA,GAAW,GAAK02C,GACvBK,MAAApF,EAAY,IAAE+E,0kBCTH,SAASyb,GAAYvqB,EAASp1B,GACzC,MAAM4/C,ExDgiEV,UAAmBxqB,QAAEA,EAAOxL,QAAEA,EAAOkU,aAAEA,EAAY+hB,aAAEA,IACjD,MAAMh/C,EAAYzT,GAAOgoC,GAgEzB,MAAO,CACH9kC,OAhEJ,UAAgB6wB,gBAAEA,EAAeV,MAAEA,EAAKC,OAAEA,EAAMo/B,SAAEA,EAAW,GAAEC,SAAEA,GAAW,EAAIC,SAAEA,GAAW,EAAIC,WAAEA,GAAa,IAa5G,IAAIC,EAAW,CAAC,EAAG,GAEnB,MAmCMC,EAAoBjoC,KACrBpf,GAAG,SApCiBpN,IACU,cAA3BA,EAAMqV,YAAYrS,MAAmD,eAA3BhD,EAAMqV,YAAYrS,OAC5DwxD,EAAW,CACPx0D,EAAMqV,YAAYK,SAAW1V,EAAMqV,YAAY0iB,QAAQ,GAAGriB,QAC1D1V,EAAMqV,YAAYO,SAAW5V,EAAMqV,YAAY0iB,QAAQ,GAAGniB,SAElE,IAiCCxI,GAAG,OAAQinD,EA9BIr0D,IAChB,MAAM2rB,EAAYymB,IAClB,GAAgC,cAA3BpyC,EAAMqV,YAAYrS,MAAmD,cAA3BhD,EAAMqV,YAAYrS,OAA0Bk7B,EACvF,OAEJ,MAAMw2B,EAAa,CACf10D,EAAMqV,YAAYK,SAAW1V,EAAMqV,YAAY0iB,QAAQ,GAAGriB,QAC1D1V,EAAMqV,YAAYO,SAAW5V,EAAMqV,YAAY0iB,QAAQ,GAAGniB,SAExD++C,EAAW,CAACD,EAAW,GAAKF,EAAS,GAAIE,EAAW,GAAKF,EAAS,IACxEA,EAAWE,EACX,MAAME,EAAYT,IAAiBx3D,KAAKC,IAAI+uB,EAAU,GAAIhvB,KAAKwwB,IAAIxB,EAAU,MAAQ4oC,GAAc,EAAI,GACjG/4B,EAAW,CACbnsB,EAAGsc,EAAU,GAAKgpC,EAAS,GAAKC,EAChCj/C,EAAGgW,EAAU,GAAKgpC,EAAS,GAAKC,GAE9Bp/B,EAAS,CACX,CAAC,EAAG,GACJ,CAACT,EAAOC,IAEZkJ,EAAQiX,uBAAuB,CAC3B9lC,EAAGmsB,EAASnsB,EACZsG,EAAG6lB,EAAS7lB,EACZ6W,KAAMb,EAAU,IACjB6J,EAAQC,EAAgB,EAMS,MAGnCroB,GAAG,aAAcknD,EAvDDt0D,IACjB,MAAM2rB,EAAYymB,IAClB,GAA+B,UAA3BpyC,EAAMqV,YAAYrS,OAAqBk7B,EACvC,OAEJ,MAAMuY,GAAcz2C,EAAMqV,YAAYggB,QACD,IAAhCr1B,EAAMqV,YAAYigB,UAAkB,IAAOt1B,EAAMqV,YAAYigB,UAAY,EAAI,MAC9E8+B,EACES,EAAWlpC,EAAU,GAAKhvB,KAAKurB,IAAI,EAAGuuB,GAC5CvY,EAAQzF,QAAQo8B,EAAS,EA8CkB,MAC/C1/C,EAAU7R,KAAKmxD,EAAmB,CAAA,EACtC,EAMIp2D,QALJ,WACI8W,EAAU/H,GAAG,OAAQ,KACzB,EAIIgI,WAER,CwDtmEoB0/C,CAAU,CACtBprB,UACAxL,QAAS5pB,EAAO4pB,QAChBkU,aAAc,KACV,MAAM9T,EAAW36B,EAAI2Q,EAAOgqB,UAC5B,MAAO,CAACA,EAASjvB,EAAGivB,EAAS3oB,EAAG2oB,EAAS9R,KAAK,EAElD2nC,aAAc7/C,EAAO6/C,eAazB,MAAO,CACHvvD,OAZJ,SAAgB0P,GACZ4/C,EAAQtvD,OAAO,CACX6wB,gBAAiBnhB,EAAOmhB,gBACxBV,MAAOzgB,EAAOygB,MACdC,OAAQ1gB,EAAO0gB,OACfu/B,WAAYjgD,EAAOigD,WACnBH,SAAU9/C,EAAO8/C,SACjBC,SAAU//C,EAAO+/C,SACjBC,SAAUhgD,EAAOggD,UAExB,EAGG,OAAAj2D,GACI61D,EAAQ71D,SACX,EAET,iDC0EuB,MAAA02D,EAAAztD,EAAY,IAAA3D,IAAI2D,MAAS+oB,sDAEd0kC,EAAA35B,GAAkB9zB,EAAI,4EAL7CrL,EAAS,IAAA20D,GAAA30D,QAEPA,EAAM,KAAc,MAAAwK,EAAAxK,GAAAA,MAASo0B,mBAAlCxzB,OAAIC,GAAA,EAAA,6KAoBCuD,EAAAk8C,EAAA,IAAA6V,EAAA,KAAAn2D,MAAIA,EAAM,KAAA,KAAGA,EAAI,IAAAA,YAASA,EAAY,IAAY,EAATA,EAAS,UAAIA,EAAa,IAC7D,EAATA,EAAS,WAAKA,EAAY,IAAY,EAATA,EAAS,kBACxCA,EAAM,IAACoT,EAAI,IAAApT,MAAO0Z,EAAC,IAAG1Z,EAAO,IAAA84B,UAAQ94B,EAAM,IAAC+4B,OAAU,KAAA/4B,MAAO84B,MAAK,yEAhD7D94B,EAAY,kBACXA,EAAa,KACXoE,EAAA4N,EAAA,UAAA+mD,EAAA/4D,EAAI,IAAA,IAAAA,EAAI,IAAA,IAAAA,UAAeA,EAAa,qFAG7BA,EAAU,oDACqBA,EAAS,+CACbA,EAAe,+CACfA,EAAe,GACvDA,KAAkBA,EAAS,SAC3Bb,WAXN0D,EAqDMH,EAAAsP,EAAAlP,0EARJL,EAOEuP,EAAAsuC,kCAvCAre,QAASjiC,EAAQ,IACjBqiC,SAAAriC,EAAQ,IACRk4D,aAAAl4D,EAAY,IACZw5B,gBAAiBx5B,EAAgB,IACjC84B,MAAO94B,EAAe,IACtB+4B,OAAQ/4B,EAAgB,IACxBs4D,WAAAt4D,EAAU,IACVm4D,SAAAn4D,EAAQ,IACRo4D,SAAAp4D,EAAQ,GACRq4D,SAAAr4D,EAAQ,oBAGLA,EAAS,uFAEPA,EAAM,mDAoBNyvC,GAAA,UAAAnvC,EAAA,IAAA61D,KAAAA,EAAA,KAAAn2D,MAAIA,EAAM,KAAA,KAAGA,EAAI,IAAAA,YAASA,EAAY,IAAY,EAATA,EAAS,UAAIA,EAAa,IAC7D,EAATA,EAAS,WAAKA,EAAY,IAAY,EAATA,EAAS,kBACxCA,EAAM,IAACoT,EAAI,IAAApT,MAAO0Z,EAAC,IAAG1Z,EAAO,IAAA84B,UAAQ94B,EAAM,IAAC+4B,OAAU,KAAA/4B,MAAO84B,MAAK,iDAhD7D94B,EAAY,oCACXA,EAAa,OACXyvC,GAAA,UAAAnvC,EAAA,IAAAy4D,KAAAA,EAAA/4D,EAAI,IAAA,IAAAA,EAAI,IAAA,IAAAA,UAAeA,EAAa,4EAU5CiiC,QAASjiC,EAAQ,IACjBqiC,SAAAriC,EAAQ,IACRk4D,aAAAl4D,EAAY,IACZw5B,gBAAiBx5B,EAAgB,IACjC84B,MAAO94B,EAAe,IACtB+4B,OAAQ/4B,EAAgB,IACxBs4D,WAAAt4D,EAAU,IACVm4D,SAAAn4D,EAAQ,IACRo4D,SAAAp4D,EAAQ,GACRq4D,SAAAr4D,EAAQ,6DAfsCA,EAAS,wDACbA,EAAe,2DACfA,EAAe,GACvDA,KAAkBA,EAAS,SAC3Bb,gCAgBFyB,OAAIC,GAAA,2LAFiCb,EAAS,aAAtBA,EAAU,aAArB6C,EAA0CH,EAAAs2D,EAAAl2D,8BAAlB9C,EAAS,qDAOvCoT,EAAApT,EAAK,IAAAohC,UAAU6B,iBAAiB7vB,IAChCsG,EAAA1Z,EAAK,IAAAohC,UAAU6B,iBAAiBvpB,GAC/B1Z,EAAa,IACP,CAAA6F,SAAA7F,MAAK6F,WACRqkB,MAAAlqB,QAAgBA,EAAI,oBACbA,EAAgB,KACjB+3D,YAAA/3D,MAAoBA,EAAI,mBACxBA,EAAe,4BAErB48C,MAAA58C,MAAcA,EAAI,4LATtBoT,EAAApT,EAAK,IAAAohC,UAAU6B,iBAAiB7vB,kBAChCsG,EAAA1Z,EAAK,IAAAohC,UAAU6B,iBAAiBvpB,oBAC/B1Z,EAAa,KACP,QAAAM,EAAA,IAAA,CAAAuF,SAAA7F,MAAK6F,iCACRqkB,MAAAlqB,QAAgBA,EAAI,4BACbA,EAAgB,4BACjB+3D,YAAA/3D,MAAoBA,EAAI,2BACxBA,EAAe,6DAErB48C,MAAA58C,MAAcA,EAAI,qIAZxBA,EAAI,KAAIylC,GAAkBzlC,EAAI,0JAA9BA,EAAI,KAAIylC,GAAkBzlC,EAAI,wOA9BpCA,EAAQ,KAAAogD,GAAApgD,uEAARA,EAAQ,2PAJNgF,MAAAhF,OAASA,EAAO,2CAA2CA,EAAO,KAAK,UACvEuQ,GAAE,CAAE,uBAAwBvQ,EAAS,gLADrC,KAAAM,EAAA,KAAAs0D,EAAA5vD,MAAAhF,OAASA,EAAO,2CAA2CA,EAAO,KAAK,yBACvEuQ,GAAE,CAAE,uBAAwBvQ,EAAS,qKArExCi5D,GAAmBC,GAASA,aAAgBC,SAAWD,EAAI,IAASA,oEAS/D35B,SAAAA,EAAW,gBAAcgd,GACzB0R,UAAAA,EAAY,YAAU1R,GACtB6c,gBAAAA,EAAkB,eAAa7c,GAC/B8c,UAAAA,GAAqB9c,GACrB+c,UAAAA,EAAY,IAAE/c,GACdgd,iBAAAA,EAAmB,GAAChd,GACpBid,gBAAAA,EAAkB,GAACjd,GACnB+X,QAAAA,GAAmB/X,GACnBkd,UAAAA,GAAqBld,GACrBmd,gBAAAA,GAA2Bnd,GAC3Bod,gBAAAA,GAA2Bpd,GAC3BzjB,MAAAA,GAAiByjB,GACjBxjB,OAAAA,GAAkBwjB,GAClB6b,SAAAA,GAAW,GAAI7b,GACf8b,SAAAA,GAAW,GAAI9b,GACf+b,WAAAA,GAAsB/b,GACtB4b,SAAAA,GAAoB5b,GACpBv3C,MAAAA,EAAQ,IAAEu3C,GACjBK,MAAApF,EAAY,IAAE+E,EAIV,MAAAxuC,MAAAA,EAAK0xB,WAAEA,EAAU4C,SAAEA,EAAUvJ,MAAO8gC,EAAgB7gC,OAAQ8gC,EAAe7kB,OAAEA,EAAM/S,QAAEA,EAAOzI,gBAAEA,GAAoBqjB,2LACpHid,OAA8B36D,IAAdk6D,OAA0Bl6D,EAAY85D,GAAgBI,GACtEU,EAAsBd,GAAgBG,GACtCY,GAAgBf,GAAgBK,GAChCxB,GAEY,oBAAXx1D,QAA4BA,OAAO23D,OAAS,aAAe,qBAC5DC,gCAA0Cxb,IAO5C,IAAAyb,GAAeC,oyBANhBA,EAAM,CACLhnD,GAAI6rC,EAAU7rC,EAAI6rC,EAAU1uB,KAC5B7W,GAAIulC,EAAUvlC,EAAIulC,EAAU1uB,KAC5BuI,MAAOuhC,EAAkBpb,EAAU1uB,KACnCwI,OAAQuhC,EAAmBrb,EAAU1uB,8BAIrCitB,EAAA,GAAA2c,GACI5b,EAAYhvC,KAAO,EAAI60B,GAAiB5E,GAAuB+e,GAAc6b,GAAUA,wBAG5F5c,EAAA,GAAA+c,EAAezhC,GAtBG,0BAuBlB0kB,EAAA,GAAAgd,EAAgBzhC,GAtBG,qDAuBnB0hC,EAAcN,GAAarhC,MAAQyhC,kDACnCG,EAAeP,GAAaphC,OAASyhC,0BACvChd,EAAA,GAAEmd,EAAYj6D,KAAKC,IAAI85D,EAAaC,0BAClCld,EAAA,GAAAod,EAAYD,EAAYJ,wBACxB/c,EAAA,GAAAqd,EAAaF,EAAYH,wBACzBhd,EAAA,GAAAvU,EAAS,EAAI0xB,6CACbnd,EAAA,GAAApqC,EAAI+mD,GAAa/mD,GAAKwnD,EAAYT,GAAarhC,OAAS,EAAImQ,6CAC5DuU,EAAA,GAAA9jC,EAAIygD,GAAazgD,GAAKmhD,EAAaV,GAAaphC,QAAU,EAAIkQ,kDAC9D6xB,EAAeF,EAAqB,EAAT3xB,kDAC3B8xB,EAAgBF,EAAsB,EAAT5xB,gGACL0xB,qWCjEpB,IAAIK,GAAmB,IAAnBA,GAA+B,i9BCiDlB52D,EAAA4N,EAAA,QAAAipD,EAAA,SAAAj7D,EAAK,GAAAk7D,MAAQ,SAAS,IAAE,sNAA1Cr4D,EAAs4BH,EAAAsP,EAAAlP,GAAxsBL,EAAksBuP,EAAAmpD,GAA/rB14D,EAA2rB04D,EAAAC,GAAvqB34D,EAAmqB24D,EAAAC,GAA/oB54D,EAAyb44D,EAAAC,GAAhZ74D,EAA4Y64D,EAAAC,GAAzY94D,EAAiO84D,EAAAC,GAAA/4D,EAAoK84D,EAAAE,GAAQh5D,EAA0C44D,EAAAK,GAAAj5D,EAA0C44D,EAAAM,GAAAl5D,EAA0C44D,EAAAO,GAAAn5D,EAA0C44D,EAAAQ,GAAAp5D,EAA0C44D,EAAAS,WAAl2B,EAAAx7D,GAAA26D,KAAAA,EAAA,SAAAj7D,EAAK,GAAAk7D,MAAQ,SAAS,IAAE,86CAGxB92D,EAAA4N,EAAA,QAAAipD,EAAA,SAAAj7D,EAAK,GAAAk7D,MAAQ,SAAS,IAAE,wNAA1Cr4D,EAAkoCH,EAAAsP,EAAAlP,GAAl8BL,EAA47BuP,EAAA+pD,GAAz7Bt5D,EAAq7Bs5D,EAAAC,GAAj6Bv5D,EAA65Bu5D,EAAAC,GAAz4Bx5D,EAA0Cw5D,EAAAV,GAAA94D,EAAuLw5D,EAAAP,GAA9Ij5D,EAA0Ii5D,EAAAJ,GAAvI74D,EAAmI64D,EAAAE,GAAQ/4D,EAAiLw5D,EAAAL,GAAxIn5D,EAAoIm5D,EAAAD,GAAjIl5D,EAA6Hk5D,EAAAF,GAAQh5D,EAAsKw5D,EAAAH,GAA7Hr5D,EAAyHq5D,EAAAD,GAAtHp5D,EAAkHo5D,EAAAK,GAAQz5D,EAAsKw5D,EAAAb,GAA7H34D,EAAyH24D,EAAAC,GAAtH54D,EAAkH44D,EAAAc,GAAQ15D,EAAuKw5D,EAAAG,GAA9H35D,EAA0H25D,EAAAjB,GAAvH14D,EAAmH04D,EAAAkB,WAAtlC,EAAA/7D,GAAA26D,KAAAA,EAAA,SAAAj7D,EAAK,GAAAk7D,MAAQ,SAAS,IAAE,mJAG1Cr4D,EAAyCH,EAAA45D,EAAAx5D,kHAGzCD,EAAwCH,EAAA45D,EAAAx5D,0FAOZy5D,GAAAv8D,KAAKw8D,cAAgBx8D,KAAKy8D,IAAMz8D,KAAK08D,QAAM,KAjBtD,SAAd18D,EAAI,GAAC+G,MAAe2tD,GAAA10D,MAGN,OAAdA,EAAI,GAAC+G,MAA+B,YAAd/G,EAAI,GAAC+G,OAAkB4tD,GAAA30D,KAG/B,QAAdA,EAAI,GAAC+G,MAAco5C,OAGL,WAAdngD,EAAI,GAAC+G,MAAiBq5C,+DAKuB7gB,SAAAlB,GAASI,0DAMTc,SAAAlB,GAASK,8DACRa,SAAAlB,GAASK,6DACVa,SAAAlB,GAASE,4DACRgB,SAAAlB,GAASE,2DACVgB,SAAAlB,GAASG,6DACRe,SAAAlB,GAASG,0ZAVzBp5B,EAAAu3D,EAAA,QAAA3B,GAAc,MAAa51D,EAAAu3D,EAAA,SAAA3B,GAAe,MAjBpE52D,EAAAw4D,EAAA,QAAAC,GAAA78D,EAAK,GAAA88D,UAAY,UAAY,IAAK,KAAA98D,EAAK,GAAAk7D,MAAQ,UAAU,QAAM,2BAA5Er4D,EA4BMH,EAAAk6D,EAAA95D,GA3BJL,EAaMm6D,EAAA5J,+GAGNvwD,EAIMm6D,EAAAD,GAHJl6D,EAEMk6D,EAAA1J,GADJxwD,EAA4EwwD,EAAA7xD,iKAjB3D,SAAdpB,EAAI,GAAC+G,4DAGS,OAAd/G,EAAI,GAAC+G,MAA+B,YAAd/G,EAAI,GAAC+G,4DAGb,QAAd/G,EAAI,GAAC+G,mDAGS,WAAd/G,EAAI,GAAC+G,wDAQoB0oC,GAAA,EAAAnvC,IAAAi8D,KAAAA,GAAAv8D,KAAKw8D,cAAgBx8D,KAAKy8D,IAAMz8D,KAAK08D,QAAM,KAAAv3D,EAAA43D,EAAAR,KAnBhE9sB,GAAA,EAAAnvC,GAAAu8D,KAAAA,GAAA78D,EAAK,GAAA88D,UAAY,UAAY,IAAK,KAAA98D,EAAK,GAAAk7D,MAAQ,UAAU,QAAM,oeAzC7D8B,EAAQ,CAAIC,OAAQ,GAAIjhD,IAAK,GAAIrb,IAAK,QAoB/Cu8D,EACAC,WAEKC,IACHF,GAAoBC,YAlBNh6D,EAAS+C,OACvB8V,EAAMghD,EAAShhD,IACfrb,EAAMq8D,EAASr8D,IACf4O,EAAOyM,EAEJ,KAAAA,GAAOrb,GACZ4O,EAAO7O,KAAK28D,OAAOrhD,EAAMrb,GAAO,GAChCwC,EAAQ6B,MAAMg4D,YAAcztD,OAXZ44C,EAYLjiD,GAXHo3D,YAAcnV,EAAGnvB,aAAemvB,EAAGoV,aAAepV,EAAGlvB,aAWxCt4B,IAAQ4O,EAAOyM,IAAQzM,EAZvC,IAAW44C,EAelBhlD,EAAQ6B,MAAMg4D,YAAcr8D,MAQ1B68D,CAAWL,EAAaD,GzKwBvB,IAAqBh/D,EyKpB1ByI,GAAO,KACLy2D,GAAQ,IzKmBgBl/D,EyKhBf,KACTk/D,GAAQ,EzKgBX32D,IAAwB9G,GAAGuJ,aAAarJ,KAAK3B,YyKZjCwF,GAAI64C,iGAsBG4gB,EAAWtR,qDAFmEqR,EAAgBrR,sICvC3G,MAAM4R,GAAO,MAGhB,IAAIC,EAAU,EAKd,MAAO,KACHA,GAAW,EACJ,IAHX,QAASh9D,KAAKi9D,SAAW,IAAM,EAAM,GAAGvyC,SAAS,MAAMhrB,OAAO,KAGpCs9D,IAE7B,EAZmB,GAkBb,SAASE,GAAQC,GACpB,MAAMC,EAAM,GACZ,IAAK,IAAIj9D,EAAI,EAAGqN,EAAI2vD,EAAUj9D,OAAQC,EAAIqN,EAAGrN,IACzCi9D,EAAIj+D,KAAKg+D,EAAUh9D,IAEvB,OAAOi9D,CACX,CACA,SAASC,GAAGp7D,EAAMq7D,GACd,MACMz6B,GADM5gC,EAAK4P,cAAc+C,aAAehT,QAC9BuT,iBAAiBlT,GAAMiT,iBAAiBooD,GACxD,OAAOz6B,EAAM06B,WAAW16B,EAAI26B,QAAQ,KAAM,KAAO,CACrD,CAWO,SAASC,GAAa71B,EAAYrkC,EAAU,IAG/C,MAAO,CAAE60B,MAFK70B,EAAQ60B,OAX1B,SAAsBn2B,GAClB,MAAMy7D,EAAaL,GAAGp7D,EAAM,qBACtB07D,EAAcN,GAAGp7D,EAAM,sBAC7B,OAAOA,EAAKq2B,YAAcolC,EAAaC,CAC3C,CAOmCC,CAAah2B,GAE5BvP,OADD90B,EAAQ80B,QAP3B,SAAuBp2B,GACnB,MAAM47D,EAAYR,GAAGp7D,EAAM,oBACrB67D,EAAeT,GAAGp7D,EAAM,uBAC9B,OAAOA,EAAKs2B,aAAeslC,EAAYC,CAC3C,CAGqCC,CAAcn2B,GAEnD,CAsBA,MAAMo2B,GAAuB,MA6CtB,SAASC,GAAYC,GACxB,OAAO,IAAI12D,SAAQ,CAACC,EAASuvB,KACzB,MAAMmnC,EAAM,IAAIC,MAChBD,EAAIE,OAAS,IAAM52D,EAAQ02D,GAC3BA,EAAItL,OAAS,IAAMprD,EAAQ02D,GAC3BA,EAAIpc,QAAU/qB,EACdmnC,EAAIG,YAAc,YAClBH,EAAII,SAAW,QACfJ,EAAI9gE,IAAM6gE,CAAG,GAErB,CAOO78B,eAAem9B,GAAcv8D,EAAMm2B,EAAOC,GAC7C,MAAM5mB,EAAQ,6BACRH,EAAM3O,SAASG,gBAAgB2O,EAAO,OACtCgtD,EAAgB97D,SAASG,gBAAgB2O,EAAO,iBAWtD,OAVAH,EAAIxN,aAAa,QAAS,GAAGs0B,KAC7B9mB,EAAIxN,aAAa,SAAU,GAAGu0B,KAC9B/mB,EAAIxN,aAAa,UAAW,OAAOs0B,KAASC,KAC5ComC,EAAc36D,aAAa,QAAS,QACpC26D,EAAc36D,aAAa,SAAU,QACrC26D,EAAc36D,aAAa,IAAK,KAChC26D,EAAc36D,aAAa,IAAK,KAChC26D,EAAc36D,aAAa,4BAA6B,QACxDwN,EAAIpP,YAAYu8D,GAChBA,EAAcv8D,YAAYD,GAnBvBo/B,eAA4B/vB,GAC/B,OAAO9J,QAAQC,UACVgF,MAAK,KAAM,IAAIiyD,eAAgBC,kBAAkBrtD,KACjD7E,KAAKmyD,oBACLnyD,MAAM2P,GAAS,oCAAoCA,KAC5D,CAeWyiD,CAAavtD,EACxB,CACO,MAAMwtD,GAAsB,CAAC78D,EAAM2K,KACtC,GAAI3K,aAAgB2K,EAChB,OAAO,EACX,MAAMmyD,EAAgBrhE,OAAOshE,eAAe/8D,GAC5C,OAAsB,OAAlB88D,IAEIA,EAAcvuD,YAAY9N,OAASkK,EAASlK,MAChDo8D,GAAoBC,EAAenyD,GAAW,ECjKtD,SAASqyD,GAAsBnoB,EAAWooB,EAAQ56D,GAC9C,MAAM+N,EAAW,IAAIykC,KAAaooB,IAC5B36D,EAAUD,EAAMC,QAf1B,SAAuBD,GACnB,MAAM66D,EAAU76D,EAAM4Q,iBAAiB,WACvC,MAAO,GAAG5Q,EAAMC,qBAAqB46D,EAAQ3B,QAAQ,OAAQ,OACjE,CAaU4B,CAAc96D,GAZxB,SAA6BA,GACzB,OAAO44D,GAAQ54D,GACV2H,KAAKvJ,GAGC,GAAGA,MAFI4B,EAAM4Q,iBAAiBxS,KACpB4B,EAAM+6D,oBAAoB38D,GACL,cAAgB,QAErDuV,KAAK,IACd,CAKUqnD,CAAoBh7D,GAC1B,OAAO3B,SAASM,eAAe,GAAGoP,KAAY9N,KAClD,CACA,SAASg7D,GAAmBC,EAAYC,EAAYP,GAChD,MAAM56D,EAAQ1C,OAAOuT,iBAAiBqqD,EAAYN,GAC5CC,EAAU76D,EAAM4Q,iBAAiB,WACvC,GAAgB,KAAZiqD,GAA8B,SAAZA,EAClB,OAEJ,MAAMroB,EAAYimB,KAClB,IACI0C,EAAW3oB,UAAY,GAAG2oB,EAAW3oB,aAAaA,GACrD,CACD,MAAO4oB,GACH,MACH,CACD,MAAMC,EAAeh9D,SAASC,cAAc,SAC5C+8D,EAAaz9D,YAAY+8D,GAAsBnoB,EAAWooB,EAAQ56D,IAClEm7D,EAAWv9D,YAAYy9D,EAC3B,CCrCA,MAAMC,GAAO,wBACPC,GAAO,aACPC,GAAQ,CACVC,KAAMH,GACNI,MAAOJ,GACPK,IAAK,4BACLC,IAAK,gCACLC,IAAK,YACLC,IAAKP,GACLQ,KAAMR,GACNS,IAAK,YACLC,KAAM,aACNjvD,IAAK,gBACLkvD,KAAM,cAMH,SAASC,GAAYvC,GACxB,MAAMwC,EALV,SAAsBxC,GAClB,MAAMhkD,EAAQ,gBAAgByP,KAAKu0C,GACnC,OAAOhkD,EAAQA,EAAM,GAAK,EAC9B,CAEsBymD,CAAazC,GAAKx0C,cACpC,OAAOo2C,GAAMY,IAAc,EAC/B,CCnBO,SAASE,GAAU1C,GACtB,OAAmC,IAA5BA,EAAI2C,OAAO,WACtB,CACO,SAASC,GAAY3B,EAAS4B,GACjC,MAAO,QAAQA,YAAmB5B,GACtC,CACO99B,eAAe2/B,GAAe9C,EAAKvxD,EAAMs0D,GAC5C,MAAM52B,QAAY62B,MAAMhD,EAAKvxD,GAC7B,GAAmB,MAAf09B,EAAI82B,OACJ,MAAM,IAAIn7D,MAAM,aAAaqkC,EAAI6zB,kBAErC,MAAMkD,QAAa/2B,EAAI+2B,OACvB,OAAO,IAAI55D,SAAQ,CAACC,EAASuvB,KACzB,MAAMqqC,EAAS,IAAIC,WACnBD,EAAOtf,QAAU/qB,EACjBqqC,EAAOE,UAAY,KACf,IACI95D,EAAQw5D,EAAQ,CAAE52B,MAAKvpC,OAAQugE,EAAOvgE,SACzC,CACD,MAAO2E,GACHuxB,EAAOvxB,EACV,GAEL47D,EAAOG,cAAcJ,EAAK,GAElC,CACA,MAAMK,GAAQ,CAAA,EAYPpgC,eAAeqgC,GAAkBC,EAAaC,EAAar+D,GAC9D,MAAMs+D,EAZV,SAAqB3D,EAAK0D,EAAaE,GACnC,IAAIz9D,EAAM65D,EAAIV,QAAQ,OAAQ,IAQ9B,OAPIsE,IACAz9D,EAAM65D,GAGN,sBAAsB9tD,KAAK/L,KAC3BA,EAAMA,EAAIm5D,QAAQ,OAAQ,KAEvBoE,EAAc,IAAIA,KAAev9D,IAAQA,CACpD,CAEqB09D,CAAYJ,EAAaC,EAAar+D,EAAQu+D,oBAC/D,GAAuB,MAAnBL,GAAMI,GACN,OAAOJ,GAAMI,GAOjB,IAAIG,EAJAz+D,EAAQ0+D,YAERN,IAAgB,KAAKvxD,KAAKuxD,GAAe,IAAM,MAAO,IAAI7vC,MAAOowC,WAGrE,IACI,MAAM/C,QAAgB6B,GAAeW,EAAap+D,EAAQ4+D,kBAAkB,EAAG93B,MAAKvpC,aAC3E8gE,IAEDA,EAAcv3B,EAAI+3B,QAAQp7D,IAAI,iBAAmB,IAxDjE,SAA+Bg7D,GAC3B,OAAOA,EAAQlxD,MAAM,KAAK,EAC9B,CAwDmBuxD,CAAsBvhE,MAEjCkhE,EAAUlB,GAAY3B,EAASyC,EAClC,CACD,MAAOn8D,GACHu8D,EAAUz+D,EAAQ++D,kBAAoB,GACtC,IAAIvG,EAAM,6BAA6B4F,IACnCl8D,IACAs2D,EAAuB,iBAAVt2D,EAAqBA,EAAQA,EAAM4+B,SAEhD03B,GACA1vB,QAAQC,KAAKyvB,EAEpB,CAED,OADA0F,GAAMI,GAAYG,EACXA,CACX,CCpCA3gC,eAAekhC,GAAgBtgE,EAAMsB,GACjC,OAAIu7D,GAAoB78D,EAAMugE,mBAnClCnhC,eAAkCohC,GAC9B,MAAMT,EAAUS,EAAOC,YACvB,MAAgB,WAAZV,EACOS,EAAOvrD,WAAU,GAErB+mD,GAAY+D,EACvB,CA8BeW,CAAmB1gE,GAE1B68D,GAAoB78D,EAAM2gE,kBA/BlCvhC,eAAiCwhC,EAAOt/D,GACpC,GAAIs/D,EAAMC,WAAY,CAClB,MAAML,EAAS9/D,SAASC,cAAc,UAChCtD,EAAMmjE,EAAO17D,WAAW,MAK9B,OAJA07D,EAAOrqC,MAAQyqC,EAAMvqC,YACrBmqC,EAAOpqC,OAASwqC,EAAMtqC,aACtBj5B,SAA0CA,EAAIyjE,UAAUF,EAAO,EAAG,EAAGJ,EAAOrqC,MAAOqqC,EAAOpqC,QAEnF4lC,GADSwE,EAAOC,YAE1B,CACD,MAAMM,EAASH,EAAMG,OACfpB,EAAcnB,GAAYuC,GAEhC,OAAO/E,SADeyD,GAAkBsB,EAAQpB,EAAar+D,GAEjE,CAkBe0/D,CAAkBhhE,EAAMsB,GAE/Bu7D,GAAoB78D,EAAMihE,mBAnBlC7hC,eAAkCqxB,GAC9B,IAAIyQ,EACJ,IACI,GAAsF,QAAjFA,EAAKzQ,aAAuC,EAASA,EAAO0Q,uBAAoC,IAAPD,OAAgB,EAASA,EAAGE,KACtH,aAAcnsD,GAAUw7C,EAAO0Q,gBAAgBC,KAAM,CAAA,GAAI,EAEhE,CACD,MAAOC,GAEN,CACD,OAAO5Q,EAAOx7C,WAAU,EAC5B,CASeqsD,CAAmBthE,GAEvBA,EAAKiV,WAAU,EAC1B,CACA,MAAMssD,GAAiBvhE,GAAyB,MAAhBA,EAAKwhE,SAAkD,SAA/BxhE,EAAKwhE,QAAQC,cAyErE,SAASC,GAASnE,EAAYC,GAO1B,OANIX,GAAoBW,EAAYmE,WA/CxC,SAAuBpE,EAAYC,GAC/B,MAAMoE,EAAcpE,EAAWn7D,MAC/B,IAAKu/D,EACD,OAEJ,MAAMC,EAAcliE,OAAOuT,iBAAiBqqD,GACxCsE,EAAYv/D,SACZs/D,EAAYt/D,QAAUu/D,EAAYv/D,QAClCs/D,EAAYE,gBAAkBD,EAAYC,iBAG1C7G,GAAQ4G,GAAahmE,SAAS4E,IAC1B,IAAI7D,EAAQilE,EAAY5uD,iBAAiBxS,GACzC,GAAa,cAATA,GAAwB7D,EAAMmlE,SAAS,MAAO,CAC9C,MAAMC,EAAcjkE,KAAK28D,MAAMY,WAAW1+D,EAAMqlE,UAAU,EAAGrlE,EAAMqB,OAAS,KAAO,GACnFrB,EAAQ,GAAGolE,KACd,CACGnF,GAAoBU,EAAY0D,oBACvB,YAATxgE,GACU,WAAV7D,IACAA,EAAQ,SAEC,MAAT6D,GAAgB+8D,EAAW57D,aAAa,OACxChF,EAAQ,QAAQ4gE,EAAW57D,aAAa,SAE5CggE,EAAYh/D,YAAYnC,EAAM7D,EAAOilE,EAAYzE,oBAAoB38D,GAAM,GAGvF,CAoBQyhE,CAAc3E,EAAYC,GHvF3B,SAA6BD,EAAYC,GAC5CF,GAAmBC,EAAYC,EAAY,WAC3CF,GAAmBC,EAAYC,EAAY,SAC/C,CGqFQ2E,CAAoB5E,EAAYC,GApBxC,SAAyBD,EAAYC,GAC7BX,GAAoBU,EAAY6E,uBAChC5E,EAAWlpD,UAAYipD,EAAW3gE,OAElCigE,GAAoBU,EAAY8E,mBAChC7E,EAAW37D,aAAa,QAAS07D,EAAW3gE,MAEpD,CAcQ0lE,CAAgB/E,EAAYC,GAbpC,SAA0BD,EAAYC,GAClC,GAAIX,GAAoBU,EAAYgF,mBAAoB,CACpD,MAAMC,EAAehF,EACfiF,EAAiBl7D,MAAMC,KAAKg7D,EAAal3D,UAAUuF,MAAMkF,GAAUwnD,EAAW3gE,QAAUmZ,EAAMnU,aAAa,WAC7G6gE,GACAA,EAAe5gE,aAAa,WAAY,GAE/C,CACL,CAMQ6gE,CAAiBnF,EAAYC,IAE1BA,CACX,CAsCOp+B,eAAenqB,GAAUjV,EAAMsB,EAASqhE,GAC3C,OAAKA,IAAUrhE,EAAQ2I,QAAW3I,EAAQ2I,OAAOjK,GAG1CuF,QAAQC,QAAQxF,GAClBwK,MAAMgzD,GAAe8C,GAAgB9C,EAAYl8D,KACjDkJ,MAAMgzD,GA5Hfp+B,eAA6Bm+B,EAAYC,EAAYl8D,GACjD,IAAI4/D,EAAIG,EACR,IAAI/1D,EAAW,GAWf,OATIA,EADAi2D,GAAchE,IAAeA,EAAWqF,cAC7B3H,GAAQsC,EAAWqF,iBAEzB/F,GAAoBU,EAAY0D,qBACE,QAArCC,EAAK3D,EAAW4D,uBAAoC,IAAPD,OAAgB,EAASA,EAAGE,MAChEnG,GAAQsC,EAAW4D,gBAAgBC,KAAK/1D,YAGxC4vD,IAA0C,QAAhCoG,EAAK9D,EAAWsF,kBAA+B,IAAPxB,EAAgBA,EAAK9D,GAAYlyD,YAE1E,IAApBC,EAASrN,QACT4+D,GAAoBU,EAAYoD,yBAG9Br1D,EAAS68B,QAAO,CAAC26B,EAAU/sD,IAAU+sD,EACtCt4D,MAAK,IAAMyK,GAAUc,EAAOzU,KAC5BkJ,MAAMu4D,IACHA,GACAvF,EAAWv9D,YAAY8iE,EAC1B,KACDx9D,QAAQC,WARDg4D,CAUf,CAmG8BwF,CAAchjE,EAAMw9D,EAAYl8D,KACrDkJ,MAAMgzD,GAAekE,GAAS1hE,EAAMw9D,KACpChzD,MAAMgzD,GA7Cfp+B,eAAgCpqB,EAAO1T,GACnC,MAAM2hE,EAAOjuD,EAAMzE,iBAAmByE,EAAMzE,iBAAiB,OAAS,GACtE,GAAoB,IAAhB0yD,EAAKhlE,OACL,OAAO+W,EAEX,MAAMkuD,EAAgB,CAAA,EACtB,IAAK,IAAIhlE,EAAI,EAAGA,EAAI+kE,EAAKhlE,OAAQC,IAAK,CAClC,MACMuzB,EADMwxC,EAAK/kE,GACF0D,aAAa,cAC5B,GAAI6vB,EAAI,CACJ,MAAM0xC,EAAQnuD,EAAM3E,cAAcohB,GAC5Br0B,EAAasD,SAAS2P,cAAcohB,GACrC0xC,IAAS/lE,GAAe8lE,EAAczxC,KAEvCyxC,EAAczxC,SAAaxc,GAAU7X,EAAYkE,GAAS,GAEjE,CACJ,CACD,MAAM8J,EAAQ3P,OAAO8R,OAAO21D,GAC5B,GAAI93D,EAAMnN,OAAQ,CACd,MAAMokD,EAAK,+BACLhzC,EAAM3O,SAASG,gBAAgBwhD,EAAI,OACzChzC,EAAIxN,aAAa,QAASwgD,GAC1BhzC,EAAIhN,MAAMu6B,SAAW,WACrBvtB,EAAIhN,MAAM8zB,MAAQ,IAClB9mB,EAAIhN,MAAM+zB,OAAS,IACnB/mB,EAAIhN,MAAM+gE,SAAW,SACrB/zD,EAAIhN,MAAMghE,QAAU,OACpB,MAAMrX,EAAOtrD,SAASG,gBAAgBwhD,EAAI,QAC1ChzC,EAAIpP,YAAY+rD,GAChB,IAAK,IAAI9tD,EAAI,EAAGA,EAAIkN,EAAMnN,OAAQC,IAC9B8tD,EAAK/rD,YAAYmL,EAAMlN,IAE3B8W,EAAM/U,YAAYoP,EACrB,CACD,OAAO2F,CACX,CAS8BsuD,CAAiB9F,EAAYl8D,KAN5C,IAOf,CC/KA,MAAMiiE,GAAY,6BACZC,GAAwB,8CACxBC,GAAiB,qDAchBrkC,eAAeskC,GAAMphE,EAASqhE,EAAaC,EAAStiE,EAASuiE,GAChE,IACI,MAAMC,EAAcF,ELrBrB,SAAoB3H,EAAK8H,GAE5B,GAAI9H,EAAIhkD,MAAM,iBACV,OAAOgkD,EAGX,GAAIA,EAAIhkD,MAAM,SACV,OAAOtY,OAAO41B,SAASyuC,SAAW/H,EAGtC,GAAIA,EAAIhkD,MAAM,aACV,OAAOgkD,EAEX,MAAM9pB,EAAMzxC,SAASujE,eAAeC,qBAC9B36B,EAAO4I,EAAIxxC,cAAc,QACzB1E,EAAIk2C,EAAIxxC,cAAc,KAO5B,OANAwxC,EAAIgyB,KAAKlkE,YAAYspC,GACrB4I,EAAIivB,KAAKnhE,YAAYhE,GACjB8nE,IACAx6B,EAAK66B,KAAOL,GAEhB9nE,EAAEmoE,KAAOnI,EACFhgE,EAAEmoE,IACb,CKFsCC,CAAWV,EAAaC,GAAWD,EAC3DhE,EAAcnB,GAAYmF,GAChC,IAAI5D,EACJ,GAAI8D,EAAmB,CAEnB9D,EAAUlB,SADYgF,EAAkBC,GACTnE,EAClC,MAEGI,QAAgBN,GAAkBqE,EAAanE,EAAar+D,GAEhE,OAAOgB,EAAQi5D,QAzBvB,SAAiBU,GAEb,MAAMqI,EAAUrI,EAAIV,QAAQ,2BAA4B,QACxD,OAAO,IAAIh+C,OAAO,iBAAiB+mD,eAAsB,IAC7D,CAqB+BC,CAAQZ,GAAc,KAAK5D,MACrD,CACD,MAAOv8D,GAEN,CACD,OAAOlB,CACX,CAiBO,SAASkiE,GAAYvI,GACxB,OAAkC,IAA3BA,EAAI2C,OAAO2E,GACtB,CACOnkC,eAAeqlC,GAAeniE,EAASyhE,EAASziE,GACnD,IAAKkjE,GAAYliE,GACb,OAAOA,EAEX,MAAMoiE,EAvBV,SAAmCC,GAAKC,oBAAEA,IACtC,OAAQA,EAEFD,EAAIpJ,QAAQkI,IAAiBxrD,IAE3B,OAAa,CACT,MAAO7c,EAAG,CAAIosB,GAAUg8C,GAAsB97C,KAAKzP,IAAU,GAC7D,IAAKuP,EACD,MAAO,GAEX,GAAIA,IAAWo9C,EACX,MAAO,QAAQxpE,IAEtB,KAXHupE,CAaV,CAQ4BE,CAA0BviE,EAAShB,GACrDwjE,EAnDH,SAAmBxiE,GACtB,MAAMwiE,EAAO,GAKb,OAJAxiE,EAAQi5D,QAAQgI,IAAW,CAACwB,EAAKC,EAAW/I,KACxC6I,EAAK5nE,KAAK++D,GACH8I,KAEJD,EAAK76D,QAAQgyD,IAAS0C,GAAU1C,IAC3C,CA4CiBgJ,CAAUP,GACvB,OAAOI,EAAK38B,QAAO,CAAC26B,EAAU7G,IAAQ6G,EAASt4D,MAAM06D,GAAQxB,GAAMwB,EAAKjJ,EAAK8H,EAASziE,MAAWiE,QAAQC,QAAQk/D,GACrH,CC5DAtlC,eAAe+lC,GAAUC,EAAUplE,EAAMsB,GACrC,IAAI4/D,EACJ,MAAMmE,EAAkC,QAArBnE,EAAKlhE,EAAKqC,aAA0B,IAAP6+D,OAAgB,EAASA,EAAGjuD,iBAAiBmyD,GAC7F,GAAIC,EAAW,CACX,MAAMC,QAAkBb,GAAeY,EAAW,KAAM/jE,GAExD,OADAtB,EAAKqC,MAAMO,YAAYwiE,EAAUE,EAAWtlE,EAAKqC,MAAM+6D,oBAAoBgI,KACpE,CACV,CACD,OAAO,CACX,CA0COhmC,eAAemmC,GAAY/H,EAAYl8D,GACtCu7D,GAAoBW,EAAYmE,iBA1CxCviC,eAA+Bo+B,EAAYl8D,SAC3B6jE,GAAU,aAAc3H,EAAYl8D,UACtC6jE,GAAU,mBAAoB3H,EAAYl8D,SAExC6jE,GAAU,OAAQ3H,EAAYl8D,UAChC6jE,GAAU,aAAc3H,EAAYl8D,EAElD,CAoCckkE,CAAgBhI,EAAYl8D,SAnC1C89B,eAA8Bo+B,EAAYl8D,GACtC,MAAMmkE,EAAiB5I,GAAoBW,EAAYkI,kBACvD,KAAMD,GAAmB9G,GAAUnB,EAAWpiE,SACxCyhE,GAAoBW,EAAYmI,kBAC7BhH,GAAUnB,EAAW4G,KAAKp3C,UAC/B,OAEJ,MAAMivC,EAAMwJ,EAAiBjI,EAAWpiE,IAAMoiE,EAAW4G,KAAKp3C,QACxD+yC,QAAgBN,GAAkBxD,EAAKuC,GAAYvC,GAAM36D,SACzD,IAAIiE,SAAQ,CAACC,EAASuvB,KACxByoC,EAAW5M,OAASprD,EACpBg4D,EAAW1d,QAAU/qB,EACrB,MAAM6wC,EAAQpI,EACVoI,EAAMxJ,SACNwJ,EAAMxJ,OAAS52D,GAEG,SAAlBogE,EAAMC,UACND,EAAMC,QAAU,SAEhBJ,GACAjI,EAAWsI,OAAS,GACpBtI,EAAWpiE,IAAM2kE,GAGjBvC,EAAW4G,KAAKp3C,QAAU+yC,CAC7B,GAET,CAScgG,CAAevI,EAAYl8D,SARzC89B,eAA6Bo+B,EAAYl8D,GACrC,MACM0kE,EADW/K,GAAQuC,EAAWnyD,YACTrB,KAAK+L,GAAUwvD,GAAYxvD,EAAOzU,WACvDiE,QAAQ0gE,IAAID,GAAWx7D,MAAK,IAAMgzD,GAC5C,CAKc0I,CAAc1I,EAAYl8D,GAExC,CC1DA,MAAM6kE,GAAgB,CAAA,EACtB/mC,eAAegnC,GAASnK,GACpB,IAAIuD,EAAQ2G,GAAclK,GAC1B,GAAa,MAATuD,EACA,OAAOA,EAEX,MAAMp3B,QAAY62B,MAAMhD,GAIxB,OAFAuD,EAAQ,CAAEvD,MAAK35D,cADO8lC,EAAItnC,QAE1BqlE,GAAclK,GAAOuD,EACdA,CACX,CACApgC,eAAeinC,GAAWtlE,EAAMO,GAC5B,IAAIgB,EAAUvB,EAAKuB,QACnB,MAAMgkE,EAAW,8BAEXC,GADWjkE,EAAQ2V,MAAM,kBAAoB,IACxBjO,KAAIo1B,MAAOonC,IAClC,IAAIvK,EAAMuK,EAAIjL,QAAQ+K,EAAU,MAIhC,OAHKrK,EAAIwK,WAAW,cAChBxK,EAAM,IAAIyK,IAAIzK,EAAKl7D,EAAKk7D,KAAKmI,MAE1BrF,GAAe9C,EAAK36D,EAAQ4+D,kBAAkB,EAAGrhE,aACpDyD,EAAUA,EAAQi5D,QAAQiL,EAAK,OAAO3nE,MAC/B,CAAC2nE,EAAK3nE,KACf,IAEN,OAAO0G,QAAQ0gE,IAAIM,GAAW/7D,MAAK,IAAMlI,GAC7C,CACA,SAASqkE,GAASt8C,GACd,GAAc,MAAVA,EACA,MAAO,GAEX,MAAMxrB,EAAS,GAGf,IAAIyD,EAAU+nB,EAAOkxC,QAFC,uBAEsB,IAE5C,MAAMqL,EAAiB,IAAIrpD,OAAO,mDAAoD,MAEtF,OAAa,CACT,MAAM5M,EAAUi2D,EAAel/C,KAAKplB,GACpC,GAAgB,OAAZqO,EACA,MAEJ9R,EAAO3B,KAAKyT,EAAQ,GACvB,CACDrO,EAAUA,EAAQi5D,QAAQqL,EAAgB,IAC1C,MAAMC,EAAc,yCAKdC,EAAe,IAAIvpD,OAHA,6GAGyB,MAElD,OAAa,CACT,IAAI5M,EAAUk2D,EAAYn/C,KAAKplB,GAC/B,GAAgB,OAAZqO,EAAkB,CAElB,GADAA,EAAUm2D,EAAap/C,KAAKplB,GACZ,OAAZqO,EACA,MAGAk2D,EAAYl8C,UAAYm8C,EAAan8C,SAE5C,MAEGm8C,EAAan8C,UAAYk8C,EAAYl8C,UAEzC9rB,EAAO3B,KAAKyT,EAAQ,GACvB,CACD,OAAO9R,CACX,CAwEAugC,eAAe2nC,GAAkB/mE,EAAMsB,GACnC,GAA0B,MAAtBtB,EAAK4P,cACL,MAAM,IAAI7L,MAAM,6CAEpB,MAAMijE,EAAc/L,GAAQj7D,EAAK4P,cAAco3D,aACzCC,QA5EV7nC,eAA2B4nC,EAAa1lE,GACpC,MAAMjC,EAAM,GACN2mE,EAAY,GA+ClB,OA7CAgB,EAAYnrE,SAASqrE,IACjB,GAAI,aAAcA,EACd,IACIjM,GAAQiM,EAAMD,UAAY,IAAIprE,SAAQ,CAAC8rD,EAAMh+C,KACzC,GAAIg+C,EAAKvjD,OAAS+iE,QAAQC,YAAa,CACnC,IAAIC,EAAc19D,EAAQ,EAC1B,MACMm5D,EAAWsD,GADLze,EAAKyc,MAEZ55D,MAAM88D,GAAajB,GAAWiB,EAAUhmE,KACxCkJ,MAAMlI,GAAYqkE,GAASrkE,GAASzG,SAAS0rE,IAC9C,IACIL,EAAMM,WAAWD,EAAMA,EAAKd,WAAW,WAChCY,GAAe,EAChBH,EAAMD,SAAShpE,OACxB,CACD,MAAOuF,GACH4mC,QAAQ5mC,MAAM,uCAAwC,CAClD+jE,OACA/jE,SAEP,OAEAikE,OAAOxhE,IACRmkC,QAAQ5mC,MAAM,2BAA4ByC,EAAEwiB,WAAW,IAE3Du9C,EAAU9oE,KAAK4lE,EAClB,IAER,CACD,MAAO78D,GACH,MAAMyhE,EAASV,EAAYn2D,MAAM5U,GAAgB,MAAVA,EAAEmoE,QAAiB1jE,SAASsmE,YAAY,GAC7D,MAAdE,EAAM9C,MACN4B,EAAU9oE,KAAKkpE,GAASc,EAAM9C,MACzB55D,MAAM88D,GAAajB,GAAWiB,EAAUhmE,KACxCkJ,MAAMlI,GAAYqkE,GAASrkE,GAASzG,SAAS0rE,IAC9CG,EAAOF,WAAWD,EAAML,EAAMD,SAAShpE,OAAO,MAE7CwpE,OAAOhK,IACRrzB,QAAQ5mC,MAAM,kCAAmCi6D,EAAI,KAG7DrzB,QAAQ5mC,MAAM,iCAAkCyC,EACnD,CACJ,IAEEV,QAAQ0gE,IAAID,GAAWx7D,MAAK,KAE/Bw8D,EAAYnrE,SAASqrE,IACjB,GAAI,aAAcA,EACd,IACIjM,GAAQiM,EAAMD,UAAY,IAAIprE,SAAS8rD,IACnCtoD,EAAInC,KAAKyqD,EAAK,GAErB,CACD,MAAO1hD,GACHmkC,QAAQ5mC,MAAM,sCAAsC0jE,EAAM9C,OAAQn+D,EACrE,CACJ,IAEE5G,IAEf,CAW2BsoE,CAAYX,EAAa1lE,GAChD,OAXJ,SAAyB2lE,GACrB,OAAOA,EACFh9D,QAAQs9D,GAASA,EAAKnjE,OAAS+iE,QAAQS,iBACvC39D,QAAQs9D,GAAS/C,GAAY+C,EAAKllE,MAAM4Q,iBAAiB,SAClE,CAOW40D,CAAgBZ,EAC3B,CASO7nC,eAAe0oC,GAActK,EAAYl8D,GAC5C,MAAMgB,EAAkC,MAAxBhB,EAAQymE,aAClBzmE,EAAQymE,aACRzmE,EAAQ0mE,UACJ,WAZP5oC,eAA6Bp/B,EAAMsB,GACtC,MAAM2mE,QAAclB,GAAkB/mE,EAAMsB,GAK5C,aAJuBiE,QAAQ0gE,IAAIgC,EAAMj+D,KAAKu9D,IAC1C,MAAMxD,EAAUwD,EAAKW,iBAAmBX,EAAKW,iBAAiB9D,KAAO,KACrE,OAAOK,GAAe8C,EAAKjlE,QAASyhE,EAASziE,EAAQ,MAEzC0U,KAAK,KACzB,CAMoBmyD,CAAc3K,EAAYl8D,GAC1C,GAAIgB,EAAS,CACT,MAAM8lE,EAAY1nE,SAASC,cAAc,SACnC0nE,EAAe3nE,SAASM,eAAesB,GAC7C8lE,EAAUnoE,YAAYooE,GAClB7K,EAAW3oD,WACX2oD,EAAWp9D,aAAagoE,EAAW5K,EAAW3oD,YAG9C2oD,EAAWv9D,YAAYmoE,EAE9B,CACL,CC9KOhpC,eAAekpC,GAAMtoE,EAAMsB,EAAU,IACxC,MAAM60B,MAAEA,EAAKC,OAAEA,GAAWolC,GAAax7D,EAAMsB,GACvCk8D,QAAoBvoD,GAAUjV,EAAMsB,GAAS,SAC7CwmE,GAActK,EAAYl8D,SAC1BikE,GAAY/H,EAAYl8D,GCT3B,SAAoBtB,EAAMsB,GAC7B,MAAMe,MAAEA,GAAUrC,EACdsB,EAAQinE,kBACRlmE,EAAMkmE,gBAAkBjnE,EAAQinE,iBAEhCjnE,EAAQ60B,QACR9zB,EAAM8zB,MAAQ,GAAG70B,EAAQ60B,WAEzB70B,EAAQ80B,SACR/zB,EAAM+zB,OAAS,GAAG90B,EAAQ80B,YAE9B,MAAMoyC,EAASlnE,EAAQe,MACT,MAAVmmE,GACA/sE,OAAOsD,KAAKypE,GAAQ3sE,SAASuG,IACzBC,EAAMD,GAAOomE,EAAOpmE,EAAI,GAIpC,CDRIqmE,CAAWjL,EAAYl8D,GAEvB,aADsBi7D,GAAciB,EAAYrnC,EAAOC,EAE3D,CACOgJ,eAAespC,GAAS1oE,EAAMsB,EAAU,IAC3C,MAAM60B,MAAEA,EAAKC,OAAEA,GAAWolC,GAAax7D,EAAMsB,GACvC+N,QAAYi5D,GAAMtoE,EAAMsB,GACxB46D,QAAYF,GAAY3sD,GACxBmxD,EAAS9/D,SAASC,cAAc,UAChCkE,EAAU27D,EAAO17D,WAAW,MAC5B6jE,EAAQrnE,EAAQsnE,YRiDnB,WACH,IAAID,EACAE,EACJ,IACIA,EAAgB7J,OACnB,CACD,MAAO/4D,GAEN,CACD,MAAM26B,EAAMioC,GAAiBA,EAAcC,IACrCD,EAAcC,IAAIC,iBAClB,KAON,OANInoC,IACA+nC,EAAQhhD,SAASiZ,EAAK,IAClBpG,OAAOjS,MAAMogD,KACbA,EAAQ,IAGTA,GAAShpE,OAAOopE,kBAAoB,CAC/C,CQpEwCC,GAC9BC,EAAc3nE,EAAQ2nE,aAAe9yC,EACrC+yC,EAAe5nE,EAAQ4nE,cAAgB9yC,EAa7C,OAZAoqC,EAAOrqC,MAAQ8yC,EAAcN,EAC7BnI,EAAOpqC,OAAS8yC,EAAeP,EAC1BrnE,EAAQ6nE,eRkEV,SAA+B3I,IAC9BA,EAAOrqC,MAAQ4lC,IACfyE,EAAOpqC,OAAS2lC,MACZyE,EAAOrqC,MAAQ4lC,IACfyE,EAAOpqC,OAAS2lC,GACZyE,EAAOrqC,MAAQqqC,EAAOpqC,QACtBoqC,EAAOpqC,QAAU2lC,GAAuByE,EAAOrqC,MAC/CqqC,EAAOrqC,MAAQ4lC,KAGfyE,EAAOrqC,OAAS4lC,GAAuByE,EAAOpqC,OAC9CoqC,EAAOpqC,OAAS2lC,IAGfyE,EAAOrqC,MAAQ4lC,IACpByE,EAAOpqC,QAAU2lC,GAAuByE,EAAOrqC,MAC/CqqC,EAAOrqC,MAAQ4lC,KAGfyE,EAAOrqC,OAAS4lC,GAAuByE,EAAOpqC,OAC9CoqC,EAAOpqC,OAAS2lC,IAG5B,CQxFQqN,CAAsB5I,GAE1BA,EAAOn+D,MAAM8zB,MAAQ,GAAG8yC,IACxBzI,EAAOn+D,MAAM+zB,OAAS,GAAG8yC,IACrB5nE,EAAQinE,kBACR1jE,EAAQwkE,UAAY/nE,EAAQinE,gBAC5B1jE,EAAQykE,SAAS,EAAG,EAAG9I,EAAOrqC,MAAOqqC,EAAOpqC,SAEhDvxB,EAAQi8D,UAAU5E,EAAK,EAAG,EAAGsE,EAAOrqC,MAAOqqC,EAAOpqC,QAC3CoqC,CACX,+BEMcnjE,EAAW,wIAA+E,qBAAtG6C,EAAiHH,EAAAuc,EAAAnc,mDAA9E9C,EAAW,qCAAlCA,EAAW,iGAlCjB,MAAAksE,GAAa,yEAJRn+D,EAAK,IAAAwuC,GACL4vB,SAAAA,EAAW,IAAE5vB,oIAOjBryC,MAAM0F,QAAQ7B,IAA2B,IAAjBA,EAAMnN,mBACjCmsC,QAAQ5mC,MAAM,+CAGVimE,EtEyLa,EAACr+D,EAAOsK,EAAS,CAAE6mB,WAAY,CAAC,EAAG,GAAIO,gBAAYtgC,MAItE,GAAqB,IAAjB4O,EAAMnN,OACN,MAAO,CAAEwS,EAAG,EAAGsG,EAAG,EAAGof,MAAO,EAAGC,OAAQ,GAE3C,MAAM2G,EAAM3xB,EAAM+8B,QAAO,CAACuhC,EAASC,KAC/B,MAAMC,EAA2B,iBAAbD,EACpB,IAAI76B,EAAep5B,EAAOonB,YAAe8sC,OAAkBptE,EAAXmtE,EAC5Cj0D,EAAOonB,aACPgS,EAAc86B,EACRl0D,EAAOonB,WAAW/3B,IAAI4kE,GACrBttC,GAAmBstC,GAEhBA,EADAj0D,EAAOonB,WAAW/3B,IAAI4kE,EAASl4C,KAG7C,MAAMyL,EAAU4R,EAAc3R,GAAU2R,EAAap5B,EAAO6mB,YAAc,CAAE9rB,EAAG,EAAGsG,EAAG,EAAGimB,GAAI,EAAGC,GAAI,GACnG,OAAOG,GAAiBssC,EAASxsC,EAAQ,GAC1C,CAAEzsB,EAAGogB,IAAU9Z,EAAG8Z,IAAUmM,IAAI,IAAWC,IAAI,MAClD,OAAOI,GAAUN,EAAI,EsE7MD8sC,CAAez+D,GAC7Bs0B,EAAWC,GAAqB8pC,EAAaF,GARjC,IAQ0D,GAAK,EAAK,IAEhFO,EAAkBppE,SAAS2P,cAAc,0BAE3CqvB,GFsBDN,eAAqBp/B,EAAMsB,EAAU,IAExC,aADqBonE,GAAS1oE,EAAMsB,IACtBm/D,WAClB,CExBMsJ,CAAMD,EAAe,CAEnB3zC,MAAOozC,GACPnzC,OAhBc,IAiBd/zB,MAAK,CACH8zB,eACAC,eACArJ,UAAS,aAAe2S,EAASjvB,QAAQivB,EAAS3oB,cAAc2oB,EAAS9R,WAE1EpjB,MAAMw/D,IACD,MAAAC,EAAOvpE,SAASC,cAAc,KACpCspE,EAAKC,SAAc,GAAAV,GAAY,+BAC/BS,EAAK7F,KAAO4F,EACZC,EAAKE,OAAK,4PCnClB,MAAMC,kCCAN,MAAMC,EAAc,CAAC,KAAM,UAAW,OAAQ,QACxCC,EAAe,CAAC,OAAQ,OAAQ,OAAQ,OAE9C,SAASC,EAAahrB,GACpB,OAAO8qB,EAAYn1B,SAASqK,EAAKn7C,KACnC,CACA,SAASomE,EAAcjrB,GACrB,OAAO+qB,EAAap1B,SAASqK,EAAKn7C,KACpC,CAmBA,SAASqmE,EAAaC,EAAOC,EAAeC,EAAcC,GAMxD,IAAIC,GAAc,EAGlB,QAAoBtuE,IAAjBouE,EAA2B,CAM5B,MAAMG,EAAaL,EAAME,GACnBI,EAAgBN,EAAMC,GAAeM,OAC3C,IAAK,IAAI/sE,EAAIysE,EAAc,EAAGzsE,EAAIwsE,EAAMzsE,OAAQC,IAAK,CACnD,MAAMgtE,EAAiBR,EAAMxsE,GAAG+sE,OAChC,GAAIC,IAAmBF,EAAc,CACnCF,EAAa5sE,EACb,KACR,CAAY,GAAIgtE,EAAiBF,EAAc,CAErCF,EADCI,EAAiBH,EAAWE,OAChB/sE,EAEA0sE,EAEf,KACR,CACA,EACuB,IAAhBE,IAAmBA,EAAaF,EACvC,KAAO,CACH,IAAK,IAAI1sE,EAAIysE,EAAgB,EAAGzsE,EAAIwsE,EAAMzsE,OAAQC,IAChD,GAAIwsE,EAAMxsE,GAAG+sE,QAAUP,EAAMC,GAAeM,OAAQ,CAClDH,EAAa5sE,EACb,KACR,EAEuB,IAAhB4sE,IAAmBA,GAAc,EACxC,CAkBE,OAhBGA,GAAc,GAAKJ,EAAMI,GAAY1mE,KAAKqiE,WAAW,UAMlDoE,GAAUH,EAAMC,GAAeM,SAAWP,EAAMI,GAAYG,QAC5B,OAA9BP,EAAMC,GAAevmE,MACU,YAA9BsmE,EAAMC,GAAevmE,QAK1B0mE,EAAaL,EAAaC,EAAMI,EAAWF,GAAc,IAGtDE,CACT,CAEA,SAASK,EAAiBT,EAAOU,EAAQC,EAAOC,GAC9C,MAAMC,EAAgBd,EAAaC,EAAOU,EAAQL,EAAWO,IAC7DD,EAAMD,GAAQluE,KAAKquE,EACrB,CAEA,SAASC,EAAwBd,EAAOU,GACtC,MAAMK,EAAYf,EAAMU,GAAQH,OAChC,IAAK,IAAI/sE,EAAIktE,EAAO,EAAGltE,GAAK,EAAGA,IAC7B,GAAGutE,IAAcf,EAAMxsE,GAAG+sE,OACxB,OAAO/sE,EAGX,MAAM,IAAI6F,MAAM,gDAClB,CAEA,SAAS2nE,EAAiBnsB,EAAMmrB,EAAOW,EAAOD,EAAQE,GACpD,GAAiB,SAAd/rB,EAAKn7C,KAEN,mBADOinE,EAAMD,GAGf,MAAMH,EAAS1rB,EAAK0rB,OAGhBP,EAAMU,EAAS,IAAMV,EAAMU,EAAS,GAAGH,OAASA,EAClDI,EAAMD,GAAQluE,KAAKkuE,EAAS,GAE5BC,EAAMD,GAAQluE,UAAKV,GAIrB,IAAImvE,EAAsBlB,EAAaC,EAAOU,EAAQL,EAAWO,KACrC,IAAzBK,GAAkE,SAApCjB,EAAMiB,GAAqBvnE,MAC1DunE,IAEFN,EAAMD,GAAQluE,KAAKyuE,GAED,SAAdpsB,EAAKn7C,MACPknE,EAAUpuE,KAAKkuE,EAEnB,CAEA,SAASQ,EAAkBlB,EAAOj5C,GAChC,GAAU,IAAPA,EAAU,MAAM,IAAI1tB,MAAM,GAAG2mE,EAAMj5C,GAAIrtB,uCAC5C,CAEA,SAASynE,EAAenB,EAAOnrB,EAAMusB,EAAcT,EAAOD,GAExD,GADAQ,EAAkBlB,EAAOU,QACK5uE,IAA3BsvE,EAAavsB,EAAKua,KAAoB,MAAM,IAAI/1D,MAAM,uBAAuBw7C,EAAKua,4CAGrFiS,EAA0BrB,EAAOW,EAAMD,EAAOU,EAAavsB,EAAKua,KAClE,CAEA,SAASkS,EAAkBtB,EAAOC,EAAeU,EAAOC,GACtDM,EAAkBlB,EAAOC,GACzB,MAAMprB,EAAOmrB,EAAMC,GACnB,GAAkB,SAAdprB,EAAKn7C,KAAiB,CACxB,GAAIknE,EAAUrtE,OAAS,EAAG,MAAM,IAAI8F,MAAM,4BAG1CgoE,EAA0BrB,EAAOW,EAAOV,EADrBW,EAAUA,EAAUrtE,OAAS,GAEpD,MAAS,GAAkB,SAAdshD,EAAKn7C,KAAiB,CAC/B,GAAIknE,EAAUrtE,OAAS,EAAG,MAAM,IAAI8F,MAAM,4BAG1CgoE,EAA0BrB,EAAOW,EAAOV,EADlBF,EAAaC,EAAOK,EAAWO,IAEzD,KAA2B,QAAd/rB,EAAKn7C,MACd2nE,EAA0BrB,EAAOW,EAAOV,GAAgB,EAE5D,CAQA,SAASoB,EAA0BrB,EAAOW,EAAOV,EAAesB,GAC9D,IAAK,IAAI/tE,EAAI,EAAGA,EAAIysE,EAAezsE,IAAK,CACtC,IAAI+rE,EAAOoB,EAAMntE,GACjB,QAAY1B,IAATytE,EAAmB,CACpB,MAAMiC,EAAMjC,EAAK1nE,QAAQooE,IACb,IAATuB,IACoB,SAAlBxB,EAAMxsE,GAAGkG,OACV6lE,EAAOuB,EAAwBd,EAAOT,IAExCA,EAAKiC,GAAOD,EAEpB,CACA,QACSZ,EAAMV,EACf,CAkCA,SAASI,EAAWO,GAClB,OAAOA,EAAUA,EAAUrtE,OAAQ,EACrC,QAEAkuE,GApCA,SAAuBzB,EAAOoB,EAAcT,GAC1C,MAAMC,EAAY,GAGlB,IAAK,IAAIptE,EAAI,EAAGA,EAAIwsE,EAAMzsE,OAAQC,IAAK,CACrC,MAAMqhD,EAAOmrB,EAAMxsE,GACb+sE,EAAS1rB,EAAK0rB,OAEpB,GAAIK,EAAUrtE,OAAS,EAErB,IAAK,IAAImuE,EAAKd,EAAUrtE,OAAS,EAAGmuE,GAAM,EAAGA,IAExCnB,GAAUP,EADMY,EAAUc,IACEnB,QAC7BK,EAAUplE,MAIE,SAAdq5C,EAAKn7C,KACPynE,EAAenB,EAAOnrB,EAAMusB,EAAcT,EAAOntE,GAEzCqsE,EAAahrB,GACrBmsB,EAAiBnsB,EAAMmrB,EAAOW,EAAOntE,EAAGotE,GACjCd,EAAcjrB,GACrBysB,EAAkBtB,EAAOxsE,EAAGmtE,EAAOC,GAEnCH,EAAiBT,EAAOxsE,EAAGmtE,EAAOC,EAIxC,CACA,EDnNsBe,GAEhBhC,EAAc,CAAC,KAAM,UAAW,OAAQ,QACxCC,EAAe,CAAC,OAAQ,OAAQ,OAAQ,OACxCgC,EAAc,CAAC,MAAO,OAAQ,MAAO,SAAU,OAErD,MAAMC,EACJ,WAAAh+D,CAAY9N,GACVwE,KAAKxE,KAAOA,EACZwE,KAAKk7D,QAAU,GACfl7D,KAAKylE,MAAQ,GACbzlE,KAAKomE,MAAQ,GACbpmE,KAAKunE,aAAe,CAAC,GAGzB,EA4IA,SAASC,EAAmBpxE,GAC1B,OAAoC,IAA7BivE,EAAa/nE,QAAQlH,KACE,IAA5BgvE,EAAY9nE,QAAQlH,KACQ,IAA5BixE,EAAY/pE,QAAQlH,EACxB,QAuCAqxE,GApLA,SAAeC,GACb,MAAMC,EAAQD,EAAS99D,MAAM,MACvBg+D,EAAQ,GAEd,IAAIf,EAAe,CAAA,EACfgB,EAAe,GACfC,EAAe,EACfC,GAAa,EACbC,EAAc,KACdC,GAAgB,EAmEpB,OA/DAN,EAAM/wE,SAAQ,CAACsxE,EAAMjvE,KACnB,MAAMkvE,EAAcD,EAAKv+D,OACzB,IAAKw+D,GAAkC,MAAnBA,EAAY,GAAY,OACvC,GAAIA,EAAY3G,WAAW,SAU9B,OARGwG,GAAa7C,EAAc6C,EAAYvC,MAAOoB,EAAcmB,EAAY5B,OAC3ES,EAAe,CAAA,EACfgB,EAAe,GACfC,EAAgB,EAChBC,GAAa,EACbC,EAAc,IAAIV,EAAKa,EAAYnL,UAAU,IAC7C4K,EAAM3vE,KAAK+vE,QACXC,GAAgB,GAEZ,GAAGA,GAAiBE,EAAYn1D,MAAM,iBAAkB,CAC5D,MAAO7V,EAAKxF,GAASuwE,EAAKt+D,MAAM,KAEhC,YADAo+D,EAAY9M,QAAQ/9D,EAAIwM,QAAUhS,EAAMgS,OAE9C,CACMs+D,GAAgB,EAGlBF,IAEA,MAAM/B,EAASkC,EAAKvO,OAAO,MAC3B,IAAIyO,EAOJ,QANiC7wE,IAA9BswE,EAAaC,GACdM,EAAeP,EAAaC,IAE5BM,EAAepC,EACf6B,EAAaC,GAAgB9B,GAE5BoC,IAAiBpC,EAClBgC,EAAYT,aAAaO,GAAc7vE,KAAK8vE,QACxC,GAAGK,EAAepC,EACtB6B,IAAeC,GAAgB9B,EAC5BgC,EAAYT,aAAaO,GAC1BE,EAAYT,aAAaO,GAAc7vE,KAAK8vE,GAE5CC,EAAYT,aAAatvE,KAAK,CAAC8vE,QAE9B,CACH,KAAKD,GAAgB,EAAGA,IAAe,CAErC,GADoBD,EAAaC,KACZ9B,EAAQ,KACrC,CACM,IAAqB,IAAlB8B,EACD,MAAM,IAAIhpE,MAAM,gCAAgCopE,MAEhDF,EAAYT,aAAaO,GAAc7vE,KAAK8vE,EAEpD,CAEI,IAAIjsE,EAwBR,SAAkBusE,GAChB,MAAMvsE,EAAO,CAAE+4D,IAAI,GAAIC,OAAQ,GAAI31D,KAAM,IACzC,GAAoB,MAAjBkpE,EAAU,GAAY,CACvB,MAAMC,EAAWD,EAAU/qE,QAAQ,KACnCxB,EAAK4I,MAAQ2jE,EAAUrL,UAAU,EAAEsL,GAAU3+D,OAC7C0+D,EAAYA,EAAUrL,UAAUsL,EAAS,GAAGC,WAChD,CACE,MAAM7jE,EAAQ2jE,EAAU/qE,QAAQ,KAChC,GAAGoH,EAAQ,EACN8iE,EAAmBa,GAAYvsE,EAAKqD,KAAOkpE,EACvCvsE,EAAK+4D,IAAM/4D,EAAKg5D,OAASuT,MAC7B,CACH,MAAMG,EAAYH,EAAUrL,UAAU,EAAGt4D,GACnC+jE,EAAgBJ,EAAUrL,UAAUt4D,EAAQ,GAE/C8iE,EAAmBgB,KACpB1sE,EAAKqD,KAAOqpE,EACZH,EAAYI,GAGd3sE,EAAKg5D,OAASuT,EAAU/R,QAAQ,OAAO,KACvCx6D,EAAK+4D,IAWT,SAAoBA,GAClB,IAAI6T,EAAQ,EACRC,EAAS,GACb,IAAK,IAAI1vE,EAAI,EAAGA,EAAI47D,EAAI77D,OAAQC,IAAK,CACnC,MAAM2vE,EAAK/T,EAAI57D,GACf,GAAQ,MAAL2vE,EAAUF,SACR,GAAQ,MAALE,EAAUF,QACb,CACH,GAAGA,EAAQ,EAAG,SACTC,GAAUC,CACrB,CACA,CACE,OAAOD,EAAOh/D,MAChB,CAxBek/D,CAAWR,GAAW/R,QAAQ,OAAO,IACpD,CACE,OAAOx6D,CACT,CAhDegtE,CAASZ,EAAKv+D,QACzB7N,EAAKkqE,OAAS8B,EACXhsE,EAAK4I,QAAOmiE,EAAa/qE,EAAK4I,OAASqjE,GAC1CC,EAAYvC,MAAMxtE,KAAK6D,GACvBksE,EAAY5B,MAAM2B,GAAa,EAAE,IAKnC5C,EAAc6C,EAAYvC,MAAOoB,EAAcmB,EAAY5B,OACpDwB,CACT,kBE5FA,MAKM90B,GALYsgB,GAGkB,IAAfA,GAGf5hC,GALa4hC,GACkB,IAAhBA,GAMrB,SAAS2V,GAAev8C,EAAI1wB,EAAO67B,GACjC,MAAO,CACLnL,GAAKA,EAAG,GACRrtB,KAAO,OACPrD,KAAOA,EACP67B,SAAWA,EAEf,CACA,SAASqxC,GAAeC,EAAUC,EAAUjwE,EAAGkwE,EAAW,GAAIC,GAE5D,IAAIhjB,GAAW,EAGXijB,EAAY,GACZh0C,EAAe,GACfkiB,EAAQ,GAkBZ,OAjBG+tB,GAAa6D,IACR,GAAHlwE,IACDowE,EAAY,IACZh0C,EAAc,MAIf4zC,EAAWC,IACZG,EAAY,IACZjjB,GAAW,GAEK,OAAf+iB,GAAsC,YAAfA,EACf,IAANlwE,EAAYs+C,EAAO,OACR,IAANt+C,IAAYs+C,EAAO,SACL,SAAf4xB,GACE,IAANlwE,IAAYs+C,EAAO,QAEjB,CACL/qB,GAAK,GAAGy8C,KAAYC,IACpB9jD,OAAS6jD,EAAS,GAClBnuE,OAASouE,EAAS,GAClB3xB,MAAQ,GACRz7C,KAAO,CAAE,EACTs5B,aAAci0C,EACdh0C,aAAcA,EACd+wB,SAAUA,EACV7O,MAAOA,EAEX,CA6BA,SAAS+xB,GAAgB7B,GACvB,MAAMthE,EAAM,GACNyzB,EAAM,GACN8b,EAAc,CAAA,EACpB,IAAI6zB,EACJ,MAAMC,EAAc,GACpB,IAAI1uC,EAAS,EAAG2uC,GAAK,EACrB,KAAO3uC,EAAS2sC,EAAKhC,MAAMzsE,OAAQ8hC,IAAU,CAC3C,MAAMwf,EAAOmtB,EAAKhC,MAAM3qC,GAExB,GAAG2sC,EAAKrB,MAAMtrC,GAAQ,CAEpB,IAAInD,EAOJ,GARA8xC,IAIG/zB,EAAY5a,GAAS4a,EAAY5a,GAAQhgC,OAAS,IAAI2sE,EAAKrB,MAAMtrC,GAAQ/1B,IAAI2kE,SAC3Eh0B,EAAY5a,GAAU,CAAChgC,OAAQ,IAAI2sE,EAAKrB,MAAMtrC,GAAQ/1B,IAAI2kE,SAAUprE,OAAQ,IAG7EirE,EACA,CACF,MAAMI,EAAWlC,EAAKhC,MAAM8D,EAAS/8C,IACrC,GAAGm9C,EAAS3D,SAAW1rB,EAAK0rB,OAC1BruC,EAAW,CAACnsB,EAAE+9D,EAAS5xC,SAASnsB,EAAGsG,EAAEy3D,EAAS5xC,SAAS7lB,EAAE0f,SACrD,GAAGm4C,EAAS3D,OAAS1rB,EAAK0rB,OAC9ByD,IACA9xC,EAAW,CAACnsB,EAAE+9D,EAAS5xC,SAASnsB,EAAEsnC,GAAQhhC,EAAEy3D,EAAS5xC,SAAS7lB,OAC3D,CACH,IACIzW,EADA47B,EAAO0yC,EAAS3D,OAAS1rB,EAAK0rB,OAElC,KAAM/uC,KAAO,GAAG57B,EAAamuE,EAAYvoE,MACzC02B,EAAW,CAACnsB,EAAEnQ,EAAWs8B,SAASnsB,EAAGsG,EAAG23D,EAAIj4C,GAC7C,CAE8B,SAA5Bi2C,EAAKhC,MAAM3qC,EAAO,GAAG37B,OACtBw4B,EAAW,CAACnsB,EAAEmsB,EAASnsB,EAAEsnC,GAAQhhC,EAAE6lB,EAAS7lB,GAE/C,MAlBa6lB,EAAS,CAACnsB,EAAE,EAAEsG,EAAE,GAqB9B,MAAM/W,EAAOguE,GAAejuC,EAAQ,CAClC+5B,IAAKva,EAAKua,IACVC,OAAQxa,EAAKwa,OACb31D,KAAMm7C,EAAKn7C,MACRw4B,GACLxxB,EAAMlO,KAAK8C,GAGXwuE,EAAWxuE,EACRuqE,GAAahrB,EAAKn7C,OACnBqqE,EAAYvxE,KAAK8C,GAInB,IAAK,IAAIqV,EAAI,EAAGA,EAAIq3D,EAAKrB,MAAMtrC,GAAQ9hC,OAAQoX,IAAK,CAClD,MAAM84D,EAAWzB,EAAKrB,MAAMtrC,GAAQ1qB,GAMpC,GAHIslC,EAAYwzB,KAAWxzB,EAAYwzB,GAAY,CAACpuE,OAAO,GAAIwD,OAAO,KACnE4qE,EAAWpuC,GAAQ4a,EAAYwzB,GAAU5qE,OAAOrG,KAAKyxE,OAAO5uC,KAE9C,IAAdouC,EACDnuE,EAAKe,KAAKw3D,OAAQ,MACf,CACH,IAAImU,EAAKrB,MAAM8C,GAAW,MAAM,IAAIpqE,MAAM,iBAAiBoqE,oBAC3D,MAAMpvC,EAAOkvC,GAAeluC,EAAQouC,EAAU94D,EAAGkqC,EAAKn7C,KAAMsoE,EAAKhC,MAAMyD,GAAU/pE,MACjFy6B,EAAM3hC,KAAK6hC,EACZ,CACF,CACF,CACF,CAKD,OAHA3zB,EAAM,GAAGrK,KAAK8tE,SAAU,EAGjB,CAACC,SAAWpC,EAAKjsE,KAAM2K,QAAOyzB,QAAO8b,cAC9C,CAEA,MAAM0vB,GAAY,CAAC,KAAM,UAAW,QACpC,SAASE,GAAanmE,GACpB,OAAsC,IAA/BimE,GAAY9nE,QAAQ6B,EAC7B,CC9JO,SAAS2qE,GAAe3jE,EAAO4jE,EAAaC,EAAU,CAAE,EAAEzsB,EAAgB,MAU/E,OATAp3C,EAAMvP,SAAQmE,IACRwiD,IAAiBA,EAActjD,IAAIc,EAAKyxB,MAC1CzxB,EAAKe,KAAO,IACPf,EAAKe,QACLiuE,KACAC,GAEN,IAEI7jE,CACT,CCZO,MAAM8jE,GAAY,sCAIZC,GAAkB,CAC7B/qE,KAAMq3B,GAAW0wB,YACjBh2B,MAAO,GACPC,OAAQ,GACR7O,MAAO,WACI6nD,GAA6B,CACxChrE,KAAMq3B,GAAW0wB,YACjBh2B,MAAO,GACPC,OAAQ,GACR7O,MAAO,WAUF,SAAS8nD,GAAoBtvC,EAAQ4a,EAAa20B,GACvD,MAAMC,EAAS,IAAItwE,IACbuwE,EAAS,IAAIvwE,IACbwwE,EAAW,IAAIxwE,IACfywE,EAAW,IAAIzwE,IAOrB,OALuB,IAApBqwE,GAA6C,IAApBA,GAC1BK,GAAgB5vC,EAAQ4a,EAAa40B,EAAQC,GACxB,IAApBF,GAA6C,IAApBA,GAC1BM,GAAkB7vC,EAAQ4a,EAAa80B,EAAUC,GAE5C,CACLG,aAAc,IAAI5wE,IAAI,IAAIswE,KAAWE,IACrCK,aAAc,IAAI7wE,IAAI,IAAIuwE,KAAWE,IAEzC,CAEA,SAASC,GAAgB7gC,EAAa6L,EAAao1B,EAASC,GACrDD,EAAQ7wE,IAAI4vC,KACfihC,EAAQ5pE,IAAI2oC,GACZ6L,EAAY7L,GAAavrC,OAAO1H,SAAQyE,IACtC0vE,EAAQ7pE,IAAI,GAAG7F,KAAcwuC,KAC7B6gC,GAAgBrvE,EAAYq6C,EAAao1B,EAASC,EAAQ,IAGhE,CAEA,SAASJ,GAAkB9gC,EAAa6L,EAAao1B,EAASC,GACvDD,EAAQ7wE,IAAI4vC,KACfihC,EAAQ5pE,IAAI2oC,GACZ6L,EAAY7L,GAAa/uC,OAAOlE,SAAQ8pC,IACtCqqC,EAAQ7pE,IAAI,GAAG2oC,KAAenJ,KAC9BiqC,GAAkBjqC,EAAYgV,EAAao1B,EAASC,EAAQ,IAGlE,CAUO,SAAS7V,GAAU/uD,EAAO0zB,EAASmxC,EAAYpxC,EAAOqkB,GAC3DgtB,GAAiB9kE,EAAO0zB,EAAQmxC,EAAW,CAAC9V,WAAW,IACpDjX,GAASitB,GAAiBtxC,EAAOqkB,EAASktB,GAC/C,CAEO,SAASC,GAAYjlE,EAAO0zB,EAASmxC,EAAYpxC,EAAOqkB,GAC7DgtB,GAAiB9kE,EAAO0zB,EAAQmxC,EAAW,CAAC9V,WAAW,IACpDjX,GAASitB,GAAiBtxC,EAAOqkB,EAASotB,GAC/C,CAEA,SAASJ,GAAiB9kE,EAAM0zB,EAASmxC,EAAY9V,GACnD4U,GAAe3jE,EAAM6kE,EAAW9V,EAAUr7B,EAC5C,CAQO,SAASqxC,GAAiBtxC,EAAMqkB,EAASjnB,GAC9C4C,EAAMhjC,SAAQkjC,IACTmkB,EAAQhkD,IAAI6/B,EAAKtN,KAClBwK,EAAG8C,EACJ,GAEL,CAMO,SAASuxC,GAAgBvxC,GAC9BA,EAAK18B,MAAQ6sE,GACbnwC,EAAK+e,UAAYqxB,GACjBpwC,EAAK6e,WArGmB,wDAsG1B,CAMO,SAASwyB,GAAcrxC,GAC5BA,EAAK18B,MA9G6B,qCA+GlC08B,EAAK+e,UAAYsxB,GACjBrwC,EAAK6e,WA9G8B,qDA+GrC,yFCwDkC2yB,EAAAlzE,MAAKyxE,SAAQ,c3LyqBxC,IAAyBpwB,EAAO9hD,iC2LzqBdS,EAAK,I3LyqBEqhD,IAAO9hD,YACtC8hD,EAAM9hD,MAAiB,MAATA,EAAgB,GAAKA,U2L1qB1BsD,EAA+CH,EAAAiD,EAAA7C,kBAAvB,GAAAxC,EAAA,IAAA4yE,KAAAA,EAAAlzE,MAAKyxE,SAAQ,KAAAtsE,EAAAyL,EAAAsiE,4dADhClzE,EAAS,yBAAdY,OAAIC,GAAA,0FAKeb,EAAK,YAAYA,EAAQ,sFAKhD+G,KAAM,aACN05C,UAAWqxB,GACX9sE,MAAO6sE,wDAJY,IAAT7xE,EAAS,aAATA,EAAS,SAAuB,IAATA,EAAS,aAATA,EAAS,2GAMzBA,EAAgB,2BAChBA,EAAgB,sBACrBA,EAAU,uBACVA,EAAS,gGAboE,6FALI,IAAjBA,EAAiB,IAAAqI,IAAA,IAAArI,EAAA,IAAAqH,KAAA5B,KAKhDrB,EAAA6a,EAAA,QAAAo1C,EAAAvyD,EAAA9B,EAAW,GAAAw8D,cAAgB,UAAY,IAAE,qDAPxF35D,EASMH,EAAA25C,EAAAv5C,GAPJL,EAIS45C,EAAA52C,wDAJmEzF,EAAiB,IAAA,UAK7FyC,EAAoG45C,EAAAp9B,0EALtDjf,EAAgB,qCAK5CA,EAAiB,+CAJ1BA,EAAS,YAAdY,OAAIC,GAAA,EAAA,mHAAJD,mBADwEZ,EAAiB,MAKhDyvC,GAAA,GAAAnvC,EAAA,IAAA+zD,KAAAA,EAAAvyD,EAAA9B,EAAW,GAAAw8D,cAAgB,UAAY,IAAE,gEAC/Dx8D,EAAK,wBAAYA,EAAQ,uFAGtCA,EAAS,8CAAcA,EAAS,6J3LqFzC,SAAsBmzE,EAAYrmE,GACxC,IAAK,IAAIjM,EAAI,EAAGA,EAAIsyE,EAAWvyE,OAAQC,GAAK,EACvCsyE,EAAWtyE,IAAIsyE,EAAWtyE,GAAGkJ,EAAE+C,EAErC,4H2LtGS9M,EAAW,IAAA,CAAA48C,MAAA,6JAApB/5C,EA8BMH,EAAA25C,EAAAv5C,uHA9BG9C,EAAW,6PAhJZ2jD,EAAS,CAAKzB,KAAMkxB,cAIfrlE,EAAK,IAAAwuC,SACL/a,EAAK,IAAA+a,GACL94C,KAAAA,EAAO,IAAE84C,GACTk1B,SAAAA,EAAW,IAAEl1B,aACbrjC,EAAS,IAAAqjC,EAGhB82B,EAAYrkE,GAASjB,GACrBulE,EAAYtkE,GAASwyB,GACrB+xC,EAAa,GAObj2B,EAAW,CAAA,EAEXk2B,MAAuB5xE,IACvB6xE,MAAuB7xE,IAEvB8xE,EAAS,GACTC,EAAoB,EAEpBC,EAAU,CACZpX,eAAe,EACfqX,eAAe,GA4BX,MAAAzuB,MAAoBxjD,IAajB,SAAAkyE,EAAc/vE,GACrBwvE,EAAaxvE,EAAMgB,IAEZ,SAAAgvE,EAAYhwE,GACnBwvE,EAAa,GAuCN,SAAAS,EAAmB1nE,GAEtB,GADJkxC,EAAA,EAAAm2B,EAAoBrnE,GAChBonE,EAAUC,GAAiB,OACvBM,EAAeP,EAAUC,OAC/B5lE,EAAQkmE,EAAalmE,YACrByzB,EAAQyyC,EAAazyC,OACrB8b,EAAc22B,EAAa32B,gBAC3Bm0B,EAAWwC,EAAaxC,UACxBC,GAAe3jE,EAAM6lE,GACrBP,EAAUpxE,IAAI8L,GACdulE,EAAUrxE,IAAIu/B,IAvBlB76B,GAAO,KACLrE,OAAO4B,iBAAiB,UAAW4vE,GACnCxxE,OAAO4B,iBAAiB,QAAS6vE,EAAW,QAwB5CluE,EAAQ,CAAA,wPAnBJpC,EAAK7C,OAAS,QAChB8yE,EHzEC,SAAiBQ,GACtB,MAAMC,EAAgB,GACtB,IACE,MAAM3E,EAAQ7gD,GAAMulD,GACpB,IAAK,IAAIrzE,EAAI,EAAGA,EAAI2uE,EAAM5uE,OAAQC,IAAK,CACrC,MAAMwuE,EAAOG,EAAM3uE,GACnB,GAAGwuE,EAAKhC,MAAMzsE,OAAS,EAAG,CACxB,MAAMwzE,EAAMlD,GAAgB7B,GAG5B8E,EAAct0E,KAAKu0E,EACpB,CACF,CACF,CAAA,MAAMxrE,GAELmkC,QAAQ5mC,MAAMyC,EACf,CAED,OAAOurE,CACT,CGsDkBE,CAAa5wE,IACzBuwE,EAAmBL,0BAmBpBz6D,GAAaA,EAAUuoB,SAAWvoB,EAAUuoB,QAAQ7gC,SAErDoyE,GAAYjlE,EAAU,IAAAnM,IAAIiE,EAAS47B,SAAUmyC,GAC1C16D,EAAUo7D,YAAcX,IAEzBN,EAAUpxE,IAAI8L,GACdyvC,EAAA,GAAA33C,EAAWqT,GACX4jD,GAAU/uD,EAAU,IAAAnM,IAAIsX,EAAUuoB,SAASmyC,GAC3CP,EAAUpxE,IAAI8L,uBAxGT,SAAiBhK,GAElB,MAAA2+B,EAAS3+B,EAAMiD,OAAOrE,KAAKyxB,GAC7B,IAAA69C,EAAkB,EACH,UAAfsB,EAAwBtB,EAAkB,EACtB,YAAfsB,IAA0BtB,EAAkB,GAC/C,MAAA/4D,EAAY84D,GAAoBtvC,EAAQ4a,EAAa20B,GAC3DuB,EAAmBt6D,EAAUs5D,aAC7BiB,EAAmBv6D,EAAUu5D,aAC7B3V,GAAU/uD,EAAOylE,EAAkBI,EAAYpyC,EAAMiyC,GAErDJ,EAAUpxE,IAAI8L,GACdulE,EAAUrxE,IAAIu/B,eAIdwxC,GAAYjlE,EAAOylE,EAAkBI,EAAYpyC,EAAOiyC,GACxDD,EAAiBzqE,QACjB0qE,EAAiB1qE,QAEjBsqE,EAAUpxE,IAAI8L,GACdulE,EAAUrxE,IAAIu/B,IAKP,SAAUz9B,GACX,MAAAurC,EAASvrC,EAAMiD,OAAO06B,KAAKtN,GAC9BgxB,EAAcvjD,IAAIytC,IACnB8V,EAAcx7C,OAAO0lC,GACrBwjC,GAAiBtxC,EAAU,IAAA5/B,IAAK,CAAAmC,EAAMiD,OAAO06B,KAAKtN,KAAK6+C,MAEvD7tB,EAAct8C,IAAIwmC,GAClBwjC,GAAiBtxC,EAAU,IAAA5/B,IAAK,CAAAmC,EAAMiD,OAAO06B,KAAKtN,KAAK2+C,KAEzDO,EAAUrxE,IAAIu/B,eAUdgc,EAAA,EAAAo2B,EAAWpX,eAAiBoX,EAAWpX,cAAaoX,GACpDlC,GAAe3jE,EAAM6lE,GACrBP,EAAUpxE,IAAI8L,IAIP,SAAWhK,GACZ,MAAApB,EAAOoB,EAAMiD,OAAOrE,KAAKe,KACd,WAAdf,EAAKoE,MAEN2sE,EAAUl1E,SAAS,CAAA6wE,EAAKxuE,KACnBwuE,EAAKoC,WAAa9uE,EAAK85D,KACxBjf,EAAA,EAAAm2B,EAAoB9yE,OAOnB,SAAiBkD,GACxBiwE,EAAmB1pD,SAASvmB,EAAMrB,OAAOnD,8BAkDqCo0E,E3L2tB3E,SAAsBluE,GAC5B,MAAM8uE,EAAkB9uE,EAAOuN,cAAc,YAC7C,OAAOuhE,GAAmBA,EAAgB3uE,OAC3C,C2L9tBmG4uE,CAAA5sE,0BASnFyrE,EAAS9zE,sBAAc+zE,EAAS/zE"}