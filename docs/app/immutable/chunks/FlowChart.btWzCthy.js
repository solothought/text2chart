import{r as gt,s as we,e as Ue,h as De,k as Ne,l as U,d as P,v as b,R as ge,i as Z,z as ze,u as Ze,g as Ge,f as Je,S as Yn,q as J,j as ve,t as Yt,m as Ee,c as Ft,p as Kt,T as Ie,U as Ce,V as it,W as qe,b as Ve,X as Q,w as he,Y as ee,B as Me,Z as te,_ as mn,x as fn,$ as Fn,a0 as si,y as Vt,a1 as tl,a2 as $i,D as Kn,a3 as Se,o as ne,n as Pe,a4 as Nt,a5 as nl,I as il,a6 as qs,a7 as Us,a8 as Zs,a as Eo,a9 as po,C as Gs,aa as So,A as Co,ab as Js,ac as Qs,ad as js}from"./scheduler.DPAPgQ84.js";import{a as B,t as V,S as ye,i as _e,c as oe,d as ae,m as re,e as le,g as We,f as Be,b as Po}from"./index.DEEc51ur.js";import{w as ue,r as ot,d as xt}from"./index.Qi2KszwJ.js";const xs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function dt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ai(t,e){B(t,1,1,()=>{e.delete(t.key)})}function ui(t,e,n,i,o,r,s,l,a,u,f,d){let c=t.length,h=r.length,m=c;const y={};for(;m--;)y[t[m].key]=m;const _=[],g=new Map,E=new Map,k=[];for(m=h;m--;){const D=d(o,r,m),H=n(D);let O=s.get(H);O?k.push(()=>O.p(D,e)):(O=u(H,D),O.c()),g.set(H,_[m]=O),H in y&&E.set(H,Math.abs(m-y[H]))}const p=new Set,A=new Set;function F(D){V(D,1),D.m(l,f),s.set(D.key,D),f=D.first,h--}for(;c&&h;){const D=_[h-1],H=t[c-1],O=D.key,R=H.key;D===H?(f=D.first,c--,h--):g.has(R)?!s.has(O)||p.has(O)?F(D):A.has(R)?c--:E.get(O)>E.get(R)?(A.add(O),F(D)):(p.add(R),c--):(a(H,s),c--)}for(;c--;){const D=t[c];g.has(D.key)||a(D,s)}for(;h;)F(_[h-1]);return gt(k),_}function ht(t,e){const n={},i={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],l=e[r];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)o[a]||(n[a]=l[a],o[a]=1);t[r]=l}else for(const a in s)o[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function nn(t){return typeof t=="object"&&t!==null?t:{}}function Oe(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Oe(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var $s={value:()=>{}};function fi(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Rn(n)}function Rn(t){this._=t}function ea(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Rn.prototype=fi.prototype={constructor:Rn,on:function(t,e){var n=this._,i=ea(t+"",n),o,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((o=(t=i[r]).type)&&(o=ta(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<s;)if(o=(t=i[r]).type)n[o]=Mo(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Mo(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Rn(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,r;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};function ta(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function Mo(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=$s,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Bi="http://www.w3.org/1999/xhtml";const zo={svg:"http://www.w3.org/2000/svg",xhtml:Bi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ci(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),zo.hasOwnProperty(e)?{space:zo[e],local:t}:t}function na(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Bi&&e.documentElement.namespaceURI===Bi?e.createElement(t):e.createElementNS(n,t)}}function ia(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ol(t){var e=ci(t);return(e.local?ia:na)(e)}function oa(){}function eo(t){return t==null?oa:function(){return this.querySelector(t)}}function ra(t){typeof t!="function"&&(t=eo(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=new Array(s),a,u,f=0;f<s;++f)(a=r[f])&&(u=t.call(a,a.__data__,f,r))&&("__data__"in a&&(u.__data__=a.__data__),l[f]=u);return new tt(i,this._parents)}function la(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function sa(){return[]}function rl(t){return t==null?sa:function(){return this.querySelectorAll(t)}}function aa(t){return function(){return la(t.apply(this,arguments))}}function ua(t){typeof t=="function"?t=aa(t):t=rl(t);for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var s=e[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),o.push(a));return new tt(i,o)}function ll(t){return function(){return this.matches(t)}}function sl(t){return function(e){return e.matches(t)}}var fa=Array.prototype.find;function ca(t){return function(){return fa.call(this.children,t)}}function da(){return this.firstElementChild}function ha(t){return this.select(t==null?da:ca(typeof t=="function"?t:sl(t)))}var ga=Array.prototype.filter;function ma(){return Array.from(this.children)}function ya(t){return function(){return ga.call(this.children,t)}}function _a(t){return this.selectAll(t==null?ma:ya(typeof t=="function"?t:sl(t)))}function ba(t){typeof t!="function"&&(t=ll(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&t.call(a,a.__data__,u,r)&&l.push(a);return new tt(i,this._parents)}function al(t){return new Array(t.length)}function wa(){return new tt(this._enter||this._groups.map(al),this._parents)}function qn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qn.prototype={constructor:qn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ka(t){return function(){return t}}function va(t,e,n,i,o,r){for(var s=0,l,a=e.length,u=r.length;s<u;++s)(l=e[s])?(l.__data__=r[s],i[s]=l):n[s]=new qn(t,r[s]);for(;s<a;++s)(l=e[s])&&(o[s]=l)}function Ea(t,e,n,i,o,r,s){var l,a,u=new Map,f=e.length,d=r.length,c=new Array(f),h;for(l=0;l<f;++l)(a=e[l])&&(c[l]=h=s.call(a,a.__data__,l,e)+"",u.has(h)?o[l]=a:u.set(h,a));for(l=0;l<d;++l)h=s.call(t,r[l],l,r)+"",(a=u.get(h))?(i[l]=a,a.__data__=r[l],u.delete(h)):n[l]=new qn(t,r[l]);for(l=0;l<f;++l)(a=e[l])&&u.get(c[l])===a&&(o[l]=a)}function pa(t){return t.__data__}function Sa(t,e){if(!arguments.length)return Array.from(this,pa);var n=e?Ea:va,i=this._parents,o=this._groups;typeof t!="function"&&(t=ka(t));for(var r=o.length,s=new Array(r),l=new Array(r),a=new Array(r),u=0;u<r;++u){var f=i[u],d=o[u],c=d.length,h=Ca(t.call(f,f&&f.__data__,u,i)),m=h.length,y=l[u]=new Array(m),_=s[u]=new Array(m),g=a[u]=new Array(c);n(f,d,y,_,g,h,e);for(var E=0,k=0,p,A;E<m;++E)if(p=y[E]){for(E>=k&&(k=E+1);!(A=_[k])&&++k<m;);p._next=A||null}}return s=new tt(s,i),s._enter=l,s._exit=a,s}function Ca(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pa(){return new tt(this._exit||this._groups.map(al),this._parents)}function Ma(t,e,n){var i=this.enter(),o=this,r=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?r.remove():n(r),i&&o?i.merge(o).order():o}function za(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,r=i.length,s=Math.min(o,r),l=new Array(o),a=0;a<s;++a)for(var u=n[a],f=i[a],d=u.length,c=l[a]=new Array(d),h,m=0;m<d;++m)(h=u[m]||f[m])&&(c[m]=h);for(;a<o;++a)l[a]=n[a];return new tt(l,this._parents)}function Oa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,r=i[o],s;--o>=0;)(s=i[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Ta(t){t||(t=Da);function e(d,c){return d&&c?t(d.__data__,c.__data__):!d-!c}for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s=n[r],l=s.length,a=o[r]=new Array(l),u,f=0;f<l;++f)(u=s[f])&&(a[f]=u);a.sort(e)}return new tt(o,this._parents).order()}function Da(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Na(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ia(){return Array.from(this)}function Aa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null}function Ha(){let t=0;for(const e of this)++t;return t}function La(){return!this.node()}function Ra(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],r=0,s=o.length,l;r<s;++r)(l=o[r])&&t.call(l,l.__data__,r,o);return this}function Va(t){return function(){this.removeAttribute(t)}}function Wa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ba(t,e){return function(){this.setAttribute(t,e)}}function Xa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ya(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Fa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ka(t,e){var n=ci(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Wa:Va:typeof e=="function"?n.local?Fa:Ya:n.local?Xa:Ba)(n,e))}function ul(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qa(t){return function(){this.style.removeProperty(t)}}function Ua(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Za(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ga(t,e,n){return arguments.length>1?this.each((e==null?qa:typeof e=="function"?Za:Ua)(t,e,n??"")):on(this.node(),t)}function on(t,e){return t.style.getPropertyValue(e)||ul(t).getComputedStyle(t,null).getPropertyValue(e)}function Ja(t){return function(){delete this[t]}}function Qa(t,e){return function(){this[t]=e}}function ja(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xa(t,e){return arguments.length>1?this.each((e==null?Ja:typeof e=="function"?ja:Qa)(t,e)):this.node()[t]}function fl(t){return t.trim().split(/^|\s+/)}function to(t){return t.classList||new cl(t)}function cl(t){this._node=t,this._names=fl(t.getAttribute("class")||"")}cl.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function dl(t,e){for(var n=to(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function hl(t,e){for(var n=to(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function $a(t){return function(){dl(this,t)}}function eu(t){return function(){hl(this,t)}}function tu(t,e){return function(){(e.apply(this,arguments)?dl:hl)(this,t)}}function nu(t,e){var n=fl(t+"");if(arguments.length<2){for(var i=to(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?tu:e?$a:eu)(n,e))}function iu(){this.textContent=""}function ou(t){return function(){this.textContent=t}}function ru(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function lu(t){return arguments.length?this.each(t==null?iu:(typeof t=="function"?ru:ou)(t)):this.node().textContent}function su(){this.innerHTML=""}function au(t){return function(){this.innerHTML=t}}function uu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function fu(t){return arguments.length?this.each(t==null?su:(typeof t=="function"?uu:au)(t)):this.node().innerHTML}function cu(){this.nextSibling&&this.parentNode.appendChild(this)}function du(){return this.each(cu)}function hu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gu(){return this.each(hu)}function mu(t){var e=typeof t=="function"?t:ol(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yu(){return null}function _u(t,e){var n=typeof t=="function"?t:ol(t),i=e==null?yu:typeof e=="function"?e:eo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function bu(){var t=this.parentNode;t&&t.removeChild(this)}function wu(){return this.each(bu)}function ku(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vu(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Eu(t){return this.select(t?vu:ku)}function pu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Su(t){return function(e){t.call(this,e,this.__data__)}}function Cu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Pu(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,r;n<o;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.options):e[++i]=r;++i?e.length=i:delete this.__on}}}function Mu(t,e,n){return function(){var i=this.__on,o,r=Su(e);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=e;return}}this.addEventListener(t.type,r,n),o={type:t.type,name:t.name,value:e,listener:r,options:n},i?i.push(o):this.__on=[o]}}function zu(t,e,n){var i=Cu(t+""),o,r=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,f;a<u;++a)for(o=0,f=l[a];o<r;++o)if((s=i[o]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?Mu:Pu,o=0;o<r;++o)this.each(l(i[o],e,n));return this}function gl(t,e,n){var i=ul(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Ou(t,e){return function(){return gl(this,t,e)}}function Tu(t,e){return function(){return gl(this,t,e.apply(this,arguments))}}function Du(t,e){return this.each((typeof e=="function"?Tu:Ou)(t,e))}function*Nu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length,s;o<r;++o)(s=i[o])&&(yield s)}var ml=[null];function tt(t,e){this._groups=t,this._parents=e}function En(){return new tt([[document.documentElement]],ml)}function Iu(){return this}tt.prototype=En.prototype={constructor:tt,select:ra,selectAll:ua,selectChild:ha,selectChildren:_a,filter:ba,data:Sa,enter:wa,exit:Pa,join:Ma,merge:za,selection:Iu,order:Oa,sort:Ta,call:Na,nodes:Ia,node:Aa,size:Ha,empty:La,each:Ra,attr:Ka,style:Ga,property:xa,classed:nu,text:lu,html:fu,raise:du,lower:gu,append:mu,insert:_u,remove:wu,clone:Eu,datum:pu,on:zu,dispatch:Du,[Symbol.iterator]:Nu};function nt(t){return typeof t=="string"?new tt([[document.querySelector(t)]],[document.documentElement]):new tt([[t]],ml)}function Au(t){let e;for(;e=t.sourceEvent;)t=e;return t}function rt(t,e){if(t=Au(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const Hu={passive:!1},yn={capture:!0,passive:!1};function Mi(t){t.stopImmediatePropagation()}function $t(t){t.preventDefault(),t.stopImmediatePropagation()}function yl(t){var e=t.document.documentElement,n=nt(t).on("dragstart.drag",$t,yn);"onselectstart"in e?n.on("selectstart.drag",$t,yn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function _l(t,e){var n=t.document.documentElement,i=nt(t).on("dragstart.drag",null);e&&(i.on("click.drag",$t,yn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const On=t=>()=>t;function Xi(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:r,x:s,y:l,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Xi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Lu(t){return!t.ctrlKey&&!t.button}function Ru(){return this.parentNode}function Vu(t,e){return e??{x:t.x,y:t.y}}function Wu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bu(){var t=Lu,e=Ru,n=Vu,i=Wu,o={},r=fi("start","drag","end"),s=0,l,a,u,f,d=0;function c(p){p.on("mousedown.drag",h).filter(i).on("touchstart.drag",_).on("touchmove.drag",g,Hu).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(p,A){if(!(f||!t.call(this,p,A))){var F=k(this,e.call(this,p,A),p,A,"mouse");F&&(nt(p.view).on("mousemove.drag",m,yn).on("mouseup.drag",y,yn),yl(p.view),Mi(p),u=!1,l=p.clientX,a=p.clientY,F("start",p))}}function m(p){if($t(p),!u){var A=p.clientX-l,F=p.clientY-a;u=A*A+F*F>d}o.mouse("drag",p)}function y(p){nt(p.view).on("mousemove.drag mouseup.drag",null),_l(p.view,u),$t(p),o.mouse("end",p)}function _(p,A){if(t.call(this,p,A)){var F=p.changedTouches,D=e.call(this,p,A),H=F.length,O,R;for(O=0;O<H;++O)(R=k(this,D,p,A,F[O].identifier,F[O]))&&(Mi(p),R("start",p,F[O]))}}function g(p){var A=p.changedTouches,F=A.length,D,H;for(D=0;D<F;++D)(H=o[A[D].identifier])&&($t(p),H("drag",p,A[D]))}function E(p){var A=p.changedTouches,F=A.length,D,H;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),D=0;D<F;++D)(H=o[A[D].identifier])&&(Mi(p),H("end",p,A[D]))}function k(p,A,F,D,H,O){var R=r.copy(),Y=rt(O||F,A),I,W,v;if((v=n.call(p,new Xi("beforestart",{sourceEvent:F,target:c,identifier:H,active:s,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:R}),D))!=null)return I=v.x-Y[0]||0,W=v.y-Y[1]||0,function M(w,C,z){var T=Y,X;switch(w){case"start":o[H]=M,X=s++;break;case"end":delete o[H],--s;case"drag":Y=rt(z||C,A),X=s;break}R.call(w,p,new Xi(w,{sourceEvent:C,subject:v,target:c,identifier:H,active:X,x:Y[0]+I,y:Y[1]+W,dx:Y[0]-T[0],dy:Y[1]-T[1],dispatch:R}),D)}}return c.filter=function(p){return arguments.length?(t=typeof p=="function"?p:On(!!p),c):t},c.container=function(p){return arguments.length?(e=typeof p=="function"?p:On(p),c):e},c.subject=function(p){return arguments.length?(n=typeof p=="function"?p:On(p),c):n},c.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:On(!!p),c):i},c.on=function(){var p=r.on.apply(r,arguments);return p===r?c:p},c.clickDistance=function(p){return arguments.length?(d=(p=+p)*p,c):Math.sqrt(d)},c}function no(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function pn(){}var _n=.7,Un=1/_n,en="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xu=/^#([0-9a-f]{3,8})$/,Yu=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),Fu=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),Ku=new RegExp(`^rgba\\(${en},${en},${en},${bn}\\)$`),qu=new RegExp(`^rgba\\(${ft},${ft},${ft},${bn}\\)$`),Uu=new RegExp(`^hsl\\(${bn},${ft},${ft}\\)$`),Zu=new RegExp(`^hsla\\(${bn},${ft},${ft},${bn}\\)$`),Oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};no(pn,wn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:To,formatHex:To,formatHex8:Gu,formatHsl:Ju,formatRgb:Do,toString:Do});function To(){return this.rgb().formatHex()}function Gu(){return this.rgb().formatHex8()}function Ju(){return wl(this).formatHsl()}function Do(){return this.rgb().formatRgb()}function wn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?No(e):n===3?new xe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Tn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Tn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Yu.exec(t))?new xe(e[1],e[2],e[3],1):(e=Fu.exec(t))?new xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ku.exec(t))?Tn(e[1],e[2],e[3],e[4]):(e=qu.exec(t))?Tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Uu.exec(t))?Ho(e[1],e[2]/100,e[3]/100,1):(e=Zu.exec(t))?Ho(e[1],e[2]/100,e[3]/100,e[4]):Oo.hasOwnProperty(t)?No(Oo[t]):t==="transparent"?new xe(NaN,NaN,NaN,0):null}function No(t){return new xe(t>>16&255,t>>8&255,t&255,1)}function Tn(t,e,n,i){return i<=0&&(t=e=n=NaN),new xe(t,e,n,i)}function Qu(t){return t instanceof pn||(t=wn(t)),t?(t=t.rgb(),new xe(t.r,t.g,t.b,t.opacity)):new xe}function Yi(t,e,n,i){return arguments.length===1?Qu(t):new xe(t,e,n,i??1)}function xe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}no(xe,Yi,bl(pn,{brighter(t){return t=t==null?Un:Math.pow(Un,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xe(Rt(this.r),Rt(this.g),Rt(this.b),Zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Io,formatHex:Io,formatHex8:ju,formatRgb:Ao,toString:Ao}));function Io(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}`}function ju(){return`#${Ht(this.r)}${Ht(this.g)}${Ht(this.b)}${Ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ao(){const t=Zn(this.opacity);return`${t===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${t===1?")":`, ${t})`}`}function Zn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ht(t){return t=Rt(t),(t<16?"0":"")+t.toString(16)}function Ho(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new st(t,e,n,i)}function wl(t){if(t instanceof st)return new st(t.h,t.s,t.l,t.opacity);if(t instanceof pn||(t=wn(t)),!t)return new st;if(t instanceof st)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,l=r-o,a=(r+o)/2;return l?(e===r?s=(n-i)/l+(n<i)*6:n===r?s=(i-e)/l+2:s=(e-n)/l+4,l/=a<.5?r+o:2-r-o,s*=60):l=a>0&&a<1?0:s,new st(s,l,a,t.opacity)}function xu(t,e,n,i){return arguments.length===1?wl(t):new st(t,e,n,i??1)}function st(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}no(st,xu,bl(pn,{brighter(t){return t=t==null?Un:Math.pow(Un,t),new st(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new st(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new xe(zi(t>=240?t-240:t+120,o,i),zi(t,o,i),zi(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new st(Lo(this.h),Dn(this.s),Dn(this.l),Zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zn(this.opacity);return`${t===1?"hsl(":"hsla("}${Lo(this.h)}, ${Dn(this.s)*100}%, ${Dn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lo(t){return t=(t||0)%360,t<0?t+360:t}function Dn(t){return Math.max(0,Math.min(1,t||0))}function zi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const kl=t=>()=>t;function $u(t,e){return function(n){return t+n*e}}function ef(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function tf(t){return(t=+t)==1?vl:function(e,n){return n-e?ef(e,n,t):kl(isNaN(e)?n:e)}}function vl(t,e){var n=e-t;return n?$u(t,n):kl(isNaN(t)?e:t)}const Ro=function t(e){var n=tf(e);function i(o,r){var s=n((o=Yi(o)).r,(r=Yi(r)).r),l=n(o.g,r.g),a=n(o.b,r.b),u=vl(o.opacity,r.opacity);return function(f){return o.r=s(f),o.g=l(f),o.b=a(f),o.opacity=u(f),o+""}}return i.gamma=t,i}(1);function Tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oi=new RegExp(Fi.source,"g");function nf(t){return function(){return t}}function of(t){return function(e){return t(e)+""}}function rf(t,e){var n=Fi.lastIndex=Oi.lastIndex=0,i,o,r,s=-1,l=[],a=[];for(t=t+"",e=e+"";(i=Fi.exec(t))&&(o=Oi.exec(e));)(r=o.index)>n&&(r=e.slice(n,r),l[s]?l[s]+=r:l[++s]=r),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,a.push({i:s,x:Tt(i,o)})),n=Oi.lastIndex;return n<e.length&&(r=e.slice(n),l[s]?l[s]+=r:l[++s]=r),l.length<2?a[0]?of(a[0].x):nf(e):(e=a.length,function(u){for(var f=0,d;f<e;++f)l[(d=a[f]).i]=d.x(u);return l.join("")})}var Vo=180/Math.PI,Ki={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function El(t,e,n,i,o,r){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Vo,skewX:Math.atan(a)*Vo,scaleX:s,scaleY:l}}var Nn;function lf(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ki:El(e.a,e.b,e.c,e.d,e.e,e.f)}function sf(t){return t==null||(Nn||(Nn=document.createElementNS("http://www.w3.org/2000/svg","g")),Nn.setAttribute("transform",t),!(t=Nn.transform.baseVal.consolidate()))?Ki:(t=t.matrix,El(t.a,t.b,t.c,t.d,t.e,t.f))}function pl(t,e,n,i){function o(u){return u.length?u.pop()+" ":""}function r(u,f,d,c,h,m){if(u!==d||f!==c){var y=h.push("translate(",null,e,null,n);m.push({i:y-4,x:Tt(u,d)},{i:y-2,x:Tt(f,c)})}else(d||c)&&h.push("translate("+d+e+c+n)}function s(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(o(d)+"rotate(",null,i)-2,x:Tt(u,f)})):f&&d.push(o(d)+"rotate("+f+i)}function l(u,f,d,c){u!==f?c.push({i:d.push(o(d)+"skewX(",null,i)-2,x:Tt(u,f)}):f&&d.push(o(d)+"skewX("+f+i)}function a(u,f,d,c,h,m){if(u!==d||f!==c){var y=h.push(o(h)+"scale(",null,",",null,")");m.push({i:y-4,x:Tt(u,d)},{i:y-2,x:Tt(f,c)})}else(d!==1||c!==1)&&h.push(o(h)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=t(u),f=t(f),r(u.translateX,u.translateY,f.translateX,f.translateY,d,c),s(u.rotate,f.rotate,d,c),l(u.skewX,f.skewX,d,c),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(h){for(var m=-1,y=c.length,_;++m<y;)d[(_=c[m]).i]=_.x(h);return d.join("")}}}var af=pl(lf,"px, ","px)","deg)"),uf=pl(sf,", ",")",")"),ff=1e-12;function Wo(t){return((t=Math.exp(t))+1/t)/2}function cf(t){return((t=Math.exp(t))-1/t)/2}function df(t){return((t=Math.exp(2*t))-1)/(t+1)}const hf=function t(e,n,i){function o(r,s){var l=r[0],a=r[1],u=r[2],f=s[0],d=s[1],c=s[2],h=f-l,m=d-a,y=h*h+m*m,_,g;if(y<ff)g=Math.log(c/u)/e,_=function(D){return[l+D*h,a+D*m,u*Math.exp(e*D*g)]};else{var E=Math.sqrt(y),k=(c*c-u*u+i*y)/(2*u*n*E),p=(c*c-u*u-i*y)/(2*c*n*E),A=Math.log(Math.sqrt(k*k+1)-k),F=Math.log(Math.sqrt(p*p+1)-p);g=(F-A)/e,_=function(D){var H=D*g,O=Wo(A),R=u/(n*E)*(O*df(e*H+A)-cf(A));return[l+R*h,a+R*m,u*O/Wo(e*H+A)]}}return _.duration=g*1e3*e/Math.SQRT2,_}return o.rho=function(r){var s=Math.max(.001,+r),l=s*s,a=l*l;return t(s,l,a)},o}(Math.SQRT2,2,4);var rn=0,hn=0,cn=0,Sl=1e3,Gn,gn,Jn=0,Wt=0,di=0,kn=typeof performance=="object"&&performance.now?performance:Date,Cl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function io(){return Wt||(Cl(gf),Wt=kn.now()+di)}function gf(){Wt=0}function Qn(){this._call=this._time=this._next=null}Qn.prototype=Pl.prototype={constructor:Qn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(e==null?0:+e),!this._next&&gn!==this&&(gn?gn._next=this:Gn=this,gn=this),this._call=t,this._time=n,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};function Pl(t,e,n){var i=new Qn;return i.restart(t,e,n),i}function mf(){io(),++rn;for(var t=Gn,e;t;)(e=Wt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rn}function Bo(){Wt=(Jn=kn.now())+di,rn=hn=0;try{mf()}finally{rn=0,_f(),Wt=0}}function yf(){var t=kn.now(),e=t-Jn;e>Sl&&(di-=e,Jn=t)}function _f(){for(var t,e=Gn,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Gn=n);gn=t,qi(i)}function qi(t){if(!rn){hn&&(hn=clearTimeout(hn));var e=t-Wt;e>24?(t<1/0&&(hn=setTimeout(Bo,t-kn.now()-di)),cn&&(cn=clearInterval(cn))):(cn||(Jn=kn.now(),cn=setInterval(yf,Sl)),rn=1,Cl(Bo))}}function Xo(t,e,n){var i=new Qn;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var bf=fi("start","end","cancel","interrupt"),wf=[],Ml=0,Yo=1,Ui=2,Vn=3,Fo=4,Zi=5,Wn=6;function hi(t,e,n,i,o,r){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;kf(t,n,{name:e,index:i,group:o,on:bf,tween:wf,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ml})}function oo(t,e){var n=at(t,e);if(n.state>Ml)throw new Error("too late; already scheduled");return n}function mt(t,e){var n=at(t,e);if(n.state>Vn)throw new Error("too late; already running");return n}function at(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function kf(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=Pl(r,0,n.time);function r(u){n.state=Yo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,d,c,h;if(n.state!==Yo)return a();for(f in i)if(h=i[f],h.name===n.name){if(h.state===Vn)return Xo(s);h.state===Fo?(h.state=Wn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<e&&(h.state=Wn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if(Xo(function(){n.state===Vn&&(n.state=Fo,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Ui,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ui){for(n.state=Vn,o=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(h=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Zi,1),d=-1,c=o.length;++d<c;)o[d].call(t,f);n.state===Zi&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Wn,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Bn(t,e){var n=t.__transition,i,o,r=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){r=!1;continue}o=i.state>Ui&&i.state<Zi,i.state=Wn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}r&&delete t.__transition}}function vf(t){return this.each(function(){Bn(this,t)})}function Ef(t,e){var n,i;return function(){var o=mt(this,t),r=o.tween;if(r!==n){i=n=r;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function pf(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var r=mt(this,t),s=r.tween;if(s!==i){o=(i=s).slice();for(var l={name:e,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===e){o[a]=l;break}a===u&&o.push(l)}r.tween=o}}function Sf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=at(this.node(),n).tween,o=0,r=i.length,s;o<r;++o)if((s=i[o]).name===t)return s.value;return null}return this.each((e==null?Ef:pf)(n,t,e))}function ro(t,e,n){var i=t._id;return t.each(function(){var o=mt(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return at(o,i).value[e]}}function zl(t,e){var n;return(typeof e=="number"?Tt:e instanceof wn?Ro:(n=wn(e))?(e=n,Ro):rf)(t,e)}function Cf(t){return function(){this.removeAttribute(t)}}function Pf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mf(t,e,n){var i,o=n+"",r;return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function zf(t,e,n){var i,o=n+"",r;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Of(t,e,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l)))}}function Tf(t,e,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l)))}}function Df(t,e){var n=ci(t),i=n==="transform"?uf:zl;return this.attrTween(t,typeof e=="function"?(n.local?Tf:Of)(n,i,ro(this,"attr."+t,e)):e==null?(n.local?Pf:Cf)(n):(n.local?zf:Mf)(n,i,e))}function Nf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function If(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Af(t,e){var n,i;function o(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&If(t,r)),n}return o._value=e,o}function Hf(t,e){var n,i;function o(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Nf(t,r)),n}return o._value=e,o}function Lf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=ci(t);return this.tween(n,(i.local?Af:Hf)(i,e))}function Rf(t,e){return function(){oo(this,t).delay=+e.apply(this,arguments)}}function Vf(t,e){return e=+e,function(){oo(this,t).delay=e}}function Wf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Rf:Vf)(e,t)):at(this.node(),e).delay}function Bf(t,e){return function(){mt(this,t).duration=+e.apply(this,arguments)}}function Xf(t,e){return e=+e,function(){mt(this,t).duration=e}}function Yf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bf:Xf)(e,t)):at(this.node(),e).duration}function Ff(t,e){if(typeof e!="function")throw new Error;return function(){mt(this,t).ease=e}}function Kf(t){var e=this._id;return arguments.length?this.each(Ff(e,t)):at(this.node(),e).ease}function qf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,t).ease=n}}function Uf(t){if(typeof t!="function")throw new Error;return this.each(qf(this._id,t))}function Zf(t){typeof t!="function"&&(t=ll(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&t.call(a,a.__data__,u,r)&&l.push(a);return new St(i,this._parents,this._name,this._id)}function Gf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),l=0;l<r;++l)for(var a=e[l],u=n[l],f=a.length,d=s[l]=new Array(f),c,h=0;h<f;++h)(c=a[h]||u[h])&&(d[h]=c);for(;l<i;++l)s[l]=e[l];return new St(s,this._parents,this._name,this._id)}function Jf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Qf(t,e,n){var i,o,r=Jf(e)?oo:mt;return function(){var s=r(this,t),l=s.on;l!==i&&(o=(i=l).copy()).on(e,n),s.on=o}}function jf(t,e){var n=this._id;return arguments.length<2?at(this.node(),n).on.on(t):this.each(Qf(n,t,e))}function xf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function $f(){return this.on("end.remove",xf(this._id))}function ec(t){var e=this._name,n=this._id;typeof t!="function"&&(t=eo(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var l=i[s],a=l.length,u=r[s]=new Array(a),f,d,c=0;c<a;++c)(f=l[c])&&(d=t.call(f,f.__data__,c,l))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,hi(u[c],e,n,c,u,at(f,n)));return new St(r,this._parents,e,n)}function tc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=rl(t));for(var i=this._groups,o=i.length,r=[],s=[],l=0;l<o;++l)for(var a=i[l],u=a.length,f,d=0;d<u;++d)if(f=a[d]){for(var c=t.call(f,f.__data__,d,a),h,m=at(f,n),y=0,_=c.length;y<_;++y)(h=c[y])&&hi(h,e,n,y,c,m);r.push(c),s.push(f)}return new St(r,s,e,n)}var nc=En.prototype.constructor;function ic(){return new nc(this._groups,this._parents)}function oc(t,e){var n,i,o;return function(){var r=on(this,t),s=(this.style.removeProperty(t),on(this,t));return r===s?null:r===n&&s===i?o:o=e(n=r,i=s)}}function Ol(t){return function(){this.style.removeProperty(t)}}function rc(t,e,n){var i,o=n+"",r;return function(){var s=on(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}function lc(t,e,n){var i,o,r;return function(){var s=on(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),on(this,t))),s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l))}}function sc(t,e){var n,i,o,r="style."+e,s="end."+r,l;return function(){var a=mt(this,t),u=a.on,f=a.value[r]==null?l||(l=Ol(e)):void 0;(u!==n||o!==f)&&(i=(n=u).copy()).on(s,o=f),a.on=i}}function ac(t,e,n){var i=(t+="")=="transform"?af:zl;return e==null?this.styleTween(t,oc(t,i)).on("end.style."+t,Ol(t)):typeof e=="function"?this.styleTween(t,lc(t,i,ro(this,"style."+t,e))).each(sc(this._id,t)):this.styleTween(t,rc(t,i,e),n).on("end.style."+t,null)}function uc(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function fc(t,e,n){var i,o;function r(){var s=e.apply(this,arguments);return s!==o&&(i=(o=s)&&uc(t,s,n)),i}return r._value=e,r}function cc(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,fc(t,e,n??""))}function dc(t){return function(){this.textContent=t}}function hc(t){return function(){var e=t(this);this.textContent=e??""}}function gc(t){return this.tween("text",typeof t=="function"?hc(ro(this,"text",t)):dc(t==null?"":t+""))}function mc(t){return function(e){this.textContent=t.call(this,e)}}function yc(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&mc(o)),e}return i._value=t,i}function _c(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,yc(t))}function bc(){for(var t=this._name,e=this._id,n=Tl(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var f=at(a,e);hi(a,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new St(i,this._parents,t,n)}function wc(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(r,s){var l={value:s},a={value:function(){--o===0&&r()}};n.each(function(){var u=mt(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),u.on=e}),o===0&&r()})}var kc=0;function St(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Tl(){return++kc}var kt=En.prototype;St.prototype={constructor:St,select:ec,selectAll:tc,selectChild:kt.selectChild,selectChildren:kt.selectChildren,filter:Zf,merge:Gf,selection:ic,transition:bc,call:kt.call,nodes:kt.nodes,node:kt.node,size:kt.size,empty:kt.empty,each:kt.each,on:jf,attr:Df,attrTween:Lf,style:ac,styleTween:cc,text:gc,textTween:_c,remove:$f,tween:Sf,delay:Wf,duration:Yf,ease:Kf,easeVarying:Uf,end:wc,[Symbol.iterator]:kt[Symbol.iterator]};function vc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ec={time:null,delay:0,duration:250,ease:vc};function pc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Sc(t){var e,n;t instanceof St?(e=t._id,t=t._name):(e=Tl(),(n=Ec).time=io(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&hi(a,t,e,u,s,n||pc(a,e));return new St(i,this._parents,t,e)}En.prototype.interrupt=vf;En.prototype.transition=Sc;const In=t=>()=>t;function Cc(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function vt(t,e,n){this.k=t,this.x=e,this.y=n}vt.prototype={constructor:vt,scale:function(t){return t===1?this:new vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gi=new vt(1,0,0);Dl.prototype=vt.prototype;function Dl(t){for(;!t.__zoom;)if(!(t=t.parentNode))return gi;return t.__zoom}function Ti(t){t.stopImmediatePropagation()}function dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Pc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Mc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ko(){return this.__zoom||gi}function zc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Oc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function Nl(){var t=Pc,e=Mc,n=Tc,i=zc,o=Oc,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=hf,u=fi("start","zoom","end"),f,d,c,h=500,m=150,y=0,_=10;function g(v){v.property("__zoom",Ko).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",Y).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(v,M,w,C){var z=v.selection?v.selection():v;z.property("__zoom",Ko),v!==z?A(v,M,w,C):z.interrupt().each(function(){F(this,arguments).event(C).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},g.scaleBy=function(v,M,w,C){g.scaleTo(v,function(){var z=this.__zoom.k,T=typeof M=="function"?M.apply(this,arguments):M;return z*T},w,C)},g.scaleTo=function(v,M,w,C){g.transform(v,function(){var z=e.apply(this,arguments),T=this.__zoom,X=w==null?p(z):typeof w=="function"?w.apply(this,arguments):w,G=T.invert(X),j=typeof M=="function"?M.apply(this,arguments):M;return n(k(E(T,j),X,G),z,s)},w,C)},g.translateBy=function(v,M,w,C){g.transform(v,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),s)},null,C)},g.translateTo=function(v,M,w,C,z){g.transform(v,function(){var T=e.apply(this,arguments),X=this.__zoom,G=C==null?p(T):typeof C=="function"?C.apply(this,arguments):C;return n(gi.translate(G[0],G[1]).scale(X.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof w=="function"?-w.apply(this,arguments):-w),T,s)},C,z)};function E(v,M){return M=Math.max(r[0],Math.min(r[1],M)),M===v.k?v:new vt(M,v.x,v.y)}function k(v,M,w){var C=M[0]-w[0]*v.k,z=M[1]-w[1]*v.k;return C===v.x&&z===v.y?v:new vt(v.k,C,z)}function p(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function A(v,M,w,C){v.on("start.zoom",function(){F(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(C).end()}).tween("zoom",function(){var z=this,T=arguments,X=F(z,T).event(C),G=e.apply(z,T),j=w==null?p(G):typeof w=="function"?w.apply(z,T):w,se=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),L=z.__zoom,x=typeof M=="function"?M.apply(z,T):M,fe=a(L.invert(j).concat(se/L.k),x.invert(j).concat(se/x.k));return function(N){if(N===1)N=x;else{var de=fe(N),me=se/de[2];N=new vt(me,j[0]-de[0]*me,j[1]-de[1]*me)}X.zoom(null,N)}})}function F(v,M,w){return!w&&v.__zooming||new D(v,M)}function D(v,M){this.that=v,this.args=M,this.active=0,this.sourceEvent=null,this.extent=e.apply(v,M),this.taps=0}D.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,M){return this.mouse&&v!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var M=nt(this.that).datum();u.call(v,this.that,new Cc(v,{sourceEvent:this.sourceEvent,target:g,type:v,transform:this.that.__zoom,dispatch:u}),M)}};function H(v,...M){if(!t.apply(this,arguments))return;var w=F(this,M).event(v),C=this.__zoom,z=Math.max(r[0],Math.min(r[1],C.k*Math.pow(2,i.apply(this,arguments)))),T=rt(v);if(w.wheel)(w.mouse[0][0]!==T[0]||w.mouse[0][1]!==T[1])&&(w.mouse[1]=C.invert(w.mouse[0]=T)),clearTimeout(w.wheel);else{if(C.k===z)return;w.mouse=[T,C.invert(T)],Bn(this),w.start()}dn(v),w.wheel=setTimeout(X,m),w.zoom("mouse",n(k(E(C,z),w.mouse[0],w.mouse[1]),w.extent,s));function X(){w.wheel=null,w.end()}}function O(v,...M){if(c||!t.apply(this,arguments))return;var w=v.currentTarget,C=F(this,M,!0).event(v),z=nt(v.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",se,!0),T=rt(v,w),X=v.clientX,G=v.clientY;yl(v.view),Ti(v),C.mouse=[T,this.__zoom.invert(T)],Bn(this),C.start();function j(L){if(dn(L),!C.moved){var x=L.clientX-X,fe=L.clientY-G;C.moved=x*x+fe*fe>y}C.event(L).zoom("mouse",n(k(C.that.__zoom,C.mouse[0]=rt(L,w),C.mouse[1]),C.extent,s))}function se(L){z.on("mousemove.zoom mouseup.zoom",null),_l(L.view,C.moved),dn(L),C.event(L).end()}}function R(v,...M){if(t.apply(this,arguments)){var w=this.__zoom,C=rt(v.changedTouches?v.changedTouches[0]:v,this),z=w.invert(C),T=w.k*(v.shiftKey?.5:2),X=n(k(E(w,T),C,z),e.apply(this,M),s);dn(v),l>0?nt(this).transition().duration(l).call(A,X,C,v):nt(this).call(g.transform,X,C,v)}}function Y(v,...M){if(t.apply(this,arguments)){var w=v.touches,C=w.length,z=F(this,M,v.changedTouches.length===C).event(v),T,X,G,j;for(Ti(v),X=0;X<C;++X)G=w[X],j=rt(G,this),j=[j,this.__zoom.invert(j),G.identifier],z.touch0?!z.touch1&&z.touch0[2]!==j[2]&&(z.touch1=j,z.taps=0):(z.touch0=j,T=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),T&&(z.taps<2&&(d=j[0],f=setTimeout(function(){f=null},h)),Bn(this),z.start())}}function I(v,...M){if(this.__zooming){var w=F(this,M).event(v),C=v.changedTouches,z=C.length,T,X,G,j;for(dn(v),T=0;T<z;++T)X=C[T],G=rt(X,this),w.touch0&&w.touch0[2]===X.identifier?w.touch0[0]=G:w.touch1&&w.touch1[2]===X.identifier&&(w.touch1[0]=G);if(X=w.that.__zoom,w.touch1){var se=w.touch0[0],L=w.touch0[1],x=w.touch1[0],fe=w.touch1[1],N=(N=x[0]-se[0])*N+(N=x[1]-se[1])*N,de=(de=fe[0]-L[0])*de+(de=fe[1]-L[1])*de;X=E(X,Math.sqrt(N/de)),G=[(se[0]+x[0])/2,(se[1]+x[1])/2],j=[(L[0]+fe[0])/2,(L[1]+fe[1])/2]}else if(w.touch0)G=w.touch0[0],j=w.touch0[1];else return;w.zoom("touch",n(k(X,G,j),w.extent,s))}}function W(v,...M){if(this.__zooming){var w=F(this,M).event(v),C=v.changedTouches,z=C.length,T,X;for(Ti(v),c&&clearTimeout(c),c=setTimeout(function(){c=null},h),T=0;T<z;++T)X=C[T],w.touch0&&w.touch0[2]===X.identifier?delete w.touch0:w.touch1&&w.touch1[2]===X.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(X=rt(X,this),Math.hypot(d[0]-X[0],d[1]-X[1])<_)){var G=nt(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return g.wheelDelta=function(v){return arguments.length?(i=typeof v=="function"?v:In(+v),g):i},g.filter=function(v){return arguments.length?(t=typeof v=="function"?v:In(!!v),g):t},g.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:In(!!v),g):o},g.extent=function(v){return arguments.length?(e=typeof v=="function"?v:In([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),g):e},g.scaleExtent=function(v){return arguments.length?(r[0]=+v[0],r[1]=+v[1],g):[r[0],r[1]]},g.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(v){return arguments.length?(n=v,g):n},g.duration=function(v){return arguments.length?(l=+v,g):l},g.interpolate=function(v){return arguments.length?(a=v,g):a},g.on=function(){var v=u.on.apply(u,arguments);return v===u?g:v},g.clickDistance=function(v){return arguments.length?(y=(v=+v)*v,g):Math.sqrt(y)},g.tapDistance=function(v){return arguments.length?(_=+v,g):_},g}const Sn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},jn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Bt;(function(t){t.Strict="strict",t.Loose="loose"})(Bt||(Bt={}));var ct;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ct||(ct={}));var xn;(function(t){t.Partial="partial",t.Full="full"})(xn||(xn={}));const Gi={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var tn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(tn||(tn={}));var ln;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ln||(ln={}));var ce;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ce||(ce={}));const qo={[ce.Left]:ce.Right,[ce.Right]:ce.Left,[ce.Top]:ce.Bottom,[ce.Bottom]:ce.Top};function Dc(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Uo(t,e,n){if(!n)return;const i=[];t.forEach((o,r)=>{e!=null&&e.has(r)||i.push(o)}),i.length&&n(i)}function Zo(t){return t===null?null:t?"valid":"invalid"}const Nc=t=>"id"in t&&"source"in t&&"target"in t,lo=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Cn=(t,e=[0,0])=>{const{width:n,height:i}=It(t),o=t.origin??e,r=n*o[0],s=i*o[1];return{x:t.position.x-r,y:t.position.y-s}},Ic=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const r=typeof o=="string";let s=!e.nodeLookup&&!r?o:void 0;e.nodeLookup&&(s=r?e.nodeLookup.get(o):lo(o)?o:e.nodeLookup.get(o.id));const l=s?$n(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return mi(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yi(n)},Pn=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=$n(i);n=mi(n,o)}}),yi(n)},Il=(t,e,[n,i,o]=[0,0,1],r=!1,s=!1)=>{const l={...bi(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const u of t.values()){const{measured:f,selectable:d=!0,hidden:c=!1}=u;if(s&&!d||c)continue;const h=f.width??u.width??u.initialWidth??null,m=f.height??u.height??u.initialHeight??null,y=so(l,_i(u)),_=(h??0)*(m??0),g=r&&y>0;(!u.internals.handleBounds||g||y>=_||u.dragging)&&a.push(u)}return a},Ji=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function Go(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function Jo({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:r},s){if(t.size===0)return Promise.resolve(!1);const l=Pn(t),a=uo(l,e,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??r,(s==null?void 0:s.padding)??.1);return await i.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Ac({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:r}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},f=s.origin??i;let d=o;if(s.extent==="parent"&&!s.expandParent)if(!l)r==null||r("005",Sn.error005());else{const h=l.measured.width,m=l.measured.height;h&&m&&(d=[[a,u],[a+h,u+m]])}else l&&an(s.extent)&&(d=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const c=an(d)?Xt(e,d,s.measured):e;return{position:{x:c.x-a+s.measured.width*f[0],y:c.y-u+s.measured.height*f[1]},positionAbsolute:c}}async function Hc({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const r=new Set(t.map(c=>c.id)),s=[];for(const c of n){if(c.deletable===!1)continue;const h=r.has(c.id),m=!h&&c.parentId&&s.find(y=>y.id===c.parentId);(h||m)&&s.push(c)}const l=new Set(e.map(c=>c.id)),a=i.filter(c=>c.deletable!==!1),f=Ji(s,a);for(const c of a)l.has(c.id)&&!f.find(m=>m.id===c.id)&&f.push(c);if(!o)return{edges:f,nodes:s};const d=await o({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const sn=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Xt=(t={x:0,y:0},e,n)=>({x:sn(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:sn(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function Al(t,e,n){const{width:i,height:o}=It(n),{x:r,y:s}=n.internals.positionAbsolute;return Xt(t,[[r,s],[r+i,s+o]],e)}const Qo=(t,e,n)=>t<e?sn(Math.abs(t-e),1,e)/e:t>n?-sn(Math.abs(t-n),1,e)/e:0,Hl=(t,e,n=15,i=40)=>{const o=Qo(t.x,i,e.width-i)*n,r=Qo(t.y,i,e.height-i)*n;return[o,r]},mi=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Qi=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),yi=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),_i=(t,e=[0,0])=>{var o,r;const{x:n,y:i}=lo(t)?t.internals.positionAbsolute:Cn(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((r=t.measured)==null?void 0:r.height)??t.height??t.initialHeight??0}},$n=(t,e=[0,0])=>{var o,r;const{x:n,y:i}=lo(t)?t.internals.positionAbsolute:Cn(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((r=t.measured)==null?void 0:r.height)??t.height??t.initialHeight??0)}},Ll=(t,e)=>yi(mi(Qi(t),Qi(e))),so=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},Lt=t=>!isNaN(t)&&isFinite(t),Lc=(t,e)=>{},ao=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),bi=({x:t,y:e},[n,i,o],r=!1,s=[1,1])=>{const l={x:(t-n)/o,y:(e-i)/o};return r?ao(l,s):l},Rc=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),uo=(t,e,n,i,o,r)=>{const s=e/(t.width*(1+r)),l=n/(t.height*(1+r)),a=Math.min(s,l),u=sn(a,i,o),f=t.x+t.width/2,d=t.y+t.height/2,c=e/2-f*u,h=n/2-d*u;return{x:c,y:h,zoom:u}},ei=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function an(t){return t!==void 0&&t!=="parent"}function It(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function ti(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Di(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:r}=Et(t),s=bi({x:o,y:r},i),{x:l,y:a}=n?ao(s,e):s;return{xSnapped:l,ySnapped:a,...s}}const fo=t=>({width:t.offsetWidth,height:t.offsetHeight}),Vc=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Wc=["INPUT","SELECT","TEXTAREA"];function Bc(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Wc.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const Rl=t=>"clientX"in t,Et=(t,e)=>{var r,s;const n=Rl(t),i=n?t.clientX:(r=t.touches)==null?void 0:r[0].clientX,o=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},jo=(t,e,n,i,o)=>{const r=e.querySelectorAll(`.${t}`);return!r||!r.length?null:Array.from(r).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:o,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...fo(s)}})};function Xc({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:r,targetControlX:s,targetControlY:l}){const a=t*.125+o*.375+s*.375+n*.125,u=e*.125+r*.375+l*.375+i*.125,f=Math.abs(a-t),d=Math.abs(u-e);return[a,u,f,d]}function An(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function xo({pos:t,x1:e,y1:n,x2:i,y2:o,c:r}){switch(t){case ce.Left:return[e-An(e-i,r),n];case ce.Right:return[e+An(i-e,r),n];case ce.Top:return[e,n-An(n-o,r)];case ce.Bottom:return[e,n+An(o-n,r)]}}function Vl({sourceX:t,sourceY:e,sourcePosition:n=ce.Bottom,targetX:i,targetY:o,targetPosition:r=ce.Top,curvature:s=.25}){const[l,a]=xo({pos:n,x1:t,y1:e,x2:i,y2:o,c:s}),[u,f]=xo({pos:r,x1:i,y1:o,x2:t,y2:e,c:s}),[d,c,h,m]=Xc({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${l},${a} ${u},${f} ${i},${o}`,d,c,h,m]}function Wl({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,r=n<t?n+o:n-o,s=Math.abs(i-e)/2,l=i<e?i+s:i-s;return[r,l,o,s]}function Yc({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const r=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(r?s:0)}function Fc({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const r=mi($n(t),$n(e));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return so(s,yi(r))>0}const Kc=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,qc=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Uc=(t,e)=>{if(!t.source||!t.target)return e;let n;return Nc(t)?n={...t}:n={...t,id:Kc(t)},qc(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Bl({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,r,s,l]=Wl({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,r,s,l]}const $o={[ce.Left]:{x:-1,y:0},[ce.Right]:{x:1,y:0},[ce.Top]:{x:0,y:-1},[ce.Bottom]:{x:0,y:1}},Zc=({source:t,sourcePosition:e=ce.Bottom,target:n})=>e===ce.Left||e===ce.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},er=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Gc({source:t,sourcePosition:e=ce.Bottom,target:n,targetPosition:i=ce.Top,center:o,offset:r}){const s=$o[e],l=$o[i],a={x:t.x+s.x*r,y:t.y+s.y*r},u={x:n.x+l.x*r,y:n.y+l.y*r},f=Zc({source:a,sourcePosition:e,target:u}),d=f.x!==0?"x":"y",c=f[d];let h=[],m,y;const _={x:0,y:0},g={x:0,y:0},[E,k,p,A]=Wl({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[d]*l[d]===-1){m=o.x??E,y=o.y??k;const D=[{x:m,y:a.y},{x:m,y:u.y}],H=[{x:a.x,y},{x:u.x,y}];s[d]===c?h=d==="x"?D:H:h=d==="x"?H:D}else{const D=[{x:a.x,y:u.y}],H=[{x:u.x,y:a.y}];if(d==="x"?h=s.x===c?H:D:h=s.y===c?D:H,e===i){const W=Math.abs(t[d]-n[d]);if(W<=r){const v=Math.min(r-1,r-W);s[d]===c?_[d]=(a[d]>t[d]?-1:1)*v:g[d]=(u[d]>n[d]?-1:1)*v}}if(e!==i){const W=d==="x"?"y":"x",v=s[d]===l[W],M=a[W]>u[W],w=a[W]<u[W];(s[d]===1&&(!v&&M||v&&w)||s[d]!==1&&(!v&&w||v&&M))&&(h=d==="x"?D:H)}const O={x:a.x+_.x,y:a.y+_.y},R={x:u.x+g.x,y:u.y+g.y},Y=Math.max(Math.abs(O.x-h[0].x),Math.abs(R.x-h[0].x)),I=Math.max(Math.abs(O.y-h[0].y),Math.abs(R.y-h[0].y));Y>=I?(m=(O.x+R.x)/2,y=h[0].y):(m=h[0].x,y=(O.y+R.y)/2)}return[[t,{x:a.x+_.x,y:a.y+_.y},...h,{x:u.x+g.x,y:u.y+g.y},n],m,y,p,A]}function Jc(t,e,n,i){const o=Math.min(er(t,e)/2,er(e,n)/2,i),{x:r,y:s}=e;if(t.x===r&&r===n.x||t.y===s&&s===n.y)return`L${r} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${r+o*u},${s}Q ${r},${s} ${r},${s+o*f}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${r},${s+o*a}Q ${r},${s} ${r+o*l},${s}`}function ni({sourceX:t,sourceY:e,sourcePosition:n=ce.Bottom,targetX:i,targetY:o,targetPosition:r=ce.Top,borderRadius:s=5,centerX:l,centerY:a,offset:u=20}){const[f,d,c,h,m]=Gc({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:r,center:{x:l,y:a},offset:u});return[f.reduce((_,g,E)=>{let k="";return E>0&&E<f.length-1?k=Jc(f[E-1],g,f[E+1],s):k=`${E===0?"M":"L"}${g.x} ${g.y}`,_+=k,_},""),d,c,h,m]}function tr(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Qc(t){var d;const{sourceNode:e,targetNode:n}=t;if(!tr(e)||!tr(n))return null;const i=e.internals.handleBounds||nr(e.handles),o=n.internals.handleBounds||nr(n.handles),r=ir((i==null?void 0:i.source)??[],t.sourceHandle),s=ir(t.connectionMode===Bt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!r||!s)return(d=t.onError)==null||d.call(t,"008",Sn.error008(r?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=(r==null?void 0:r.position)||ce.Bottom,a=(s==null?void 0:s.position)||ce.Top,u=vn(e,r,l),f=vn(n,s,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:a}}function nr(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function vn(t,e,n=ce.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,r=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:s,height:l}=e??It(t);if(i)return{x:o+s/2,y:r+l/2};switch((e==null?void 0:e.position)??n){case ce.Top:return{x:o+s/2,y:r};case ce.Right:return{x:o+s,y:r+l/2};case ce.Bottom:return{x:o+s/2,y:r+l};case ce.Left:return{x:o,y:r+l/2}}}function ir(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function ji(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function jc(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const r=new Set;return t.reduce((s,l)=>([l.markerStart||i,l.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=ji(a,e);r.has(u)||(s.push({id:u,color:a.color||n,...a}),r.add(u))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const co={nodeOrigin:[0,0],nodeExtent:jn,elevateNodesOnSelect:!0,defaults:{}},xc={...co,checkEquality:!0};function ho(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function $c(t,e,n){const i=ho(co,n);for(const o of t.values())if(o.parentId)go(o,t,e,i);else{const r=Cn(o,i.nodeOrigin),s=an(o.extent)?o.extent:i.nodeExtent,l=Xt(r,s,It(o));o.internals.positionAbsolute=l}}function Xl(t,e,n,i){var l,a;const o=ho(xc,i),r=new Map(e),s=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let f=r.get(u.id);if(o.checkEquality&&u===(f==null?void 0:f.internals.userNode))e.set(u.id,f);else{const d=Cn(u,o.nodeOrigin),c=an(u.extent)?u.extent:o.nodeExtent,h=Xt(d,c,It(u));f={...o.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:h,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:Yl(u,s),userNode:u}},e.set(u.id,f)}u.parentId&&go(f,e,n,i)}}function ed(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function go(t,e,n,i){const{elevateNodesOnSelect:o,nodeOrigin:r,nodeExtent:s}=ho(co,i),l=t.parentId,a=e.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ed(t,n);const u=o?1e3:0,{x:f,y:d,z:c}=td(t,a,r,s,u),{positionAbsolute:h}=t.internals,m=f!==h.x||d!==h.y;(m||c!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:m?{x:f,y:d}:h,z:c})}function Yl(t,e){return(Lt(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function td(t,e,n,i,o){const{x:r,y:s}=e.internals.positionAbsolute,l=It(t),a=Cn(t,n),u=an(t.extent)?Xt(a,t.extent,l):a;let f=Xt({x:r+u.x,y:s+u.y},i,l);t.extent==="parent"&&(f=Al(f,l,e));const d=Yl(t,o),c=e.internals.z??0;return{x:f.x,y:f.y,z:c>d?c:d}}function nd(t,e,n,i=[0,0]){var s;const o=[],r=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const u=((s=r.get(l.parentId))==null?void 0:s.expandedRect)??_i(a),f=Ll(u,l.rect);r.set(l.parentId,{expandedRect:f,parent:a})}return r.size>0&&r.forEach(({expandedRect:l,parent:a},u)=>{var k;const f=a.internals.positionAbsolute,d=It(a),c=a.origin??i,h=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,m=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,y=Math.max(d.width,Math.round(l.width)),_=Math.max(d.height,Math.round(l.height)),g=(y-d.width)*c[0],E=(_-d.height)*c[1];(h>0||m>0||g||E)&&(o.push({id:u,type:"position",position:{x:a.position.x-h+g,y:a.position.y-m+E}}),(k=n.get(u))==null||k.forEach(p=>{t.some(A=>A.id===p.id)||o.push({id:p.id,type:"position",position:{x:p.position.x+h,y:p.position.y+m}})})),(d.width<l.width||d.height<l.height||h||m)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?c[0]*h-g:0),height:_+(m?c[1]*m-E:0)}})}),o}function id(t,e,n,i,o,r){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(s),{m22:f}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const c of t.values()){const h=e.get(c.id);if(h)if(h.hidden)h.internals={...h.internals,handleBounds:void 0},l=!0;else{const m=fo(c.nodeElement),y=h.measured.width!==m.width||h.measured.height!==m.height;if(!!(m.width&&m.height&&(y||!h.internals.handleBounds||c.force))){const g=c.nodeElement.getBoundingClientRect(),E=an(h.extent)?h.extent:r;let{positionAbsolute:k}=h.internals;h.parentId&&h.extent==="parent"?k=Al(k,m,e.get(h.parentId)):E&&(k=Xt(k,E,m)),h.measured=m,h.internals={...h.internals,positionAbsolute:k,handleBounds:{source:jo("source",c.nodeElement,g,f,h.id),target:jo("target",c.nodeElement,g,f,h.id)}},h.parentId&&go(h,e,n,{nodeOrigin:o}),l=!0,y&&(a.push({id:h.id,type:"dimensions",dimensions:m}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:_i(h,o)}))}}}if(d.length>0){const c=nd(d,e,n,o);a.push(...c)}return{changes:a,updatedInternals:l}}async function od({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:r}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,r]],i),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function Fl(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:r,sourceHandle:s=null,targetHandle:l=null}=i,a=`${o}-source-${s}`,u=`${r}-target-${l}`,f=t.get(a)||new Map,d=t.get(u)||new Map,c={edgeId:i.id,source:o,target:r,sourceHandle:s,targetHandle:l};e.set(i.id,i),t.set(a,f.set(`${r}-${l}`,c)),t.set(u,d.set(`${o}-${s}`,c))}}function Kl(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Kl(n,e):!1}function or(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function rd(t,e,n,i){const o=new Map;for(const[r,s]of t)if((s.selected||s.id===i)&&(!s.parentId||!Kl(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const l=t.get(r);l&&o.set(r,{id:r,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function Ni({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var s,l,a;const o=[];for(const[u,f]of e){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&o.push({...d,position:f.position,dragging:i})}if(!t)return[o[0],o];const r=(l=n.get(t))==null?void 0:l.internals.userNode;return[r?{...r,position:((a=e.get(t))==null?void 0:a.position)||r.position,dragging:i}:o[0],o]}function ld({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let r={x:null,y:null},s=0,l=new Map,a=!1,u={x:0,y:0},f=null,d=!1,c=null,h=!1;function m({noDragClassName:_,handleSelector:g,domNode:E,isSelectable:k,nodeId:p,nodeClickDistance:A=0}){c=nt(E);function F({x:R,y:Y},I){const{nodeLookup:W,nodeExtent:v,snapGrid:M,snapToGrid:w,nodeOrigin:C,onNodeDrag:z,onSelectionDrag:T,onError:X,updateNodePositions:G}=e();r={x:R,y:Y};let j=!1,se={x:0,y:0,x2:0,y2:0};if(l.size>1&&v){const L=Pn(l);se=Qi(L)}for(const[L,x]of l){if(!W.has(L))continue;let fe={x:R-x.distance.x,y:Y-x.distance.y};w&&(fe=ao(fe,M));let N=[[v[0][0],v[0][1]],[v[1][0],v[1][1]]];if(l.size>1&&v&&!x.extent){const{positionAbsolute:be}=x.internals,ke=be.x-se.x+v[0][0],pe=be.x+x.measured.width-se.x2+v[1][0],Ae=be.y-se.y+v[0][1],K=be.y+x.measured.height-se.y2+v[1][1];N=[[ke,Ae],[pe,K]]}const{position:de,positionAbsolute:me}=Ac({nodeId:L,nextPosition:fe,nodeLookup:W,nodeExtent:N,nodeOrigin:C,onError:X});j=j||x.position.x!==de.x||x.position.y!==de.y,x.position=de,x.internals.positionAbsolute=me}if(j&&(G(l,!0),I&&(i||z||!p&&T))){const[L,x]=Ni({nodeId:p,dragItems:l,nodeLookup:W});i==null||i(I,l,L,x),z==null||z(I,L,x),p||T==null||T(I,x)}}async function D(){if(!f)return;const{transform:R,panBy:Y,autoPanSpeed:I}=e(),[W,v]=Hl(u,f,I);(W!==0||v!==0)&&(r.x=(r.x??0)-W/R[2],r.y=(r.y??0)-v/R[2],await Y({x:W,y:v})&&F(r,null)),s=requestAnimationFrame(D)}function H(R){var j;const{nodeLookup:Y,multiSelectionActive:I,nodesDraggable:W,transform:v,snapGrid:M,snapToGrid:w,selectNodesOnDrag:C,onNodeDragStart:z,onSelectionDragStart:T,unselectNodesAndEdges:X}=e();d=!0,(!C||!k)&&!I&&p&&((j=Y.get(p))!=null&&j.selected||X()),k&&C&&p&&(t==null||t(p));const G=Di(R.sourceEvent,{transform:v,snapGrid:M,snapToGrid:w});if(r=G,l=rd(Y,W,G,p),l.size>0&&(n||z||!p&&T)){const[se,L]=Ni({nodeId:p,dragItems:l,nodeLookup:Y});n==null||n(R.sourceEvent,l,se,L),z==null||z(R.sourceEvent,se,L),p||T==null||T(R.sourceEvent,L)}}const O=Bu().clickDistance(A).on("start",R=>{const{domNode:Y,nodeDragThreshold:I,transform:W,snapGrid:v,snapToGrid:M}=e();h=!1,I===0&&H(R),r=Di(R.sourceEvent,{transform:W,snapGrid:v,snapToGrid:M}),f=(Y==null?void 0:Y.getBoundingClientRect())||null,u=Et(R.sourceEvent,f)}).on("drag",R=>{const{autoPanOnNodeDrag:Y,transform:I,snapGrid:W,snapToGrid:v,nodeDragThreshold:M,nodeLookup:w}=e(),C=Di(R.sourceEvent,{transform:I,snapGrid:W,snapToGrid:v});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||p&&!w.has(p))&&(h=!0),!h){if(!a&&Y&&d&&(a=!0,D()),!d){const z=C.xSnapped-(r.x??0),T=C.ySnapped-(r.y??0);Math.sqrt(z*z+T*T)>M&&H(R)}(r.x!==C.xSnapped||r.y!==C.ySnapped)&&l&&d&&(u=Et(R.sourceEvent,f),F(C,R.sourceEvent))}}).on("end",R=>{if(!(!d||h)&&(a=!1,d=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:Y,updateNodePositions:I,onNodeDragStop:W,onSelectionDragStop:v}=e();if(I(l,!1),o||W||!p&&v){const[M,w]=Ni({nodeId:p,dragItems:l,nodeLookup:Y,dragging:!1});o==null||o(R.sourceEvent,l,M,w),W==null||W(R.sourceEvent,M,w),p||v==null||v(R.sourceEvent,w)}}}).filter(R=>{const Y=R.target;return!R.button&&(!_||!or(Y,`.${_}`,E))&&(!g||or(Y,g,E))});c.call(O)}function y(){c==null||c.on(".drag",null)}return{update:m,destroy:y}}function sd(t,e,n){const i=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const r of e.values())so(o,_i(r))>0&&i.push(r);return i}const ad=250;function ud(t,e,n,i){var l,a;let o=[],r=1/0;const s=sd(t,n,e+ad);for(const u of s){const f=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of f){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:c,y:h}=vn(u,d,d.position,!0),m=Math.sqrt(Math.pow(c-t.x,2)+Math.pow(h-t.y,2));m>e||(m<r?(o=[{...d,x:c,y:h}],r=m):m===r&&o.push({...d,x:c,y:h}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(f=>f.type===u)??o[0]}return o[0]}function ql(t,e,n,i,o,r=!1){var u,f,d;const s=i.get(t);if(!s)return null;const l=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[e]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],a=(n?l==null?void 0:l.find(c=>c.id===n):l==null?void 0:l[0])??null;return a&&r?{...a,...vn(s,a,a.position,!0)}:a}function Ul(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function fd(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Zl=()=>!0;function cd(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:r,isTarget:s,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:d,panBy:c,cancelConnection:h,onConnectStart:m,onConnect:y,onConnectEnd:_,isValidConnection:g=Zl,onReconnectEnd:E,updateConnection:k,getTransform:p,getFromHandle:A,autoPanSpeed:F}){const D=Vc(t.target);let H=0,O;const{x:R,y:Y}=Et(t),I=D==null?void 0:D.elementFromPoint(R,Y),W=Ul(r,I),v=l==null?void 0:l.getBoundingClientRect();if(!v||!W)return;const M=ql(o,W,i,a,e);if(!M)return;let w=Et(t,v),C=!1,z=null,T=!1,X=null;function G(){if(!f||!v)return;const[me,be]=Hl(w,v,F);c({x:me,y:be}),H=requestAnimationFrame(G)}const j={...M,nodeId:o,type:W,position:M.position},se=a.get(o),x={inProgress:!0,isValid:null,from:vn(se,j,ce.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:se,to:w,toHandle:null,toPosition:qo[j.position],toNode:null};k(x);let fe=x;m==null||m(t,{nodeId:o,handleId:i,handleType:W});function N(me){if(!A()||!j){de(me);return}const be=p();w=Et(me,v),O=ud(bi(w,be,!1,[1,1]),n,a,j),C||(G(),C=!0);const ke=Gl(me,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:D,lib:u,flowId:d,nodeLookup:a});X=ke.handleDomNode,z=ke.connection,T=fd(!!O,ke.isValid);const pe={...fe,isValid:T,to:O&&T?Rc({x:O.x,y:O.y},be):w,toHandle:ke.toHandle,toPosition:T&&ke.toHandle?ke.toHandle.position:qo[j.position],toNode:ke.toHandle?a.get(ke.toHandle.nodeId):null};T&&O&&fe.toHandle&&pe.toHandle&&fe.toHandle.type===pe.toHandle.type&&fe.toHandle.nodeId===pe.toHandle.nodeId&&fe.toHandle.id===pe.toHandle.id&&fe.to.x===pe.to.x&&fe.to.y===pe.to.y||(k(pe),fe=pe)}function de(me){(O||X)&&z&&T&&(y==null||y(z));const{inProgress:be,...ke}=fe,pe={...ke,toPosition:fe.toHandle?fe.toPosition:null};_==null||_(me,pe),r&&(E==null||E(me,pe)),h(),cancelAnimationFrame(H),C=!1,T=!1,z=null,X=null,D.removeEventListener("mousemove",N),D.removeEventListener("mouseup",de),D.removeEventListener("touchmove",N),D.removeEventListener("touchend",de)}D.addEventListener("mousemove",N),D.addEventListener("mouseup",de),D.addEventListener("touchmove",N),D.addEventListener("touchend",de)}function Gl(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:r,doc:s,lib:l,flowId:a,isValidConnection:u=Zl,nodeLookup:f}){const d=r==="target",c=e?s.querySelector(`.${l}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:h,y:m}=Et(t),y=s.elementFromPoint(h,m),_=y!=null&&y.classList.contains(`${l}-flow__handle`)?y:c,g={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const E=Ul(void 0,_),k=_.getAttribute("data-nodeid"),p=_.getAttribute("data-handleid"),A=_.classList.contains("connectable"),F=_.classList.contains("connectableend");if(!k||!E)return g;const D={source:d?k:i,sourceHandle:d?p:o,target:d?i:k,targetHandle:d?o:p};g.connection=D;const O=A&&F&&(n===Bt.Strict?d&&E==="source"||!d&&E==="target":k!==i||p!==o);g.isValid=O&&u(D),g.toHandle=ql(k,E,p,f,n,!1)}return g}const dd={onPointerDown:cd,isValid:Gl};function hd({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=nt(t);function r({translateExtent:l,width:a,height:u,zoomStep:f=10,pannable:d=!0,zoomable:c=!0,inversePan:h=!1}){const m=k=>{const p=n();if(k.sourceEvent.type!=="wheel"||!e)return;const A=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*f,F=p[2]*Math.pow(2,A);e.scaleTo(F)};let y=[0,0];const _=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(y=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},g=k=>{const p=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!e)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],F=[A[0]-y[0],A[1]-y[1]];y=A;const D=i()*Math.max(p[2],Math.log(p[2]))*(h?-1:1),H={x:p[0]-F[0]*D,y:p[1]-F[1]*D},O=[[0,0],[a,u]];e.setViewportConstrained({x:H.x,y:H.y,zoom:p[2]},O,l)},E=Nl().on("start",_).on("zoom",d?g:null).on("zoom.wheel",c?m:null);o.call(E,{})}function s(){o.on("zoom",null)}return{update:r,destroy:s,pointer:rt}}const gd=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,wi=t=>({x:t.x,y:t.y,zoom:t.k}),Ii=({x:t,y:e,zoom:n})=>gi.translate(t,e).scale(n),jt=(t,e)=>t.target.closest(`.${e}`),Jl=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Ai=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},Ql=t=>{const e=t.ctrlKey&&ei()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function md({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:r,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(jt(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const _=rt(f),g=Ql(f),E=d*Math.pow(2,g);i.scaleTo(n,E,_,f);return}const c=f.deltaMode===1?20:1;let h=o===ct.Vertical?0:f.deltaX*c,m=o===ct.Horizontal?0:f.deltaY*c;!ei()&&f.shiftKey&&o!==ct.Vertical&&(h=f.deltaY*c,m=0),i.translateBy(n,-(h/d)*r,-(m/d)*r,{internal:!0});const y=wi(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l==null||l(f,y)),t.isPanScrolling&&(a==null||a(f,y),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,y),t.isPanScrolling=!1},150))}}function yd({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||jt(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function _d({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var r,s,l;if((r=i.sourceEvent)!=null&&r.internal)return;const o=wi(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function bd({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return r=>{var s,l;t.usedRightMouseButton=!!(n&&Jl(e,t.mouseButton??0)),(s=r.sourceEvent)!=null&&s.sync||i([r.transform.x,r.transform.y,r.transform.k]),o&&!((l=r.sourceEvent)!=null&&l.internal)&&(o==null||o(r.sourceEvent,wi(r.transform)))}}function wd({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:r}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,r&&Jl(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&r(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&gd(t.prevViewport,s.transform))){const a=wi(s.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,a)},n?150:0)}}}function kd({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:r,userSelectionActive:s,noWheelClassName:l,noPanClassName:a,lib:u}){return f=>{var m;const d=t||e,c=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(jt(f,`${u}-flow__node`)||jt(f,`${u}-flow__edge`)))return!0;if(!i&&!d&&!o&&!r&&!n||s||jt(f,l)&&f.type==="wheel"||jt(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((m=f.touches)==null?void 0:m.length)>1)return f.preventDefault(),!1;if(!d&&!o&&!c&&f.type==="wheel"||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const h=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&h}}function vd({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:r,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=t.getBoundingClientRect(),c=Nl().clickDistance(!Lt(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),h=nt(t).call(c);k({x:r.x,y:r.y,zoom:sn(r.zoom,e,n)},[[0,0],[d.width,d.height]],o);const m=h.on("wheel.zoom"),y=h.on("dblclick.zoom");c.wheelDelta(Ql);function _(I,W){return h?new Promise(v=>{c==null||c.transform(Ai(h,W==null?void 0:W.duration,()=>v(!0)),I)}):Promise.resolve(!1)}function g({noWheelClassName:I,noPanClassName:W,onPaneContextMenu:v,userSelectionActive:M,panOnScroll:w,panOnDrag:C,panOnScrollMode:z,panOnScrollSpeed:T,preventScrolling:X,zoomOnPinch:G,zoomOnScroll:j,zoomOnDoubleClick:se,zoomActivationKeyPressed:L,lib:x,onTransformChange:fe}){M&&!f.isZoomingOrPanning&&E();const de=w&&!L&&!M?md({zoomPanValues:f,noWheelClassName:I,d3Selection:h,d3Zoom:c,panOnScrollMode:z,panOnScrollSpeed:T,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:a}):yd({noWheelClassName:I,preventScrolling:X,d3ZoomHandler:m});if(h.on("wheel.zoom",de,{passive:!1}),!M){const be=_d({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:l});c.on("start",be);const ke=bd({zoomPanValues:f,panOnDrag:C,onPaneContextMenu:!!v,onPanZoom:s,onTransformChange:fe});c.on("zoom",ke);const pe=wd({zoomPanValues:f,panOnDrag:C,panOnScroll:w,onPaneContextMenu:v,onPanZoomEnd:a,onDraggingChange:u});c.on("end",pe)}const me=kd({zoomActivationKeyPressed:L,panOnDrag:C,zoomOnScroll:j,panOnScroll:w,zoomOnDoubleClick:se,zoomOnPinch:G,userSelectionActive:M,noPanClassName:W,noWheelClassName:I,lib:x});c.filter(me),se?h.on("dblclick.zoom",y):h.on("dblclick.zoom",null)}function E(){c.on("zoom",null)}async function k(I,W,v){const M=Ii(I),w=c==null?void 0:c.constrain()(M,W,v);return w&&await _(w),new Promise(C=>C(w))}async function p(I,W){const v=Ii(I);return await _(v,W),new Promise(M=>M(v))}function A(I){if(h){const W=Ii(I),v=h.property("__zoom");(v.k!==I.zoom||v.x!==I.x||v.y!==I.y)&&(c==null||c.transform(h,W,null,{sync:!0}))}}function F(){const I=h?Dl(h.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function D(I,W){return h?new Promise(v=>{c==null||c.scaleTo(Ai(h,W==null?void 0:W.duration,()=>v(!0)),I)}):Promise.resolve(!1)}function H(I,W){return h?new Promise(v=>{c==null||c.scaleBy(Ai(h,W==null?void 0:W.duration,()=>v(!0)),I)}):Promise.resolve(!1)}function O(I){c==null||c.scaleExtent(I)}function R(I){c==null||c.translateExtent(I)}function Y(I){const W=!Lt(I)||I<0?0:I;c==null||c.clickDistance(W)}return{update:g,destroy:E,setViewport:p,setViewportConstrained:k,getViewport:F,scaleTo:D,scaleBy:H,setScaleExtent:O,setTranslateExtent:R,syncViewport:A,setClickDistance:Y}}var rr;(function(t){t.Line="line",t.Handle="handle"})(rr||(rr={}));function Ed(t){let e,n,i,o,r,s;const l=t[45].default,a=Ue(l,t,t[44],null);return{c(){e=De("div"),a&&a.c(),this.h()},l(u){e=Ne(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var f=U(e);a&&a.l(f),f.forEach(P),this.h()},h(){b(e,"data-handleid",t[6]),b(e,"data-nodeid",t[14]),b(e,"data-handlepos",t[2]),b(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),b(e,"class",i=Oe(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),b(e,"style",t[3]),b(e,"role","button"),b(e,"tabindex","-1"),ge(e,"valid",t[7]),ge(e,"connectingto",t[5]),ge(e,"connectingfrom",t[9]),ge(e,"source",!t[11]),ge(e,"target",t[11]),ge(e,"connectablestart",t[12]),ge(e,"connectableend",t[12]),ge(e,"connectable",t[12]),ge(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(u,f){Z(u,e,f),a&&a.m(e,null),o=!0,r||(s=[ze(e,"mousedown",t[32]),ze(e,"touchstart",t[32])],r=!0)},p(u,f){a&&a.p&&(!o||f[1]&8192)&&Ze(a,l,u,u[44],o?Je(l,u[44],f,null):Ge(u[44]),null),(!o||f[0]&64)&&b(e,"data-handleid",u[6]),(!o||f[0]&4)&&b(e,"data-handlepos",u[2]),(!o||f[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&b(e,"data-id",n),(!o||f[0]&20&&i!==(i=Oe(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&b(e,"class",i),(!o||f[0]&8)&&b(e,"style",u[3]),(!o||f[0]&148)&&ge(e,"valid",u[7]),(!o||f[0]&52)&&ge(e,"connectingto",u[5]),(!o||f[0]&532)&&ge(e,"connectingfrom",u[9]),(!o||f[0]&2068)&&ge(e,"source",!u[11]),(!o||f[0]&2068)&&ge(e,"target",u[11]),(!o||f[0]&4116)&&ge(e,"connectablestart",u[12]),(!o||f[0]&4116)&&ge(e,"connectableend",u[12]),(!o||f[0]&4116)&&ge(e,"connectable",u[12]),(!o||f[0]&5396)&&ge(e,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(V(a,u),o=!0)},o(u){B(a,u),o=!1},d(u){u&&P(e),a&&a.d(u),r=!1,gt(s)}}}function pd(t,e,n){let i,o,r,s,l,a,u,f,d,c,h,m,y,_,g,E,k,p,A,F,D,H,O,R,Y,{$$slots:I={},$$scope:W}=e,{id:v=void 0}=e,{type:M="source"}=e,{position:w=ce.Top}=e,{style:C=void 0}=e,{isValidConnection:z=void 0}=e,{onconnect:T=void 0}=e,{ondisconnect:X=void 0}=e,{isConnectable:G=void 0}=e,{class:j=void 0}=e;const se=Yn("svelteflow__node_id"),L=Yn("svelteflow__node_connectable");J(t,L,$=>n(43,Y=$));const x=Re(),{connectionMode:fe,domNode:N,nodeLookup:de,connectionRadius:me,viewport:be,isValidConnection:ke,lib:pe,addEdge:Ae,onedgecreate:K,panBy:He,cancelConnection:Te,updateConnection:Ct,autoPanOnConnect:yt,edges:_t,connectionLookup:Xe,onconnect:bt,onconnectstart:ie,onconnectend:Pt,flowId:Mt,connection:q}=x;J(t,fe,$=>n(40,c=$)),J(t,N,$=>n(55,O=$)),J(t,de,$=>n(54,H=$)),J(t,me,$=>n(56,R=$)),J(t,be,$=>n(46,y=$)),J(t,ke,$=>n(51,p=$)),J(t,pe,$=>n(53,D=$)),J(t,K,$=>n(50,k=$)),J(t,yt,$=>n(52,F=$)),J(t,_t,$=>n(42,m=$)),J(t,Xe,$=>n(41,h=$)),J(t,bt,$=>n(49,E=$)),J(t,ie,$=>n(48,g=$)),J(t,Pt,$=>n(47,_=$)),J(t,Mt,$=>n(13,A=$)),J(t,q,$=>n(39,d=$));function zt($){const wt=Rl($);(wt&&$.button===0||!wt)&&dd.onPointerDown($,{handleId:r,nodeId:se,isTarget:i,connectionRadius:R,domNode:O,nodeLookup:H,connectionMode:c,lib:D,autoPanOnConnect:F,flowId:A,isValidConnection:z??p,updateConnection:Ct,cancelConnection:Te,panBy:He,onConnect:je=>{const Fe=k?k(je):je;Fe&&(Ae(Fe),E==null||E(je))},onConnectStart:(je,Fe)=>{g==null||g(je,{nodeId:Fe.nodeId,handleId:Fe.handleId,handleType:Fe.handleType})},onConnectEnd:(je,Fe)=>{_==null||_(je,Fe)},getTransform:()=>[y.x,y.y,y.zoom],getFromHandle:()=>d.fromHandle})}let Ye=null,Qe;return t.$$set=$=>{"id"in $&&n(0,v=$.id),"type"in $&&n(1,M=$.type),"position"in $&&n(2,w=$.position),"style"in $&&n(3,C=$.style),"isValidConnection"in $&&n(33,z=$.isValidConnection),"onconnect"in $&&n(34,T=$.onconnect),"ondisconnect"in $&&n(35,X=$.ondisconnect),"isConnectable"in $&&n(36,G=$.isConnectable),"class"in $&&n(4,j=$.class),"$$scope"in $&&n(44,W=$.$$scope)},t.$$.update=()=>{var $,wt,je,Fe,qt,Ut,Zt,Gt,Ot;if(t.$$.dirty[0]&2&&n(11,i=M==="target"),t.$$.dirty[1]&4128&&n(12,o=G!==void 0?G:Y),t.$$.dirty[0]&1&&n(6,r=v||null),t.$$.dirty[0]&3|t.$$.dirty[1]&3096&&(T||X)&&n(38,Qe=h.get(`${se}-${M}-${v||null}`)),t.$$.dirty[1]&216){if(Ye&&!Dc(Qe,Ye)){const At=Qe??new Map;Uo(Ye,At,X),Uo(At,Ye,T)}n(37,Ye=Qe??new Map)}t.$$.dirty[1]&256&&n(10,s=!!d.fromHandle),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(9,l=(($=d.fromHandle)==null?void 0:$.nodeId)===se&&((wt=d.fromHandle)==null?void 0:wt.type)===M&&((je=d.fromHandle)==null?void 0:je.id)===r),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(5,a=((Fe=d.toHandle)==null?void 0:Fe.nodeId)===se&&((qt=d.toHandle)==null?void 0:qt.type)===M&&((Ut=d.toHandle)==null?void 0:Ut.id)===r),t.$$.dirty[0]&66|t.$$.dirty[1]&768&&n(8,u=c===Bt.Strict?((Zt=d.fromHandle)==null?void 0:Zt.type)!==M:se!==((Gt=d.fromHandle)==null?void 0:Gt.nodeId)||r!==((Ot=d.fromHandle)==null?void 0:Ot.id)),t.$$.dirty[0]&32|t.$$.dirty[1]&256&&n(7,f=a&&d.isValid)},[v,M,w,C,j,a,r,f,u,l,s,i,o,A,se,L,fe,N,de,me,be,ke,pe,K,yt,_t,Xe,bt,ie,Pt,Mt,q,zt,z,T,X,G,Ye,Qe,d,c,h,m,Y,W,I]}class lt extends ye{constructor(e){super(),_e(this,e,pd,Ed,we,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Sd(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,r,s,l;return e=new lt({props:{type:"target",position:t[1]??ce.Top}}),s=new lt({props:{type:"source",position:t[2]??ce.Bottom}}),{c(){oe(e.$$.fragment),n=ve(),o=Yt(i),r=ve(),oe(s.$$.fragment)},l(u){ae(e.$$.fragment,u),n=Ee(u),o=Ft(u,i),r=Ee(u),ae(s.$$.fragment,u)},m(u,f){re(e,u,f),Z(u,n,f),Z(u,o,f),Z(u,r,f),re(s,u,f),l=!0},p(u,[f]){var h;const d={};f&2&&(d.position=u[1]??ce.Top),e.$set(d),(!l||f&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+"")&&Kt(o,i);const c={};f&4&&(c.position=u[2]??ce.Bottom),s.$set(c)},i(u){l||(V(e.$$.fragment,u),V(s.$$.fragment,u),l=!0)},o(u){B(e.$$.fragment,u),B(s.$$.fragment,u),l=!1},d(u){u&&(P(n),P(o),P(r)),le(e,u),le(s,u)}}}function Cd(t,e,n){const i=["data","targetPosition","sourcePosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{targetPosition:r=void 0}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=Ce(Ce({},e),it(l)),n(3,Ie(e,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,r=l.targetPosition),"sourcePosition"in l&&n(2,s=l.sourcePosition)},[o,r,s]}class jl extends ye{constructor(e){super(),_e(this,e,Cd,Sd,we,{data:0,targetPosition:1,sourcePosition:2})}}function Pd(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,r;return o=new lt({props:{type:"source",position:t[1]??ce.Bottom}}),{c(){n=Yt(e),i=ve(),oe(o.$$.fragment)},l(l){n=Ft(l,e),i=Ee(l),ae(o.$$.fragment,l)},m(l,a){Z(l,n,a),Z(l,i,a),re(o,l,a),r=!0},p(l,[a]){var f;(!r||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+"")&&Kt(n,e);const u={};a&2&&(u.position=l[1]??ce.Bottom),o.$set(u)},i(l){r||(V(o.$$.fragment,l),r=!0)},o(l){B(o.$$.fragment,l),r=!1},d(l){l&&(P(n),P(i)),le(o,l)}}}function Md(t,e,n){const i=["data","sourcePosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:r=void 0}=e;return t.$$set=s=>{e=Ce(Ce({},e),it(s)),n(2,Ie(e,i)),"data"in s&&n(0,o=s.data),"sourcePosition"in s&&n(1,r=s.sourcePosition)},[o,r]}class zd extends ye{constructor(e){super(),_e(this,e,Md,Pd,we,{data:0,sourcePosition:1})}}function Od(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,r;return o=new lt({props:{type:"target",position:t[1]??ce.Top}}),{c(){n=Yt(e),i=ve(),oe(o.$$.fragment)},l(l){n=Ft(l,e),i=Ee(l),ae(o.$$.fragment,l)},m(l,a){Z(l,n,a),Z(l,i,a),re(o,l,a),r=!0},p(l,[a]){var f;(!r||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+"")&&Kt(n,e);const u={};a&2&&(u.position=l[1]??ce.Top),o.$set(u)},i(l){r||(V(o.$$.fragment,l),r=!0)},o(l){B(o.$$.fragment,l),r=!1},d(l){l&&(P(n),P(i)),le(o,l)}}}function Td(t,e,n){const i=["data","targetPosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{targetPosition:r=void 0}=e;return t.$$set=s=>{e=Ce(Ce({},e),it(s)),n(2,Ie(e,i)),"data"in s&&n(0,o=s.data),"targetPosition"in s&&n(1,r=s.targetPosition)},[o,r]}class Dd extends ye{constructor(e){super(),_e(this,e,Td,Od,we,{data:0,targetPosition:1})}}function Nd(t,e,n){const i=[];return Ie(e,i),t.$$set=o=>{e=Ce(Ce({},e),it(o)),n(0,Ie(e,i))},[]}class Id extends ye{constructor(e){super(),_e(this,e,Nd,null,we,{})}}function lr(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Ad(t,{target:e,domNode:n}){return lr(t,n,e),{async update({target:i,domNode:o}){lr(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Hd(t){let e,n,i,o,r;const s=t[3].default,l=Ue(s,t,t[2],null);return{c(){e=De("div"),l&&l.c()},l(a){e=Ne(a,"DIV",{});var u=U(e);l&&l.l(u),u.forEach(P)},m(a,u){Z(a,e,u),l&&l.m(e,null),i=!0,o||(r=qe(n=Ad.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ze(l,s,a,a[2],i?Je(s,a[2],u,null):Ge(a[2]),null),n&&Ve(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(V(l,a),i=!0)},o(a){B(l,a),i=!1},d(a){a&&P(e),l&&l.d(a),o=!1,r()}}}function Ld(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const{domNode:s}=Re();return J(t,s,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class Rd extends ye{constructor(e){super(),_e(this,e,Ld,Hd,we,{})}}function xl(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:r,elementsSelectable:s}=Re();return l=>{const a=Q(t).get(l);if(!a){console.warn("012",Sn.error012(l));return}(a.selectable||Q(s)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&Q(i)&&r({nodes:[],edges:[a]}):o([l]))}}function Vd(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,r,s;const l=t[5].default,a=Ue(l,t,t[7],null);return{c(){e=De("div"),a&&a.c(),this.h()},l(u){e=Ne(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var f=U(e);a&&a.l(f),f.forEach(P),this.h()},h(){b(e,"class","svelte-flow__edge-label"),b(e,"style",n="pointer-events: all;"+t[0]),b(e,"role","button"),b(e,"tabindex","-1"),he(e,"transform",i)},m(u,f){Z(u,e,f),a&&a.m(e,null),o=!0,r||(s=[ze(e,"keyup",Bd),ze(e,"click",t[6])],r=!0)},p(u,f){a&&a.p&&(!o||f&128)&&Ze(a,l,u,u[7],o?Je(l,u[7],f,null):Ge(u[7]),null),(!o||f&1&&n!==(n="pointer-events: all;"+u[0]))&&b(e,"style",n);const d=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||d)&&he(e,"transform",i)},i(u){o||(V(a,u),o=!0)},o(u){B(a,u),o=!1},d(u){u&&P(e),a&&a.d(u),r=!1,gt(s)}}}function Wd(t){let e,n;return e=new Rd({props:{$$slots:{default:[Vd]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&135&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}const Bd=()=>{};function Xd(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:r=void 0}=e,{x:s=void 0}=e,{y:l=void 0}=e;const a=xl(),u=Yn("svelteflow__edge_id"),f=()=>{u&&a(u)};return t.$$set=d=>{"style"in d&&n(0,r=d.style),"x"in d&&n(1,s=d.x),"y"in d&&n(2,l=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[r,s,l,a,u,i,f,o]}class Yd extends ye{constructor(e){super(),_e(this,e,Xd,Wd,we,{style:0,x:1,y:2})}}function Fd(t){let e;return{c(){e=ee("path"),this.h()},l(n){e=te(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),U(e).forEach(P),this.h()},h(){b(e,"d",t[1]),b(e,"stroke-opacity",0),b(e,"stroke-width",t[10]),b(e,"fill","none"),b(e,"class","svelte-flow__edge-interaction")},m(n,i){Z(n,e,i)},p(n,i){i&2&&b(e,"d",n[1])},d(n){n&&P(e)}}}function sr(t){let e,n;return e=new Yd({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Kd]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.x=i[3]),o&16&&(r.y=i[4]),o&32&&(r.style=i[5]),o&4100&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Kd(t){let e;return{c(){e=Yt(t[2])},l(n){e=Ft(n,t[2])},m(n,i){Z(n,e,i)},p(n,i){i&4&&Kt(e,n[2])},d(n){n&&P(e)}}}function qd(t){let e,n,i,o,r,s,l=t[10]&&Fd(t),a=t[2]&&sr(t);return{c(){e=ee("path"),i=ve(),l&&l.c(),o=ve(),a&&a.c(),r=Me(),this.h()},l(u){e=te(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),U(e).forEach(P),i=Ee(u),l&&l.l(u),o=Ee(u),a&&a.l(u),r=Me(),this.h()},h(){b(e,"id",t[0]),b(e,"d",t[1]),b(e,"class",n=Oe(["svelte-flow__edge-path",t[9]])),b(e,"marker-start",t[6]),b(e,"marker-end",t[7]),b(e,"fill","none"),b(e,"style",t[8])},m(u,f){Z(u,e,f),Z(u,i,f),l&&l.m(u,f),Z(u,o,f),a&&a.m(u,f),Z(u,r,f),s=!0},p(u,[f]){(!s||f&1)&&b(e,"id",u[0]),(!s||f&2)&&b(e,"d",u[1]),(!s||f&512&&n!==(n=Oe(["svelte-flow__edge-path",u[9]])))&&b(e,"class",n),(!s||f&64)&&b(e,"marker-start",u[6]),(!s||f&128)&&b(e,"marker-end",u[7]),(!s||f&256)&&b(e,"style",u[8]),u[10]&&l.p(u,f),u[2]?a?(a.p(u,f),f&4&&V(a,1)):(a=sr(u),a.c(),V(a,1),a.m(r.parentNode,r)):a&&(We(),B(a,1,1,()=>{a=null}),Be())},i(u){s||(V(a),s=!0)},o(u){B(a),s=!1},d(u){u&&(P(e),P(i),P(o),P(r)),l&&l.d(u),a&&a.d(u)}}}function Ud(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:r=void 0}=e,{labelX:s=void 0}=e,{labelY:l=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:d=void 0}=e,{interactionWidth:c=20}=e,{class:h=void 0}=e,m=c===void 0?20:c;return t.$$set=y=>{"id"in y&&n(0,i=y.id),"path"in y&&n(1,o=y.path),"label"in y&&n(2,r=y.label),"labelX"in y&&n(3,s=y.labelX),"labelY"in y&&n(4,l=y.labelY),"labelStyle"in y&&n(5,a=y.labelStyle),"markerStart"in y&&n(6,u=y.markerStart),"markerEnd"in y&&n(7,f=y.markerEnd),"style"in y&&n(8,d=y.style),"interactionWidth"in y&&n(11,c=y.interactionWidth),"class"in y&&n(9,h=y.class)},[i,o,r,s,l,a,u,f,d,h,m,c]}class ki extends ye{constructor(e){super(),_e(this,e,Ud,qd,we,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Zd(t){let e,n;return e=new ki({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Gd(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:c=void 0}=e,{sourceX:h}=e,{sourceY:m}=e,{sourcePosition:y}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Ce(Ce({},e),it(k)),n(15,Ie(e,s)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,c=k.interactionWidth),"sourceX"in k&&n(9,h=k.sourceX),"sourceY"in k&&n(10,m=k.sourceY),"sourcePosition"in k&&n(11,y=k.sourcePosition),"targetX"in k&&n(12,_=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=Vl({sourceX:h,sourceY:m,targetX:_,targetY:g,sourcePosition:y,targetPosition:E}),i,(n(7,o),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)),(n(6,r),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)))},[l,a,u,f,d,c,r,o,i,h,m,y,_,g,E]}class $l extends ye{constructor(e){super(),_e(this,e,Gd,Zd,we,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Jd(t){let e,n;return e=new ki({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Qd(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:c=void 0}=e,{sourceX:h}=e,{sourceY:m}=e,{sourcePosition:y}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Ce(Ce({},e),it(k)),n(15,Ie(e,s)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,c=k.interactionWidth),"sourceX"in k&&n(9,h=k.sourceX),"sourceY"in k&&n(10,m=k.sourceY),"sourcePosition"in k&&n(11,y=k.sourcePosition),"targetX"in k&&n(12,_=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=ni({sourceX:h,sourceY:m,targetX:_,targetY:g,sourcePosition:y,targetPosition:E}),i,(n(7,o),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)),(n(6,r),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)))},[l,a,u,f,d,c,r,o,i,h,m,y,_,g,E]}class jd extends ye{constructor(e){super(),_e(this,e,Qd,Jd,we,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function xd(t){let e,n;return e=new ki({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function $d(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:c=void 0}=e,{sourceX:h}=e,{sourceY:m}=e,{targetX:y}=e,{targetY:_}=e;return t.$$set=g=>{e=Ce(Ce({},e),it(g)),n(13,Ie(e,s)),"label"in g&&n(0,l=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,f=g.markerStart),"markerEnd"in g&&n(4,d=g.markerEnd),"interactionWidth"in g&&n(5,c=g.interactionWidth),"sourceX"in g&&n(9,h=g.sourceX),"sourceY"in g&&n(10,m=g.sourceY),"targetX"in g&&n(11,y=g.targetX),"targetY"in g&&n(12,_=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,r]=Bl({sourceX:h,sourceY:m,targetX:y,targetY:_}),i,(n(7,o),n(9,h),n(10,m),n(11,y),n(12,_)),(n(6,r),n(9,h),n(10,m),n(11,y),n(12,_)))},[l,a,u,f,d,c,r,o,i,h,m,y,_]}class eh extends ye{constructor(e){super(),_e(this,e,$d,xd,we,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function th(t){let e,n;return e=new ki({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function nh(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:c=void 0}=e,{sourceX:h}=e,{sourceY:m}=e,{sourcePosition:y}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Ce(Ce({},e),it(k)),n(15,Ie(e,s)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,d=k.markerEnd),"interactionWidth"in k&&n(5,c=k.interactionWidth),"sourceX"in k&&n(9,h=k.sourceX),"sourceY"in k&&n(10,m=k.sourceY),"sourcePosition"in k&&n(11,y=k.sourcePosition),"targetX"in k&&n(12,_=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=ni({sourceX:h,sourceY:m,targetX:_,targetY:g,sourcePosition:y,targetPosition:E,borderRadius:0}),i,(n(7,o),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)),(n(6,r),n(9,h),n(10,m),n(12,_),n(13,g),n(11,y),n(14,E)))},[l,a,u,f,d,c,r,o,i,h,m,y,_,g,E]}class ih extends ye{constructor(e){super(),_e(this,e,nh,th,we,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function oh(t,e){const n=t.set,i=e.set,o=Q(t),r=Q(e);let l=o.length===0&&r.length>0?r:o;t.set(l);const a=u=>{const f=n(u);return l=f,i(l),f};t.set=e.set=a,t.update=e.update=u=>a(u(l))}function rh(t,e){const n=t.set,i=e.set;let o=Q(e);t.set(o);const r=s=>{n(s),i(s),o=s};t.set=e.set=r,t.update=e.update=s=>r(s(o))}const lh=(t,e,n)=>{if(!n)return;const i=Q(t),o=e.set,r=n.set;let s=n?Q(n):{x:0,y:0,zoom:1};e.set(s),e.set=l=>(o(l),r(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),o(l),r(l),s=l,l),e.update=l=>{e.set(l(s))},n.update=l=>{n.set(l(s))}},sh=(t,e,n,i=[0,0],o=jn)=>{const{subscribe:r,set:s,update:l}=ue([]);let a=t,u={},f=!0;const d=y=>(Xl(y,e,n,{elevateNodesOnSelect:f,nodeOrigin:i,nodeExtent:o,defaults:u,checkEquality:!1}),a=y,s(a),a),c=y=>d(y(a)),h=y=>{u=y},m=y=>{f=y.elevateNodesOnSelect??f};return d(a),{subscribe:r,set:d,update:c,setDefaultOptions:h,setOptions:m}},ah=(t,e,n,i)=>{const{subscribe:o,set:r,update:s}=ue([]);let l=t,a={};const u=c=>{const h=a?c.map(m=>({...a,...m})):c;Fl(e,n,h),l=h,r(l)},f=c=>u(c(l)),d=c=>{a=c};return u(l),{subscribe:o,set:u,update:f,setDefaultOptions:d}},es={input:zd,output:Dd,default:jl,group:Id},ts={straight:eh,smoothstep:jd,default:$l,step:ih},uh=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s})=>{const l=new Map,a=new Map,u=new Map,f=new Map,d=r??[0,0],c=s??jn;Xl(t,l,a,{nodeExtent:c,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),Fl(u,f,e);let h={x:0,y:0,zoom:1};if(o&&n&&i){const m=Pn(l,{filter:y=>!!((y.width||y.initialWidth)&&(y.height||y.initialHeight))});h=uo(m,n,i,.5,2,.1)}return{flowId:ue(null),nodes:sh(t,l,a,d,c),nodeLookup:ot(l),parentLookup:ot(a),edgeLookup:ot(f),visibleNodes:ot([]),edges:ah(e,u,f),visibleEdges:ot([]),connectionLookup:ot(u),height:ue(500),width:ue(500),minZoom:ue(.5),maxZoom:ue(2),nodeOrigin:ue(d),nodeDragThreshold:ue(1),nodeExtent:ue(c),translateExtent:ue(jn),autoPanOnNodeDrag:ue(!0),autoPanOnConnect:ue(!0),fitViewOnInit:ue(!1),fitViewOnInitDone:ue(!1),fitViewOptions:ue(void 0),panZoom:ue(null),snapGrid:ue(null),dragging:ue(!1),selectionRect:ue(null),selectionKeyPressed:ue(!1),multiselectionKeyPressed:ue(!1),deleteKeyPressed:ue(!1),panActivationKeyPressed:ue(!1),zoomActivationKeyPressed:ue(!1),selectionRectMode:ue(null),selectionMode:ue(xn.Partial),nodeTypes:ue(es),edgeTypes:ue(ts),viewport:ue(h),connectionMode:ue(Bt.Strict),domNode:ue(null),connection:ot(Gi),connectionLineType:ue(tn.Bezier),connectionRadius:ue(20),isValidConnection:ue(()=>!0),nodesDraggable:ue(!0),nodesConnectable:ue(!0),elementsSelectable:ue(!0),selectNodesOnDrag:ue(!0),markers:ot([]),defaultMarkerColor:ue("#b1b1b7"),lib:ot("svelte"),onlyRenderVisibleElements:ue(!1),onerror:ue(Lc),ondelete:ue(void 0),onedgecreate:ue(void 0),onconnect:ue(void 0),onconnectstart:ue(void 0),onconnectend:ue(void 0),onbeforedelete:ue(void 0),nodesInitialized:ue(!1),edgesInitialized:ue(!1),viewportInitialized:ue(!1),initialized:ot(!1)}};function fh(t){const e=xt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,r,s,l])=>o&&s&&l?n.filter(u=>{const f=i.get(u.source),d=i.get(u.target);return f&&d&&Fc({sourceNode:f,targetNode:d,width:s,height:l,transform:[r.x,r.y,r.zoom]})}):n);return xt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,r])=>n.reduce((l,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return l;const d=Qc({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:r});return d&&l.push({...a,zIndex:Yc({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...d}),l},[]))}function ch(t){return xt([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,r])=>{const s=[r.x,r.y,r.zoom];return n?Il(e,{x:0,y:0,width:i,height:o},s,!0):Array.from(e.values())})}const vi=Symbol();function ns({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=uh({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});function a(w){l.nodeTypes.set({...es,...w})}function u(w){l.edgeTypes.set({...ts,...w})}function f(w){const C=Q(l.edges);l.edges.set(Uc(w,C))}const d=(w,C=!1)=>{var T;const z=Q(l.nodeLookup);for(const[X,G]of w){const j=(T=z.get(X))==null?void 0:T.internals.userNode;j&&(j.position=G.position,j.dragging=C)}l.nodes.update(X=>X)};function c(w){var G,j,se;const C=Q(l.nodeLookup),z=Q(l.parentLookup),{changes:T,updatedInternals:X}=id(w,C,Q(l.parentLookup),Q(l.domNode),Q(l.nodeOrigin));if(X){if($c(C,z,{nodeOrigin:r,nodeExtent:s}),!Q(l.fitViewOnInitDone)&&Q(l.fitViewOnInit)){const L=Q(l.fitViewOptions),x=m({...L,nodes:L==null?void 0:L.nodes});l.fitViewOnInitDone.set(x)}for(const L of T){const x=(G=C.get(L.id))==null?void 0:G.internals.userNode;if(x)switch(L.type){case"dimensions":{const fe={...x.measured,...L.dimensions};L.setAttributes&&(x.width=((j=L.dimensions)==null?void 0:j.width)??x.width,x.height=((se=L.dimensions)==null?void 0:se.height)??x.height),x.measured=fe;break}case"position":x.position=L.position??x.position;break}}l.nodes.update(L=>L),Q(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function h(w){const C=Q(l.panZoom),z=Q(l.domNode);if(!C||!z)return Promise.resolve(!1);const{width:T,height:X}=fo(z),G=Go(Q(l.nodeLookup),w);return Jo({nodes:G,width:T,height:X,minZoom:Q(l.minZoom),maxZoom:Q(l.maxZoom),panZoom:C},w)}function m(w){const C=Q(l.panZoom);if(!C)return!1;const z=Go(Q(l.nodeLookup),w);return Jo({nodes:z,width:Q(l.width),height:Q(l.height),minZoom:Q(l.minZoom),maxZoom:Q(l.maxZoom),panZoom:C},w),z.size>0}function y(w,C){const z=Q(l.panZoom);return z?z.scaleBy(w,C):Promise.resolve(!1)}function _(w){return y(1.2,w)}function g(w){return y(1/1.2,w)}function E(w){const C=Q(l.panZoom);C&&(C.setScaleExtent([w,Q(l.maxZoom)]),l.minZoom.set(w))}function k(w){const C=Q(l.panZoom);C&&(C.setScaleExtent([Q(l.minZoom),w]),l.maxZoom.set(w))}function p(w){const C=Q(l.panZoom);C&&(C.setTranslateExtent(w),l.translateExtent.set(w))}function A(w){let C=!1;return w.forEach(z=>{z.selected&&(z.selected=!1,C=!0)}),C}function F(w){var C;(C=Q(l.panZoom))==null||C.setClickDistance(w)}function D(w){A((w==null?void 0:w.nodes)||Q(l.nodes))&&l.nodes.set(Q(l.nodes)),A((w==null?void 0:w.edges)||Q(l.edges))&&l.edges.set(Q(l.edges))}l.deleteKeyPressed.subscribe(async w=>{var C;if(w){const z=Q(l.nodes),T=Q(l.edges),X=z.filter(L=>L.selected),G=T.filter(L=>L.selected),{nodes:j,edges:se}=await Hc({nodesToRemove:X,edgesToRemove:G,nodes:z,edges:T,onBeforeDelete:Q(l.onbeforedelete)});(j.length||se.length)&&(l.nodes.update(L=>L.filter(x=>!j.some(fe=>fe.id===x.id))),l.edges.update(L=>L.filter(x=>!se.some(fe=>fe.id===x.id))),(C=Q(l.ondelete))==null||C({nodes:j,edges:se}))}});function H(w){const C=Q(l.multiselectionKeyPressed);l.nodes.update(z=>z.map(T=>{const X=w.includes(T.id),G=C&&T.selected||X;return T.selected=G,T})),C||l.edges.update(z=>z.map(T=>(T.selected=!1,T)))}function O(w){const C=Q(l.multiselectionKeyPressed);l.edges.update(z=>z.map(T=>{const X=w.includes(T.id),G=C&&T.selected||X;return T.selected=G,T})),C||l.nodes.update(z=>z.map(T=>(T.selected=!1,T)))}function R(w){var z;const C=(z=Q(l.nodes))==null?void 0:z.find(T=>T.id===w);if(!C){console.warn("012",Sn.error012(w));return}l.selectionRect.set(null),l.selectionRectMode.set(null),C.selected?C.selected&&Q(l.multiselectionKeyPressed)&&D({nodes:[C],edges:[]}):H([w])}function Y(w){const C=Q(l.viewport);return od({delta:w,panZoom:Q(l.panZoom),transform:[C.x,C.y,C.zoom],translateExtent:Q(l.translateExtent),width:Q(l.width),height:Q(l.height)})}const I=ue(Gi),W=w=>{I.set({...w})};function v(){I.set(Gi)}function M(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),D(),v()}return{...l,visibleEdges:fh(l),visibleNodes:ch(l),connection:xt([I,l.viewport],([w,C])=>w.inProgress?{...w,to:bi(w.to,[C.x,C.y,C.zoom])}:{...w}),markers:xt([l.edges,l.defaultMarkerColor,l.flowId],([w,C,z])=>jc(w,{defaultColor:C,id:z})),initialized:(()=>{let w=!1;const C=Q(l.nodes).length,z=Q(l.edges).length;return xt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([T,X,G])=>w||(C===0?w=G:z===0?w=G&&T:w=G&&T&&X,w))})(),syncNodeStores:w=>oh(l.nodes,w),syncEdgeStores:w=>rh(l.edges,w),syncViewport:w=>lh(l.panZoom,l.viewport,w),setNodeTypes:a,setEdgeTypes:u,addEdge:f,updateNodePositions:d,updateNodeInternals:c,zoomIn:_,zoomOut:g,fitView:w=>h(w),setMinZoom:E,setMaxZoom:k,setTranslateExtent:p,setPaneClickDistance:F,unselectNodesAndEdges:D,addSelectedNodes:H,addSelectedEdges:O,handleNodeSelection:R,panBy:Y,updateConnection:W,cancelConnection:v,reset:M}}function Re(){const t=Yn(vi);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function dh({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=ns({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});return mn(vi,{getStore:()=>l}),l}function hh(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:r,viewport:s,dragging:l,translateExtent:a,paneClickDistance:u}=e,f=vd({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:r,paneClickDistance:u,onDraggingChange:l.set}),d=f.getViewport();return s.set(d),n.set(f),f.update(e),{update(c){f.update(c)}}}function gh(t){let e,n,i,o,r;const s=t[35].default,l=Ue(s,t,t[34],null);return{c(){e=De("div"),l&&l.c(),this.h()},l(a){e=Ne(a,"DIV",{class:!0});var u=U(e);l&&l.l(u),u.forEach(P),this.h()},h(){b(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){Z(a,e,u),l&&l.m(e,null),i=!0,o||(r=qe(n=hh.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||ct.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})),o=!0)},p(a,u){l&&l.p&&(!i||u[1]&8)&&Ze(l,s,a,a[34],i?Je(s,a[34],u,null):Ge(a[34]),null),n&&Ve(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||ct.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){i||(V(l,a),i=!0)},o(a){B(l,a),i=!1},d(a){a&&P(e),l&&l.d(a),o=!1,r()}}}function mh(t,e,n){let i,o,r,s,l,a,u,f,d,c,h,{$$slots:m={},$$scope:y}=e,{initialViewport:_=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:E=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:p}=e,{preventScrolling:A}=e,{zoomOnScroll:F}=e,{zoomOnDoubleClick:D}=e,{zoomOnPinch:H}=e,{panOnDrag:O}=e,{panOnScroll:R}=e,{paneClickDistance:Y}=e;const{viewport:I,panZoom:W,selectionRect:v,minZoom:M,maxZoom:w,dragging:C,translateExtent:z,lib:T,panActivationKeyPressed:X,zoomActivationKeyPressed:G,viewportInitialized:j}=Re();J(t,v,L=>n(15,d=L)),J(t,M,L=>n(12,a=L)),J(t,w,L=>n(13,u=L)),J(t,z,L=>n(16,c=L)),J(t,T,L=>n(17,h=L)),J(t,X,L=>n(33,l=L)),J(t,G,L=>n(14,f=L)),J(t,j,L=>n(36,s=L));const se=L=>I.set({x:L[0],y:L[1],zoom:L[2]});return fn(()=>{Fn(j,s=!0,s)}),t.$$set=L=>{"initialViewport"in L&&n(30,_=L.initialViewport),"onMoveStart"in L&&n(0,g=L.onMoveStart),"onMove"in L&&n(1,E=L.onMove),"onMoveEnd"in L&&n(2,k=L.onMoveEnd),"panOnScrollMode"in L&&n(3,p=L.panOnScrollMode),"preventScrolling"in L&&n(4,A=L.preventScrolling),"zoomOnScroll"in L&&n(5,F=L.zoomOnScroll),"zoomOnDoubleClick"in L&&n(6,D=L.zoomOnDoubleClick),"zoomOnPinch"in L&&n(7,H=L.zoomOnPinch),"panOnDrag"in L&&n(31,O=L.panOnDrag),"panOnScroll"in L&&n(32,R=L.panOnScroll),"paneClickDistance"in L&&n(8,Y=L.paneClickDistance),"$$scope"in L&&n(34,y=L.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1073741824&&n(11,i=_||{x:0,y:0,zoom:1}),t.$$.dirty[1]&5&&n(10,o=l||O),t.$$.dirty[1]&6&&n(9,r=l||R)},[g,E,k,p,A,F,D,H,Y,r,o,i,a,u,f,d,c,h,I,W,v,M,w,C,z,T,X,G,j,se,_,O,R,l,y,m]}class yh extends ye{constructor(e){super(),_e(this,e,mh,gh,we,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function _h(t){let e,n,i,o;const r=t[28].default,s=Ue(r,t,t[27],null);return{c(){e=De("div"),s&&s.c(),this.h()},l(l){e=Ne(l,"DIV",{class:!0});var a=U(e);s&&s.l(a),a.forEach(P),this.h()},h(){b(e,"class","svelte-flow__pane svelte-1esy7hx"),ge(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),ge(e,"dragging",t[4]),ge(e,"selection",t[1])},m(l,a){Z(l,e,a),s&&s.m(e,null),t[29](e),n=!0,i||(o=[ze(e,"click",function(){Ve(t[3]?void 0:Hn(t[15],t[2]))&&(t[3]?void 0:Hn(t[15],t[2])).apply(this,arguments)}),ze(e,"pointerdown",function(){Ve(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),ze(e,"pointermove",function(){Ve(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),ze(e,"pointerup",function(){Ve(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),ze(e,"contextmenu",function(){Ve(Hn(t[19],t[2]))&&Hn(t[19],t[2]).apply(this,arguments)})],i=!0)},p(l,a){t=l,s&&s.p&&(!n||a[0]&134217728)&&Ze(s,r,t,t[27],n?Je(r,t[27],a,null):Ge(t[27]),null),(!n||a[0]&1)&&ge(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),(!n||a[0]&16)&&ge(e,"dragging",t[4]),(!n||a[0]&2)&&ge(e,"selection",t[1])},i(l){n||(V(s,l),n=!0)},o(l){B(s,l),n=!1},d(l){l&&P(e),s&&s.d(l),t[29](null),i=!1,gt(o)}}}function Hn(t,e){return n=>{n.target===e&&(t==null||t(n))}}function ar(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function bh(t,e,n){let i,o,r,s,l,a,u,f,d,c,h,m,y,{$$slots:_={},$$scope:g}=e,{panOnDrag:E=void 0}=e,{selectionOnDrag:k=void 0}=e;const p=si(),{nodes:A,nodeLookup:F,edges:D,viewport:H,dragging:O,elementsSelectable:R,selectionRect:Y,selectionRectMode:I,selectionKeyPressed:W,selectionMode:v,panActivationKeyPressed:M,unselectNodesAndEdges:w}=Re();J(t,F,N=>n(36,d=N)),J(t,D,N=>n(33,a=N)),J(t,H,N=>n(35,f=N)),J(t,O,N=>n(4,y=N)),J(t,R,N=>n(25,h=N)),J(t,Y,N=>n(24,c=N)),J(t,I,N=>n(23,l=N)),J(t,W,N=>n(22,s=N)),J(t,v,N=>n(34,u=N)),J(t,M,N=>n(26,m=N));let C,z=null,T=[],X=!1;function G(N){if(X){X=!1;return}p("paneclick",{event:N}),w(),I.set(null)}function j(N){var be,ke;if(z=C.getBoundingClientRect(),!R||!o||N.button!==0||N.target!==C||!z)return;(ke=(be=N.target)==null?void 0:be.setPointerCapture)==null||ke.call(be,N.pointerId);const{x:de,y:me}=Et(N,z);w(),Y.set({width:0,height:0,startX:de,startY:me,x:de,y:me})}function se(N){if(!o||!z||!c)return;X=!0;const de=Et(N,z),me=c.startX??0,be=c.startY??0,ke={...c,x:de.x<me?de.x:me,y:de.y<be?de.y:be,width:Math.abs(de.x-me),height:Math.abs(de.y-be)},pe=T.map(Te=>Te.id),Ae=Ji(T,a).map(Te=>Te.id);T=Il(d,ke,[f.x,f.y,f.zoom],u===xn.Partial,!0);const K=Ji(T,a).map(Te=>Te.id),He=T.map(Te=>Te.id);(pe.length!==He.length||He.some(Te=>!pe.includes(Te)))&&A.update(Te=>Te.map(ar(He))),(Ae.length!==K.length||K.some(Te=>!Ae.includes(Te)))&&D.update(Te=>Te.map(ar(K))),I.set("user"),Y.set(ke)}function L(N){var de,me;N.button===0&&((me=(de=N.target)==null?void 0:de.releasePointerCapture)==null||me.call(de,N.pointerId),!o&&l==="user"&&N.target===C&&(G==null||G(N)),Y.set(null),T.length>0&&Fn(I,l="nodes",l),s&&(X=!1))}const x=N=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){N.preventDefault();return}p("panecontextmenu",{event:N})};function fe(N){Vt[N?"unshift":"push"](()=>{C=N,n(2,C)})}return t.$$set=N=>{"panOnDrag"in N&&n(0,E=N.panOnDrag),"selectionOnDrag"in N&&n(20,k=N.selectionOnDrag),"$$scope"in N&&n(27,g=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=m||E),t.$$.dirty[0]&24117248&&n(1,o=s||c||k&&i!==!0),t.$$.dirty[0]&41943042&&n(3,r=h&&(o||l==="user"))},[E,o,C,r,y,F,D,H,O,R,Y,I,W,v,M,G,j,se,L,x,k,i,s,l,c,h,m,g,_,fe]}class wh extends ye{constructor(e){super(),_e(this,e,bh,_h,we,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function kh(t){let e,n;const i=t[3].default,o=Ue(i,t,t[2],null);return{c(){e=De("div"),o&&o.c(),this.h()},l(r){e=Ne(r,"DIV",{class:!0,style:!0});var s=U(e);o&&o.l(s),s.forEach(P),this.h()},h(){b(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),he(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(r,s){Z(r,e,s),o&&o.m(e,null),n=!0},p(r,[s]){o&&o.p&&(!n||s&4)&&Ze(o,i,r,r[2],n?Je(i,r[2],s,null):Ge(r[2]),null),(!n||s&1)&&he(e,"transform","translate("+r[0].x+"px, "+r[0].y+"px) scale("+r[0].zoom+")")},i(r){n||(V(o,r),n=!0)},o(r){B(o,r),n=!1},d(r){r&&P(e),o&&o.d(r)}}}function vh(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const{viewport:s}=Re();return J(t,s,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class Eh extends ye{constructor(e){super(),_e(this,e,vh,kh,we,{})}}function is(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s}=e,l=ld({onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s,getStoreItems:()=>{const u=Q(n.snapGrid),f=Q(n.viewport);return{nodes:Q(n.nodes),nodeLookup:Q(n.nodeLookup),edges:Q(n.edges),nodeExtent:Q(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:Q(n.nodeOrigin),multiSelectionActive:Q(n.multiselectionKeyPressed),domNode:Q(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:Q(n.autoPanOnNodeDrag),nodesDraggable:Q(n.nodesDraggable),selectNodesOnDrag:Q(n.selectNodesOnDrag),nodeDragThreshold:Q(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){l.destroy()}}}function ph({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:r}){if(o===void 0&&r===void 0){const s=t??n,l=e??i;return{width:s?`width:${s}px;`:"",height:l?`height:${l}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function ur(t){let e,n,i,o,r,s=`translate(${t[12]}px, ${t[13]}px)`,l,a,u;var f=t[27];function d(c,h){return{props:{data:c[2],id:c[1],selected:c[3],selectable:c[5],deletable:c[7],sourcePosition:c[14],targetPosition:c[15],zIndex:c[16],dragging:c[9],draggable:c[4],dragHandle:c[19],parentId:c[21],type:c[25],isConnectable:c[28],positionAbsoluteX:c[12],positionAbsoluteY:c[13],width:c[17],height:c[18]}}}return f&&(n=Kn(f,d(t))),{c(){e=De("div"),n&&oe(n.$$.fragment),this.h()},l(c){e=Ne(c,"DIV",{"data-id":!0,class:!0,style:!0});var h=U(e);n&&ae(n.$$.fragment,h),h.forEach(P),this.h()},h(){b(e,"data-id",t[1]),b(e,"class",i=Oe(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),b(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),ge(e,"dragging",t[9]),ge(e,"selected",t[3]),ge(e,"draggable",t[4]),ge(e,"connectable",t[6]),ge(e,"selectable",t[5]),ge(e,"nopan",t[4]),ge(e,"parent",t[11]),he(e,"z-index",t[16]),he(e,"transform",s),he(e,"visibility",t[20]?"visible":"hidden")},m(c,h){Z(c,e,h),n&&re(n,e,null),t[50](e),l=!0,a||(u=[qe(r=is.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),ze(e,"click",t[34]),ze(e,"mouseenter",t[51]),ze(e,"mouseleave",t[52]),ze(e,"mousemove",t[53]),ze(e,"contextmenu",t[54])],a=!0)},p(c,h){if(h[0]&134217728&&f!==(f=c[27])){if(n){We();const y=n;B(y.$$.fragment,1,0,()=>{le(y,1)}),Be()}f?(n=Kn(f,d(c)),oe(n.$$.fragment),V(n.$$.fragment,1),re(n,e,null)):n=null}else if(f){const y={};h[0]&4&&(y.data=c[2]),h[0]&2&&(y.id=c[1]),h[0]&8&&(y.selected=c[3]),h[0]&32&&(y.selectable=c[5]),h[0]&128&&(y.deletable=c[7]),h[0]&16384&&(y.sourcePosition=c[14]),h[0]&32768&&(y.targetPosition=c[15]),h[0]&65536&&(y.zIndex=c[16]),h[0]&512&&(y.dragging=c[9]),h[0]&16&&(y.draggable=c[4]),h[0]&524288&&(y.dragHandle=c[19]),h[0]&2097152&&(y.parentId=c[21]),h[0]&33554432&&(y.type=c[25]),h[0]&268435456&&(y.isConnectable=c[28]),h[0]&4096&&(y.positionAbsoluteX=c[12]),h[0]&8192&&(y.positionAbsoluteY=c[13]),h[0]&131072&&(y.width=c[17]),h[0]&262144&&(y.height=c[18]),n.$set(y)}(!l||h[0]&2)&&b(e,"data-id",c[1]),(!l||h[0]&41943040&&i!==(i=Oe(["svelte-flow__node",`svelte-flow__node-${c[25]}`,c[23]])))&&b(e,"class",i),(!l||h[0]&67109888&&o!==(o=(c[10]??"")+";"+c[26].width+c[26].height))&&b(e,"style",o),r&&Ve(r.update)&&h[0]&4718626&&r.update.call(null,{nodeId:c[1],isSelectable:c[5],disabled:!1,handleSelector:c[19],noDragClass:"nodrag",nodeClickDistance:c[22],onNodeMouseDown:c[31],onDrag:c[47],onDragStart:c[48],onDragStop:c[49],store:c[29]}),(!l||h[0]&41943552)&&ge(e,"dragging",c[9]),(!l||h[0]&41943048)&&ge(e,"selected",c[3]),(!l||h[0]&41943056)&&ge(e,"draggable",c[4]),(!l||h[0]&41943104)&&ge(e,"connectable",c[6]),(!l||h[0]&41943072)&&ge(e,"selectable",c[5]),(!l||h[0]&41943056)&&ge(e,"nopan",c[4]),(!l||h[0]&41945088)&&ge(e,"parent",c[11]);const m=h[0]&67109888;(h[0]&67175424||m)&&he(e,"z-index",c[16]),(h[0]&67122176&&s!==(s=`translate(${c[12]}px, ${c[13]}px)`)||m)&&he(e,"transform",s),(h[0]&68158464||m)&&he(e,"visibility",c[20]?"visible":"hidden")},i(c){l||(n&&V(n.$$.fragment,c),l=!0)},o(c){n&&B(n.$$.fragment,c),l=!1},d(c){c&&P(e),n&&le(n),t[50](null),a=!1,gt(u)}}}function Sh(t){let e,n,i=!t[8]&&ur(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,r){i&&i.m(o,r),Z(o,e,r),n=!0},p(o,r){o[8]?i&&(We(),B(i,1,1,()=>{i=null}),Be()):i?(i.p(o,r),r[0]&256&&V(i,1)):(i=ur(o),i.c(),V(i,1),i.m(e.parentNode,e))},i(o){n||(V(i),n=!0)},o(o){B(i),n=!1},d(o){o&&P(e),i&&i.d(o)}}}function Ch(t,e,n){let i,o,r,s,l,a,{node:u}=e,{id:f}=e,{data:d={}}=e,{selected:c=!1}=e,{draggable:h=void 0}=e,{selectable:m=void 0}=e,{connectable:y=!0}=e,{deletable:_=!0}=e,{hidden:g=!1}=e,{dragging:E=!1}=e,{resizeObserver:k=null}=e,{style:p=void 0}=e,{type:A="default"}=e,{isParent:F=!1}=e,{positionX:D}=e,{positionY:H}=e,{sourcePosition:O=void 0}=e,{targetPosition:R=void 0}=e,{zIndex:Y}=e,{measuredWidth:I=void 0}=e,{measuredHeight:W=void 0}=e,{initialWidth:v=void 0}=e,{initialHeight:M=void 0}=e,{width:w=void 0}=e,{height:C=void 0}=e,{dragHandle:z=void 0}=e,{initialized:T=!1}=e,{parentId:X=void 0}=e,{nodeClickDistance:G=void 0}=e,{class:j=""}=e;const se=Re(),{nodeTypes:L,nodeDragThreshold:x,selectNodesOnDrag:fe,handleNodeSelection:N,updateNodeInternals:de}=se;J(t,L,q=>n(46,l=q));let me,be=null;const ke=si(),pe=ue(y);J(t,pe,q=>n(28,a=q));let Ae,K,He;mn("svelteflow__node_id",f),mn("svelteflow__node_connectable",pe),$i(()=>{be&&(k==null||k.unobserve(be))});function Te(q){m&&(!Q(fe)||!h||Q(x)>0)&&N(f),ke("nodeclick",{node:u.internals.userNode,event:q})}const Ct=(q,zt,Ye,Qe)=>{ke("nodedrag",{event:q,targetNode:Ye,nodes:Qe})},yt=(q,zt,Ye,Qe)=>{ke("nodedragstart",{event:q,targetNode:Ye,nodes:Qe})},_t=(q,zt,Ye,Qe)=>{ke("nodedragstop",{event:q,targetNode:Ye,nodes:Qe})};function Xe(q){Vt[q?"unshift":"push"](()=>{me=q,n(24,me)})}const bt=q=>ke("nodemouseenter",{node:u,event:q}),ie=q=>ke("nodemouseleave",{node:u,event:q}),Pt=q=>ke("nodemousemove",{node:u,event:q}),Mt=q=>ke("nodecontextmenu",{node:u,event:q});return t.$$set=q=>{"node"in q&&n(0,u=q.node),"id"in q&&n(1,f=q.id),"data"in q&&n(2,d=q.data),"selected"in q&&n(3,c=q.selected),"draggable"in q&&n(4,h=q.draggable),"selectable"in q&&n(5,m=q.selectable),"connectable"in q&&n(6,y=q.connectable),"deletable"in q&&n(7,_=q.deletable),"hidden"in q&&n(8,g=q.hidden),"dragging"in q&&n(9,E=q.dragging),"resizeObserver"in q&&n(35,k=q.resizeObserver),"style"in q&&n(10,p=q.style),"type"in q&&n(36,A=q.type),"isParent"in q&&n(11,F=q.isParent),"positionX"in q&&n(12,D=q.positionX),"positionY"in q&&n(13,H=q.positionY),"sourcePosition"in q&&n(14,O=q.sourcePosition),"targetPosition"in q&&n(15,R=q.targetPosition),"zIndex"in q&&n(16,Y=q.zIndex),"measuredWidth"in q&&n(37,I=q.measuredWidth),"measuredHeight"in q&&n(38,W=q.measuredHeight),"initialWidth"in q&&n(39,v=q.initialWidth),"initialHeight"in q&&n(40,M=q.initialHeight),"width"in q&&n(17,w=q.width),"height"in q&&n(18,C=q.height),"dragHandle"in q&&n(19,z=q.dragHandle),"initialized"in q&&n(20,T=q.initialized),"parentId"in q&&n(21,X=q.parentId),"nodeClickDistance"in q&&n(22,G=q.nodeClickDistance),"class"in q&&n(23,j=q.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=A||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!l[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,r=l[i]||jl),t.$$.dirty[1]&16416&&(o||console.warn("003",Sn.error003(A))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,s=ph({width:w,height:C,initialWidth:v,initialHeight:M,measuredWidth:I,measuredHeight:W})),t.$$.dirty[0]&64&&pe.set(!!y),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((Ae&&i!==Ae||K&&O!==K||He&&R!==He)&&requestAnimationFrame(()=>de(new Map([[f,{id:f,nodeElement:me,force:!0}]]))),n(42,Ae=i),n(43,K=O),n(44,He=R)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&k&&(me!==be||!T)&&(be&&k.unobserve(be),me&&k.observe(me),n(41,be=me))},[u,f,d,c,h,m,y,_,g,E,p,F,D,H,O,R,Y,w,C,z,T,X,G,j,me,i,s,r,a,se,L,N,ke,pe,Te,k,A,I,W,v,M,be,Ae,K,He,o,l,Ct,yt,_t,Xe,bt,ie,Pt,Mt]}class Ph extends ye{constructor(e){super(),_e(this,e,Ch,Sh,tl,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Mh}=xs;function fr(t,e,n){const i=t.slice();return i[21]=e[n],i}function cr(t,e){let n,i,o;return i=new Ph({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:ti(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=Me(),oe(i.$$.fragment),this.h()},l(r){n=Me(),ae(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){Z(r,n,s),re(i,r,s),o=!0},p(r,s){e=r;const l={};s&2&&(l.node=e[21]),s&2&&(l.id=e[21].id),s&2&&(l.data=e[21].data),s&2&&(l.selected=!!e[21].selected),s&2&&(l.hidden=!!e[21].hidden),s&6&&(l.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),s&10&&(l.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),s&18&&(l.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),s&2&&(l.deletable=e[21].deletable??!0),s&2&&(l.positionX=e[21].internals.positionAbsolute.x),s&2&&(l.positionY=e[21].internals.positionAbsolute.y),s&34&&(l.isParent=e[5].has(e[21].id)),s&2&&(l.style=e[21].style),s&2&&(l.class=e[21].class),s&2&&(l.type=e[21].type??"default"),s&2&&(l.sourcePosition=e[21].sourcePosition),s&2&&(l.targetPosition=e[21].targetPosition),s&2&&(l.dragging=e[21].dragging),s&2&&(l.zIndex=e[21].internals.z??0),s&2&&(l.dragHandle=e[21].dragHandle),s&2&&(l.initialized=ti(e[21])),s&2&&(l.width=e[21].width),s&2&&(l.height=e[21].height),s&2&&(l.initialWidth=e[21].initialWidth),s&2&&(l.initialHeight=e[21].initialHeight),s&2&&(l.measuredWidth=e[21].measured.width),s&2&&(l.measuredHeight=e[21].measured.height),s&2&&(l.parentId=e[21].parentId),s&1&&(l.nodeClickDistance=e[0]),i.$set(l)},i(r){o||(V(i.$$.fragment,r),o=!0)},o(r){B(i.$$.fragment,r),o=!1},d(r){r&&P(n),le(i,r)}}}function zh(t){let e,n=[],i=new Mh,o,r=dt(t[1]);const s=l=>l[21].id;for(let l=0;l<r.length;l+=1){let a=fr(t,r,l),u=s(a);i.set(u,n[l]=cr(u,a))}return{c(){e=De("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=Ne(l,"DIV",{class:!0});var a=U(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(P),this.h()},h(){b(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(l,a){Z(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&2111&&(r=dt(l[1]),We(),n=ui(n,a,s,1,l,r,i,e,ai,cr,null,fr),Be())},i(l){if(!o){for(let a=0;a<r.length;a+=1)V(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)B(n[a]);o=!1},d(l){l&&P(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Oh(t,e,n){let i,o,r,s,l,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:f,nodesConnectable:d,elementsSelectable:c,updateNodeInternals:h,parentLookup:m}=Re();J(t,u,H=>n(1,i=H)),J(t,f,H=>n(2,o=H)),J(t,d,H=>n(4,s=H)),J(t,c,H=>n(3,r=H)),J(t,m,H=>n(5,l=H));const y=typeof ResizeObserver>"u"?null:new ResizeObserver(H=>{const O=new Map;H.forEach(R=>{const Y=R.target.getAttribute("data-id");O.set(Y,{id:Y,nodeElement:R.target,force:!0})}),h(O)});$i(()=>{y==null||y.disconnect()});function _(H){Se.call(this,t,H)}function g(H){Se.call(this,t,H)}function E(H){Se.call(this,t,H)}function k(H){Se.call(this,t,H)}function p(H){Se.call(this,t,H)}function A(H){Se.call(this,t,H)}function F(H){Se.call(this,t,H)}function D(H){Se.call(this,t,H)}return t.$$set=H=>{"nodeClickDistance"in H&&n(0,a=H.nodeClickDistance)},[a,i,o,r,s,l,u,f,d,c,m,y,_,g,E,k,p,A,F,D]}class Th extends ye{constructor(e){super(),_e(this,e,Oh,zh,we,{nodeClickDistance:0})}}function dr(t){let e,n,i,o,r,s,l,a;var u=t[27];function f(d,c){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[14],sourceY:d[15],targetX:d[16],targetY:d[17],sourcePosition:d[18],targetPosition:d[19],animated:d[6],selected:d[7],label:d[10],labelStyle:d[11],data:d[3],style:d[4],interactionWidth:d[21],selectable:d[24],deletable:d[8]??!0,type:d[23],sourceHandleId:d[12],targetHandleId:d[13],markerStart:d[26],markerEnd:d[25]}}}return u&&(i=Kn(u,f(t))),{c(){e=ee("svg"),n=ee("g"),i&&oe(i.$$.fragment),this.h()},l(d){e=te(d,"svg",{});var c=U(e);n=te(c,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var h=U(n);i&&ae(i.$$.fragment,h),h.forEach(P),c.forEach(P),this.h()},h(){b(n,"class",o=Oe(["svelte-flow__edge",t[22]])),b(n,"data-id",t[0]),b(n,"aria-label",r=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),b(n,"role","img"),ge(n,"animated",t[6]),ge(n,"selected",t[7]),ge(n,"selectable",t[24]),he(e,"z-index",t[5])},m(d,c){Z(d,e,c),ne(e,n),i&&re(i,n,null),s=!0,l||(a=[ze(n,"click",t[32]),ze(n,"contextmenu",t[41]),ze(n,"mouseenter",t[42]),ze(n,"mouseleave",t[43])],l=!0)},p(d,c){if(c[0]&134217728&&u!==(u=d[27])){if(i){We();const h=i;B(h.$$.fragment,1,0,()=>{le(h,1)}),Be()}u?(i=Kn(u,f(d)),oe(i.$$.fragment),V(i.$$.fragment,1),re(i,n,null)):i=null}else if(u){const h={};c[0]&1&&(h.id=d[0]),c[0]&2&&(h.source=d[1]),c[0]&4&&(h.target=d[2]),c[0]&16384&&(h.sourceX=d[14]),c[0]&32768&&(h.sourceY=d[15]),c[0]&65536&&(h.targetX=d[16]),c[0]&131072&&(h.targetY=d[17]),c[0]&262144&&(h.sourcePosition=d[18]),c[0]&524288&&(h.targetPosition=d[19]),c[0]&64&&(h.animated=d[6]),c[0]&128&&(h.selected=d[7]),c[0]&1024&&(h.label=d[10]),c[0]&2048&&(h.labelStyle=d[11]),c[0]&8&&(h.data=d[3]),c[0]&16&&(h.style=d[4]),c[0]&2097152&&(h.interactionWidth=d[21]),c[0]&16777216&&(h.selectable=d[24]),c[0]&256&&(h.deletable=d[8]??!0),c[0]&8388608&&(h.type=d[23]),c[0]&4096&&(h.sourceHandleId=d[12]),c[0]&8192&&(h.targetHandleId=d[13]),c[0]&67108864&&(h.markerStart=d[26]),c[0]&33554432&&(h.markerEnd=d[25]),i.$set(h)}(!s||c[0]&4194304&&o!==(o=Oe(["svelte-flow__edge",d[22]])))&&b(n,"class",o),(!s||c[0]&1)&&b(n,"data-id",d[0]),(!s||c[0]&1048582&&r!==(r=d[20]===null?void 0:d[20]?d[20]:`Edge from ${d[1]} to ${d[2]}`))&&b(n,"aria-label",r),(!s||c[0]&4194368)&&ge(n,"animated",d[6]),(!s||c[0]&4194432)&&ge(n,"selected",d[7]),(!s||c[0]&20971520)&&ge(n,"selectable",d[24]),c[0]&32&&he(e,"z-index",d[5])},i(d){s||(i&&V(i.$$.fragment,d),s=!0)},o(d){i&&B(i.$$.fragment,d),s=!1},d(d){d&&P(e),i&&le(i),l=!1,gt(a)}}}function Dh(t){let e,n,i=!t[9]&&dr(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,r){i&&i.m(o,r),Z(o,e,r),n=!0},p(o,r){o[9]?i&&(We(),B(i,1,1,()=>{i=null}),Be()):i?(i.p(o,r),r[0]&512&&V(i,1)):(i=dr(o),i.c(),V(i,1),i.m(e.parentNode,e))},i(o){n||(V(i),n=!0)},o(o){B(i),n=!1},d(o){o&&P(e),i&&i.d(o)}}}function Nh(t,e,n){let i,o,r,s,l,a,u,f,d,{id:c}=e,{type:h="default"}=e,{source:m=""}=e,{target:y=""}=e,{data:_={}}=e,{style:g=void 0}=e,{zIndex:E=void 0}=e,{animated:k=!1}=e,{selected:p=!1}=e,{selectable:A=void 0}=e,{deletable:F=void 0}=e,{hidden:D=!1}=e,{label:H=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:R=void 0}=e,{markerEnd:Y=void 0}=e,{sourceHandle:I=void 0}=e,{targetHandle:W=void 0}=e,{sourceX:v}=e,{sourceY:M}=e,{targetX:w}=e,{targetY:C}=e,{sourcePosition:z}=e,{targetPosition:T}=e,{ariaLabel:X=void 0}=e,{interactionWidth:G=void 0}=e,{class:j=""}=e;mn("svelteflow__edge_id",c);const{edgeLookup:se,edgeTypes:L,flowId:x,elementsSelectable:fe}=Re();J(t,se,K=>n(44,a=K)),J(t,L,K=>n(40,d=K)),J(t,x,K=>n(39,f=K)),J(t,fe,K=>n(38,u=K));const N=si(),de=xl();function me(K){const He=a.get(c);He&&(de(c),N("edgeclick",{event:K,edge:He}))}function be(K,He){const Te=a.get(c);Te&&N(He,{event:K,edge:Te})}const ke=K=>{be(K,"edgecontextmenu")},pe=K=>{be(K,"edgemouseenter")},Ae=K=>{be(K,"edgemouseleave")};return t.$$set=K=>{"id"in K&&n(0,c=K.id),"type"in K&&n(34,h=K.type),"source"in K&&n(1,m=K.source),"target"in K&&n(2,y=K.target),"data"in K&&n(3,_=K.data),"style"in K&&n(4,g=K.style),"zIndex"in K&&n(5,E=K.zIndex),"animated"in K&&n(6,k=K.animated),"selected"in K&&n(7,p=K.selected),"selectable"in K&&n(35,A=K.selectable),"deletable"in K&&n(8,F=K.deletable),"hidden"in K&&n(9,D=K.hidden),"label"in K&&n(10,H=K.label),"labelStyle"in K&&n(11,O=K.labelStyle),"markerStart"in K&&n(36,R=K.markerStart),"markerEnd"in K&&n(37,Y=K.markerEnd),"sourceHandle"in K&&n(12,I=K.sourceHandle),"targetHandle"in K&&n(13,W=K.targetHandle),"sourceX"in K&&n(14,v=K.sourceX),"sourceY"in K&&n(15,M=K.sourceY),"targetX"in K&&n(16,w=K.targetX),"targetY"in K&&n(17,C=K.targetY),"sourcePosition"in K&&n(18,z=K.sourcePosition),"targetPosition"in K&&n(19,T=K.targetPosition),"ariaLabel"in K&&n(20,X=K.ariaLabel),"interactionWidth"in K&&n(21,G=K.interactionWidth),"class"in K&&n(22,j=K.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=h||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=d[i]||$l),t.$$.dirty[1]&288&&n(26,r=R?`url('#${ji(R,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,s=Y?`url('#${ji(Y,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,l=A??u)},[c,m,y,_,g,E,k,p,F,D,H,O,I,W,v,M,w,C,z,T,X,G,j,i,l,s,r,o,se,L,x,fe,me,be,h,A,R,Y,u,f,d,ke,pe,Ae]}class Ih extends ye{constructor(e){super(),_e(this,e,Nh,Dh,tl,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Ah(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return fn(()=>(i==null||i(),o)),t.$$set=r=>{"onMount"in r&&n(0,i=r.onMount),"onDestroy"in r&&n(1,o=r.onDestroy)},[i,o]}class Hh extends ye{constructor(e){super(),_e(this,e,Ah,null,we,{onMount:0,onDestroy:1})}}function hr(t,e,n){const i=t.slice();return i[2]=e[n],i}function gr(t,e){let n,i,o;const r=[e[2]];let s={};for(let l=0;l<r.length;l+=1)s=Ce(s,r[l]);return i=new Fh({props:s}),{key:t,first:null,c(){n=Me(),oe(i.$$.fragment),this.h()},l(l){n=Me(),ae(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,a){Z(l,n,a),re(i,l,a),o=!0},p(l,a){e=l;const u=a&1?ht(r,[nn(e[2])]):{};i.$set(u)},i(l){o||(V(i.$$.fragment,l),o=!0)},o(l){B(i.$$.fragment,l),o=!1},d(l){l&&P(n),le(i,l)}}}function Lh(t){let e,n=[],i=new Map,o,r=dt(t[0]);const s=l=>l[2].id;for(let l=0;l<r.length;l+=1){let a=hr(t,r,l),u=s(a);i.set(u,n[l]=gr(u,a))}return{c(){e=ee("defs");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=te(l,"defs",{});var a=U(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(P)},m(l,a){Z(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&1&&(r=dt(l[0]),We(),n=ui(n,a,s,1,l,r,i,e,ai,gr,null,hr),Be())},i(l){if(!o){for(let a=0;a<r.length;a+=1)V(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)B(n[a]);o=!1},d(l){l&&P(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Rh(t,e,n){let i;const{markers:o}=Re();return J(t,o,r=>n(0,i=r)),[i,o]}class Vh extends ye{constructor(e){super(),_e(this,e,Rh,Lh,we,{})}}function Wh(t){let e;return{c(){e=ee("polyline"),this.h()},l(n){e=te(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),U(e).forEach(P),this.h()},h(){b(e,"stroke",t[6]),b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width",t[7]),b(e,"fill",t[6]),b(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){Z(n,e,i)},p(n,i){i&64&&b(e,"stroke",n[6]),i&128&&b(e,"stroke-width",n[7]),i&64&&b(e,"fill",n[6])},d(n){n&&P(e)}}}function Bh(t){let e;return{c(){e=ee("polyline"),this.h()},l(n){e=te(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),U(e).forEach(P),this.h()},h(){b(e,"stroke",t[6]),b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width",t[7]),b(e,"fill","none"),b(e,"points","-5,-4 0,0 -5,4")},m(n,i){Z(n,e,i)},p(n,i){i&64&&b(e,"stroke",n[6]),i&128&&b(e,"stroke-width",n[7])},d(n){n&&P(e)}}}function Xh(t){let e,n,i;function o(l,a){if(l[1]===ln.Arrow)return Bh;if(l[1]===ln.ArrowClosed)return Wh}let r=o(t),s=r&&r(t);return{c(){e=ee("marker"),s&&s.c(),this.h()},l(l){e=te(l,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=U(e);s&&s.l(a),a.forEach(P),this.h()},h(){b(e,"class","svelte-flow__arrowhead"),b(e,"id",t[0]),b(e,"markerWidth",n=`${t[2]}`),b(e,"markerHeight",i=`${t[3]}`),b(e,"viewBox","-10 -10 20 20"),b(e,"markerUnits",t[4]),b(e,"orient",t[5]),b(e,"refX","0"),b(e,"refY","0")},m(l,a){Z(l,e,a),s&&s.m(e,null)},p(l,[a]){r===(r=o(l))&&s?s.p(l,a):(s&&s.d(1),s=r&&r(l),s&&(s.c(),s.m(e,null))),a&1&&b(e,"id",l[0]),a&4&&n!==(n=`${l[2]}`)&&b(e,"markerWidth",n),a&8&&i!==(i=`${l[3]}`)&&b(e,"markerHeight",i),a&16&&b(e,"markerUnits",l[4]),a&32&&b(e,"orient",l[5])},i:Pe,o:Pe,d(l){l&&P(e),s&&s.d()}}}function Yh(t,e,n){let{id:i}=e,{type:o}=e,{width:r=12.5}=e,{height:s=12.5}=e,{markerUnits:l="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,r=d.width),"height"in d&&n(3,s=d.height),"markerUnits"in d&&n(4,l=d.markerUnits),"orient"in d&&n(5,a=d.orient),"color"in d&&n(6,u=d.color),"strokeWidth"in d&&n(7,f=d.strokeWidth)},[i,o,r,s,l,a,u,f]}class Fh extends ye{constructor(e){super(),_e(this,e,Yh,Xh,we,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function mr(t,e,n){const i=t.slice();return i[14]=e[n],i}function yr(t,e){let n,i,o;return i=new Ih({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=Me(),oe(i.$$.fragment),this.h()},l(r){n=Me(),ae(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){Z(r,n,s),re(i,r,s),o=!0},p(r,s){e=r;const l={};s&1&&(l.id=e[14].id),s&1&&(l.source=e[14].source),s&1&&(l.target=e[14].target),s&1&&(l.data=e[14].data),s&1&&(l.style=e[14].style),s&1&&(l.animated=e[14].animated),s&1&&(l.selected=e[14].selected),s&3&&(l.selectable=e[14].selectable??e[1]),s&1&&(l.deletable=e[14].deletable),s&1&&(l.hidden=e[14].hidden),s&1&&(l.label=e[14].label),s&1&&(l.labelStyle=e[14].labelStyle),s&1&&(l.markerStart=e[14].markerStart),s&1&&(l.markerEnd=e[14].markerEnd),s&1&&(l.sourceHandle=e[14].sourceHandle),s&1&&(l.targetHandle=e[14].targetHandle),s&1&&(l.sourceX=e[14].sourceX),s&1&&(l.sourceY=e[14].sourceY),s&1&&(l.targetX=e[14].targetX),s&1&&(l.targetY=e[14].targetY),s&1&&(l.sourcePosition=e[14].sourcePosition),s&1&&(l.targetPosition=e[14].targetPosition),s&1&&(l.ariaLabel=e[14].ariaLabel),s&1&&(l.interactionWidth=e[14].interactionWidth),s&1&&(l.class=e[14].class),s&1&&(l.type=e[14].type||"default"),s&1&&(l.zIndex=e[14].zIndex),i.$set(l)},i(r){o||(V(i.$$.fragment,r),o=!0)},o(r){B(i.$$.fragment,r),o=!1},d(r){r&&P(n),le(i,r)}}}function _r(t){let e,n;return e=new Hh({props:{onMount:t[11],onDestroy:t[12]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.onMount=i[11]),o&4&&(r.onDestroy=i[12]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Kh(t){let e,n,i,o,r=[],s=new Map,l,a;i=new Vh({});let u=dt(t[0]);const f=c=>c[14].id;for(let c=0;c<u.length;c+=1){let h=mr(t,u,c),m=f(h);s.set(m,r[c]=yr(m,h))}let d=t[0].length>0&&_r(t);return{c(){e=De("div"),n=ee("svg"),oe(i.$$.fragment),o=ve();for(let c=0;c<r.length;c+=1)r[c].c();l=ve(),d&&d.c(),this.h()},l(c){e=Ne(c,"DIV",{class:!0});var h=U(e);n=te(h,"svg",{class:!0});var m=U(n);ae(i.$$.fragment,m),m.forEach(P),o=Ee(h);for(let y=0;y<r.length;y+=1)r[y].l(h);l=Ee(h),d&&d.l(h),h.forEach(P),this.h()},h(){b(n,"class","svelte-flow__marker"),b(e,"class","svelte-flow__edges")},m(c,h){Z(c,e,h),ne(e,n),re(i,n,null),ne(e,o);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(e,null);ne(e,l),d&&d.m(e,null),a=!0},p(c,[h]){h&3&&(u=dt(c[0]),We(),r=ui(r,h,f,1,c,u,s,e,ai,yr,l,mr),Be()),c[0].length>0?d?(d.p(c,h),h&1&&V(d,1)):(d=_r(c),d.c(),V(d,1),d.m(e,null)):d&&(We(),B(d,1,1,()=>{d=null}),Be())},i(c){if(!a){V(i.$$.fragment,c);for(let h=0;h<u.length;h+=1)V(r[h]);V(d),a=!0}},o(c){B(i.$$.fragment,c);for(let h=0;h<r.length;h+=1)B(r[h]);B(d),a=!1},d(c){c&&P(e),le(i);for(let h=0;h<r.length;h+=1)r[h].d();d&&d.d()}}}function qh(t,e,n){let i,o,r,{defaultEdgeOptions:s}=e;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=Re();J(t,l,g=>n(0,i=g)),J(t,a,g=>n(2,r=g)),J(t,f,g=>n(1,o=g)),fn(()=>{s&&u(s)});function d(g){Se.call(this,t,g)}function c(g){Se.call(this,t,g)}function h(g){Se.call(this,t,g)}function m(g){Se.call(this,t,g)}const y=()=>{Fn(a,r=!0,r)},_=()=>{Fn(a,r=!1,r)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,s=g.defaultEdgeOptions)},[i,o,r,l,a,f,s,d,c,h,m,y,_]}class Uh extends ye{constructor(e){super(),_e(this,e,qh,Kh,we,{defaultEdgeOptions:6})}}function br(t){let e;return{c(){e=De("div"),this.h()},l(n){e=Ne(n,"DIV",{class:!0}),U(e).forEach(P),this.h()},h(){b(e,"class","svelte-flow__selection svelte-1iugwpu"),he(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),he(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),he(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){Z(n,e,i)},p(n,i){i&4&&he(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&he(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&he(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&P(e)}}}function Zh(t){let e,n=t[4]&&br(t);return{c(){n&&n.c(),e=Me()},l(i){n&&n.l(i),e=Me()},m(i,o){n&&n.m(i,o),Z(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=br(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Pe,o:Pe,d(i){i&&P(e),n&&n.d(i)}}}function Gh(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:r=0}=e,{height:s=0}=e,{isVisible:l=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,r=a.width),"height"in a&&n(3,s=a.height),"isVisible"in a&&n(4,l=a.isVisible)},[i,o,r,s,l]}class os extends ye{constructor(e){super(),_e(this,e,Gh,Zh,we,{x:0,y:1,width:2,height:3,isVisible:4})}}function Jh(t){var i,o,r,s;let e,n;return e=new os({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(r=t[0])==null?void 0:r.x,y:(s=t[0])==null?void 0:s.y}}),{c(){oe(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){re(e,l,a),n=!0},p(l,[a]){var f,d,c,h;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]==="user")),a&1&&(u.width=(f=l[0])==null?void 0:f.width),a&1&&(u.height=(d=l[0])==null?void 0:d.height),a&1&&(u.x=(c=l[0])==null?void 0:c.x),a&1&&(u.y=(h=l[0])==null?void 0:h.y),e.$set(u)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function Qh(t,e,n){let i,o;const{selectionRect:r,selectionRectMode:s}=Re();return J(t,r,l=>n(0,i=l)),J(t,s,l=>n(1,o=l)),[i,o,r,s]}class jh extends ye{constructor(e){super(),_e(this,e,Qh,Jh,we,{})}}function wr(t){let e,n,i,o,r;return n=new os({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=De("div"),oe(n.$$.fragment),this.h()},l(s){e=Ne(s,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var l=U(e);ae(n.$$.fragment,l),l.forEach(P),this.h()},h(){b(e,"class","selection-wrapper nopan svelte-5pxri"),he(e,"width",t[1].width+"px"),he(e,"height",t[1].height+"px"),he(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),b(e,"role","button"),b(e,"tabindex","-1")},m(s,l){Z(s,e,l),re(n,e,null),i=!0,o||(r=[qe(is.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),ze(e,"contextmenu",t[7]),ze(e,"click",t[8]),ze(e,"keyup",$h)],o=!0)},p(s,l){(!i||l&2)&&he(e,"width",s[1].width+"px"),(!i||l&2)&&he(e,"height",s[1].height+"px"),(!i||l&2)&&he(e,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(V(n.$$.fragment,s),i=!0)},o(s){B(n.$$.fragment,s),i=!1},d(s){s&&P(e),le(n),o=!1,gt(r)}}}function xh(t){let e=t[0]==="nodes"&&t[1]&&Lt(t[1].x)&&Lt(t[1].y),n,i,o=e&&wr(t);return{c(){o&&o.c(),n=Me()},l(r){o&&o.l(r),n=Me()},m(r,s){o&&o.m(r,s),Z(r,n,s),i=!0},p(r,[s]){s&3&&(e=r[0]==="nodes"&&r[1]&&Lt(r[1].x)&&Lt(r[1].y)),e?o?(o.p(r,s),s&3&&V(o,1)):(o=wr(r),o.c(),V(o,1),o.m(n.parentNode,n)):o&&(We(),B(o,1,1,()=>{o=null}),Be())},i(r){i||(V(o),i=!0)},o(r){B(o),i=!1},d(r){r&&P(n),o&&o.d(r)}}}const $h=()=>{};function eg(t,e,n){let i,o,r;const s=Re(),{selectionRectMode:l,nodes:a,nodeLookup:u}=s;J(t,l,g=>n(0,r=g)),J(t,a,g=>n(9,i=g)),J(t,u,g=>n(10,o=g));const f=si();let d=null;function c(g){const E=i.filter(k=>k.selected);f("selectioncontextmenu",{nodes:E,event:g})}function h(g){const E=i.filter(k=>k.selected);f("selectionclick",{nodes:E,event:g})}const m=(g,E,k,p)=>{f("nodedrag",{event:g,targetNode:null,nodes:p})},y=(g,E,k,p)=>{f("nodedragstart",{event:g,targetNode:null,nodes:p})},_=(g,E,k,p)=>{f("nodedragstop",{event:g,targetNode:null,nodes:p})};return t.$$.update=()=>{t.$$.dirty&1537&&r==="nodes"&&n(1,d=Pn(o,{filter:g=>!!g.selected}))},[r,d,s,l,a,u,f,c,h,i,o,m,y,_]}class tg extends ye{constructor(e){super(),_e(this,e,eg,xh,we,{})}}function ut(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function r(s){const l=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of l){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:c,callback:h,preventDefault:m,enabled:y}=f;if(y){if(d.length&&!(Array.isArray(d)?d:[d]).map(E=>typeof E=="string"?[E]:E).some(E=>E.every(k=>a[k])))continue;if(s.key===c){m&&s.preventDefault();const _={node:t,trigger:f,originalEvent:s};t.dispatchEvent(new CustomEvent("shortcut",{detail:_})),h==null||h(_)}}}}return n&&t.addEventListener(o,r),{update:s=>{const{enabled:l=!0,type:a="keydown"}=s;n&&(!l||o!==a)?t.removeEventListener(o,r):!n&&l&&t.addEventListener(a,r),n=l,o=a,i=s.trigger},destroy:()=>{t.removeEventListener(o,r)}}}function ng(t){let e,n,i,o,r,s,l,a,u,f,d,c;return{c:Pe,l:Pe,m(h,m){d||(c=[qe(e=ut.call(null,window,{trigger:Le(t[0],t[11]),type:"keydown"})),qe(n=ut.call(null,window,{trigger:Le(t[0],t[12]),type:"keyup"})),qe(i=ut.call(null,window,{trigger:Le(t[1],t[13]),type:"keydown"})),qe(o=ut.call(null,window,{trigger:Le(t[1],t[14]),type:"keyup"})),qe(r=ut.call(null,window,{trigger:Le(t[2],t[15]),type:"keydown"})),qe(s=ut.call(null,window,{trigger:Le(t[2],t[16]),type:"keyup"})),qe(l=ut.call(null,window,{trigger:Le(t[3],t[17]),type:"keydown"})),qe(a=ut.call(null,window,{trigger:Le(t[3],t[18]),type:"keyup"})),qe(u=ut.call(null,window,{trigger:Le(t[4],t[19]),type:"keydown"})),qe(f=ut.call(null,window,{trigger:Le(t[4],t[20]),type:"keyup"})),ze(window,"blur",t[10]),ze(window,"contextmenu",t[10])],d=!0)},p(h,[m]){e&&Ve(e.update)&&m&1&&e.update.call(null,{trigger:Le(h[0],h[11]),type:"keydown"}),n&&Ve(n.update)&&m&1&&n.update.call(null,{trigger:Le(h[0],h[12]),type:"keyup"}),i&&Ve(i.update)&&m&2&&i.update.call(null,{trigger:Le(h[1],h[13]),type:"keydown"}),o&&Ve(o.update)&&m&2&&o.update.call(null,{trigger:Le(h[1],h[14]),type:"keyup"}),r&&Ve(r.update)&&m&4&&r.update.call(null,{trigger:Le(h[2],h[15]),type:"keydown"}),s&&Ve(s.update)&&m&4&&s.update.call(null,{trigger:Le(h[2],h[16]),type:"keyup"}),l&&Ve(l.update)&&m&8&&l.update.call(null,{trigger:Le(h[3],h[17]),type:"keydown"}),a&&Ve(a.update)&&m&8&&a.update.call(null,{trigger:Le(h[3],h[18]),type:"keyup"}),u&&Ve(u.update)&&m&16&&u.update.call(null,{trigger:Le(h[4],h[19]),type:"keydown"}),f&&Ve(f.update)&&m&16&&f.update.call(null,{trigger:Le(h[4],h[20]),type:"keyup"})},i:Pe,o:Pe,d(h){d=!1,gt(c)}}}function rs(t){return t!==null&&typeof t=="object"}function ig(t){return rs(t)?t.modifier||[]:[]}function og(t){return t==null?"":rs(t)?t.key:t}function Le(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=og(i);return{key:o,modifier:ig(i),enabled:o!==null,callback:e}})}function rg(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=ei()?"Meta":"Control"}=e,{deleteKey:r="Backspace"}=e,{panActivationKey:s=" "}=e,{zoomActivationKey:l=ei()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:d,zoomActivationKeyPressed:c,selectionRect:h}=Re();function m(){h.set(null),a.set(!1),u.set(!1),f.set(!1),d.set(!1),c.set(!1)}const y=()=>a.set(!0),_=()=>a.set(!1),g=()=>u.set(!0),E=()=>u.set(!1),k=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!Bc(O.originalEvent)&&f.set(!0)},p=()=>f.set(!1),A=()=>d.set(!0),F=()=>d.set(!1),D=()=>c.set(!0),H=()=>c.set(!1);return t.$$set=O=>{"selectionKey"in O&&n(0,i=O.selectionKey),"multiSelectionKey"in O&&n(1,o=O.multiSelectionKey),"deleteKey"in O&&n(2,r=O.deleteKey),"panActivationKey"in O&&n(3,s=O.panActivationKey),"zoomActivationKey"in O&&n(4,l=O.zoomActivationKey)},[i,o,r,s,l,a,u,f,d,c,m,y,_,g,E,k,p,A,F,D,H]}class lg extends ye{constructor(e){super(),_e(this,e,rg,ng,we,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const sg=t=>({}),kr=t=>({});function vr(t){let e,n,i,o;const r=t[13].connectionLine,s=Ue(r,t,t[12],kr);let l=!t[2]&&Er(t);return{c(){e=ee("svg"),n=ee("g"),s&&s.c(),l&&l.c(),this.h()},l(a){e=te(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=U(e);n=te(u,"g",{class:!0});var f=U(n);s&&s.l(f),l&&l.l(f),f.forEach(P),u.forEach(P),this.h()},h(){b(n,"class",i=Oe(["svelte-flow__connection",Zo(t[3].isValid)])),b(e,"width",t[5]),b(e,"height",t[6]),b(e,"class","svelte-flow__connectionline"),b(e,"style",t[0])},m(a,u){Z(a,e,u),ne(e,n),s&&s.m(n,null),l&&l.m(n,null),o=!0},p(a,u){s&&s.p&&(!o||u&4096)&&Ze(s,r,a,a[12],o?Je(r,a[12],u,sg):Ge(a[12]),kr),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=Er(a),l.c(),l.m(n,null)),(!o||u&8&&i!==(i=Oe(["svelte-flow__connection",Zo(a[3].isValid)])))&&b(n,"class",i),(!o||u&32)&&b(e,"width",a[5]),(!o||u&64)&&b(e,"height",a[6]),(!o||u&1)&&b(e,"style",a[0])},i(a){o||(V(s,a),o=!0)},o(a){B(s,a),o=!1},d(a){a&&P(e),s&&s.d(a),l&&l.d()}}}function Er(t){let e;return{c(){e=ee("path"),this.h()},l(n){e=te(n,"path",{d:!0,style:!0,fill:!0,class:!0}),U(e).forEach(P),this.h()},h(){b(e,"d",t[4]),b(e,"style",t[1]),b(e,"fill","none"),b(e,"class","svelte-flow__connection-path")},m(n,i){Z(n,e,i)},p(n,i){i&16&&b(e,"d",n[4]),i&2&&b(e,"style",n[1])},d(n){n&&P(e)}}}function ag(t){let e,n,i=t[3].inProgress&&vr(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,r){i&&i.m(o,r),Z(o,e,r),n=!0},p(o,[r]){o[3].inProgress?i?(i.p(o,r),r&8&&V(i,1)):(i=vr(o),i.c(),V(i,1),i.m(e.parentNode,e)):i&&(We(),B(i,1,1,()=>{i=null}),Be())},i(o){n||(V(i),n=!0)},o(o){B(i),n=!1},d(o){o&&P(e),i&&i.d(o)}}}function ug(t,e,n){let i,o,r,s,{$$slots:l={},$$scope:a}=e,{containerStyle:u=""}=e,{style:f=""}=e,{isCustomComponent:d=!1}=e;const{width:c,height:h,connection:m,connectionLineType:y}=Re();J(t,c,g=>n(5,r=g)),J(t,h,g=>n(6,s=g)),J(t,m,g=>n(3,o=g)),J(t,y,g=>n(11,i=g));let _=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,f=g.style),"isCustomComponent"in g&&n(2,d=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!d){const{from:g,to:E,fromPosition:k,toPosition:p}=o,A={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:E.x,targetY:E.y,targetPosition:p};switch(i){case tn.Bezier:n(4,[_]=Vl(A),_);break;case tn.Step:n(4,[_]=ni({...A,borderRadius:0}),_);break;case tn.SmoothStep:n(4,[_]=ni(A),_);break;default:n(4,[_]=Bl(A),_)}}},[u,f,d,o,_,r,s,c,h,m,y,i,a,l]}class fg extends ye{constructor(e){super(),_e(this,e,ug,ag,we,{containerStyle:0,style:1,isCustomComponent:2})}}function cg(t){let e,n,i;const o=t[8].default,r=Ue(o,t,t[7],null);let s=[{class:n=Oe(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let a=0;a<s.length;a+=1)l=Ce(l,s[a]);return{c(){e=De("div"),r&&r.c(),this.h()},l(a){e=Ne(a,"DIV",{class:!0,style:!0});var u=U(e);r&&r.l(u),u.forEach(P),this.h()},h(){Nt(e,l),he(e,"pointer-events",t[3]?"none":"")},m(a,u){Z(a,e,u),r&&r.m(e,null),i=!0},p(a,[u]){r&&r.p&&(!i||u&128)&&Ze(r,o,a,a[7],i?Je(o,a[7],u,null):Ge(a[7]),null),Nt(e,l=ht(s,[(!i||u&6&&n!==(n=Oe(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),he(e,"pointer-events",a[3]?"none":"")},i(a){i||(V(r,a),i=!0)},o(a){B(r,a),i=!1},d(a){a&&P(e),r&&r.d(a)}}}function dg(t,e,n){let i;const o=["position","style","class"];let r=Ie(e,o),s,{$$slots:l={},$$scope:a}=e,{position:u="top-right"}=e,{style:f=void 0}=e,{class:d=void 0}=e;const{selectionRectMode:c}=Re();return J(t,c,h=>n(3,s=h)),t.$$set=h=>{e=Ce(Ce({},e),it(h)),n(5,r=Ie(e,o)),"position"in h&&n(6,u=h.position),"style"in h&&n(0,f=h.style),"class"in h&&n(1,d=h.class),"$$scope"in h&&n(7,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[f,d,i,s,c,r,u,a,l]}class Ei extends ye{constructor(e){super(),_e(this,e,dg,cg,we,{position:6,style:0,class:1})}}function pr(t){let e,n;return e=new Ei({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[hg]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.position=i[1]),o&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function hg(t){let e,n="Svelte Flow";return{c(){e=De("a"),e.textContent=n,this.h()},l(i){e=Ne(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),nl(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){b(e,"href","https://svelteflow.dev"),b(e,"target","_blank"),b(e,"rel","noopener noreferrer"),b(e,"aria-label","Svelte Flow attribution")},m(i,o){Z(i,e,o)},p:Pe,d(i){i&&P(e)}}}function gg(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&pr(t);return{c(){i&&i.c(),e=Me()},l(r){i&&i.l(r),e=Me()},m(r,s){i&&i.m(r,s),Z(r,e,s),n=!0},p(r,[s]){var l;(l=r[0])!=null&&l.hideAttribution?i&&(We(),B(i,1,1,()=>{i=null}),Be()):i?(i.p(r,s),s&1&&V(i,1)):(i=pr(r),i.c(),V(i,1),i.m(e.parentNode,e))},i(r){n||(V(i),n=!0)},o(r){B(i),n=!1},d(r){r&&P(e),i&&i.d(r)}}}function mg(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=r=>{"proOptions"in r&&n(0,i=r.proOptions),"position"in r&&n(1,o=r.position)},[i,o]}class yg extends ye{constructor(e){super(),_e(this,e,mg,gg,we,{proOptions:0,position:1})}}function Sr(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:r,paneClickDistance:s}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),r!==void 0&&t.setTranslateExtent(r),s!==void 0&&t.setPaneClickDistance(s)}const _g=t=>Object.keys(t);function bg(t,e){_g(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function wg(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function kg(t="light"){return ot("light",n=>{if(t!=="system"){n(t);return}const i=wg(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const vg=t=>({}),Cr=t=>({slot:"connectionLine"});function Eg(t){let e;const n=t[75].connectionLine,i=Ue(n,t,t[99],Cr);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r[3]&64)&&Ze(i,n,o,o[99],e?Je(n,o[99],r,vg):Ge(o[99]),Cr)},i(o){e||(V(i,o),e=!0)},o(o){B(i,o),e=!1},d(o){i&&i.d(o)}}}function pg(t){let e,n,i,o,r,s,l,a,u,f,d,c;return e=new Uh({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[78]),e.$on("edgecontextmenu",t[79]),e.$on("edgemouseenter",t[80]),e.$on("edgemouseleave",t[81]),i=new fg({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[Eg]},$$scope:{ctx:t}}}),u=new Th({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[82]),u.$on("nodemouseenter",t[83]),u.$on("nodemousemove",t[84]),u.$on("nodemouseleave",t[85]),u.$on("nodedragstart",t[86]),u.$on("nodedrag",t[87]),u.$on("nodedragstop",t[88]),u.$on("nodecontextmenu",t[89]),d=new tg({}),d.$on("selectionclick",t[90]),d.$on("selectioncontextmenu",t[91]),d.$on("nodedragstart",t[92]),d.$on("nodedrag",t[93]),d.$on("nodedragstop",t[94]),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment),o=ve(),r=De("div"),s=ve(),l=De("div"),a=ve(),oe(u.$$.fragment),f=ve(),oe(d.$$.fragment),this.h()},l(h){ae(e.$$.fragment,h),n=Ee(h),ae(i.$$.fragment,h),o=Ee(h),r=Ne(h,"DIV",{class:!0}),U(r).forEach(P),s=Ee(h),l=Ne(h,"DIV",{class:!0}),U(l).forEach(P),a=Ee(h),ae(u.$$.fragment,h),f=Ee(h),ae(d.$$.fragment,h),this.h()},h(){b(r,"class","svelte-flow__edgelabel-renderer"),b(l,"class","svelte-flow__viewport-portal")},m(h,m){re(e,h,m),Z(h,n,m),re(i,h,m),Z(h,o,m),Z(h,r,m),Z(h,s,m),Z(h,l,m),Z(h,a,m),re(u,h,m),Z(h,f,m),re(d,h,m),c=!0},p(h,m){const y={};m[0]&2097152&&(y.defaultEdgeOptions=h[21]),e.$set(y);const _={};m[0]&128&&(_.containerStyle=h[7]),m[0]&64&&(_.style=h[6]),m[1]&8&&(_.isCustomComponent=h[34].connectionLine),m[3]&64&&(_.$$scope={dirty:m,ctx:h}),i.$set(_);const g={};m[0]&8388608&&(g.nodeClickDistance=h[23]),u.$set(g)},i(h){c||(V(e.$$.fragment,h),V(i.$$.fragment,h),V(u.$$.fragment,h),V(d.$$.fragment,h),c=!0)},o(h){B(e.$$.fragment,h),B(i.$$.fragment,h),B(u.$$.fragment,h),B(d.$$.fragment,h),c=!1},d(h){h&&(P(n),P(o),P(r),P(s),P(l),P(a),P(f)),le(e,h),le(i,h),le(u,h),le(d,h)}}}function Sg(t){let e,n,i,o;return e=new Eh({props:{$$slots:{default:[pg]},$$scope:{ctx:t}}}),i=new jh({}),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment)},l(r){ae(e.$$.fragment,r),n=Ee(r),ae(i.$$.fragment,r)},m(r,s){re(e,r,s),Z(r,n,s),re(i,r,s),o=!0},p(r,s){const l={};s[0]&10485952|s[1]&8|s[3]&64&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){o||(V(e.$$.fragment,r),V(i.$$.fragment,r),o=!0)},o(r){B(e.$$.fragment,r),B(i.$$.fragment,r),o=!1},d(r){r&&P(n),le(e,r),le(i,r)}}}function Cg(t){let e,n;return e=new wh({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[Sg]},$$scope:{ctx:t}}}),e.$on("paneclick",t[95]),e.$on("panecontextmenu",t[96]),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&131072&&(r.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(r.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Pg(t){let e,n,i,o,r,s,l,a,u,f,d,c;n=new lg({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new yh({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?ct.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[Cg]},$$scope:{ctx:t}}}),s=new yg({props:{proOptions:t[20],position:t[19]}});const h=t[75].default,m=Ue(h,t,t[99],null);let y=[{style:t[24]},{class:a=Oe(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],_={};for(let g=0;g<y.length;g+=1)_=Ce(_,y[g]);return{c(){e=De("div"),oe(n.$$.fragment),i=ve(),oe(o.$$.fragment),r=ve(),oe(s.$$.fragment),l=ve(),m&&m.c(),this.h()},l(g){e=Ne(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var E=U(e);ae(n.$$.fragment,E),i=Ee(E),ae(o.$$.fragment,E),r=Ee(E),ae(s.$$.fragment,E),l=Ee(E),m&&m.l(E),E.forEach(P),this.h()},h(){Nt(e,_),il(()=>t[98].call(e)),ge(e,"svelte-12wlba6",!0)},m(g,E){Z(g,e,E),re(n,e,null),ne(e,i),re(o,e,null),ne(e,r),re(s,e,null),ne(e,l),m&&m.m(e,null),t[97](e),u=qs(e,t[98].bind(e)),f=!0,d||(c=[ze(e,"dragover",t[76]),ze(e,"drop",t[77])],d=!0)},p(g,E){const k={};E[0]&2&&(k.selectionKey=g[1]),E[0]&32&&(k.deleteKey=g[5]),E[0]&4&&(k.panActivationKey=g[2]),E[0]&8&&(k.multiSelectionKey=g[3]),E[0]&16&&(k.zoomActivationKey=g[4]),n.$set(k);const p={};E[0]&256&&(p.onMoveStart=g[8]),E[0]&512&&(p.onMove=g[9]),E[0]&1024&&(p.onMoveEnd=g[10]),E[0]&2048&&(p.panOnScrollMode=g[11]===void 0?ct.Free:g[11]),E[0]&4096&&(p.preventScrolling=g[12]===void 0?!0:g[12]),E[0]&8192&&(p.zoomOnScroll=g[13]===void 0?!0:g[13]),E[0]&16384&&(p.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),E[0]&32768&&(p.zoomOnPinch=g[15]===void 0?!0:g[15]),E[0]&65536&&(p.panOnScroll=g[16]===void 0?!1:g[16]),E[0]&131072&&(p.panOnDrag=g[17]===void 0?!0:g[17]),E[0]&4194304&&(p.paneClickDistance=g[22]===void 0?0:g[22]),E[0]&10879168|E[1]&8|E[3]&64&&(p.$$scope={dirty:E,ctx:g}),o.$set(p);const A={};E[0]&1048576&&(A.proOptions=g[20]),E[0]&524288&&(A.position=g[19]),s.$set(A),m&&m.p&&(!f||E[3]&64)&&Ze(m,h,g,g[99],f?Je(h,g[99],E,null):Ge(g[99]),null),Nt(e,_=ht(y,[(!f||E[0]&16777216)&&{style:g[24]},(!f||E[0]&1107296256&&a!==(a=Oe(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},E[1]&4&&g[33],{role:"application"}])),ge(e,"svelte-12wlba6",!0)},i(g){f||(V(n.$$.fragment,g),V(o.$$.fragment,g),V(s.$$.fragment,g),V(m,g),f=!0)},o(g){B(n.$$.fragment,g),B(o.$$.fragment,g),B(s.$$.fragment,g),B(m,g),f=!1},d(g){g&&P(e),le(n),le(o),le(s),m&&m.d(g),t[97](null),u(),d=!1,gt(c)}}}function Mg(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let r=Ie(e,o),s,l,a=Pe,u=()=>(a(),a=Eo(H,S=>n(100,l=S)),H),f,d=Pe,c=()=>(d(),d=Eo(i,S=>n(30,f=S)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>d());let{$$slots:h={},$$scope:m}=e;const y=Us(h);let{id:_="1"}=e,{nodes:g}=e,{edges:E}=e,{fitView:k=void 0}=e,{fitViewOptions:p=void 0}=e,{minZoom:A=void 0}=e,{maxZoom:F=void 0}=e,{initialViewport:D=void 0}=e,{viewport:H=void 0}=e;u();let{nodeTypes:O=void 0}=e,{edgeTypes:R=void 0}=e,{selectionKey:Y=void 0}=e,{selectionMode:I=void 0}=e,{panActivationKey:W=void 0}=e,{multiSelectionKey:v=void 0}=e,{zoomActivationKey:M=void 0}=e,{nodesDraggable:w=void 0}=e,{nodesConnectable:C=void 0}=e,{nodeDragThreshold:z=void 0}=e,{elementsSelectable:T=void 0}=e,{snapGrid:X=void 0}=e,{deleteKey:G=void 0}=e,{connectionRadius:j=void 0}=e,{connectionLineType:se=void 0}=e,{connectionMode:L=Bt.Strict}=e,{connectionLineStyle:x=""}=e,{connectionLineContainerStyle:fe=""}=e,{onMoveStart:N=void 0}=e,{onMove:de=void 0}=e,{onMoveEnd:me=void 0}=e,{isValidConnection:be=void 0}=e,{translateExtent:ke=void 0}=e,{nodeExtent:pe=void 0}=e,{onlyRenderVisibleElements:Ae=void 0}=e,{panOnScrollMode:K=ct.Free}=e,{preventScrolling:He=!0}=e,{zoomOnScroll:Te=!0}=e,{zoomOnDoubleClick:Ct=!0}=e,{zoomOnPinch:yt=!0}=e,{panOnScroll:_t=!1}=e,{panOnDrag:Xe=!0}=e,{selectionOnDrag:bt=void 0}=e,{autoPanOnConnect:ie=!0}=e,{autoPanOnNodeDrag:Pt=!0}=e,{onerror:Mt=void 0}=e,{ondelete:q=void 0}=e,{onedgecreate:zt=void 0}=e,{attributionPosition:Ye=void 0}=e,{proOptions:Qe=void 0}=e,{defaultEdgeOptions:$=void 0}=e,{width:wt=void 0}=e,{height:je=void 0}=e,{colorMode:Fe="light"}=e,{onconnect:qt=void 0}=e,{onconnectstart:Ut=void 0}=e,{onconnectend:Zt=void 0}=e,{onbeforedelete:Gt=void 0}=e,{oninit:Ot=void 0}=e,{nodeOrigin:At=void 0}=e,{paneClickDistance:Mn=0}=e,{nodeClickDistance:bo=0}=e,{defaultMarkerColor:Ci="#b1b1b7"}=e,{style:wo=void 0}=e,{class:ko=void 0}=e,zn,Jt,Qt;const vs=l||D,Ke=Zs(vi)?Re():dh({nodes:Q(g),edges:Q(E),width:wt,height:je,fitView:k,nodeOrigin:At,nodeExtent:pe});fn(()=>(Ke.width.set(Jt),Ke.height.set(Qt),Ke.domNode.set(zn),Ke.syncNodeStores(g),Ke.syncEdgeStores(E),Ke.syncViewport(H),k!==void 0&&Ke.fitViewOnInit.set(k),p&&Ke.fitViewOptions.set(p),Sr(Ke,{nodeTypes:O,edgeTypes:R,minZoom:A,maxZoom:F,translateExtent:ke,paneClickDistance:Mn}),()=>{Ke.reset()}));const{initialized:vo}=Ke;J(t,vo,S=>n(74,s=S));let Pi=!1;function Es(S){Se.call(this,t,S)}function ps(S){Se.call(this,t,S)}function Ss(S){Se.call(this,t,S)}function Cs(S){Se.call(this,t,S)}function Ps(S){Se.call(this,t,S)}function Ms(S){Se.call(this,t,S)}function zs(S){Se.call(this,t,S)}function Os(S){Se.call(this,t,S)}function Ts(S){Se.call(this,t,S)}function Ds(S){Se.call(this,t,S)}function Ns(S){Se.call(this,t,S)}function Is(S){Se.call(this,t,S)}function As(S){Se.call(this,t,S)}function Hs(S){Se.call(this,t,S)}function Ls(S){Se.call(this,t,S)}function Rs(S){Se.call(this,t,S)}function Vs(S){Se.call(this,t,S)}function Ws(S){Se.call(this,t,S)}function Bs(S){Se.call(this,t,S)}function Xs(S){Se.call(this,t,S)}function Ys(S){Se.call(this,t,S)}function Fs(S){Vt[S?"unshift":"push"](()=>{zn=S,n(28,zn)})}function Ks(){Jt=this.clientWidth,Qt=this.clientHeight,n(26,Jt),n(27,Qt)}return t.$$set=S=>{e=Ce(Ce({},e),it(S)),n(33,r=Ie(e,o)),"id"in S&&n(35,_=S.id),"nodes"in S&&n(36,g=S.nodes),"edges"in S&&n(37,E=S.edges),"fitView"in S&&n(38,k=S.fitView),"fitViewOptions"in S&&n(39,p=S.fitViewOptions),"minZoom"in S&&n(40,A=S.minZoom),"maxZoom"in S&&n(41,F=S.maxZoom),"initialViewport"in S&&n(42,D=S.initialViewport),"viewport"in S&&u(n(0,H=S.viewport)),"nodeTypes"in S&&n(43,O=S.nodeTypes),"edgeTypes"in S&&n(44,R=S.edgeTypes),"selectionKey"in S&&n(1,Y=S.selectionKey),"selectionMode"in S&&n(45,I=S.selectionMode),"panActivationKey"in S&&n(2,W=S.panActivationKey),"multiSelectionKey"in S&&n(3,v=S.multiSelectionKey),"zoomActivationKey"in S&&n(4,M=S.zoomActivationKey),"nodesDraggable"in S&&n(46,w=S.nodesDraggable),"nodesConnectable"in S&&n(47,C=S.nodesConnectable),"nodeDragThreshold"in S&&n(48,z=S.nodeDragThreshold),"elementsSelectable"in S&&n(49,T=S.elementsSelectable),"snapGrid"in S&&n(50,X=S.snapGrid),"deleteKey"in S&&n(5,G=S.deleteKey),"connectionRadius"in S&&n(51,j=S.connectionRadius),"connectionLineType"in S&&n(52,se=S.connectionLineType),"connectionMode"in S&&n(53,L=S.connectionMode),"connectionLineStyle"in S&&n(6,x=S.connectionLineStyle),"connectionLineContainerStyle"in S&&n(7,fe=S.connectionLineContainerStyle),"onMoveStart"in S&&n(8,N=S.onMoveStart),"onMove"in S&&n(9,de=S.onMove),"onMoveEnd"in S&&n(10,me=S.onMoveEnd),"isValidConnection"in S&&n(54,be=S.isValidConnection),"translateExtent"in S&&n(55,ke=S.translateExtent),"nodeExtent"in S&&n(56,pe=S.nodeExtent),"onlyRenderVisibleElements"in S&&n(57,Ae=S.onlyRenderVisibleElements),"panOnScrollMode"in S&&n(11,K=S.panOnScrollMode),"preventScrolling"in S&&n(12,He=S.preventScrolling),"zoomOnScroll"in S&&n(13,Te=S.zoomOnScroll),"zoomOnDoubleClick"in S&&n(14,Ct=S.zoomOnDoubleClick),"zoomOnPinch"in S&&n(15,yt=S.zoomOnPinch),"panOnScroll"in S&&n(16,_t=S.panOnScroll),"panOnDrag"in S&&n(17,Xe=S.panOnDrag),"selectionOnDrag"in S&&n(18,bt=S.selectionOnDrag),"autoPanOnConnect"in S&&n(58,ie=S.autoPanOnConnect),"autoPanOnNodeDrag"in S&&n(59,Pt=S.autoPanOnNodeDrag),"onerror"in S&&n(60,Mt=S.onerror),"ondelete"in S&&n(61,q=S.ondelete),"onedgecreate"in S&&n(62,zt=S.onedgecreate),"attributionPosition"in S&&n(19,Ye=S.attributionPosition),"proOptions"in S&&n(20,Qe=S.proOptions),"defaultEdgeOptions"in S&&n(21,$=S.defaultEdgeOptions),"width"in S&&n(63,wt=S.width),"height"in S&&n(64,je=S.height),"colorMode"in S&&n(65,Fe=S.colorMode),"onconnect"in S&&n(66,qt=S.onconnect),"onconnectstart"in S&&n(67,Ut=S.onconnectstart),"onconnectend"in S&&n(68,Zt=S.onconnectend),"onbeforedelete"in S&&n(69,Gt=S.onbeforedelete),"oninit"in S&&n(70,Ot=S.oninit),"nodeOrigin"in S&&n(71,At=S.nodeOrigin),"paneClickDistance"in S&&n(22,Mn=S.paneClickDistance),"nodeClickDistance"in S&&n(23,bo=S.nodeClickDistance),"defaultMarkerColor"in S&&n(72,Ci=S.defaultMarkerColor),"style"in S&&n(24,wo=S.style),"class"in S&&n(25,ko=S.class),"$$scope"in S&&n(99,m=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Jt!==void 0&&Qt!==void 0&&(Ke.width.set(Jt),Ke.height.set(Qt)),t.$$.dirty[2]&6400&&!Pi&&s&&(Ot==null||Ot(),n(73,Pi=!0)),t.$$.dirty[1]&2097135632|t.$$.dirty[2]&1777&&bg(Ke,{flowId:_,connectionLineType:se,connectionRadius:j,selectionMode:I,snapGrid:X,defaultMarkerColor:Ci,nodesDraggable:w,nodesConnectable:C,elementsSelectable:T,onlyRenderVisibleElements:Ae,isValidConnection:be,autoPanOnConnect:ie,autoPanOnNodeDrag:Pt,onerror:Mt,ondelete:q,onedgecreate:zt,connectionMode:L,nodeDragThreshold:z,onconnect:qt,onconnectstart:Ut,onconnectend:Zt,onbeforedelete:Gt,nodeOrigin:At}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Sr(Ke,{nodeTypes:O,edgeTypes:R,minZoom:A,maxZoom:F,translateExtent:ke,paneClickDistance:Mn}),t.$$.dirty[2]&8&&c(n(29,i=kg(Fe)))},[H,Y,W,v,M,G,x,fe,N,de,me,K,He,Te,Ct,yt,_t,Xe,bt,Ye,Qe,$,Mn,bo,wo,ko,Jt,Qt,zn,i,f,vs,vo,r,y,_,g,E,k,p,A,F,D,O,R,I,w,C,z,T,X,j,se,L,be,ke,pe,Ae,ie,Pt,Mt,q,zt,wt,je,Fe,qt,Ut,Zt,Gt,Ot,At,Ci,Pi,s,h,Es,ps,Ss,Cs,Ps,Ms,zs,Os,Ts,Ds,Ns,Is,As,Hs,Ls,Rs,Vs,Ws,Bs,Xs,Ys,Fs,Ks,m]}class zg extends ye{constructor(e){super(),_e(this,e,Mg,Pg,we,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function Og(t){let e;const n=t[7].default,i=Ue(n,t,t[6],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,r){i&&i.m(o,r),e=!0},p(o,[r]){i&&i.p&&(!e||r&64)&&Ze(i,n,o,o[6],e?Je(n,o[6],r,null):Ge(o[6]),null)},i(o){e||(V(i,o),e=!0)},o(o){B(i,o),e=!1},d(o){i&&i.d(o)}}}function Tg(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:r=void 0}=e,{initialEdges:s=void 0}=e,{initialWidth:l=void 0}=e,{initialHeight:a=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const d=ns({nodes:r,edges:s,width:l,height:a,nodeOrigin:f,fitView:u});return mn(vi,{getStore:()=>d}),$i(()=>{d.reset()}),t.$$set=c=>{"initialNodes"in c&&n(0,r=c.initialNodes),"initialEdges"in c&&n(1,s=c.initialEdges),"initialWidth"in c&&n(2,l=c.initialWidth),"initialHeight"in c&&n(3,a=c.initialHeight),"fitView"in c&&n(4,u=c.fitView),"nodeOrigin"in c&&n(5,f=c.nodeOrigin),"$$scope"in c&&n(6,o=c.$$scope)},[r,s,l,a,u,f,o,i]}class Dg extends ye{constructor(e){super(),_e(this,e,Tg,Og,we,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const Ng=t=>({}),Pr=t=>({class:"button-svg"});function Ig(t){let e,n,i,o,r;const s=t[8].default,l=Ue(s,t,t[7],Pr);let a=[{type:"button"},{class:n=Oe(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=Ce(u,a[f]);return{c(){e=De("button"),l&&l.c(),this.h()},l(f){e=Ne(f,"BUTTON",{type:!0,class:!0});var d=U(e);l&&l.l(d),d.forEach(P),this.h()},h(){Nt(e,u),he(e,"--xy-controls-button-background-color-props",t[1]),he(e,"--xy-controls-button-background-color-hover-props",t[2]),he(e,"--xy-controls-button-color-props",t[3]),he(e,"--xy-controls-button-color-hover-props",t[4]),he(e,"--xy-controls-button-border-color-props",t[5])},m(f,d){Z(f,e,d),l&&l.m(e,null),e.autofocus&&e.focus(),i=!0,o||(r=ze(e,"click",t[9]),o=!0)},p(f,[d]){l&&l.p&&(!i||d&128)&&Ze(l,s,f,f[7],i?Je(s,f[7],d,Ng):Ge(f[7]),Pr),Nt(e,u=ht(a,[{type:"button"},(!i||d&1&&n!==(n=Oe(["svelte-flow__controls-button",f[0]])))&&{class:n},d&64&&f[6]])),he(e,"--xy-controls-button-background-color-props",f[1]),he(e,"--xy-controls-button-background-color-hover-props",f[2]),he(e,"--xy-controls-button-color-props",f[3]),he(e,"--xy-controls-button-color-hover-props",f[4]),he(e,"--xy-controls-button-border-color-props",f[5])},i(f){i||(V(l,f),i=!0)},o(f){B(l,f),i=!1},d(f){f&&P(e),l&&l.d(f),o=!1,r()}}}function Ag(t,e,n){const i=["class"];let o=Ie(e,i),{$$slots:r={},$$scope:s}=e,{class:l=void 0}=e,a,u,f,d,c;function h(m){Se.call(this,t,m)}return t.$$set=m=>{e=Ce(Ce({},e),it(m)),n(6,o=Ie(e,i)),"class"in m&&n(0,l=m.class),"$$scope"in m&&n(7,s=m.$$scope)},[l,a,u,f,d,c,o,s,r,h]}class ii extends ye{constructor(e){super(),_e(this,e,Ag,Ig,we,{class:0})}}function Hg(t){let e,n;return{c(){e=ee("svg"),n=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=te(o,"path",{d:!0}),U(n).forEach(P),o.forEach(P),this.h()},h(){b(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 32")},m(i,o){Z(i,e,o),ne(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&P(e)}}}class Lg extends ye{constructor(e){super(),_e(this,e,null,Hg,we,{})}}function Rg(t){let e,n;return{c(){e=ee("svg"),n=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=te(o,"path",{d:!0}),U(n).forEach(P),o.forEach(P),this.h()},h(){b(n,"d","M0 0h32v4.2H0z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 5")},m(i,o){Z(i,e,o),ne(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&P(e)}}}class Vg extends ye{constructor(e){super(),_e(this,e,null,Rg,we,{})}}function Wg(t){let e,n;return{c(){e=ee("svg"),n=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=te(o,"path",{d:!0}),U(n).forEach(P),o.forEach(P),this.h()},h(){b(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 30")},m(i,o){Z(i,e,o),ne(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&P(e)}}}class Bg extends ye{constructor(e){super(),_e(this,e,null,Wg,we,{})}}function Xg(t){let e,n;return{c(){e=ee("svg"),n=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=te(o,"path",{d:!0}),U(n).forEach(P),o.forEach(P),this.h()},h(){b(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 25 32")},m(i,o){Z(i,e,o),ne(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&P(e)}}}class Yg extends ye{constructor(e){super(),_e(this,e,null,Xg,we,{})}}function Fg(t){let e,n;return{c(){e=ee("svg"),n=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=te(o,"path",{d:!0}),U(n).forEach(P),o.forEach(P),this.h()},h(){b(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 25 32")},m(i,o){Z(i,e,o),ne(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&P(e)}}}class Kg extends ye{constructor(e){super(),_e(this,e,null,Fg,we,{})}}const qg=t=>({}),Mr=t=>({}),Ug=t=>({}),zr=t=>({});function Or(t){let e,n,i,o;const r=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let s={$$slots:{default:[Zg]},$$scope:{ctx:t}};for(let u=0;u<r.length;u+=1)s=Ce(s,r[u]);e=new ii({props:s}),e.$on("click",t[18]);const l=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Gg]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)a=Ce(a,l[u]);return i=new ii({props:a}),i.$on("click",t[19]),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment)},l(u){ae(e.$$.fragment,u),n=Ee(u),ae(i.$$.fragment,u)},m(u,f){re(e,u,f),Z(u,n,f),re(i,u,f),o=!0},p(u,f){const d=f[0]&131584?ht(r,[r[0],r[1],r[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&nn(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),e.$set(d);const c=f[0]&132096?ht(l,[l[0],l[1],l[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&nn(u[17])]):{};f[1]&32&&(c.$$scope={dirty:f,ctx:u}),i.$set(c)},i(u){o||(V(e.$$.fragment,u),V(i.$$.fragment,u),o=!0)},o(u){B(e.$$.fragment,u),B(i.$$.fragment,u),o=!1},d(u){u&&P(n),le(e,u),le(i,u)}}}function Zg(t){let e,n;return e=new Lg({}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Gg(t){let e,n;return e=new Vg({}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Tr(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let o={$$slots:{default:[Jg]},$$scope:{ctx:t}};for(let r=0;r<i.length;r+=1)o=Ce(o,i[r]);return e=new ii({props:o}),e.$on("click",t[20]),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const l=s[0]&131072?ht(i,[i[0],i[1],i[2],nn(r[17])]):{};s[1]&32&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){n||(V(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function Jg(t){let e,n;return e=new Bg({}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Dr(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let o={$$slots:{default:[xg]},$$scope:{ctx:t}};for(let r=0;r<i.length;r+=1)o=Ce(o,i[r]);return e=new ii({props:o}),e.$on("click",t[21]),{c(){oe(e.$$.fragment)},l(r){ae(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const l=s[0]&131072?ht(i,[i[0],i[1],i[2],nn(r[17])]):{};s[0]&256|s[1]&32&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){n||(V(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function Qg(t){let e,n;return e=new Yg({}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function jg(t){let e,n;return e=new Kg({}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function xg(t){let e,n,i,o;const r=[jg,Qg],s=[];function l(a,u){return a[8]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=Me()},l(a){n.l(a),i=Me()},m(a,u){s[e].m(a,u),Z(a,i,u),o=!0},p(a,u){let f=e;e=l(a),e!==f&&(We(),B(s[f],1,1,()=>{s[f]=null}),Be(),n=s[e],n||(n=s[e]=r[e](a),n.c()),V(n,1),n.m(i.parentNode,i))},i(a){o||(V(n),o=!0)},o(a){B(n),o=!1},d(a){a&&P(i),s[e].d(a)}}}function $g(t){let e,n,i,o,r,s;const l=t[35].before,a=Ue(l,t,t[36],zr);let u=t[1]&&Or(t),f=t[2]&&Tr(t),d=t[3]&&Dr(t);const c=t[35].default,h=Ue(c,t,t[36],null),m=t[35].after,y=Ue(m,t,t[36],Mr);return{c(){a&&a.c(),e=ve(),u&&u.c(),n=ve(),f&&f.c(),i=ve(),d&&d.c(),o=ve(),h&&h.c(),r=ve(),y&&y.c()},l(_){a&&a.l(_),e=Ee(_),u&&u.l(_),n=Ee(_),f&&f.l(_),i=Ee(_),d&&d.l(_),o=Ee(_),h&&h.l(_),r=Ee(_),y&&y.l(_)},m(_,g){a&&a.m(_,g),Z(_,e,g),u&&u.m(_,g),Z(_,n,g),f&&f.m(_,g),Z(_,i,g),d&&d.m(_,g),Z(_,o,g),h&&h.m(_,g),Z(_,r,g),y&&y.m(_,g),s=!0},p(_,g){a&&a.p&&(!s||g[1]&32)&&Ze(a,l,_,_[36],s?Je(l,_[36],g,Ug):Ge(_[36]),zr),_[1]?u?(u.p(_,g),g[0]&2&&V(u,1)):(u=Or(_),u.c(),V(u,1),u.m(n.parentNode,n)):u&&(We(),B(u,1,1,()=>{u=null}),Be()),_[2]?f?(f.p(_,g),g[0]&4&&V(f,1)):(f=Tr(_),f.c(),V(f,1),f.m(i.parentNode,i)):f&&(We(),B(f,1,1,()=>{f=null}),Be()),_[3]?d?(d.p(_,g),g[0]&8&&V(d,1)):(d=Dr(_),d.c(),V(d,1),d.m(o.parentNode,o)):d&&(We(),B(d,1,1,()=>{d=null}),Be()),h&&h.p&&(!s||g[1]&32)&&Ze(h,c,_,_[36],s?Je(c,_[36],g,null):Ge(_[36]),null),y&&y.p&&(!s||g[1]&32)&&Ze(y,m,_,_[36],s?Je(m,_[36],g,qg):Ge(_[36]),Mr)},i(_){s||(V(a,_),V(u),V(f),V(d),V(h,_),V(y,_),s=!0)},o(_){B(a,_),B(u),B(f),B(d),B(h,_),B(y,_),s=!1},d(_){_&&(P(e),P(n),P(i),P(o),P(r)),a&&a.d(_),u&&u.d(_),f&&f.d(_),d&&d.d(_),h&&h.d(_),y&&y.d(_)}}}function e0(t){let e,n;return e=new Ei({props:{class:Oe(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[$g]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&192&&(r.class=Oe(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(r.position=i[0]),o[0]&16&&(r["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(r.style=i[5]),o[0]&1806|o[1]&32&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function t0(t,e,n){let i,o,r,s,l,a,u,f,d,c,{$$slots:h={},$$scope:m}=e,{position:y="bottom-left"}=e,{showZoom:_=!0}=e,{showFitView:g=!0}=e,{showLock:E=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:p=void 0}=e,{buttonColor:A=void 0}=e,{buttonColorHover:F=void 0}=e,{buttonBorderColor:D=void 0}=e,{ariaLabel:H=void 0}=e,{style:O=void 0}=e,{orientation:R="vertical"}=e,{fitViewOptions:Y=void 0}=e,{class:I=""}=e;const{zoomIn:W,zoomOut:v,fitView:M,viewport:w,minZoom:C,maxZoom:z,nodesDraggable:T,nodesConnectable:X,elementsSelectable:G}=Re();J(t,w,N=>n(30,a=N)),J(t,C,N=>n(31,u=N)),J(t,z,N=>n(29,l=N)),J(t,T,N=>n(34,c=N)),J(t,X,N=>n(33,d=N)),J(t,G,N=>n(32,f=N));const j={bgColor:k,bgColorHover:p,color:A,colorHover:F,borderColor:D},se=()=>{W()},L=()=>{v()},x=()=>{M(Y)},fe=()=>{n(8,i=!i),T.set(i),X.set(i),G.set(i)};return t.$$set=N=>{"position"in N&&n(0,y=N.position),"showZoom"in N&&n(1,_=N.showZoom),"showFitView"in N&&n(2,g=N.showFitView),"showLock"in N&&n(3,E=N.showLock),"buttonBgColor"in N&&n(22,k=N.buttonBgColor),"buttonBgColorHover"in N&&n(23,p=N.buttonBgColorHover),"buttonColor"in N&&n(24,A=N.buttonColor),"buttonColorHover"in N&&n(25,F=N.buttonColorHover),"buttonBorderColor"in N&&n(26,D=N.buttonBorderColor),"ariaLabel"in N&&n(4,H=N.ariaLabel),"style"in N&&n(5,O=N.style),"orientation"in N&&n(27,R=N.orientation),"fitViewOptions"in N&&n(28,Y=N.fitViewOptions),"class"in N&&n(6,I=N.class),"$$scope"in N&&n(36,m=N.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=c||d||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,o=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,r=a.zoom>=l),t.$$.dirty[0]&134217728&&n(7,s=R==="horizontal"?"horizontal":"vertical")},[y,_,g,E,H,O,I,s,i,r,o,w,C,z,T,X,G,j,se,L,x,fe,k,p,A,F,D,R,Y,l,a,u,f,d,c,h,m]}class n0 extends ye{constructor(e){super(),_e(this,e,t0,e0,we,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var Dt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Dt||(Dt={}));function i0(t){let e,n;return{c(){e=ee("circle"),this.h()},l(i){e=te(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),U(e).forEach(P),this.h()},h(){b(e,"cx",t[0]),b(e,"cy",t[0]),b(e,"r",t[0]),b(e,"class",n=Oe(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){Z(i,e,o)},p(i,[o]){o&1&&b(e,"cx",i[0]),o&1&&b(e,"cy",i[0]),o&1&&b(e,"r",i[0]),o&2&&n!==(n=Oe(["svelte-flow__background-pattern","dots",i[1]]))&&b(e,"class",n)},i:Pe,o:Pe,d(i){i&&P(e)}}}function o0(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=r=>{"radius"in r&&n(0,i=r.radius),"class"in r&&n(1,o=r.class)},[i,o]}class r0 extends ye{constructor(e){super(),_e(this,e,o0,i0,we,{radius:0,class:1})}}function l0(t){let e,n,i;return{c(){e=ee("path"),this.h()},l(o){e=te(o,"path",{"stroke-width":!0,d:!0,class:!0}),U(e).forEach(P),this.h()},h(){b(e,"stroke-width",t[0]),b(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),b(e,"class",i=Oe(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,r){Z(o,e,r)},p(o,[r]){r&1&&b(e,"stroke-width",o[0]),r&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&b(e,"d",n),r&12&&i!==(i=Oe(["svelte-flow__background-pattern",o[2],o[3]]))&&b(e,"class",i)},i:Pe,o:Pe,d(o){o&&P(e)}}}function s0(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:r=void 0}=e,{class:s=""}=e;return t.$$set=l=>{"lineWidth"in l&&n(0,i=l.lineWidth),"dimensions"in l&&n(1,o=l.dimensions),"variant"in l&&n(2,r=l.variant),"class"in l&&n(3,s=l.class)},[i,o,r,s]}class a0 extends ye{constructor(e){super(),_e(this,e,s0,l0,we,{lineWidth:0,dimensions:1,variant:2,class:3})}}function u0(t){let e,n;return e=new a0({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&64&&(r.dimensions=i[6]),o&1&&(r.variant=i[0]),o&2&&(r.lineWidth=i[1]),o&16&&(r.class=i[4]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function f0(t){let e,n;return e=new r0({props:{radius:t[7]/2,class:t[4]}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&128&&(r.radius=i[7]/2),o&16&&(r.class=i[4]),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function c0(t){let e,n,i,o,r,s,l,a,u,f,d,c,h;const m=[f0,u0],y=[];function _(g,E){return g[14]?0:1}return i=_(t),o=y[i]=m[i](t),{c(){e=ee("svg"),n=ee("pattern"),o.c(),f=ee("rect"),this.h()},l(g){e=te(g,"svg",{class:!0,"data-testid":!0});var E=U(e);n=te(E,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=U(n);o.l(k),k.forEach(P),f=te(E,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),U(f).forEach(P),E.forEach(P),this.h()},h(){b(n,"id",t[11]),b(n,"x",r=t[9].x%t[8][0]),b(n,"y",s=t[9].y%t[8][1]),b(n,"width",l=t[8][0]),b(n,"height",a=t[8][1]),b(n,"patternUnits","userSpaceOnUse"),b(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),b(f,"x","0"),b(f,"y","0"),b(f,"width","100%"),b(f,"height","100%"),b(f,"fill",d=`url(#${t[11]})`),b(e,"class",c=po(Oe(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),b(e,"data-testid","svelte-flow__background"),he(e,"--xy-background-color-props",t[2]),he(e,"--xy-background-pattern-color-props",t[3])},m(g,E){Z(g,e,E),ne(e,n),y[i].m(n,null),ne(e,f),h=!0},p(g,[E]){o.p(g,E),(!h||E&2048)&&b(n,"id",g[11]),(!h||E&768&&r!==(r=g[9].x%g[8][0]))&&b(n,"x",r),(!h||E&768&&s!==(s=g[9].y%g[8][1]))&&b(n,"y",s),(!h||E&256&&l!==(l=g[8][0]))&&b(n,"width",l),(!h||E&256&&a!==(a=g[8][1]))&&b(n,"height",a),(!h||E&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&b(n,"patternTransform",u),(!h||E&2048&&d!==(d=`url(#${g[11]})`))&&b(f,"fill",d),(!h||E&32&&c!==(c=po(Oe(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&b(e,"class",c),E&4&&he(e,"--xy-background-color-props",g[2]),E&8&&he(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(V(o),h=!0)},o(g){B(o),h=!1},d(g){g&&P(e),y[i].d()}}}const d0={[Dt.Dots]:1,[Dt.Lines]:1,[Dt.Cross]:6};function h0(t,e,n){let i,o,r,s,l,a,u,{id:f=void 0}=e,{variant:d=Dt.Dots}=e,{gap:c=20}=e,{size:h=1}=e,{lineWidth:m=1}=e,{bgColor:y=void 0}=e,{patternColor:_=void 0}=e,{patternClass:g=void 0}=e,{class:E=""}=e;const{viewport:k,flowId:p}=Re();J(t,k,O=>n(9,a=O)),J(t,p,O=>n(18,u=O));const A=h||d0[d],F=d===Dt.Dots,D=d===Dt.Cross,H=Array.isArray(c)?c:[c,c];return t.$$set=O=>{"id"in O&&n(15,f=O.id),"variant"in O&&n(0,d=O.variant),"gap"in O&&n(16,c=O.gap),"size"in O&&n(17,h=O.size),"lineWidth"in O&&n(1,m=O.lineWidth),"bgColor"in O&&n(2,y=O.bgColor),"patternColor"in O&&n(3,_=O.patternColor),"patternClass"in O&&n(4,g=O.patternClass),"class"in O&&n(5,E=O.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||""}`),t.$$.dirty&512&&n(8,o=[H[0]*a.zoom||1,H[1]*a.zoom||1]),t.$$.dirty&512&&n(7,r=A*a.zoom),t.$$.dirty&384&&n(6,s=D?[r,r]:o),t.$$.dirty&192&&n(10,l=F?[r/2,r/2]:[s[0]/2,s[1]/2])},[d,m,y,_,g,E,s,r,o,a,l,i,k,p,F,f,c,h,u]}class g0 extends ye{constructor(e){super(),_e(this,e,h0,c0,we,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function m0(t){let e,n,i;return{c(){e=ee("rect"),this.h()},l(o){e=te(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,style:!0,"shape-rendering":!0}),U(e).forEach(P),this.h()},h(){b(e,"class",n=Oe(["svelte-flow__minimap-node",t[10]])),b(e,"x",t[0]),b(e,"y",t[1]),b(e,"rx",t[4]),b(e,"ry",t[4]),b(e,"width",t[2]),b(e,"height",t[3]),b(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),b(e,"shape-rendering",t[6]),ge(e,"selected",t[9])},m(o,r){Z(o,e,r)},p(o,[r]){r&1024&&n!==(n=Oe(["svelte-flow__minimap-node",o[10]]))&&b(e,"class",n),r&1&&b(e,"x",o[0]),r&2&&b(e,"y",o[1]),r&16&&b(e,"rx",o[4]),r&16&&b(e,"ry",o[4]),r&4&&b(e,"width",o[2]),r&8&&b(e,"height",o[3]),r&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&b(e,"style",i),r&64&&b(e,"shape-rendering",o[6]),r&1536&&ge(e,"selected",o[9])},i:Pe,o:Pe,d(o){o&&P(e)}}}function y0(t,e,n){let{x:i}=e,{y:o}=e,{width:r=0}=e,{height:s=0}=e,{borderRadius:l=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:d=2}=e,{selected:c=!1}=e,{class:h=""}=e;return t.$$set=m=>{"x"in m&&n(0,i=m.x),"y"in m&&n(1,o=m.y),"width"in m&&n(2,r=m.width),"height"in m&&n(3,s=m.height),"borderRadius"in m&&n(4,l=m.borderRadius),"color"in m&&n(5,a=m.color),"shapeRendering"in m&&n(6,u=m.shapeRendering),"strokeColor"in m&&n(7,f=m.strokeColor),"strokeWidth"in m&&n(8,d=m.strokeWidth),"selected"in m&&n(9,c=m.selected),"class"in m&&n(10,h=m.class)},[i,o,r,s,l,a,u,f,d,c,h]}class _0 extends ye{constructor(e){super(),_e(this,e,y0,m0,we,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function b0(t,e){const n=hd({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=Q(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function Nr(t,e,n){const i=t.slice();i[55]=e[n];const o=i[20].get(i[55].id);return i[56]=o,i}function Hi(t){const e=t.slice(),n=It(e[56]);return e[59]=n,e}function Ir(t){let e,n,i=[],o=new Map,r,s,l,a,u,f,d,c=t[1]&&Ar(t),h=dt(t[19]);const m=y=>y[55].id;for(let y=0;y<h.length;y+=1){let _=Nr(t,h,y),g=m(_);o.set(g,i[y]=Lr(g,_))}return{c(){e=ee("svg"),c&&c.c(),n=Me();for(let y=0;y<i.length;y+=1)i[y].c();r=ee("path"),this.h()},l(y){e=te(y,"svg",{width:!0,height:!0,viewBox:!0,class:!0,role:!0,"aria-labelledby":!0});var _=U(e);c&&c.l(_),n=Me();for(let g=0;g<i.length;g+=1)i[g].l(_);r=te(_,"path",{class:!0,d:!0,"fill-rule":!0,"pointer-events":!0}),U(r).forEach(P),_.forEach(P),this.h()},h(){b(r,"class","svelte-flow__minimap-mask"),b(r,"d",s="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+t[15]*2)+"v"+(t[23]+t[15]*2)+"h"+(-t[24]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),b(r,"fill-rule","evenodd"),b(r,"pointer-events","none"),b(e,"width",t[17]),b(e,"height",t[16]),b(e,"viewBox",l=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),b(e,"class","svelte-flow__minimap-svg"),b(e,"role","img"),b(e,"aria-labelledby",t[41]),he(e,"--xy-minimap-mask-background-color-props",t[5]),he(e,"--xy-minimap-mask-stroke-color-props",t[6]),he(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(y,_){Z(y,e,_),c&&c.m(e,null),ne(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);ne(e,r),u=!0,f||(d=qe(a=b0.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(y,_){y[1]?c?c.p(y,_):(c=Ar(y),c.c(),c.m(e,n)):c&&(c.d(1),c=null),_[0]&1572876|_[1]&960&&(h=dt(y[19]),We(),i=ui(i,_,m,1,y,h,o,e,ai,Lr,r,Nr),Be()),(!u||_[0]&126124032&&s!==(s="M"+(y[26]-y[15])+","+(y[25]-y[15])+"h"+(y[24]+y[15]*2)+"v"+(y[23]+y[15]*2)+"h"+(-y[24]-y[15]*2)+`z
      M`+y[18].x+","+y[18].y+"h"+y[18].width+"v"+y[18].height+"h"+-y[18].width+"z"))&&b(r,"d",s),(!u||_[0]&131072)&&b(e,"width",y[17]),(!u||_[0]&65536)&&b(e,"height",y[16]),(!u||_[0]&125829120&&l!==(l=y[26]+" "+y[25]+" "+y[24]+" "+y[23]))&&b(e,"viewBox",l),a&&Ve(a.update)&&_[0]&408948480&&a.update.call(null,{panZoom:y[27],viewport:y[31],getViewScale:y[42],translateExtent:y[28],width:y[22],height:y[21],inversePan:y[10],zoomStep:y[11],pannable:y[8],zoomable:y[9]}),_[0]&32&&he(e,"--xy-minimap-mask-background-color-props",y[5]),_[0]&64&&he(e,"--xy-minimap-mask-stroke-color-props",y[6]),_[0]&16512&&he(e,"--xy-minimap-mask-stroke-width-props",y[7]?y[7]*y[14]:void 0)},i(y){if(!u){for(let _=0;_<h.length;_+=1)V(i[_]);u=!0}},o(y){for(let _=0;_<i.length;_+=1)B(i[_]);u=!1},d(y){y&&P(e),c&&c.d();for(let _=0;_<i.length;_+=1)i[_].d();f=!1,d()}}}function Ar(t){let e,n;return{c(){e=ee("title"),n=Yt(t[1]),this.h()},l(i){e=te(i,"title",{id:!0});var o=U(e);n=Ft(o,t[1]),o.forEach(P),this.h()},h(){b(e,"id",t[41])},m(i,o){Z(i,e,o),ne(e,n)},p(i,o){o[0]&2&&Kt(n,i[1])},d(i){i&&P(e)}}}function Hr(t){var r;let e,n;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:(r=t[37])==null?void 0:r.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let o={};for(let s=0;s<i.length;s+=1)o=Ce(o,i[s]);return e=new _0({props:o}),{c(){oe(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,l){re(e,s,l),n=!0},p(s,l){var u;const a=l[0]&1572876|l[1]&960?ht(i,[l[0]&1572864&&{x:s[56].internals.positionAbsolute.x},l[0]&1572864&&{y:s[56].internals.positionAbsolute.y},l[0]&1572864&&nn(s[59]),l[0]&1572864&&{selected:s[56].selected},l[0]&1572864|l[1]&64&&{color:(u=s[37])==null?void 0:u.call(s,s[56])},l[0]&4&&{borderRadius:s[2]},l[0]&1572864|l[1]&128&&{strokeColor:s[38](s[56])},l[0]&8&&{strokeWidth:s[3]},l[1]&512&&{shapeRendering:s[40]},l[0]&1572864|l[1]&256&&{class:s[39](s[56])}]):{};e.$set(a)},i(s){n||(V(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){le(e,s)}}}function Lr(t,e){let n,i=e[56]&&ti(e[56]),o,r,s=i&&Hr(Hi(e));return{key:t,first:null,c(){n=Me(),s&&s.c(),o=Me(),this.h()},l(l){n=Me(),s&&s.l(l),o=Me(),this.h()},h(){this.first=n},m(l,a){Z(l,n,a),s&&s.m(l,a),Z(l,o,a),r=!0},p(l,a){e=l,a[0]&1572864&&(i=e[56]&&ti(e[56])),i?s?(s.p(Hi(e),a),a[0]&1572864&&V(s,1)):(s=Hr(Hi(e)),s.c(),V(s,1),s.m(o.parentNode,o)):s&&(We(),B(s,1,1,()=>{s=null}),Be())},i(l){r||(V(s),r=!0)},o(l){B(s),r=!1},d(l){l&&(P(n),P(o)),s&&s.d(l)}}}function w0(t){let e,n,i=t[27]&&Ir(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,r){i&&i.m(o,r),Z(o,e,r),n=!0},p(o,r){o[27]?i?(i.p(o,r),r[0]&134217728&&V(i,1)):(i=Ir(o),i.c(),V(i,1),i.m(e.parentNode,e)):i&&(We(),B(i,1,1,()=>{i=null}),Be())},i(o){n||(V(i),n=!0)},o(o){B(i),n=!1},d(o){o&&P(e),i&&i.d(o)}}}function k0(t){let e,n;return e=new Ei({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:Oe(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[w0]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.position=i[0]),o[0]&4112&&(r.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(r.class=Oe(["svelte-flow__minimap",i[13]])),o[0]&536858606|o[1]&536870912&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}const Li=t=>t instanceof Function?t:()=>t,v0=200,E0=150;function p0(t,e,n){let i,o,r,s,l,a,u,f,d,c,h,m,y,_,g,E,k,p,A,F,D,{position:H="bottom-right"}=e,{ariaLabel:O="Mini map"}=e,{nodeStrokeColor:R="transparent"}=e,{nodeColor:Y=void 0}=e,{nodeClass:I=""}=e,{nodeBorderRadius:W=5}=e,{nodeStrokeWidth:v=2}=e,{bgColor:M=void 0}=e,{maskColor:w=void 0}=e,{maskStrokeColor:C=void 0}=e,{maskStrokeWidth:z=void 0}=e,{width:T=void 0}=e,{height:X=void 0}=e,{pannable:G=!0}=e,{zoomable:j=!0}=e,{inversePan:se=void 0}=e,{zoomStep:L=void 0}=e,{style:x=""}=e,{class:fe=""}=e;const{nodes:N,nodeLookup:de,viewport:me,width:be,height:ke,flowId:pe,panZoom:Ae,translateExtent:K}=Re();J(t,N,ie=>n(19,_=ie)),J(t,de,ie=>n(20,g=ie)),J(t,me,ie=>n(53,E=ie)),J(t,be,ie=>n(22,p=ie)),J(t,ke,ie=>n(21,k=ie)),J(t,pe,ie=>n(54,A=ie)),J(t,Ae,ie=>n(27,F=ie)),J(t,K,ie=>n(28,D=ie));const He=Y===void 0?void 0:Li(Y),Te=Li(R),Ct=Li(I),yt=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",_t=`svelte-flow__minimap-desc-${A}`;let Xe=i;const bt=()=>a;return t.$$set=ie=>{"position"in ie&&n(0,H=ie.position),"ariaLabel"in ie&&n(1,O=ie.ariaLabel),"nodeStrokeColor"in ie&&n(43,R=ie.nodeStrokeColor),"nodeColor"in ie&&n(44,Y=ie.nodeColor),"nodeClass"in ie&&n(45,I=ie.nodeClass),"nodeBorderRadius"in ie&&n(2,W=ie.nodeBorderRadius),"nodeStrokeWidth"in ie&&n(3,v=ie.nodeStrokeWidth),"bgColor"in ie&&n(4,M=ie.bgColor),"maskColor"in ie&&n(5,w=ie.maskColor),"maskStrokeColor"in ie&&n(6,C=ie.maskStrokeColor),"maskStrokeWidth"in ie&&n(7,z=ie.maskStrokeWidth),"width"in ie&&n(46,T=ie.width),"height"in ie&&n(47,X=ie.height),"pannable"in ie&&n(8,G=ie.pannable),"zoomable"in ie&&n(9,j=ie.zoomable),"inversePan"in ie&&n(10,se=ie.inversePan),"zoomStep"in ie&&n(11,L=ie.zoomStep),"style"in ie&&n(12,x=ie.style),"class"in ie&&n(13,fe=ie.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-E.x/E.zoom,y:-E.y/E.zoom,width:p/E.zoom,height:k/E.zoom}),t.$$.dirty[0]&1835008&&n(48,Xe=g.size>0?Ll(Pn(g),i):i),t.$$.dirty[1]&32768&&n(17,o=T??v0),t.$$.dirty[1]&65536&&n(16,r=X??E0),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,s=Xe.width/o),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,l=Xe.height/r),t.$$.dirty[1]&3145728&&n(14,a=Math.max(s,l)),t.$$.dirty[0]&147456&&n(50,u=a*o),t.$$.dirty[0]&81920&&n(49,f=a*r),t.$$.dirty[0]&16384&&n(15,d=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,c=Xe.x-(u-Xe.width)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,h=Xe.y-(f-Xe.height)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,m=u+d*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,y=f+d*2)},[H,O,W,v,M,w,C,z,G,j,se,L,x,fe,a,d,r,o,i,_,g,k,p,y,m,h,c,F,D,N,de,me,be,ke,pe,Ae,K,He,Te,Ct,yt,_t,bt,R,Y,I,T,X,Xe,f,u,l,s,E]}class S0 extends ye{constructor(e){super(),_e(this,e,p0,k0,we,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}let un={width:180,height:72};function Rr(t){let e,n,i,o,r,s,l,a,u,f,d,c,h,m;return{c(){e=ee("svg"),n=ee("g"),i=ee("g"),o=ee("g"),r=ee("g"),s=ee("g"),l=ee("path"),a=ee("path"),u=ee("g"),f=ee("g"),d=ee("g"),c=ee("g"),h=ee("g"),this.h()},l(y){e=te(y,"svg",{class:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,width:!0,height:!0,viewBox:!0});var _=U(e);n=te(_,"g",{});var g=U(n);i=te(g,"g",{"data-cell-id":!0});var E=U(i);o=te(E,"g",{"data-cell-id":!0});var k=U(o);r=te(k,"g",{"data-cell-id":!0});var p=U(r);s=te(p,"g",{});var A=U(s);l=te(A,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,transform:!0,"pointer-events":!0}),U(l).forEach(P),a=te(A,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,transform:!0,"pointer-events":!0}),U(a).forEach(P),A.forEach(P),p.forEach(P),u=te(k,"g",{"data-cell-id":!0}),U(u).forEach(P),f=te(k,"g",{"data-cell-id":!0}),U(f).forEach(P),d=te(k,"g",{"data-cell-id":!0}),U(d).forEach(P),c=te(k,"g",{"data-cell-id":!0}),U(c).forEach(P),h=te(k,"g",{"data-cell-id":!0}),U(h).forEach(P),k.forEach(P),E.forEach(P),g.forEach(P),_.forEach(P),this.h()},h(){b(l,"d","M 44 23.11 C 44 34.65 35.05 44 24 44 C 12.95 44 4 34.65 4 23.11 C 4 11.57 12.95 2.22 24 2.22"),b(l,"fill","none"),b(l,"stroke","#000000"),b(l,"stroke-width","2"),b(l,"stroke-miterlimit","10"),b(l,"transform","rotate(90,24,20.5)"),b(l,"pointer-events","all"),b(a,"d","M 24 -3 L 31.5 2.22 L 24 7.44 Z"),b(a,"fill","none"),b(a,"stroke","#000000"),b(a,"stroke-width","2"),b(a,"stroke-miterlimit","10"),b(a,"transform","rotate(90,24,20.5)"),b(a,"pointer-events","all"),b(r,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-2"),b(u,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-5"),b(f,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-6"),b(d,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-3"),b(c,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-4"),b(h,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-8"),b(o,"data-cell-id","1"),b(i,"data-cell-id","0"),b(e,"class",m="icon "+(t[0].isEnd?"invert":"")+" svelte-1kwq3ut"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"version","1.1"),b(e,"width","49px"),b(e,"height","42px"),b(e,"viewBox","-0.5 -0.5 49 42")},m(y,_){Z(y,e,_),ne(e,n),ne(n,i),ne(i,o),ne(o,r),ne(r,s),ne(s,l),ne(s,a),ne(o,u),ne(o,f),ne(o,d),ne(o,c),ne(o,h)},p(y,_){_&1&&m!==(m="icon "+(y[0].isEnd?"invert":"")+" svelte-1kwq3ut")&&b(e,"class",m)},d(y){y&&P(e)}}}function Vr(t){let e,n,i,o,r,s,l,a,u,f,d,c,h,m,y,_,g,E,k,p,A;return{c(){e=ee("svg"),n=ee("g"),i=ee("g"),o=ee("g"),r=ee("g"),s=ee("g"),l=ee("g"),a=ee("path"),u=ee("g"),f=ee("g"),d=ee("path"),c=ee("g"),h=ee("g"),m=ee("ellipse"),y=ee("g"),_=ee("g"),g=ee("ellipse"),E=ee("g"),k=ee("g"),p=ee("ellipse"),this.h()},l(F){e=te(F,"svg",{class:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,width:!0,height:!0,viewBox:!0});var D=U(e);n=te(D,"g",{});var H=U(n);i=te(H,"g",{"data-cell-id":!0});var O=U(i);o=te(O,"g",{"data-cell-id":!0});var R=U(o);r=te(R,"g",{"data-cell-id":!0}),U(r).forEach(P),s=te(R,"g",{"data-cell-id":!0});var Y=U(s);l=te(Y,"g",{});var I=U(l);a=te(I,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,"pointer-events":!0}),U(a).forEach(P),I.forEach(P),Y.forEach(P),u=te(R,"g",{"data-cell-id":!0});var W=U(u);f=te(W,"g",{});var v=U(f);d=te(v,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,"pointer-events":!0}),U(d).forEach(P),v.forEach(P),W.forEach(P),c=te(R,"g",{"data-cell-id":!0});var M=U(c);h=te(M,"g",{});var w=U(h);m=te(w,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(m).forEach(P),w.forEach(P),M.forEach(P),y=te(R,"g",{"data-cell-id":!0});var C=U(y);_=te(C,"g",{});var z=U(_);g=te(z,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(g).forEach(P),z.forEach(P),C.forEach(P),E=te(R,"g",{"data-cell-id":!0});var T=U(E);k=te(T,"g",{});var X=U(k);p=te(X,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(p).forEach(P),X.forEach(P),T.forEach(P),R.forEach(P),O.forEach(P),H.forEach(P),D.forEach(P),this.h()},h(){b(r,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-2"),b(a,"d","M 11 21 Q 11 61 57 61"),b(a,"fill","none"),b(a,"stroke","rgb(0, 0, 0)"),b(a,"stroke-width","2"),b(a,"stroke-miterlimit","10"),b(a,"pointer-events","stroke"),b(s,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-5"),b(d,"d","M 11 21 L 11 91"),b(d,"fill","none"),b(d,"stroke","rgb(0, 0, 0)"),b(d,"stroke-width","2"),b(d,"stroke-miterlimit","10"),b(d,"pointer-events","stroke"),b(u,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-6"),b(m,"cx","11"),b(m,"cy","11"),b(m,"rx","10"),b(m,"ry","10"),b(m,"fill","none"),b(m,"stroke","rgb(0, 0, 0)"),b(m,"stroke-width","2"),b(m,"pointer-events","all"),b(c,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-3"),b(g,"cx","67"),b(g,"cy","61"),b(g,"rx","10"),b(g,"ry","10"),b(g,"fill","none"),b(g,"stroke","rgb(0, 0, 0)"),b(g,"stroke-width","2"),b(g,"pointer-events","all"),b(y,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-4"),b(p,"cx","11"),b(p,"cy","101"),b(p,"rx","10"),b(p,"ry","10"),b(p,"fill","none"),b(p,"stroke","rgb(0, 0, 0)"),b(p,"stroke-width","2"),b(p,"pointer-events","all"),b(E,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-8"),b(o,"data-cell-id","1"),b(i,"data-cell-id","0"),b(e,"class",A="icon "+(t[0].isEnd?"invert":"")+" svelte-1kwq3ut"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"version","1.1"),b(e,"width","78px"),b(e,"height","112px"),b(e,"viewBox","-0.5 -0.5 78 112")},m(F,D){Z(F,e,D),ne(e,n),ne(n,i),ne(i,o),ne(o,r),ne(o,s),ne(s,l),ne(l,a),ne(o,u),ne(u,f),ne(f,d),ne(o,c),ne(c,h),ne(h,m),ne(o,y),ne(y,_),ne(_,g),ne(o,E),ne(E,k),ne(k,p)},p(F,D){D&1&&A!==(A="icon "+(F[0].isEnd?"invert":"")+" svelte-1kwq3ut")&&b(e,"class",A)},d(F){F&&P(e)}}}function C0(t){let e,n,i,o,r,s,l,a,u,f=t[0].msg+"",d,c,h,m,y,_,g,E,k,p,A,F,D,H,O,R=t[0].type==="LOOP"&&Rr(t),Y=(t[0].type==="IF"||t[0].type==="ELSE_IF")&&Vr(t);return r=new lt({props:{class:"hndl",id:"t",type:"target",position:ce.Top}}),h=new lt({props:{class:"hndl",id:"b",type:"source",position:ce.Bottom}}),y=new lt({props:{class:"hndl",id:"bt",type:"target",position:ce.Bottom}}),g=new lt({props:{class:"hndl",id:"l",type:"source",position:ce.Left}}),k=new lt({props:{class:"hndl",id:"lt",type:"target",position:ce.Left}}),A=new lt({props:{class:"hndl",id:"r",type:"source",position:ce.Right}}),D=new lt({props:{class:"hndl",id:"rt",type:"target",position:ce.Right}}),{c(){e=De("div"),n=De("div"),R&&R.c(),i=ve(),Y&&Y.c(),o=ve(),oe(r.$$.fragment),s=ve(),l=De("div"),a=De("div"),u=De("p"),d=Yt(f),c=ve(),oe(h.$$.fragment),m=ve(),oe(y.$$.fragment),_=ve(),oe(g.$$.fragment),E=ve(),oe(k.$$.fragment),p=ve(),oe(A.$$.fragment),F=ve(),oe(D.$$.fragment),this.h()},l(I){e=Ne(I,"DIV",{class:!0});var W=U(e);n=Ne(W,"DIV",{style:!0});var v=U(n);R&&R.l(v),i=Ee(v),Y&&Y.l(v),v.forEach(P),o=Ee(W),ae(r.$$.fragment,W),s=Ee(W),l=Ne(W,"DIV",{class:!0,style:!0});var M=U(l);a=Ne(M,"DIV",{class:!0});var w=U(a);u=Ne(w,"P",{});var C=U(u);d=Ft(C,f),C.forEach(P),w.forEach(P),M.forEach(P),c=Ee(W),ae(h.$$.fragment,W),m=Ee(W),ae(y.$$.fragment,W),_=Ee(W),ae(g.$$.fragment,W),E=Ee(W),ae(k.$$.fragment,W),p=Ee(W),ae(A.$$.fragment,W),F=Ee(W),ae(D.$$.fragment,W),W.forEach(P),this.h()},h(){he(n,"position","absolute"),b(a,"class","msgWrapper svelte-1kwq3ut"),b(l,"class","container svelte-1kwq3ut"),he(l,"width",un.width+"px"),he(l,"height",un.height+"px"),b(e,"class",H=(t[0].highlight?"hovered":"")+" "+(t[0].isEnd?"endStep":"step")+" svelte-1kwq3ut")},m(I,W){Z(I,e,W),ne(e,n),R&&R.m(n,null),ne(n,i),Y&&Y.m(n,null),ne(e,o),re(r,e,null),ne(e,s),ne(e,l),ne(l,a),ne(a,u),ne(u,d),t[4](u),t[5](l),ne(e,c),re(h,e,null),ne(e,m),re(y,e,null),ne(e,_),re(g,e,null),ne(e,E),re(k,e,null),ne(e,p),re(A,e,null),ne(e,F),re(D,e,null),O=!0},p(I,[W]){I[0].type==="LOOP"?R?R.p(I,W):(R=Rr(I),R.c(),R.m(n,i)):R&&(R.d(1),R=null),I[0].type==="IF"||I[0].type==="ELSE_IF"?Y?Y.p(I,W):(Y=Vr(I),Y.c(),Y.m(n,null)):Y&&(Y.d(1),Y=null),(!O||W&1)&&f!==(f=I[0].msg+"")&&Kt(d,f),(!O||W&1&&H!==(H=(I[0].highlight?"hovered":"")+" "+(I[0].isEnd?"endStep":"step")+" svelte-1kwq3ut"))&&b(e,"class",H)},i(I){O||(V(r.$$.fragment,I),V(h.$$.fragment,I),V(y.$$.fragment,I),V(g.$$.fragment,I),V(k.$$.fragment,I),V(A.$$.fragment,I),V(D.$$.fragment,I),O=!0)},o(I){B(r.$$.fragment,I),B(h.$$.fragment,I),B(y.$$.fragment,I),B(g.$$.fragment,I),B(k.$$.fragment,I),B(A.$$.fragment,I),B(D.$$.fragment,I),O=!1},d(I){I&&P(e),R&&R.d(),Y&&Y.d(),le(r),t[4](null),t[5](null),le(h),le(y),le(g),le(k),le(A),le(D)}}}function P0(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight}function M0(t,e,n){const i={desire:15,min:10,max:80};function o(d,c){let h=i.min,m=i.max,y=h;for(;h<=m;)y=Math.floor((h+m)/2),d.style.fontSize=`${y}px`,P0(c)?m=--y:h=++y;d.style.fontSize=`${m}px`}let r,s;function l(){r&&s&&o(s,r)}fn(()=>{l()}),Gs(()=>{l()});let{data:a}=e;function u(d){Vt[d?"unshift":"push"](()=>{s=d,n(2,s)})}function f(d){Vt[d?"unshift":"push"](()=>{r=d,n(1,r)})}return t.$$set=d=>{"data"in d&&n(0,a=d.data)},[a,r,s,i,u,f]}class z0 extends ye{constructor(e){super(),_e(this,e,M0,C0,we,{fontSize:3,data:0})}get fontSize(){return this.$$.ctx[3]}}function O0(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),e&&(i.href=e),o.href=t,o.href}const T0=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function pt(t){const e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function oi(t,e){const i=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function D0(t){const e=oi(t,"border-left-width"),n=oi(t,"border-right-width");return t.clientWidth+e+n}function N0(t){const e=oi(t,"border-top-width"),n=oi(t,"border-bottom-width");return t.clientHeight+e+n}function ls(t,e={}){const n=e.width||D0(t),i=e.height||N0(t);return{width:n,height:i}}function I0(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const et=16384;function A0(t){(t.width>et||t.height>et)&&(t.width>et&&t.height>et?t.width>t.height?(t.height*=et/t.width,t.width=et):(t.width*=et/t.height,t.height=et):t.width>et?(t.height*=et/t.width,t.width=et):(t.width*=et/t.height,t.height=et))}function ri(t){return new Promise((e,n)=>{const i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}async function H0(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function L0(t,e,n){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),r=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),o.appendChild(r),r.appendChild(t),H0(o)}const $e=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||$e(n,e)};function R0(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function V0(t){return pt(t).map(e=>{const n=t.getPropertyValue(e),i=t.getPropertyPriority(e);return`${e}: ${n}${i?" !important":""};`}).join(" ")}function W0(t,e,n){const i=`.${t}:${e}`,o=n.cssText?R0(n):V0(n);return document.createTextNode(`${i}{${o}}`)}function Wr(t,e,n){const i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(o===""||o==="none")return;const r=T0();try{e.className=`${e.className} ${r}`}catch{return}const s=document.createElement("style");s.appendChild(W0(r,n,i)),e.appendChild(s)}function B0(t,e){Wr(t,e,":before"),Wr(t,e,":after")}const Br="application/font-woff",Xr="image/jpeg",X0={woff:Br,woff2:Br,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Xr,jpeg:Xr,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Y0(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function mo(t){const e=Y0(t).toLowerCase();return X0[e]||""}function F0(t){return t.split(/,/)[1]}function xi(t){return t.search(/^(data:)/)!==-1}function K0(t,e){return`data:${e};base64,${t}`}async function ss(t,e,n){const i=await fetch(t,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise((r,s)=>{const l=new FileReader;l.onerror=s,l.onloadend=()=>{try{r(n({res:i,result:l.result}))}catch(a){s(a)}},l.readAsDataURL(o)})}const Ri={};function q0(t,e,n){let i=t.replace(/\?.*/,"");return n&&(i=t),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function yo(t,e,n){const i=q0(t,e,n.includeQueryParams);if(Ri[i]!=null)return Ri[i];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let o;try{const r=await ss(t,n.fetchRequestInit,({res:s,result:l})=>(e||(e=s.headers.get("Content-Type")||""),F0(l)));o=K0(r,e)}catch(r){o=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;r&&(s=typeof r=="string"?r:r.message),s&&console.warn(s)}return Ri[i]=o,o}async function U0(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ri(e)}async function Z0(t,e){if(t.currentSrc){const r=document.createElement("canvas"),s=r.getContext("2d");r.width=t.clientWidth,r.height=t.clientHeight,s==null||s.drawImage(t,0,0,r.width,r.height);const l=r.toDataURL();return ri(l)}const n=t.poster,i=mo(n),o=await yo(n,i,e);return ri(o)}async function G0(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await pi(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function J0(t,e){return $e(t,HTMLCanvasElement)?U0(t):$e(t,HTMLVideoElement)?Z0(t,e):$e(t,HTMLIFrameElement)?G0(t):t.cloneNode(!1)}const Q0=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function j0(t,e,n){var i,o;let r=[];return Q0(t)&&t.assignedNodes?r=pt(t.assignedNodes()):$e(t,HTMLIFrameElement)&&(!((i=t.contentDocument)===null||i===void 0)&&i.body)?r=pt(t.contentDocument.body.childNodes):r=pt(((o=t.shadowRoot)!==null&&o!==void 0?o:t).childNodes),r.length===0||$e(t,HTMLVideoElement)||await r.reduce((s,l)=>s.then(()=>pi(l,n)).then(a=>{a&&e.appendChild(a)}),Promise.resolve()),e}function x0(t,e){const n=e.style;if(!n)return;const i=window.getComputedStyle(t);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):pt(i).forEach(o=>{let r=i.getPropertyValue(o);o==="font-size"&&r.endsWith("px")&&(r=`${Math.floor(parseFloat(r.substring(0,r.length-2)))-.1}px`),$e(t,HTMLIFrameElement)&&o==="display"&&r==="inline"&&(r="block"),o==="d"&&e.getAttribute("d")&&(r=`path(${e.getAttribute("d")})`),n.setProperty(o,r,i.getPropertyPriority(o))})}function $0(t,e){$e(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),$e(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function em(t,e){if($e(t,HTMLSelectElement)){const n=e,i=Array.from(n.children).find(o=>t.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function tm(t,e){return $e(e,Element)&&(x0(t,e),B0(t,e),$0(t,e),em(t,e)),e}async function nm(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const i={};for(let r=0;r<n.length;r++){const l=n[r].getAttribute("xlink:href");if(l){const a=t.querySelector(l),u=document.querySelector(l);!a&&u&&!i[l]&&(i[l]=await pi(u,e,!0))}}const o=Object.values(i);if(o.length){const r="http://www.w3.org/1999/xhtml",s=document.createElementNS(r,"svg");s.setAttribute("xmlns",r),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const l=document.createElementNS(r,"defs");s.appendChild(l);for(let a=0;a<o.length;a++)l.appendChild(o[a]);t.appendChild(s)}return t}async function pi(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(i=>J0(i,e)).then(i=>j0(t,i,e)).then(i=>tm(t,i)).then(i=>nm(i,e))}const as=/url\((['"]?)([^'"]+?)\1\)/g,im=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,om=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function rm(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function lm(t){const e=[];return t.replace(as,(n,i,o)=>(e.push(o),n)),e.filter(n=>!xi(n))}async function sm(t,e,n,i,o){try{const r=n?O0(e,n):e,s=mo(e);let l;return o||(l=await yo(r,s,i)),t.replace(rm(e),`$1${l}$3`)}catch{}return t}function am(t,{preferredFontFormat:e}){return e?t.replace(om,n=>{for(;;){const[i,,o]=im.exec(n)||[];if(!o)return"";if(o===e)return`src: ${i};`}}):t}function us(t){return t.search(as)!==-1}async function fs(t,e,n){if(!us(t))return t;const i=am(t,n);return lm(i).reduce((r,s)=>r.then(l=>sm(l,s,e,n)),Promise.resolve(i))}async function Ln(t,e,n){var i;const o=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(t);if(o){const r=await fs(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function um(t,e){await Ln("background",t,e)||await Ln("background-image",t,e),await Ln("mask",t,e)||await Ln("mask-image",t,e)}async function fm(t,e){const n=$e(t,HTMLImageElement);if(!(n&&!xi(t.src))&&!($e(t,SVGImageElement)&&!xi(t.href.baseVal)))return;const i=n?t.src:t.href.baseVal,o=await yo(i,mo(i),e);await new Promise((r,s)=>{t.onload=r,t.onerror=s;const l=t;l.decode&&(l.decode=r),l.loading==="lazy"&&(l.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o})}async function cm(t,e){const i=pt(t.childNodes).map(o=>cs(o,e));await Promise.all(i).then(()=>t)}async function cs(t,e){$e(t,Element)&&(await um(t,e),await fm(t,e),await cm(t,e))}function dm(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const i=e.style;return i!=null&&Object.keys(i).forEach(o=>{n[o]=i[o]}),t}const Yr={};async function Fr(t){let e=Yr[t];if(e!=null)return e;const i=await(await fetch(t)).text();return e={url:t,cssText:i},Yr[t]=e,e}async function Kr(t,e){let n=t.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let l=s.replace(i,"$1");return l.startsWith("https://")||(l=new URL(l,t.url).href),ss(l,e.fetchRequestInit,({result:a})=>(n=n.replace(s,`url(${a})`),[s,a]))});return Promise.all(r).then(()=>n)}function qr(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let i=t.replace(n,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const a=o.exec(i);if(a===null)break;e.push(a[0])}i=i.replace(o,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(s,"gi");for(;;){let a=r.exec(i);if(a===null){if(a=l.exec(i),a===null)break;r.lastIndex=l.lastIndex}else l.lastIndex=r.lastIndex;e.push(a[0])}return e}async function hm(t,e){const n=[],i=[];return t.forEach(o=>{if("cssRules"in o)try{pt(o.cssRules||[]).forEach((r,s)=>{if(r.type===CSSRule.IMPORT_RULE){let l=s+1;const a=r.href,u=Fr(a).then(f=>Kr(f,e)).then(f=>qr(f).forEach(d=>{try{o.insertRule(d,d.startsWith("@import")?l+=1:o.cssRules.length)}catch(c){console.error("Error inserting rule from remote css",{rule:d,error:c})}})).catch(f=>{console.error("Error loading remote css",f.toString())});i.push(u)}})}catch(r){const s=t.find(l=>l.href==null)||document.styleSheets[0];o.href!=null&&i.push(Fr(o.href).then(l=>Kr(l,e)).then(l=>qr(l).forEach(a=>{s.insertRule(a,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",r)}}),Promise.all(i).then(()=>(t.forEach(o=>{if("cssRules"in o)try{pt(o.cssRules||[]).forEach(r=>{n.push(r)})}catch(r){console.error(`Error while reading CSS rules from ${o.href}`,r)}}),n))}function gm(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>us(e.style.getPropertyValue("src")))}async function mm(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=pt(t.ownerDocument.styleSheets),i=await hm(n,e);return gm(i)}async function ym(t,e){const n=await mm(t,e);return(await Promise.all(n.map(o=>{const r=o.parentStyleSheet?o.parentStyleSheet.href:null;return fs(o.cssText,r,e)}))).join(`
`)}async function _m(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await ym(t,e);if(n){const i=document.createElement("style"),o=document.createTextNode(n);i.appendChild(o),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}}async function bm(t,e={}){const{width:n,height:i}=ls(t,e),o=await pi(t,e,!0);return await _m(o,e),await cs(o,e),dm(o,e),await L0(o,n,i)}async function wm(t,e={}){const{width:n,height:i}=ls(t,e),o=await bm(t,e),r=await ri(o),s=document.createElement("canvas"),l=s.getContext("2d"),a=e.pixelRatio||I0(),u=e.canvasWidth||n,f=e.canvasHeight||i;return s.width=u*a,s.height=f*a,e.skipAutoScale||A0(s),s.style.width=`${u}`,s.style.height=`${f}`,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,s.width,s.height)),l.drawImage(r,0,0,s.width,s.height),s}async function km(t,e={}){return(await wm(t,e)).toDataURL()}function vm(t){let e,n="💾",i,o;return{c(){e=De("button"),e.textContent=n},l(r){e=Ne(r,"BUTTON",{"data-svelte-h":!0}),nl(e)!=="svelte-dvo5zx"&&(e.textContent=n)},m(r,s){Z(r,e,s),i||(o=ze(e,"click",t[0]),i=!0)},p:Pe,d(r){r&&P(e),i=!1,o()}}}function Em(t){let e,n;return e=new Ei({props:{position:"top-right",$$slots:{default:[vm]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&8&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}const Vi=1024,Wi=768;function pm(t,e,n){let{nodes:i=[]}=e,{fileName:o=""}=e;function r(){if(!Array.isArray(i)||i.length===0){console.error("No nodes available to generate image.");return}const s=Ic(i),l=uo(s,Vi,Wi,.5,2,.2),a=document.querySelector(".svelte-flow__viewport");l&&km(a,{width:Vi,height:Wi,style:{width:`${Vi}px`,height:`${Wi}px`,transform:`translate(${l.x}px, ${l.y}px) scale(${l.zoom})`}}).then(u=>{const f=document.createElement("a");f.download=`${o||""}_solothought-flowchart.png`,f.href=u,f.click()})}return t.$$set=s=>{"nodes"in s&&n(1,i=s.nodes),"fileName"in s&&n(2,o=s.fileName)},[r,i,o]}class Sm extends ye{constructor(e){super(),_e(this,e,pm,Em,we,{nodes:1,fileName:2})}}function Cm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const Pm=["IF","ELSE_IF","ELSE","LOOP"],Mm=["GOTO","SKIP","STOP","END"];function zm(t){return Pm.includes(t.type)}function Om(t){return Mm.includes(t.type)}function Si(t,e,n,i){let o=-2;if(n!==void 0){const r=t[n],s=t[e].indent;for(let l=e+1;l<t.length;l++){const a=t[l].indent;if(a===s){o=l;break}else if(a<s){a>r.indent?o=l:o=n;break}}o===-2&&(o=n)}else{for(let r=e+1;r<t.length;r++)if(t[r].indent<=t[e].indent){o=r;break}o===-2&&(o=-1)}return o>-1&&t[o].type.startsWith("ELSE")&&(!i&&t[e].indent===t[o].indent&&(t[e].type==="IF"||t[e].type==="ELSE_IF")||(o=Si(t,o,n,!0))),o}function Tm(t,e,n,i){const o=Si(t,e,_o(i));n[e].push(o)}function Dm(t,e){const n=t[e].indent;for(let i=e-1;i>-1;i--)if(n===t[i].indent)return i;throw new Error("Unable to find last step of same indent level")}function Nm(t,e,n,i,o){if(t.type==="ELSE"){delete n[i];return}const r=t.indent;e[i+1]&&e[i+1].indent>r?n[i].push(i+1):n[i].push(void 0);let s=Si(e,i,_o(o));s!==-1&&e[s].type==="ELSE"&&s++,n[i].push(s),t.type==="LOOP"&&o.push(i)}function ds(t,e){if(e===0)throw new Error(`${t[e].type} can't be first step of the flow`)}function Im(t,e,n,i,o){if(ds(t,o),n[e.msg]===void 0)throw new Error(`GOTO is pointing to ${e.msg} that doesn't specified with any step`);Xn(t,i,o,n[e.msg])}function Am(t,e,n,i){ds(t,e);const o=t[e];if(o.type==="SKIP"){if(i.length<1)throw new Error("SKIP must be inside LOOP");const r=i[i.length-1];Xn(t,n,e,r)}else if(o.type==="STOP"){if(i.length<1)throw new Error("STOP must be inside LOOP");const r=Si(t,_o(i));Xn(t,n,e,r)}else o.type==="END"&&Xn(t,n,e,-1)}function Xn(t,e,n,i){for(let o=0;o<n;o++){let r=e[o];if(r!==void 0){const s=r.indexOf(n);s!==-1&&(t[o].type==="ELSE"&&(r=Dm(t,r)),r[s]=i)}}delete e[n]}function Hm(t,e,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o],s=r.indent;if(i.length>0)for(let l=i.length-1;l>-1;l--){const a=i[l];s<=t[a].indent&&i.pop()}r.type==="GOTO"?Im(t,r,e,n,o):zm(r)?Nm(r,t,n,o,i):Om(r)?Am(t,o,n,i):Tm(t,o,n,i)}}function _o(t){return t[t.length-1]}var Lm=Hm;const Ur=Lm,Rm=["IF","ELSE_IF","LOOP","ELSE"],Vm=["GOTO","SKIP","STOP","END"],Wm=["AND","THEN","BUT","FOLLOW","ERR"];class Bm{constructor(e){this.name=e,this.headers={},this.steps=[],this.links={},this.leveledSteps=[[]]}}function Xm(t){const e=t.split(`
`),n=[];let i={},o=[],r=0,s=-1,l=null,a=!1;return e.forEach((u,f)=>{const d=u.trim();if(!d||d[0]==="#")return;if(d.startsWith("FLOW:")){l&&Ur(l.steps,i,l.links),i={},o=[],r=0,s=-1,l=new Bm(d.substring(6)),n.push(l),a=!0;return}else if(a&&d.match(/^[a-z]{1,70}:/)){const[y,_]=u.split(":");l.headers[y.trim()]=_.trim();return}else a=!1;s++;const c=u.search(/\S/);let h;if(o[r]!==void 0?h=o[r]:(h=c,o[r]=c),h===c)l.leveledSteps[r].push(s);else if(h<c)o[++r]=c,l.leveledSteps[r]?l.leveledSteps[r].push(s):l.leveledSteps.push([s]);else{for(;r>-1&&o[r]!==c;r--);if(r===-1)throw new Error(`Indentation issue with line |${u}|`);l.leveledSteps[r].push(s)}let m=Ym(u.trim());m.indent=r,m.index&&(i[m.index]=s),l.steps.push(m),l.links[s]=[]}),Ur(l.steps,i,l.links),n}function Ym(t){const e={msg:"",rawMsg:"",type:""};if(t[0]==="["){const i=t.indexOf("]");e.index=t.substring(1,i).trim(),t=t.substring(i+1).trimStart()}const n=t.indexOf(" ");if(n<1)Gr(t)?e.type=t:e.msg=e.rawMsg=t;else{const i=t.substring(0,n),o=t.substring(n+1);Gr(i)?(e.type=i,e.rawMsg=o,e.msg=Zr(o).trim()):(e.rawMsg=t,e.msg=Zr(t))}return e}function Zr(t){return t.replace(/\([^)]*\)/g,"").replace(/\s\s/g," ")}function Gr(t){return Vm.indexOf(t)!==-1||Rm.indexOf(t)!==-1||Wm.indexOf(t)!==-1}var Fm=Xm;const Km=Cm(Fm),qm=un.width,Um=un.height,Zm=un.height*1.5,Gm=un.width*1.1,Jr=qm+Gm,Qr=Um+Zm;function Jm(t,e,n){return{id:t+"",type:"step",data:e,position:n}}function Qm(t,e,n,i="",o){let r=!1,s="",l="",a="";return hs(i)&&n==0&&(s="r",l="lt"),t>e&&(s="l",r=!0),i==="IF"||i==="ELSE_IF"?n===0?a="True":n===1&&(a="False"):i==="LOOP"&&n===1&&(a="Exit"),{id:`${t}-${e}`,source:t+"",target:e+"",label:"",data:{},sourceHandle:s,targetHandle:l,animated:r,label:a}}function jm(t){const e=[];try{const n=Km(t);for(let i=0;i<n.length;i++){const o=n[i];if(o.steps.length>0){const r=xm(o);e.push(r)}}}catch(n){console.error(n)}return e}function xm(t){const e=[],n=[],i={};let o;const r=[];let s=0,l=-1;for(;s<t.steps.length;s++){const a=t.steps[s];if(t.links[s]){l++;let u;if(i[s]?i[s].target=[...t.links[s].map(String)]:i[s]={target:[...t.links[s].map(String)],parent:[]},!o)u={x:0,y:0};else{const d=t.steps[o.id];if(d.indent===a.indent)u={x:o.position.x,y:o.position.y+Qr};else if(d.indent<a.indent)l--,u={x:o.position.x+Jr,y:o.position.y};else{let c=d.indent-a.indent,h;for(;c-- >0;)h=r.pop();u={x:h.position.x,y:l*Qr}}t.steps[s-1].type==="ELSE"&&(u={x:u.x-Jr,y:u.y})}const f=Jm(s,{msg:a.rawMsg,type:a.type},u);e.push(f),o=f,hs(a.type)&&r.push(f);for(let d=0;d<t.links[s].length;d++){const c=t.links[s][d];if(i[c]||(i[c]={target:[],parent:[]}),c>s&&i[c].parent.push(String(s)),c===-1)f.data.isEnd=!0;else{if(!t.links[c])throw new Error(`Link for Step ${c} is not present`);const h=Qm(s,c,d,a.type,t.steps[c].type);n.push(h)}}}}return e[0].data.isStart=!0,{flowName:t.name,nodes:e,edges:n,connections:i}}const $m=["IF","ELSE_IF","LOOP"];function hs(t){return $m.indexOf(t)!==-1}const gs="stroke-width: 2px; stroke: #cac2c2;",e1="stroke-width: 2px; stroke: #FF4000",t1="font-size: 10px; font-weight: inherit; color: inherit;",n1="font-size: 16px; font-weight: bold; color: #ff6347;",ms={type:ln.ArrowClosed,width:20,height:20,color:"#cac2c2"},i1={type:ln.ArrowClosed,width:20,height:20,color:"#FF4000"};function o1(t,e,n){const i=new Set,o=new Set,r=new Set,s=new Set;return(n===0||n===2)&&ys(t,e,i,o),(n===1||n===2)&&_s(t,e,r,s),{seletedNodes:new Set([...i,...r]),seletedEdges:new Set([...o,...s])}}function ys(t,e,n,i){n.has(t)||(n.add(t),e[t].parent.forEach(o=>{i.add(`${o}-${t}`),ys(o,e,n,i)}))}function _s(t,e,n,i){n.has(t)||(n.add(t),e[t].target.forEach(o=>{i.add(`${t}-${o}`),_s(o,e,n,i)}))}function jr(t,e,n,i){bs(t,n,!0),li(e,i,ks)}function xr(t,e,n,i){bs(t,n,!1),li(e,i,ws)}function bs(t,e,n){t.forEach(i=>{e.has(i.id)&&(i.data={...i.data,highlight:n})})}function li(t,e,n){t.forEach(i=>{e.has(i.id)&&n(i)})}function ws(t){t.style=gs,t.markerEnd=ms,t.labelStyle=t1}function ks(t){t.style=e1,t.markerEnd=i1,t.labelStyle=n1}function $r(t,e,n){const i=t.slice();return i[28]=e[n],i[30]=n,i}function el(t){let e,n=t[28].flowName+"",i;return{c(){e=De("option"),i=Yt(n),this.h()},l(o){e=Ne(o,"OPTION",{});var r=U(e);i=Ft(r,n),r.forEach(P),this.h()},h(){e.__value=t[30],js(e,e.__value)},m(o,r){Z(o,e,r),ne(e,i)},p(o,r){r[0]&32&&n!==(n=o[28].flowName+"")&&Kt(i,n)},d(o){o&&P(e)}}}function r1(t){let e,n,i,o,r,s,l,a;return e=new Sm({props:{nodes:t[0],fileName:t[1]}}),i=new n0({}),r=new g0({}),l=new S0({}),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment),o=ve(),oe(r.$$.fragment),s=ve(),oe(l.$$.fragment)},l(u){ae(e.$$.fragment,u),n=Ee(u),ae(i.$$.fragment,u),o=Ee(u),ae(r.$$.fragment,u),s=Ee(u),ae(l.$$.fragment,u)},m(u,f){re(e,u,f),Z(u,n,f),re(i,u,f),Z(u,o,f),re(r,u,f),Z(u,s,f),re(l,u,f),a=!0},p(u,f){const d={};f[0]&1&&(d.nodes=u[0]),f[0]&2&&(d.fileName=u[1]),e.$set(d)},i(u){a||(V(e.$$.fragment,u),V(i.$$.fragment,u),V(r.$$.fragment,u),V(l.$$.fragment,u),a=!0)},o(u){B(e.$$.fragment,u),B(i.$$.fragment,u),B(r.$$.fragment,u),B(l.$$.fragment,u),a=!1},d(u){u&&(P(n),P(o),P(s)),le(e,u),le(i,u),le(r,u),le(l,u)}}}function l1(t){let e,n,i,o,r,s,l,a,u=dt(t[5]),f=[];for(let m=0;m<u.length;m+=1)f[m]=el($r(t,u,m));function d(m){t[17](m)}function c(m){t[18](m)}let h={nodeTypes:t[6],fitView:!0,defaultEdgeOptions:{type:"smoothstep",markerEnd:ms,style:gs},$$slots:{default:[r1]},$$scope:{ctx:t}};return t[2]!==void 0&&(h.nodes=t[2]),t[4]!==void 0&&(h.edges=t[4]),i=new zg({props:h}),Vt.push(()=>Po(i,"nodes",d)),Vt.push(()=>Po(i,"edges",c)),i.$on("nodemouseenter",t[7]),i.$on("nodemouseleave",t[8]),i.$on("edgeclick",t[9]),{c(){e=De("select");for(let m=0;m<f.length;m+=1)f[m].c();n=ve(),oe(i.$$.fragment),this.h()},l(m){e=Ne(m,"SELECT",{});var y=U(e);for(let _=0;_<f.length;_+=1)f[_].l(y);y.forEach(P),n=Ee(m),ae(i.$$.fragment,m),this.h()},h(){t[3]===void 0&&il(()=>t[16].call(e))},m(m,y){Z(m,e,y);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);So(e,t[3],!0),Z(m,n,y),re(i,m,y),s=!0,l||(a=[ze(e,"change",t[10]),ze(e,"change",t[16])],l=!0)},p(m,y){if(y[0]&32){u=dt(m[5]);let g;for(g=0;g<u.length;g+=1){const E=$r(m,u,g);f[g]?f[g].p(E,y):(f[g]=el(E),f[g].c(),f[g].m(e,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=u.length}y[0]&8&&So(e,m[3]);const _={};y[0]&3|y[1]&1&&(_.$$scope={dirty:y,ctx:m}),!o&&y[0]&4&&(o=!0,_.nodes=m[2],Co(()=>o=!1)),!r&&y[0]&16&&(r=!0,_.edges=m[4],Co(()=>r=!1)),i.$set(_)},i(m){s||(V(i.$$.fragment,m),s=!0)},o(m){B(i.$$.fragment,m),s=!1},d(m){m&&(P(e),P(n)),Js(f,m),le(i,m),l=!1,gt(a)}}}function s1(t){let e,n,i;n=new Dg({props:{$$slots:{default:[l1]},$$scope:{ctx:t}}});let o=[t[11],{id:"solothought-flow"}],r={};for(let s=0;s<o.length;s+=1)r=Ce(r,o[s]);return{c(){e=De("div"),oe(n.$$.fragment),this.h()},l(s){e=Ne(s,"DIV",{id:!0});var l=U(e);ae(n.$$.fragment,l),l.forEach(P),this.h()},h(){Nt(e,r)},m(s,l){Z(s,e,l),re(n,e,null),i=!0},p(s,l){const a={};l[0]&63|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),n.$set(a),Nt(e,r=ht(o,[l[0]&2048&&s[11],{id:"solothought-flow"}]))},i(s){i||(V(n.$$.fragment,s),i=!0)},o(s){B(n.$$.fragment,s),i=!1},d(s){s&&P(e),le(n)}}}function a1(t,e,n){const i=["nodes","edges","text","flowName","selection"];let o=Ie(e,i);const r={step:z0};let{nodes:s=[]}=e,{edges:l=[]}=e,{text:a=""}=e,{flowName:u=""}=e,{selection:f=[]}=e,d=ue(s),c=ue(l),h="",m={},y=new Set,_=new Set,g=[],E=0;function k(M){const w=M.detail.node.id;let C=2;h==="Shift"?C=0:h==="Control"&&(C=1);const z=o1(w,m,C);y=z.seletedNodes,_=z.seletedEdges,jr(s,l,y,_),d.set(s),c.set(l)}function p(){xr(s,l,y,_),y.clear(),_.clear(),d.set(s),c.set(l)}const A=new Set;function F(M){const w=M.detail.edge.id;A.has(w)?(A.delete(w),li(l,new Set([M.detail.edge.id]),ws)):(A.add(w),li(l,new Set([M.detail.edge.id]),ks)),c.set(l)}function D(M){h=M.key}function H(M){h=""}function O(M){R(parseInt(M.target.value))}fn(()=>{window.addEventListener("keydown",D),window.addEventListener("keyup",H)});function R(M){if(n(3,E=M),g[E]){const w=g[E];n(0,s=w.nodes),n(12,l=w.edges),m=w.connections,n(1,u=w.flowName),d.set(s),c.set(l)}}let Y={};function I(){E=Qs(this),n(3,E)}function W(M){d=M,n(2,d)}function v(M){c=M,n(4,c)}return t.$$set=M=>{e=Ce(Ce({},e),it(M)),n(11,o=Ie(e,i)),"nodes"in M&&n(0,s=M.nodes),"edges"in M&&n(12,l=M.edges),"text"in M&&n(13,a=M.text),"flowName"in M&&n(1,u=M.flowName),"selection"in M&&n(14,f=M.selection)},t.$$.update=()=>{t.$$.dirty[0]&8200&&a.length>0&&(n(5,g=jm(a)),R(E)),t.$$.dirty[0]&53261&&f&&f.nodeIds&&f.nodeIds.length&&f.flowIndex===E&&(xr(s,l,new Set(Y.nodeIds),new Set),d.set(s),n(15,Y=f),jr(s,l,new Set(f.nodeIds),new Set),d.set(s))},[s,u,d,E,c,g,r,k,p,F,O,o,l,a,f,Y,I,W,v]}class d1 extends ye{constructor(e){super(),_e(this,e,a1,s1,we,{nodes:0,edges:12,text:13,flowName:1,selection:14},null,[-1,-1])}}export{d1 as F};
