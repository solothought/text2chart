import{s as ce,e as P,d as A,f as I,h as F,k as p,l as N,w as d,m as L,o as w,R as B,n as Z,S as fe,t as R,j,p as K,v as z,T as X,U as Ee,r as G,V as ue,a as Ce,x as J}from"./scheduler.DPgjqrYG.js";import{e as Q}from"./FlowChart.-yWqMC2z.js";import{S as de,i as he}from"./index.C_aA0q2r.js";function Y(t,e,l){const s=t.slice();return s[32]=e[l],s}function Te(t){let e;return{c(){e=R("Select a flow")},l(l){e=j(l,"Select a flow")},m(l,s){L(l,e,s)},p:Z,d(l){l&&p(e)}}}function Se(t){var s;let e=(((s=t[7].find(t[18]))==null?void 0:s.name)||"Select a flow")+"",l;return{c(){l=R(e)},l(n){l=j(n,e)},m(n,i){L(n,l,i)},p(n,i){var o;i[0]&136&&e!==(e=(((o=n[7].find(n[18]))==null?void 0:o.name)||"Select a flow")+"")&&K(l,e)},d(n){n&&p(l)}}}function x(t){var n;let e=(((n=t[7].find(t[19]))==null?void 0:n.successPercentage)||0)+"",l,s;return{c(){l=R(e),s=R("%")},l(i){l=j(i,e),s=j(i,"%")},m(i,o){L(i,l,o),L(i,s,o)},p(i,o){var h;o[0]&136&&e!==(e=(((h=i[7].find(i[19]))==null?void 0:h.successPercentage)||0)+"")&&K(l,e)},d(i){i&&(p(l),p(s))}}}function $(t){let e,l="+",s,n;return{c(){e=P("button"),e.textContent=l,this.h()},l(i){e=I(i,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-frzuhg"&&(e.textContent=l),this.h()},h(){d(e,"class","add-flow-button svelte-1w9e0sh")},m(i,o){L(i,e,o),s||(n=B(e,"click",t[13]),s=!0)},p:Z,d(i){i&&p(e),s=!1,n()}}}function ee(t){let e,l,s,n,i,o,h="Sort By",C,_,S=t[1]==="name"?t[2]==="asc"?"Z▲":"A▼":"AZ",E,g,b,k,f,m,r=t[5]==="monitor"&&te(t),u=Q(t[11]),a=[];for(let c=0;c<u.length;c+=1)a[c]=oe(Y(t,u,c));return{c(){e=P("div"),l=P("div"),s=P("input"),n=A(),i=P("div"),o=P("div"),o.textContent=h,C=A(),_=P("div"),E=R(S),b=A(),r&&r.c(),k=A();for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var T=F(e);l=I(T,"DIV",{class:!0});var D=F(l);s=I(D,"INPUT",{type:!0,class:!0,placeholder:!0}),n=N(D),i=I(D,"DIV",{class:!0});var y=F(i);o=I(y,"DIV",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-14q2xjt"&&(o.textContent=h),C=N(y),_=I(y,"DIV",{role:!0,tabindex:!0,class:!0});var U=F(_);E=j(U,S),U.forEach(p),b=N(y),r&&r.l(y),y.forEach(p),D.forEach(p),k=N(T);for(let V=0;V<a.length;V+=1)a[V].l(T);T.forEach(p),this.h()},h(){d(s,"type","text"),d(s,"class","filter-input svelte-1w9e0sh"),d(s,"placeholder","Search for a flow"),d(o,"class","sort-icon-label svelte-1w9e0sh"),d(_,"role","button"),d(_,"tabindex","1"),d(_,"class",g="sort-icon "+(t[1]==="name"?"active":"")+" svelte-1w9e0sh"),d(i,"class","sort-icons svelte-1w9e0sh"),d(l,"class","filter-sort-container svelte-1w9e0sh"),d(e,"class","expanded-list svelte-1w9e0sh")},m(c,T){L(c,e,T),w(e,l),w(l,s),X(s,t[0]),w(l,n),w(l,i),w(i,o),w(i,C),w(i,_),w(_,E),w(i,b),r&&r.m(i,null),w(e,k);for(let D=0;D<a.length;D+=1)a[D]&&a[D].m(e,null);f||(m=[B(s,"input",t[20]),B(_,"click",t[21])],f=!0)},p(c,T){if(T[0]&1&&s.value!==c[0]&&X(s,c[0]),T[0]&6&&S!==(S=c[1]==="name"?c[2]==="asc"?"Z▲":"A▼":"AZ")&&K(E,S),T[0]&2&&g!==(g="sort-icon "+(c[1]==="name"?"active":"")+" svelte-1w9e0sh")&&d(_,"class",g),c[5]==="monitor"?r?r.p(c,T):(r=te(c),r.c(),r.m(i,null)):r&&(r.d(1),r=null),T[0]&34920){u=Q(c[11]);let D;for(D=0;D<u.length;D+=1){const y=Y(c,u,D);a[D]?a[D].p(y,T):(a[D]=oe(y),a[D].c(),a[D].m(e,null))}for(;D<a.length;D+=1)a[D].d(1);a.length=u.length}},d(c){c&&p(e),r&&r.d(),Ee(a,c),f=!1,G(m)}}}function te(t){let e,l=t[1]==="successPercentage"?t[2]==="asc"?"✔️▲":"✔️▼":"✔️",s,n,i,o,h=t[1]==="errors"?t[2]==="asc"?"🐞▲":"🐞▼":"🐞",C,_,S,E,g=t[1]==="avgExecutionTime"?t[2]==="asc"?"⌛▲":"⌛▼":"⌛",b,k,f,m;return{c(){e=P("div"),s=R(l),i=A(),o=P("div"),C=R(h),S=A(),E=P("div"),b=R(g),this.h()},l(r){e=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var u=F(e);s=j(u,l),u.forEach(p),i=N(r),o=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=F(o);C=j(a,h),a.forEach(p),S=N(r),E=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var c=F(E);b=j(c,g),c.forEach(p),this.h()},h(){d(e,"role","button"),d(e,"tabindex","2"),d(e,"class",n="sort-icon "+(t[1]==="successPercentage"?"active":"")+" svelte-1w9e0sh"),d(o,"role","button"),d(o,"tabindex","3"),d(o,"class",_="sort-icon "+(t[1]==="errors"?"active":"")+" svelte-1w9e0sh"),d(E,"role","button"),d(E,"tabindex","4"),d(E,"class",k="sort-icon "+(t[1]==="avgExecutionTime"?"active":"")+" svelte-1w9e0sh")},m(r,u){L(r,e,u),w(e,s),L(r,i,u),L(r,o,u),w(o,C),L(r,S,u),L(r,E,u),w(E,b),f||(m=[B(e,"click",t[22]),B(o,"click",t[23]),B(E,"click",t[24])],f=!0)},p(r,u){u[0]&6&&l!==(l=r[1]==="successPercentage"?r[2]==="asc"?"✔️▲":"✔️▼":"✔️")&&K(s,l),u[0]&2&&n!==(n="sort-icon "+(r[1]==="successPercentage"?"active":"")+" svelte-1w9e0sh")&&d(e,"class",n),u[0]&6&&h!==(h=r[1]==="errors"?r[2]==="asc"?"🐞▲":"🐞▼":"🐞")&&K(C,h),u[0]&2&&_!==(_="sort-icon "+(r[1]==="errors"?"active":"")+" svelte-1w9e0sh")&&d(o,"class",_),u[0]&6&&g!==(g=r[1]==="avgExecutionTime"?r[2]==="asc"?"⌛▲":"⌛▼":"⌛")&&K(b,g),u[0]&2&&k!==(k="sort-icon "+(r[1]==="avgExecutionTime"?"active":"")+" svelte-1w9e0sh")&&d(E,"class",k)},d(r){r&&(p(e),p(i),p(o),p(S),p(E)),f=!1,G(m)}}}function le(t){let e,l=(t[32].avgExecutionTime||0)+"",s,n;return{c(){e=P("div"),s=R(l),n=R(" ms"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=F(e);s=j(o,l),n=j(o," ms"),o.forEach(p),this.h()},h(){d(e,"class","avg-execution-time svelte-1w9e0sh")},m(i,o){L(i,e,o),w(e,s),w(e,n)},p(i,o){o[0]&2048&&l!==(l=(i[32].avgExecutionTime||0)+"")&&K(s,l)},d(i){i&&p(e)}}}function se(t){let e,l;return{c(){e=P("div"),this.h()},l(s){e=I(s,"DIV",{class:!0,style:!0,title:!0}),F(e).forEach(p),this.h()},h(){d(e,"class","flow-progress svelte-1w9e0sh"),J(e,"width",t[32].successPercentage+"%"),J(e,"background-color",re(t[32].successPercentage)),d(e,"title",l="Success Ratio: "+t[32].successPercentage+"%")},m(s,n){L(s,e,n)},p(s,n){n[0]&2048&&J(e,"width",s[32].successPercentage+"%"),n[0]&2048&&J(e,"background-color",re(s[32].successPercentage)),n[0]&2048&&l!==(l="Success Ratio: "+s[32].successPercentage+"%")&&d(e,"title",l)},d(s){s&&p(e)}}}function ie(t){let e,l=t[32].errors+"",s;return{c(){e=P("span"),s=R(l),this.h()},l(n){e=I(n,"SPAN",{class:!0});var i=F(e);s=j(i,l),i.forEach(p),this.h()},h(){d(e,"class","error-badge svelte-1w9e0sh")},m(n,i){L(n,e,i),w(e,s)},p(n,i){i[0]&2048&&l!==(l=n[32].errors+"")&&K(s,l)},d(n){n&&p(e)}}}function ne(t){let e,l="🗠",s,n;function i(){return t[25](t[32])}return{c(){e=P("span"),e.textContent=l,this.h()},l(o){e=I(o,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1dtarok"&&(e.textContent=l),this.h()},h(){d(e,"class","chart-button svelte-1w9e0sh")},m(o,h){L(o,e,h),s||(n=B(e,"click",ue(i)),s=!0)},p(o,h){t=o},d(o){o&&p(e),s=!1,n()}}}function oe(t){let e,l,s,n,i,o,h=t[32].name+"",C,_,S,E,g,b="✕",k,f,m,r,u=t[5]==="monitor"&&le(t),a=t[5]==="monitor"&&se(t),c=t[32].errors&&t[5]==="monitor"&&ie(t),T=t[5]==="monitor"&&ne(t);function D(){return t[26](t[32])}function y(){return t[27](t[32])}return{c(){e=P("div"),u&&u.c(),l=A(),s=P("div"),a&&a.c(),n=A(),i=P("div"),o=P("span"),C=R(h),_=A(),c&&c.c(),S=A(),T&&T.c(),E=A(),g=P("span"),g.textContent=b,f=A(),this.h()},l(U){e=I(U,"DIV",{class:!0});var V=F(e);u&&u.l(V),l=N(V),s=I(V,"DIV",{role:!0,tabindex:!0,class:!0});var W=F(s);a&&a.l(W),n=N(W),i=I(W,"DIV",{class:!0});var O=F(i);o=I(O,"SPAN",{class:!0});var H=F(o);C=j(H,h),H.forEach(p),_=N(O),c&&c.l(O),S=N(O),T&&T.l(O),E=N(O),g=I(O,"SPAN",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-ns3sug"&&(g.textContent=b),O.forEach(p),W.forEach(p),f=N(V),V.forEach(p),this.h()},h(){d(o,"class","flow-name svelte-1w9e0sh"),d(g,"class","remove-icon svelte-1w9e0sh"),d(i,"class","flow-content svelte-1w9e0sh"),d(s,"role","combobox"),d(s,"tabindex","0"),d(s,"class",k="flow-item "+(t[3]===t[32].id?"selected":"")+" svelte-1w9e0sh"),d(e,"class","flow-item-container svelte-1w9e0sh")},m(U,V){L(U,e,V),u&&u.m(e,null),w(e,l),w(e,s),a&&a.m(s,null),w(s,n),w(s,i),w(i,o),w(o,C),w(i,_),c&&c.m(i,null),w(i,S),T&&T.m(i,null),w(i,E),w(i,g),w(e,f),m||(r=[B(g,"click",ue(D)),B(s,"click",y)],m=!0)},p(U,V){t=U,t[5]==="monitor"?u?u.p(t,V):(u=le(t),u.c(),u.m(e,l)):u&&(u.d(1),u=null),t[5]==="monitor"?a?a.p(t,V):(a=se(t),a.c(),a.m(s,n)):a&&(a.d(1),a=null),V[0]&2048&&h!==(h=t[32].name+"")&&K(C,h),t[32].errors&&t[5]==="monitor"?c?c.p(t,V):(c=ie(t),c.c(),c.m(i,S)):c&&(c.d(1),c=null),t[5]==="monitor"?T?T.p(t,V):(T=ne(t),T.c(),T.m(i,E)):T&&(T.d(1),T=null),V[0]&2056&&k!==(k="flow-item "+(t[3]===t[32].id?"selected":"")+" svelte-1w9e0sh")&&d(s,"class",k)},d(U){U&&p(e),u&&u.d(),a&&a.d(),c&&c.d(),T&&T.d(),m=!1,G(r)}}}function ae(t){let e,l,s,n,i,o,h="Cancel",C,_,S="Submit",E,g;return{c(){e=P("div"),l=P("div"),s=P("input"),n=A(),i=P("div"),o=P("button"),o.textContent=h,C=A(),_=P("button"),_.textContent=S,this.h()},l(b){e=I(b,"DIV",{class:!0});var k=F(e);l=I(k,"DIV",{class:!0});var f=F(l);s=I(f,"INPUT",{type:!0,placeholder:!0,class:!0}),n=N(f),i=I(f,"DIV",{class:!0});var m=F(i);o=I(m,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-wfxeby"&&(o.textContent=h),C=N(m),_=I(m,"BUTTON",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-jjda3z"&&(_.textContent=S),m.forEach(p),f.forEach(p),k.forEach(p),this.h()},h(){d(s,"type","text"),d(s,"placeholder","Enter flow name"),d(s,"class","svelte-1w9e0sh"),d(o,"class","cancel svelte-1w9e0sh"),d(_,"class","submit svelte-1w9e0sh"),d(i,"class","popup-buttons svelte-1w9e0sh"),d(l,"class","popup svelte-1w9e0sh"),d(e,"class","popup-overlay svelte-1w9e0sh")},m(b,k){L(b,e,k),w(e,l),w(l,s),X(s,t[9]),w(l,n),w(l,i),w(i,o),w(i,C),w(i,_),E||(g=[B(s,"input",t[28]),B(o,"click",t[29]),B(_,"click",t[14])],E=!0)},p(b,k){k[0]&512&&s.value!==b[9]&&X(s,b[9])},d(b){b&&p(e),E=!1,G(g)}}}function De(t){let e,l,s,n,i,o,h,C,_,S,E;function g(a,c){return a[3]?Se:Te}let b=g(t),k=b(t),f=t[3]&&t[5]==="monitor"&&x(t),m=t[5]!=="monitor"&&$(t),r=t[10]&&ee(t),u=t[8]&&ae(t);return{c(){e=P("div"),l=P("div"),s=P("div"),n=P("span"),k.c(),i=A(),o=P("span"),f&&f.c(),h=A(),m&&m.c(),C=A(),r&&r.c(),_=A(),u&&u.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var c=F(e);l=I(c,"DIV",{class:!0});var T=F(l);s=I(T,"DIV",{class:!0});var D=F(s);n=I(D,"SPAN",{class:!0});var y=F(n);k.l(y),y.forEach(p),i=N(D),o=I(D,"SPAN",{class:!0});var U=F(o);f&&f.l(U),U.forEach(p),D.forEach(p),h=N(T),m&&m.l(T),T.forEach(p),C=N(c),r&&r.l(c),_=N(c),u&&u.l(c),c.forEach(p),this.h()},h(){d(n,"class","flow-name svelte-1w9e0sh"),d(o,"class","flow-percentage svelte-1w9e0sh"),d(s,"class","selected-flow svelte-1w9e0sh"),d(l,"class","flow-header svelte-1w9e0sh"),d(e,"class","flow-list svelte-1w9e0sh")},m(a,c){L(a,e,c),w(e,l),w(l,s),w(s,n),k.m(n,null),w(s,i),w(s,o),f&&f.m(o,null),w(l,h),m&&m.m(l,null),w(e,C),r&&r.m(e,null),w(e,_),u&&u.m(e,null),S||(E=B(s,"click",t[16]),S=!0)},p(a,c){b===(b=g(a))&&k?k.p(a,c):(k.d(1),k=b(a),k&&(k.c(),k.m(n,null))),a[3]&&a[5]==="monitor"?f?f.p(a,c):(f=x(a),f.c(),f.m(o,null)):f&&(f.d(1),f=null),a[5]!=="monitor"?m?m.p(a,c):(m=$(a),m.c(),m.m(l,null)):m&&(m.d(1),m=null),a[10]?r?r.p(a,c):(r=ee(a),r.c(),r.m(e,_)):r&&(r.d(1),r=null),a[8]?u?u.p(a,c):(u=ae(a),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:Z,o:Z,d(a){a&&p(e),k.d(),f&&f.d(),m&&m.d(),r&&r.d(),u&&u.d(),S=!1,E()}}}function re(t){return t>90?"#4caf50":t<50?"#ff4444":"#ffc107"}function Pe(t,e,l){let s,n,i,o=Z,h=()=>(o(),o=Ce(_,v=>l(7,i=v)),_);t.$$.on_destroy.push(()=>o());const C=fe();let{flows:_}=e;h();let{selectedFlowId:S}=e,{filterText:E=""}=e,{sortBy:g="name"}=e,{sortDirection:b="asc"}=e,{mode:k="editor"}=e,f=!1,m="",r=!1;function u(v){return i.some(q=>q.name.toLowerCase()===v.toLowerCase())}function a(v){v===g?l(2,b=b==="asc"?"desc":"asc"):(l(1,g=v),l(2,b="asc"))}function c(v){console.log("change to",v),l(3,S=v),l(10,r=!1),C("flowSelected",{flowId:v})}function T(){l(8,f=!0)}function D(){const v=m.trim();v&&(u(v)?alert("Flow with this name already exists"):(C("addFlow",{name:v}),l(9,m=""),l(8,f=!1)))}function y(v){C("removeFlow",{flowId:v})}function U(){l(10,r=!r)}const V=v=>v.id===S,W=v=>v.id===S;function O(){E=this.value,l(0,E)}const H=()=>a("name"),ve=()=>a("successPercentage"),_e=()=>a("errors"),me=()=>a("avgExecutionTime"),we=v=>alert("Open charts for "+v.name),pe=v=>y(v.id),ge=v=>c(v.id);function be(){m=this.value,l(9,m)}const ke=()=>l(8,f=!1);return t.$$set=v=>{"flows"in v&&h(l(4,_=v.flows)),"selectedFlowId"in v&&l(3,S=v.selectedFlowId),"filterText"in v&&l(0,E=v.filterText),"sortBy"in v&&l(1,g=v.sortBy),"sortDirection"in v&&l(2,b=v.sortDirection),"mode"in v&&l(5,k=v.mode)},t.$$.update=()=>{t.$$.dirty[0]&129&&l(17,s=i.filter(v=>v.name.toLowerCase().includes(E.toLowerCase()))),t.$$.dirty[0]&131078&&l(11,n=s.sort((v,q)=>g==="name"?b==="asc"?v.name.localeCompare(q.name):q.name.localeCompare(v.name):g==="successPercentage"?b==="asc"?(v.successPercentage||0)-(q.successPercentage||0):(q.successPercentage||0)-(v.successPercentage||0):g==="errors"?b==="asc"?(v.errors||0)-(q.errors||0):(q.errors||0)-(v.errors||0):g==="avgExecutionTime"?b==="asc"?(v.avgExecutionTime||0)-(q.avgExecutionTime||0):(q.avgExecutionTime||0)-(v.avgExecutionTime||0):0))},[E,g,b,S,_,k,c,i,f,m,r,n,a,T,D,y,U,s,V,W,O,H,ve,_e,me,we,pe,ge,be,ke]}class Re extends de{constructor(e){super(),he(this,e,Pe,De,ce,{flows:4,selectedFlowId:3,filterText:0,sortBy:1,sortDirection:2,mode:5,handleFlowSelection:6},null,[-1,-1])}get handleFlowSelection(){return this.$$.ctx[6]}}function Ie(t,e,l){const s=t.value,n=t.selectionStart,i=t.selectionEnd,o=s.split(`
`);let h=0,C=0,_=0,S=0,E=-1;for(let g=0;g<o.length;g++){const b=o[g].trim();b.startsWith("FLOW:")?(S=-1,E++):b.length!==0&&b[0]!=="#"&&S++;const k=o[g].length+1;if(_<=n&&_+k>n&&h===0&&(h=S),_<=i&&_+k>i){C=S;break}_+=k}return e==="ArrowDown"?l?C++:(C++,h++):e==="ArrowUp"&&(l||C--,h--),h>C&&(h=C),{flowIndex:E,nodeIds:Fe(h,C)}}function Fe(t,e){const l=t<=e?1:-1,s=[];for(let n=t;l>0?n<=e:n>=e;n+=l)s.push(String(n));return s}function Ve(t){const e=t.target;let l=e.value;const s=e.selectionStart,n=e.selectionEnd,i=l.substring(0,s),o=l.substring(n);if(t.key==="Enter"){t.preventDefault();const C=(i.split(`
`).pop()||"").match(/^\s*/)[0]||"";e.value=`${i}
${C}${o}`,M(e,i.length+1+C.length)}else if(t.key==="Tab"){t.preventDefault();const h="  ";e.value=`${i}${h}${o}`,M(e,i.length+h.length)}else t.ctrlKey&&t.key==="/"&&(t.preventDefault(),Le(e,s,n,i))}function M(t,e){t.setSelectionRange(e,e)}function Le(t,e,l,s){let n=t.value,i=n.split(`
`);const o=n.substring(0,e).split(`
`).length-1;let h=0;i[o].startsWith("#")?(i[o]=i[o].substr(1),h=-1):(i[o]=`#${i[o]}`,h=1),n=i.join(`
`),t.value=n,M(t,s.length+h)}function Ae(t){let e,l,s;return{c(){e=P("textarea"),this.h()},l(n){e=I(n,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),F(e).forEach(p),this.h()},h(){d(e,"id","text-area"),d(e,"placeholder",t[1]),e.disabled=t[2],d(e,"class","svelte-dx8x5l")},m(n,i){L(n,e,i),X(e,t[0]),l||(s=[B(e,"input",t[6]),B(e,"keyup",t[4]),B(e,"keydown",t[3]),B(e,"mouseup",t[5])],l=!0)},p(n,[i]){i&2&&d(e,"placeholder",n[1]),i&4&&(e.disabled=n[2]),i&1&&X(e,n[0])},i:Z,o:Z,d(n){n&&p(e),l=!1,G(s)}}}function Ne(t,e,l){let{text:s=""}=e,{placeholder:n=""}=e,{disabled:i=!1}=e;const o=fe();let h="";function C(f){o("textChange",{text:f})}function _(f){o("lineSelection",{selectedLines:f})}function S(f){f.target.id==="text-area"&&(E(f),Ve(f))}function E(f){const m=Ie(f.target,f.key,f.shiftKey);_(m)}function g(f){f.target.id==="text-area"&&(s.length!==h.length||s!==h)&&(h=s,C(s))}function b(f){f.target.id==="text-area"&&E(f)}function k(){s=this.value,l(0,s)}return t.$$set=f=>{"text"in f&&l(0,s=f.text),"placeholder"in f&&l(1,n=f.placeholder),"disabled"in f&&l(2,i=f.disabled)},[s,n,i,S,g,b,k]}class je extends de{constructor(e){super(),he(this,e,Ne,Ae,ce,{text:0,placeholder:1,disabled:2})}}export{Re as F,je as T};
