import{r as ct,s as _e,c as Ue,e as ze,f as Oe,h as U,k as z,w as b,W as ye,m as J,Q as Me,u as Ze,g as Ge,b as Je,X as Qn,q as Q,d as ve,t as Mt,l as Ee,j as zt,p as qt,Y as Ie,Z as Se,_ as nt,$ as qe,i as Ae,a0 as X,x as ce,a1 as te,z as Ne,a2 as ne,a3 as _n,y as Cn,a4 as jn,R as Pn,B as at,a5 as sl,a6 as yi,C as xn,a7 as Ce,o as x,n as Pe,a8 as Lt,v as lo,H as al,a9 as Qs,aa as js,ab as xs,a as zo,ac as $n,ad as Oo,T as $s,S as ea,ae as ta,A as na,V as hn}from"./scheduler.nsP0iWbW.js";import{a as Y,t as W,S as ge,i as me,b as oe,d as se,m as re,e as le,g as Be,c as We,f as gn}from"./index.DhY-cv18.js";import{w as ue,r as ot,d as $t}from"./index.3F1DioSA.js";const ia=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function yt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _i(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function bi(t,e,n,i,o,r,s,l,a,u,f,c){let d=t.length,h=r.length,y=d;const m={};for(;y--;)m[t[y].key]=y;const _=[],g=new Map,E=new Map,v=[];for(y=h;y--;){const P=c(o,r,y),N=n(P);let O=s.get(N);O?v.push(()=>O.p(P,e)):(O=u(N,P),O.c()),g.set(N,_[y]=O),N in m&&E.set(N,Math.abs(y-m[N]))}const S=new Set,p=new Set;function D(P){W(P,1),P.m(l,f),s.set(P.key,P),f=P.first,h--}for(;d&&h;){const P=_[h-1],N=t[d-1],O=P.key,L=N.key;P===N?(f=P.first,d--,h--):g.has(L)?!s.has(O)||S.has(O)?D(P):p.has(L)?d--:E.get(O)>E.get(L)?(p.add(O),D(P)):(S.add(L),d--):(a(N,s),d--)}for(;d--;){const P=t[d];g.has(P.key)||a(P,s)}for(;h;)D(_[h-1]);return ct(v),_}function ft(t,e){const n={},i={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],l=e[r];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)o[a]||(n[a]=l[a],o[a]=1);t[r]=l}else for(const a in s)o[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Xt(t){return typeof t=="object"&&t!==null?t:{}}function oa(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),e&&(i.href=e),o.href=t,o.href}const ra=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function pt(t){const e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function ei(t,e){const i=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function la(t){const e=ei(t,"border-left-width"),n=ei(t,"border-right-width");return t.clientWidth+e+n}function sa(t){const e=ei(t,"border-top-width"),n=ei(t,"border-bottom-width");return t.clientHeight+e+n}function ul(t,e={}){const n=e.width||la(t),i=e.height||sa(t);return{width:n,height:i}}function aa(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const et=16384;function ua(t){(t.width>et||t.height>et)&&(t.width>et&&t.height>et?t.width>t.height?(t.height*=et/t.width,t.width=et):(t.width*=et/t.height,t.height=et):t.width>et?(t.height*=et/t.width,t.width=et):(t.width*=et/t.height,t.height=et))}function ti(t){return new Promise((e,n)=>{const i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}async function fa(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function ca(t,e,n){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),r=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),o.appendChild(r),r.appendChild(t),fa(o)}const $e=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||$e(n,e)};function da(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function ha(t){return pt(t).map(e=>{const n=t.getPropertyValue(e),i=t.getPropertyPriority(e);return`${e}: ${n}${i?" !important":""};`}).join(" ")}function ga(t,e,n){const i=`.${t}:${e}`,o=n.cssText?da(n):ha(n);return document.createTextNode(`${i}{${o}}`)}function No(t,e,n){const i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(o===""||o==="none")return;const r=ra();try{e.className=`${e.className} ${r}`}catch{return}const s=document.createElement("style");s.appendChild(ga(r,n,i)),e.appendChild(s)}function ma(t,e){No(t,e,":before"),No(t,e,":after")}const Do="application/font-woff",To="image/jpeg",ya={woff:Do,woff2:Do,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:To,jpeg:To,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function _a(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function so(t){const e=_a(t).toLowerCase();return ya[e]||""}function ba(t){return t.split(/,/)[1]}function Zi(t){return t.search(/^(data:)/)!==-1}function wa(t,e){return`data:${e};base64,${t}`}async function fl(t,e,n){const i=await fetch(t,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise((r,s)=>{const l=new FileReader;l.onerror=s,l.onloadend=()=>{try{r(n({res:i,result:l.result}))}catch(a){s(a)}},l.readAsDataURL(o)})}const Ai={};function ka(t,e,n){let i=t.replace(/\?.*/,"");return n&&(i=t),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function ao(t,e,n){const i=ka(t,e,n.includeQueryParams);if(Ai[i]!=null)return Ai[i];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let o;try{const r=await fl(t,n.fetchRequestInit,({res:s,result:l})=>(e||(e=s.headers.get("Content-Type")||""),ba(l)));o=wa(r,e)}catch(r){o=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;r&&(s=typeof r=="string"?r:r.message),s&&console.warn(s)}return Ai[i]=o,o}async function va(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ti(e)}async function Ea(t,e){if(t.currentSrc){const r=document.createElement("canvas"),s=r.getContext("2d");r.width=t.clientWidth,r.height=t.clientHeight,s==null||s.drawImage(t,0,0,r.width,r.height);const l=r.toDataURL();return ti(l)}const n=t.poster,i=so(n),o=await ao(n,i,e);return ti(o)}async function Sa(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await wi(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function pa(t,e){return $e(t,HTMLCanvasElement)?va(t):$e(t,HTMLVideoElement)?Ea(t,e):$e(t,HTMLIFrameElement)?Sa(t):t.cloneNode(!1)}const Ca=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function Pa(t,e,n){var i,o;let r=[];return Ca(t)&&t.assignedNodes?r=pt(t.assignedNodes()):$e(t,HTMLIFrameElement)&&(!((i=t.contentDocument)===null||i===void 0)&&i.body)?r=pt(t.contentDocument.body.childNodes):r=pt(((o=t.shadowRoot)!==null&&o!==void 0?o:t).childNodes),r.length===0||$e(t,HTMLVideoElement)||await r.reduce((s,l)=>s.then(()=>wi(l,n)).then(a=>{a&&e.appendChild(a)}),Promise.resolve()),e}function Ma(t,e){const n=e.style;if(!n)return;const i=window.getComputedStyle(t);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):pt(i).forEach(o=>{let r=i.getPropertyValue(o);o==="font-size"&&r.endsWith("px")&&(r=`${Math.floor(parseFloat(r.substring(0,r.length-2)))-.1}px`),$e(t,HTMLIFrameElement)&&o==="display"&&r==="inline"&&(r="block"),o==="d"&&e.getAttribute("d")&&(r=`path(${e.getAttribute("d")})`),n.setProperty(o,r,i.getPropertyPriority(o))})}function za(t,e){$e(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),$e(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function Oa(t,e){if($e(t,HTMLSelectElement)){const n=e,i=Array.from(n.children).find(o=>t.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function Na(t,e){return $e(e,Element)&&(Ma(t,e),ma(t,e),za(t,e),Oa(t,e)),e}async function Da(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const i={};for(let r=0;r<n.length;r++){const l=n[r].getAttribute("xlink:href");if(l){const a=t.querySelector(l),u=document.querySelector(l);!a&&u&&!i[l]&&(i[l]=await wi(u,e,!0))}}const o=Object.values(i);if(o.length){const r="http://www.w3.org/1999/xhtml",s=document.createElementNS(r,"svg");s.setAttribute("xmlns",r),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const l=document.createElementNS(r,"defs");s.appendChild(l);for(let a=0;a<o.length;a++)l.appendChild(o[a]);t.appendChild(s)}return t}async function wi(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(i=>pa(i,e)).then(i=>Pa(t,i,e)).then(i=>Na(t,i)).then(i=>Da(i,e))}const cl=/url\((['"]?)([^'"]+?)\1\)/g,Ta=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ia=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Aa(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Ha(t){const e=[];return t.replace(cl,(n,i,o)=>(e.push(o),n)),e.filter(n=>!Zi(n))}async function La(t,e,n,i,o){try{const r=n?oa(e,n):e,s=so(e);let l;return o||(l=await ao(r,s,i)),t.replace(Aa(e),`$1${l}$3`)}catch{}return t}function Ra(t,{preferredFontFormat:e}){return e?t.replace(Ia,n=>{for(;;){const[i,,o]=Ta.exec(n)||[];if(!o)return"";if(o===e)return`src: ${i};`}}):t}function dl(t){return t.search(cl)!==-1}async function hl(t,e,n){if(!dl(t))return t;const i=Ra(t,n);return Ha(i).reduce((r,s)=>r.then(l=>La(l,s,e,n)),Promise.resolve(i))}async function Hn(t,e,n){var i;const o=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(t);if(o){const r=await hl(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function Va(t,e){await Hn("background",t,e)||await Hn("background-image",t,e),await Hn("mask",t,e)||await Hn("mask-image",t,e)}async function Ba(t,e){const n=$e(t,HTMLImageElement);if(!(n&&!Zi(t.src))&&!($e(t,SVGImageElement)&&!Zi(t.href.baseVal)))return;const i=n?t.src:t.href.baseVal,o=await ao(i,so(i),e);await new Promise((r,s)=>{t.onload=r,t.onerror=s;const l=t;l.decode&&(l.decode=r),l.loading==="lazy"&&(l.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o})}async function Wa(t,e){const i=pt(t.childNodes).map(o=>gl(o,e));await Promise.all(i).then(()=>t)}async function gl(t,e){$e(t,Element)&&(await Va(t,e),await Ba(t,e),await Wa(t,e))}function Xa(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const i=e.style;return i!=null&&Object.keys(i).forEach(o=>{n[o]=i[o]}),t}const Io={};async function Ao(t){let e=Io[t];if(e!=null)return e;const i=await(await fetch(t)).text();return e={url:t,cssText:i},Io[t]=e,e}async function Ho(t,e){let n=t.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let l=s.replace(i,"$1");return l.startsWith("https://")||(l=new URL(l,t.url).href),fl(l,e.fetchRequestInit,({result:a})=>(n=n.replace(s,`url(${a})`),[s,a]))});return Promise.all(r).then(()=>n)}function Lo(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let i=t.replace(n,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const a=o.exec(i);if(a===null)break;e.push(a[0])}i=i.replace(o,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(s,"gi");for(;;){let a=r.exec(i);if(a===null){if(a=l.exec(i),a===null)break;r.lastIndex=l.lastIndex}else l.lastIndex=r.lastIndex;e.push(a[0])}return e}async function Fa(t,e){const n=[],i=[];return t.forEach(o=>{if("cssRules"in o)try{pt(o.cssRules||[]).forEach((r,s)=>{if(r.type===CSSRule.IMPORT_RULE){let l=s+1;const a=r.href,u=Ao(a).then(f=>Ho(f,e)).then(f=>Lo(f).forEach(c=>{try{o.insertRule(c,c.startsWith("@import")?l+=1:o.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:c,error:d})}})).catch(f=>{console.error("Error loading remote css",f.toString())});i.push(u)}})}catch(r){const s=t.find(l=>l.href==null)||document.styleSheets[0];o.href!=null&&i.push(Ao(o.href).then(l=>Ho(l,e)).then(l=>Lo(l).forEach(a=>{s.insertRule(a,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",r)}}),Promise.all(i).then(()=>(t.forEach(o=>{if("cssRules"in o)try{pt(o.cssRules||[]).forEach(r=>{n.push(r)})}catch(r){console.error(`Error while reading CSS rules from ${o.href}`,r)}}),n))}function Ya(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>dl(e.style.getPropertyValue("src")))}async function Ka(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=pt(t.ownerDocument.styleSheets),i=await Fa(n,e);return Ya(i)}async function qa(t,e){const n=await Ka(t,e);return(await Promise.all(n.map(o=>{const r=o.parentStyleSheet?o.parentStyleSheet.href:null;return hl(o.cssText,r,e)}))).join(`
`)}async function Ua(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await qa(t,e);if(n){const i=document.createElement("style"),o=document.createTextNode(n);i.appendChild(o),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}}async function Za(t,e={}){const{width:n,height:i}=ul(t,e),o=await wi(t,e,!0);return await Ua(o,e),await gl(o,e),Xa(o,e),await ca(o,n,i)}async function Ga(t,e={}){const{width:n,height:i}=ul(t,e),o=await Za(t,e),r=await ti(o),s=document.createElement("canvas"),l=s.getContext("2d"),a=e.pixelRatio||aa(),u=e.canvasWidth||n,f=e.canvasHeight||i;return s.width=u*a,s.height=f*a,e.skipAutoScale||ua(s),s.style.width=`${u}`,s.style.height=`${f}`,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,s.width,s.height)),l.drawImage(r,0,0,s.width,s.height),s}async function Ja(t,e={}){return(await Ga(t,e)).toDataURL()}function De(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=De(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Qa={value:()=>{}};function ki(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new qn(n)}function qn(t){this._=t}function ja(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}qn.prototype=ki.prototype={constructor:qn,on:function(t,e){var n=this._,i=ja(t+"",n),o,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((o=(t=i[r]).type)&&(o=xa(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<s;)if(o=(t=i[r]).type)n[o]=Ro(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Ro(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qn(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,r;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};function xa(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function Ro(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=Qa,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Gi="http://www.w3.org/1999/xhtml";const Vo={svg:"http://www.w3.org/2000/svg",xhtml:Gi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vi(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Vo.hasOwnProperty(e)?{space:Vo[e],local:t}:t}function $a(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gi&&e.documentElement.namespaceURI===Gi?e.createElement(t):e.createElementNS(n,t)}}function eu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ml(t){var e=vi(t);return(e.local?eu:$a)(e)}function tu(){}function uo(t){return t==null?tu:function(){return this.querySelector(t)}}function nu(t){typeof t!="function"&&(t=uo(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=new Array(s),a,u,f=0;f<s;++f)(a=r[f])&&(u=t.call(a,a.__data__,f,r))&&("__data__"in a&&(u.__data__=a.__data__),l[f]=u);return new tt(i,this._parents)}function iu(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ou(){return[]}function yl(t){return t==null?ou:function(){return this.querySelectorAll(t)}}function ru(t){return function(){return iu(t.apply(this,arguments))}}function lu(t){typeof t=="function"?t=ru(t):t=yl(t);for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var s=e[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),o.push(a));return new tt(i,o)}function _l(t){return function(){return this.matches(t)}}function bl(t){return function(e){return e.matches(t)}}var su=Array.prototype.find;function au(t){return function(){return su.call(this.children,t)}}function uu(){return this.firstElementChild}function fu(t){return this.select(t==null?uu:au(typeof t=="function"?t:bl(t)))}var cu=Array.prototype.filter;function du(){return Array.from(this.children)}function hu(t){return function(){return cu.call(this.children,t)}}function gu(t){return this.selectAll(t==null?du:hu(typeof t=="function"?t:bl(t)))}function mu(t){typeof t!="function"&&(t=_l(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&t.call(a,a.__data__,u,r)&&l.push(a);return new tt(i,this._parents)}function wl(t){return new Array(t.length)}function yu(){return new tt(this._enter||this._groups.map(wl),this._parents)}function ni(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ni.prototype={constructor:ni,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _u(t){return function(){return t}}function bu(t,e,n,i,o,r){for(var s=0,l,a=e.length,u=r.length;s<u;++s)(l=e[s])?(l.__data__=r[s],i[s]=l):n[s]=new ni(t,r[s]);for(;s<a;++s)(l=e[s])&&(o[s]=l)}function wu(t,e,n,i,o,r,s){var l,a,u=new Map,f=e.length,c=r.length,d=new Array(f),h;for(l=0;l<f;++l)(a=e[l])&&(d[l]=h=s.call(a,a.__data__,l,e)+"",u.has(h)?o[l]=a:u.set(h,a));for(l=0;l<c;++l)h=s.call(t,r[l],l,r)+"",(a=u.get(h))?(i[l]=a,a.__data__=r[l],u.delete(h)):n[l]=new ni(t,r[l]);for(l=0;l<f;++l)(a=e[l])&&u.get(d[l])===a&&(o[l]=a)}function ku(t){return t.__data__}function vu(t,e){if(!arguments.length)return Array.from(this,ku);var n=e?wu:bu,i=this._parents,o=this._groups;typeof t!="function"&&(t=_u(t));for(var r=o.length,s=new Array(r),l=new Array(r),a=new Array(r),u=0;u<r;++u){var f=i[u],c=o[u],d=c.length,h=Eu(t.call(f,f&&f.__data__,u,i)),y=h.length,m=l[u]=new Array(y),_=s[u]=new Array(y),g=a[u]=new Array(d);n(f,c,m,_,g,h,e);for(var E=0,v=0,S,p;E<y;++E)if(S=m[E]){for(E>=v&&(v=E+1);!(p=_[v])&&++v<y;);S._next=p||null}}return s=new tt(s,i),s._enter=l,s._exit=a,s}function Eu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Su(){return new tt(this._exit||this._groups.map(wl),this._parents)}function pu(t,e,n){var i=this.enter(),o=this,r=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?r.remove():n(r),i&&o?i.merge(o).order():o}function Cu(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,r=i.length,s=Math.min(o,r),l=new Array(o),a=0;a<s;++a)for(var u=n[a],f=i[a],c=u.length,d=l[a]=new Array(c),h,y=0;y<c;++y)(h=u[y]||f[y])&&(d[y]=h);for(;a<o;++a)l[a]=n[a];return new tt(l,this._parents)}function Pu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,r=i[o],s;--o>=0;)(s=i[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Mu(t){t||(t=zu);function e(c,d){return c&&d?t(c.__data__,d.__data__):!c-!d}for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s=n[r],l=s.length,a=o[r]=new Array(l),u,f=0;f<l;++f)(u=s[f])&&(a[f]=u);a.sort(e)}return new tt(o,this._parents).order()}function zu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ou(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Nu(){return Array.from(this)}function Du(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null}function Tu(){let t=0;for(const e of this)++t;return t}function Iu(){return!this.node()}function Au(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],r=0,s=o.length,l;r<s;++r)(l=o[r])&&t.call(l,l.__data__,r,o);return this}function Hu(t){return function(){this.removeAttribute(t)}}function Lu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ru(t,e){return function(){this.setAttribute(t,e)}}function Vu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Bu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Wu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Xu(t,e){var n=vi(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Lu:Hu:typeof e=="function"?n.local?Wu:Bu:n.local?Vu:Ru)(n,e))}function kl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fu(t){return function(){this.style.removeProperty(t)}}function Yu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ku(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function qu(t,e,n){return arguments.length>1?this.each((e==null?Fu:typeof e=="function"?Ku:Yu)(t,e,n??"")):on(this.node(),t)}function on(t,e){return t.style.getPropertyValue(e)||kl(t).getComputedStyle(t,null).getPropertyValue(e)}function Uu(t){return function(){delete this[t]}}function Zu(t,e){return function(){this[t]=e}}function Gu(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ju(t,e){return arguments.length>1?this.each((e==null?Uu:typeof e=="function"?Gu:Zu)(t,e)):this.node()[t]}function vl(t){return t.trim().split(/^|\s+/)}function fo(t){return t.classList||new El(t)}function El(t){this._node=t,this._names=vl(t.getAttribute("class")||"")}El.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Sl(t,e){for(var n=fo(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function pl(t,e){for(var n=fo(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function Qu(t){return function(){Sl(this,t)}}function ju(t){return function(){pl(this,t)}}function xu(t,e){return function(){(e.apply(this,arguments)?Sl:pl)(this,t)}}function $u(t,e){var n=vl(t+"");if(arguments.length<2){for(var i=fo(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?xu:e?Qu:ju)(n,e))}function ef(){this.textContent=""}function tf(t){return function(){this.textContent=t}}function nf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function of(t){return arguments.length?this.each(t==null?ef:(typeof t=="function"?nf:tf)(t)):this.node().textContent}function rf(){this.innerHTML=""}function lf(t){return function(){this.innerHTML=t}}function sf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function af(t){return arguments.length?this.each(t==null?rf:(typeof t=="function"?sf:lf)(t)):this.node().innerHTML}function uf(){this.nextSibling&&this.parentNode.appendChild(this)}function ff(){return this.each(uf)}function cf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function df(){return this.each(cf)}function hf(t){var e=typeof t=="function"?t:ml(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function gf(){return null}function mf(t,e){var n=typeof t=="function"?t:ml(t),i=e==null?gf:typeof e=="function"?e:uo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function yf(){var t=this.parentNode;t&&t.removeChild(this)}function _f(){return this.each(yf)}function bf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function kf(t){return this.select(t?wf:bf)}function vf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ef(t){return function(e){t.call(this,e,this.__data__)}}function Sf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function pf(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,r;n<o;++n)r=e[n],(!t.type||r.type===t.type)&&r.name===t.name?this.removeEventListener(r.type,r.listener,r.options):e[++i]=r;++i?e.length=i:delete this.__on}}}function Cf(t,e,n){return function(){var i=this.__on,o,r=Ef(e);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=e;return}}this.addEventListener(t.type,r,n),o={type:t.type,name:t.name,value:e,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Pf(t,e,n){var i=Sf(t+""),o,r=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,f;a<u;++a)for(o=0,f=l[a];o<r;++o)if((s=i[o]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?Cf:pf,o=0;o<r;++o)this.each(l(i[o],e,n));return this}function Cl(t,e,n){var i=kl(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Mf(t,e){return function(){return Cl(this,t,e)}}function zf(t,e){return function(){return Cl(this,t,e.apply(this,arguments))}}function Of(t,e){return this.each((typeof e=="function"?zf:Mf)(t,e))}function*Nf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length,s;o<r;++o)(s=i[o])&&(yield s)}var Pl=[null];function tt(t,e){this._groups=t,this._parents=e}function Mn(){return new tt([[document.documentElement]],Pl)}function Df(){return this}tt.prototype=Mn.prototype={constructor:tt,select:nu,selectAll:lu,selectChild:fu,selectChildren:gu,filter:mu,data:vu,enter:yu,exit:Su,join:pu,merge:Cu,selection:Df,order:Pu,sort:Mu,call:Ou,nodes:Nu,node:Du,size:Tu,empty:Iu,each:Au,attr:Xu,style:qu,property:Ju,classed:$u,text:of,html:af,raise:ff,lower:df,append:hf,insert:mf,remove:_f,clone:kf,datum:vf,on:Pf,dispatch:Of,[Symbol.iterator]:Nf};function it(t){return typeof t=="string"?new tt([[document.querySelector(t)]],[document.documentElement]):new tt([[t]],Pl)}function Tf(t){let e;for(;e=t.sourceEvent;)t=e;return t}function rt(t,e){if(t=Tf(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const If={passive:!1},bn={capture:!0,passive:!1};function Hi(t){t.stopImmediatePropagation()}function en(t){t.preventDefault(),t.stopImmediatePropagation()}function Ml(t){var e=t.document.documentElement,n=it(t).on("dragstart.drag",en,bn);"onselectstart"in e?n.on("selectstart.drag",en,bn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zl(t,e){var n=t.document.documentElement,i=it(t).on("dragstart.drag",null);e&&(i.on("click.drag",en,bn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ln=t=>()=>t;function Ji(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:r,x:s,y:l,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Ji.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Af(t){return!t.ctrlKey&&!t.button}function Hf(){return this.parentNode}function Lf(t,e){return e??{x:t.x,y:t.y}}function Rf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vf(){var t=Af,e=Hf,n=Lf,i=Rf,o={},r=ki("start","drag","end"),s=0,l,a,u,f,c=0;function d(S){S.on("mousedown.drag",h).filter(i).on("touchstart.drag",_).on("touchmove.drag",g,If).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(S,p){if(!(f||!t.call(this,S,p))){var D=v(this,e.call(this,S,p),S,p,"mouse");D&&(it(S.view).on("mousemove.drag",y,bn).on("mouseup.drag",m,bn),Ml(S.view),Hi(S),u=!1,l=S.clientX,a=S.clientY,D("start",S))}}function y(S){if(en(S),!u){var p=S.clientX-l,D=S.clientY-a;u=p*p+D*D>c}o.mouse("drag",S)}function m(S){it(S.view).on("mousemove.drag mouseup.drag",null),zl(S.view,u),en(S),o.mouse("end",S)}function _(S,p){if(t.call(this,S,p)){var D=S.changedTouches,P=e.call(this,S,p),N=D.length,O,L;for(O=0;O<N;++O)(L=v(this,P,S,p,D[O].identifier,D[O]))&&(Hi(S),L("start",S,D[O]))}}function g(S){var p=S.changedTouches,D=p.length,P,N;for(P=0;P<D;++P)(N=o[p[P].identifier])&&(en(S),N("drag",S,p[P]))}function E(S){var p=S.changedTouches,D=p.length,P,N;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),P=0;P<D;++P)(N=o[p[P].identifier])&&(Hi(S),N("end",S,p[P]))}function v(S,p,D,P,N,O){var L=r.copy(),T=rt(O||D,p),R,F,k;if((k=n.call(S,new Ji("beforestart",{sourceEvent:D,target:d,identifier:N,active:s,x:T[0],y:T[1],dx:0,dy:0,dispatch:L}),P))!=null)return R=k.x-T[0]||0,F=k.y-T[1]||0,function A(w,C,I){var H=T,K;switch(w){case"start":o[N]=A,K=s++;break;case"end":delete o[N],--s;case"drag":T=rt(I||C,p),K=s;break}L.call(w,S,new Ji(w,{sourceEvent:C,subject:k,target:d,identifier:N,active:K,x:T[0]+R,y:T[1]+F,dx:T[0]-H[0],dy:T[1]-H[1],dispatch:L}),P)}}return d.filter=function(S){return arguments.length?(t=typeof S=="function"?S:Ln(!!S),d):t},d.container=function(S){return arguments.length?(e=typeof S=="function"?S:Ln(S),d):e},d.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Ln(S),d):n},d.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Ln(!!S),d):i},d.on=function(){var S=r.on.apply(r,arguments);return S===r?d:S},d.clickDistance=function(S){return arguments.length?(c=(S=+S)*S,d):Math.sqrt(c)},d}function co(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ol(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function zn(){}var wn=.7,ii=1/wn,tn="\\s*([+-]?\\d+)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bf=/^#([0-9a-f]{3,8})$/,Wf=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),Xf=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Ff=new RegExp(`^rgba\\(${tn},${tn},${tn},${kn}\\)$`),Yf=new RegExp(`^rgba\\(${gt},${gt},${gt},${kn}\\)$`),Kf=new RegExp(`^hsl\\(${kn},${gt},${gt}\\)$`),qf=new RegExp(`^hsla\\(${kn},${gt},${gt},${kn}\\)$`),Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};co(zn,vn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wo,formatHex:Wo,formatHex8:Uf,formatHsl:Zf,formatRgb:Xo,toString:Xo});function Wo(){return this.rgb().formatHex()}function Uf(){return this.rgb().formatHex8()}function Zf(){return Nl(this).formatHsl()}function Xo(){return this.rgb().formatRgb()}function vn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Bf.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fo(e):n===3?new xe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wf.exec(t))?new xe(e[1],e[2],e[3],1):(e=Xf.exec(t))?new xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ff.exec(t))?Rn(e[1],e[2],e[3],e[4]):(e=Yf.exec(t))?Rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kf.exec(t))?qo(e[1],e[2]/100,e[3]/100,1):(e=qf.exec(t))?qo(e[1],e[2]/100,e[3]/100,e[4]):Bo.hasOwnProperty(t)?Fo(Bo[t]):t==="transparent"?new xe(NaN,NaN,NaN,0):null}function Fo(t){return new xe(t>>16&255,t>>8&255,t&255,1)}function Rn(t,e,n,i){return i<=0&&(t=e=n=NaN),new xe(t,e,n,i)}function Gf(t){return t instanceof zn||(t=vn(t)),t?(t=t.rgb(),new xe(t.r,t.g,t.b,t.opacity)):new xe}function Qi(t,e,n,i){return arguments.length===1?Gf(t):new xe(t,e,n,i??1)}function xe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}co(xe,Qi,Ol(zn,{brighter(t){return t=t==null?ii:Math.pow(ii,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wn:Math.pow(wn,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xe(Wt(this.r),Wt(this.g),Wt(this.b),oi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yo,formatHex:Yo,formatHex8:Jf,formatRgb:Ko,toString:Ko}));function Yo(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function Jf(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ko(){const t=oi(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function oi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function qo(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new st(t,e,n,i)}function Nl(t){if(t instanceof st)return new st(t.h,t.s,t.l,t.opacity);if(t instanceof zn||(t=vn(t)),!t)return new st;if(t instanceof st)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,l=r-o,a=(r+o)/2;return l?(e===r?s=(n-i)/l+(n<i)*6:n===r?s=(i-e)/l+2:s=(e-n)/l+4,l/=a<.5?r+o:2-r-o,s*=60):l=a>0&&a<1?0:s,new st(s,l,a,t.opacity)}function Qf(t,e,n,i){return arguments.length===1?Nl(t):new st(t,e,n,i??1)}function st(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}co(st,Qf,Ol(zn,{brighter(t){return t=t==null?ii:Math.pow(ii,t),new st(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wn:Math.pow(wn,t),new st(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new xe(Li(t>=240?t-240:t+120,o,i),Li(t,o,i),Li(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new st(Uo(this.h),Vn(this.s),Vn(this.l),oi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=oi(this.opacity);return`${t===1?"hsl(":"hsla("}${Uo(this.h)}, ${Vn(this.s)*100}%, ${Vn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Uo(t){return t=(t||0)%360,t<0?t+360:t}function Vn(t){return Math.max(0,Math.min(1,t||0))}function Li(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Dl=t=>()=>t;function jf(t,e){return function(n){return t+n*e}}function xf(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function $f(t){return(t=+t)==1?Tl:function(e,n){return n-e?xf(e,n,t):Dl(isNaN(e)?n:e)}}function Tl(t,e){var n=e-t;return n?jf(t,n):Dl(isNaN(t)?e:t)}const Zo=function t(e){var n=$f(e);function i(o,r){var s=n((o=Qi(o)).r,(r=Qi(r)).r),l=n(o.g,r.g),a=n(o.b,r.b),u=Tl(o.opacity,r.opacity);return function(f){return o.r=s(f),o.g=l(f),o.b=a(f),o.opacity=u(f),o+""}}return i.gamma=t,i}(1);function At(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ri=new RegExp(ji.source,"g");function ec(t){return function(){return t}}function tc(t){return function(e){return t(e)+""}}function nc(t,e){var n=ji.lastIndex=Ri.lastIndex=0,i,o,r,s=-1,l=[],a=[];for(t=t+"",e=e+"";(i=ji.exec(t))&&(o=Ri.exec(e));)(r=o.index)>n&&(r=e.slice(n,r),l[s]?l[s]+=r:l[++s]=r),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,a.push({i:s,x:At(i,o)})),n=Ri.lastIndex;return n<e.length&&(r=e.slice(n),l[s]?l[s]+=r:l[++s]=r),l.length<2?a[0]?tc(a[0].x):ec(e):(e=a.length,function(u){for(var f=0,c;f<e;++f)l[(c=a[f]).i]=c.x(u);return l.join("")})}var Go=180/Math.PI,xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Il(t,e,n,i,o,r){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Go,skewX:Math.atan(a)*Go,scaleX:s,scaleY:l}}var Bn;function ic(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?xi:Il(e.a,e.b,e.c,e.d,e.e,e.f)}function oc(t){return t==null||(Bn||(Bn=document.createElementNS("http://www.w3.org/2000/svg","g")),Bn.setAttribute("transform",t),!(t=Bn.transform.baseVal.consolidate()))?xi:(t=t.matrix,Il(t.a,t.b,t.c,t.d,t.e,t.f))}function Al(t,e,n,i){function o(u){return u.length?u.pop()+" ":""}function r(u,f,c,d,h,y){if(u!==c||f!==d){var m=h.push("translate(",null,e,null,n);y.push({i:m-4,x:At(u,c)},{i:m-2,x:At(f,d)})}else(c||d)&&h.push("translate("+c+e+d+n)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(o(c)+"rotate(",null,i)-2,x:At(u,f)})):f&&c.push(o(c)+"rotate("+f+i)}function l(u,f,c,d){u!==f?d.push({i:c.push(o(c)+"skewX(",null,i)-2,x:At(u,f)}):f&&c.push(o(c)+"skewX("+f+i)}function a(u,f,c,d,h,y){if(u!==c||f!==d){var m=h.push(o(h)+"scale(",null,",",null,")");y.push({i:m-4,x:At(u,c)},{i:m-2,x:At(f,d)})}else(c!==1||d!==1)&&h.push(o(h)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=t(u),f=t(f),r(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),l(u.skewX,f.skewX,c,d),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var y=-1,m=d.length,_;++y<m;)c[(_=d[y]).i]=_.x(h);return c.join("")}}}var rc=Al(ic,"px, ","px)","deg)"),lc=Al(oc,", ",")",")"),sc=1e-12;function Jo(t){return((t=Math.exp(t))+1/t)/2}function ac(t){return((t=Math.exp(t))-1/t)/2}function uc(t){return((t=Math.exp(2*t))-1)/(t+1)}const fc=function t(e,n,i){function o(r,s){var l=r[0],a=r[1],u=r[2],f=s[0],c=s[1],d=s[2],h=f-l,y=c-a,m=h*h+y*y,_,g;if(m<sc)g=Math.log(d/u)/e,_=function(P){return[l+P*h,a+P*y,u*Math.exp(e*P*g)]};else{var E=Math.sqrt(m),v=(d*d-u*u+i*m)/(2*u*n*E),S=(d*d-u*u-i*m)/(2*d*n*E),p=Math.log(Math.sqrt(v*v+1)-v),D=Math.log(Math.sqrt(S*S+1)-S);g=(D-p)/e,_=function(P){var N=P*g,O=Jo(p),L=u/(n*E)*(O*uc(e*N+p)-ac(p));return[l+L*h,a+L*y,u*O/Jo(e*N+p)]}}return _.duration=g*1e3*e/Math.SQRT2,_}return o.rho=function(r){var s=Math.max(.001,+r),l=s*s,a=l*l;return t(s,l,a)},o}(Math.SQRT2,2,4);var rn=0,mn=0,cn=0,Hl=1e3,ri,yn,li=0,Ft=0,Ei=0,En=typeof performance=="object"&&performance.now?performance:Date,Ll=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ho(){return Ft||(Ll(cc),Ft=En.now()+Ei)}function cc(){Ft=0}function si(){this._call=this._time=this._next=null}si.prototype=Rl.prototype={constructor:si,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ho():+n)+(e==null?0:+e),!this._next&&yn!==this&&(yn?yn._next=this:ri=this,yn=this),this._call=t,this._time=n,$i()},stop:function(){this._call&&(this._call=null,this._time=1/0,$i())}};function Rl(t,e,n){var i=new si;return i.restart(t,e,n),i}function dc(){ho(),++rn;for(var t=ri,e;t;)(e=Ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rn}function Qo(){Ft=(li=En.now())+Ei,rn=mn=0;try{dc()}finally{rn=0,gc(),Ft=0}}function hc(){var t=En.now(),e=t-li;e>Hl&&(Ei-=e,li=t)}function gc(){for(var t,e=ri,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ri=n);yn=t,$i(i)}function $i(t){if(!rn){mn&&(mn=clearTimeout(mn));var e=t-Ft;e>24?(t<1/0&&(mn=setTimeout(Qo,t-En.now()-Ei)),cn&&(cn=clearInterval(cn))):(cn||(li=En.now(),cn=setInterval(hc,Hl)),rn=1,Ll(Qo))}}function jo(t,e,n){var i=new si;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var mc=ki("start","end","cancel","interrupt"),yc=[],Vl=0,xo=1,eo=2,Un=3,$o=4,to=5,Zn=6;function Si(t,e,n,i,o,r){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;_c(t,n,{name:e,index:i,group:o,on:mc,tween:yc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Vl})}function go(t,e){var n=dt(t,e);if(n.state>Vl)throw new Error("too late; already scheduled");return n}function _t(t,e){var n=dt(t,e);if(n.state>Un)throw new Error("too late; already running");return n}function dt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function _c(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=Rl(r,0,n.time);function r(u){n.state=xo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,c,d,h;if(n.state!==xo)return a();for(f in i)if(h=i[f],h.name===n.name){if(h.state===Un)return jo(s);h.state===$o?(h.state=Zn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<e&&(h.state=Zn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if(jo(function(){n.state===Un&&(n.state=$o,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=eo,n.on.call("start",t,t.__data__,n.index,n.group),n.state===eo){for(n.state=Un,o=new Array(d=n.tween.length),f=0,c=-1;f<d;++f)(h=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=to,1),c=-1,d=o.length;++c<d;)o[c].call(t,f);n.state===to&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Zn,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Gn(t,e){var n=t.__transition,i,o,r=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){r=!1;continue}o=i.state>eo&&i.state<to,i.state=Zn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}r&&delete t.__transition}}function bc(t){return this.each(function(){Gn(this,t)})}function wc(t,e){var n,i;return function(){var o=_t(this,t),r=o.tween;if(r!==n){i=n=r;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function kc(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var r=_t(this,t),s=r.tween;if(s!==i){o=(i=s).slice();for(var l={name:e,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===e){o[a]=l;break}a===u&&o.push(l)}r.tween=o}}function vc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=dt(this.node(),n).tween,o=0,r=i.length,s;o<r;++o)if((s=i[o]).name===t)return s.value;return null}return this.each((e==null?wc:kc)(n,t,e))}function mo(t,e,n){var i=t._id;return t.each(function(){var o=_t(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return dt(o,i).value[e]}}function Bl(t,e){var n;return(typeof e=="number"?At:e instanceof vn?Zo:(n=vn(e))?(e=n,Zo):nc)(t,e)}function Ec(t){return function(){this.removeAttribute(t)}}function Sc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pc(t,e,n){var i,o=n+"",r;return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function Cc(t,e,n){var i,o=n+"",r;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Pc(t,e,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l)))}}function Mc(t,e,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l)))}}function zc(t,e){var n=vi(t),i=n==="transform"?lc:Bl;return this.attrTween(t,typeof e=="function"?(n.local?Mc:Pc)(n,i,mo(this,"attr."+t,e)):e==null?(n.local?Sc:Ec)(n):(n.local?Cc:pc)(n,i,e))}function Oc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Nc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Dc(t,e){var n,i;function o(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Nc(t,r)),n}return o._value=e,o}function Tc(t,e){var n,i;function o(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Oc(t,r)),n}return o._value=e,o}function Ic(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=vi(t);return this.tween(n,(i.local?Dc:Tc)(i,e))}function Ac(t,e){return function(){go(this,t).delay=+e.apply(this,arguments)}}function Hc(t,e){return e=+e,function(){go(this,t).delay=e}}function Lc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ac:Hc)(e,t)):dt(this.node(),e).delay}function Rc(t,e){return function(){_t(this,t).duration=+e.apply(this,arguments)}}function Vc(t,e){return e=+e,function(){_t(this,t).duration=e}}function Bc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Rc:Vc)(e,t)):dt(this.node(),e).duration}function Wc(t,e){if(typeof e!="function")throw new Error;return function(){_t(this,t).ease=e}}function Xc(t){var e=this._id;return arguments.length?this.each(Wc(e,t)):dt(this.node(),e).ease}function Fc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_t(this,t).ease=n}}function Yc(t){if(typeof t!="function")throw new Error;return this.each(Fc(this._id,t))}function Kc(t){typeof t!="function"&&(t=_l(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r=e[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&t.call(a,a.__data__,u,r)&&l.push(a);return new Pt(i,this._parents,this._name,this._id)}function qc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),l=0;l<r;++l)for(var a=e[l],u=n[l],f=a.length,c=s[l]=new Array(f),d,h=0;h<f;++h)(d=a[h]||u[h])&&(c[h]=d);for(;l<i;++l)s[l]=e[l];return new Pt(s,this._parents,this._name,this._id)}function Uc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Zc(t,e,n){var i,o,r=Uc(e)?go:_t;return function(){var s=r(this,t),l=s.on;l!==i&&(o=(i=l).copy()).on(e,n),s.on=o}}function Gc(t,e){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(t):this.each(Zc(n,t,e))}function Jc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Qc(){return this.on("end.remove",Jc(this._id))}function jc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=uo(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var l=i[s],a=l.length,u=r[s]=new Array(a),f,c,d=0;d<a;++d)(f=l[d])&&(c=t.call(f,f.__data__,d,l))&&("__data__"in f&&(c.__data__=f.__data__),u[d]=c,Si(u[d],e,n,d,u,dt(f,n)));return new Pt(r,this._parents,e,n)}function xc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=yl(t));for(var i=this._groups,o=i.length,r=[],s=[],l=0;l<o;++l)for(var a=i[l],u=a.length,f,c=0;c<u;++c)if(f=a[c]){for(var d=t.call(f,f.__data__,c,a),h,y=dt(f,n),m=0,_=d.length;m<_;++m)(h=d[m])&&Si(h,e,n,m,d,y);r.push(d),s.push(f)}return new Pt(r,s,e,n)}var $c=Mn.prototype.constructor;function ed(){return new $c(this._groups,this._parents)}function td(t,e){var n,i,o;return function(){var r=on(this,t),s=(this.style.removeProperty(t),on(this,t));return r===s?null:r===n&&s===i?o:o=e(n=r,i=s)}}function Wl(t){return function(){this.style.removeProperty(t)}}function nd(t,e,n){var i,o=n+"",r;return function(){var s=on(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}function id(t,e,n){var i,o,r;return function(){var s=on(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),on(this,t))),s===a?null:s===i&&a===o?r:(o=a,r=e(i=s,l))}}function od(t,e){var n,i,o,r="style."+e,s="end."+r,l;return function(){var a=_t(this,t),u=a.on,f=a.value[r]==null?l||(l=Wl(e)):void 0;(u!==n||o!==f)&&(i=(n=u).copy()).on(s,o=f),a.on=i}}function rd(t,e,n){var i=(t+="")=="transform"?rc:Bl;return e==null?this.styleTween(t,td(t,i)).on("end.style."+t,Wl(t)):typeof e=="function"?this.styleTween(t,id(t,i,mo(this,"style."+t,e))).each(od(this._id,t)):this.styleTween(t,nd(t,i,e),n).on("end.style."+t,null)}function ld(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function sd(t,e,n){var i,o;function r(){var s=e.apply(this,arguments);return s!==o&&(i=(o=s)&&ld(t,s,n)),i}return r._value=e,r}function ad(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,sd(t,e,n??""))}function ud(t){return function(){this.textContent=t}}function fd(t){return function(){var e=t(this);this.textContent=e??""}}function cd(t){return this.tween("text",typeof t=="function"?fd(mo(this,"text",t)):ud(t==null?"":t+""))}function dd(t){return function(e){this.textContent=t.call(this,e)}}function hd(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&dd(o)),e}return i._value=t,i}function gd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,hd(t))}function md(){for(var t=this._name,e=this._id,n=Xl(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var f=dt(a,e);Si(a,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Pt(i,this._parents,t,n)}function yd(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(r,s){var l={value:s},a={value:function(){--o===0&&r()}};n.each(function(){var u=_t(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),u.on=e}),o===0&&r()})}var _d=0;function Pt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Xl(){return++_d}var Et=Mn.prototype;Pt.prototype={constructor:Pt,select:jc,selectAll:xc,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:Kc,merge:qc,selection:ed,transition:md,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:Gc,attr:zc,attrTween:Ic,style:rd,styleTween:ad,text:cd,textTween:gd,remove:Qc,tween:vc,delay:Lc,duration:Bc,ease:Xc,easeVarying:Yc,end:yd,[Symbol.iterator]:Et[Symbol.iterator]};function bd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var wd={time:null,delay:0,duration:250,ease:bd};function kd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function vd(t){var e,n;t instanceof Pt?(e=t._id,t=t._name):(e=Xl(),(n=wd).time=ho(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&Si(a,t,e,u,s,n||kd(a,e));return new Pt(i,this._parents,t,e)}Mn.prototype.interrupt=bc;Mn.prototype.transition=vd;const Wn=t=>()=>t;function Ed(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function St(t,e,n){this.k=t,this.x=e,this.y=n}St.prototype={constructor:St,scale:function(t){return t===1?this:new St(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new St(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pi=new St(1,0,0);Fl.prototype=St.prototype;function Fl(t){for(;!t.__zoom;)if(!(t=t.parentNode))return pi;return t.__zoom}function Vi(t){t.stopImmediatePropagation()}function dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Sd(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function pd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function er(){return this.__zoom||pi}function Cd(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Pd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Md(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function Yl(){var t=Sd,e=pd,n=Md,i=Cd,o=Pd,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=fc,u=ki("start","zoom","end"),f,c,d,h=500,y=150,m=0,_=10;function g(k){k.property("__zoom",er).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",T).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(k,A,w,C){var I=k.selection?k.selection():k;I.property("__zoom",er),k!==I?p(k,A,w,C):I.interrupt().each(function(){D(this,arguments).event(C).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(k,A,w,C){g.scaleTo(k,function(){var I=this.__zoom.k,H=typeof A=="function"?A.apply(this,arguments):A;return I*H},w,C)},g.scaleTo=function(k,A,w,C){g.transform(k,function(){var I=e.apply(this,arguments),H=this.__zoom,K=w==null?S(I):typeof w=="function"?w.apply(this,arguments):w,G=H.invert(K),j=typeof A=="function"?A.apply(this,arguments):A;return n(v(E(H,j),K,G),I,s)},w,C)},g.translateBy=function(k,A,w,C){g.transform(k,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),s)},null,C)},g.translateTo=function(k,A,w,C,I){g.transform(k,function(){var H=e.apply(this,arguments),K=this.__zoom,G=C==null?S(H):typeof C=="function"?C.apply(this,arguments):C;return n(pi.translate(G[0],G[1]).scale(K.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof w=="function"?-w.apply(this,arguments):-w),H,s)},C,I)};function E(k,A){return A=Math.max(r[0],Math.min(r[1],A)),A===k.k?k:new St(A,k.x,k.y)}function v(k,A,w){var C=A[0]-w[0]*k.k,I=A[1]-w[1]*k.k;return C===k.x&&I===k.y?k:new St(k.k,C,I)}function S(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function p(k,A,w,C){k.on("start.zoom",function(){D(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(C).end()}).tween("zoom",function(){var I=this,H=arguments,K=D(I,H).event(C),G=e.apply(I,H),j=w==null?S(G):typeof w=="function"?w.apply(I,H):w,ae=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),B=I.__zoom,$=typeof A=="function"?A.apply(I,H):A,fe=a(B.invert(j).concat(ae/B.k),$.invert(j).concat(ae/$.k));return function(V){if(V===1)V=$;else{var he=fe(V),be=ae/he[2];V=new St(be,j[0]-he[0]*be,j[1]-he[1]*be)}K.zoom(null,V)}})}function D(k,A,w){return!w&&k.__zooming||new P(k,A)}function P(k,A){this.that=k,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,A),this.taps=0}P.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,A){return this.mouse&&k!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var A=it(this.that).datum();u.call(k,this.that,new Ed(k,{sourceEvent:this.sourceEvent,target:g,type:k,transform:this.that.__zoom,dispatch:u}),A)}};function N(k,...A){if(!t.apply(this,arguments))return;var w=D(this,A).event(k),C=this.__zoom,I=Math.max(r[0],Math.min(r[1],C.k*Math.pow(2,i.apply(this,arguments)))),H=rt(k);if(w.wheel)(w.mouse[0][0]!==H[0]||w.mouse[0][1]!==H[1])&&(w.mouse[1]=C.invert(w.mouse[0]=H)),clearTimeout(w.wheel);else{if(C.k===I)return;w.mouse=[H,C.invert(H)],Gn(this),w.start()}dn(k),w.wheel=setTimeout(K,y),w.zoom("mouse",n(v(E(C,I),w.mouse[0],w.mouse[1]),w.extent,s));function K(){w.wheel=null,w.end()}}function O(k,...A){if(d||!t.apply(this,arguments))return;var w=k.currentTarget,C=D(this,A,!0).event(k),I=it(k.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",ae,!0),H=rt(k,w),K=k.clientX,G=k.clientY;Ml(k.view),Vi(k),C.mouse=[H,this.__zoom.invert(H)],Gn(this),C.start();function j(B){if(dn(B),!C.moved){var $=B.clientX-K,fe=B.clientY-G;C.moved=$*$+fe*fe>m}C.event(B).zoom("mouse",n(v(C.that.__zoom,C.mouse[0]=rt(B,w),C.mouse[1]),C.extent,s))}function ae(B){I.on("mousemove.zoom mouseup.zoom",null),zl(B.view,C.moved),dn(B),C.event(B).end()}}function L(k,...A){if(t.apply(this,arguments)){var w=this.__zoom,C=rt(k.changedTouches?k.changedTouches[0]:k,this),I=w.invert(C),H=w.k*(k.shiftKey?.5:2),K=n(v(E(w,H),C,I),e.apply(this,A),s);dn(k),l>0?it(this).transition().duration(l).call(p,K,C,k):it(this).call(g.transform,K,C,k)}}function T(k,...A){if(t.apply(this,arguments)){var w=k.touches,C=w.length,I=D(this,A,k.changedTouches.length===C).event(k),H,K,G,j;for(Vi(k),K=0;K<C;++K)G=w[K],j=rt(G,this),j=[j,this.__zoom.invert(j),G.identifier],I.touch0?!I.touch1&&I.touch0[2]!==j[2]&&(I.touch1=j,I.taps=0):(I.touch0=j,H=!0,I.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(I.taps<2&&(c=j[0],f=setTimeout(function(){f=null},h)),Gn(this),I.start())}}function R(k,...A){if(this.__zooming){var w=D(this,A).event(k),C=k.changedTouches,I=C.length,H,K,G,j;for(dn(k),H=0;H<I;++H)K=C[H],G=rt(K,this),w.touch0&&w.touch0[2]===K.identifier?w.touch0[0]=G:w.touch1&&w.touch1[2]===K.identifier&&(w.touch1[0]=G);if(K=w.that.__zoom,w.touch1){var ae=w.touch0[0],B=w.touch0[1],$=w.touch1[0],fe=w.touch1[1],V=(V=$[0]-ae[0])*V+(V=$[1]-ae[1])*V,he=(he=fe[0]-B[0])*he+(he=fe[1]-B[1])*he;K=E(K,Math.sqrt(V/he)),G=[(ae[0]+$[0])/2,(ae[1]+$[1])/2],j=[(B[0]+fe[0])/2,(B[1]+fe[1])/2]}else if(w.touch0)G=w.touch0[0],j=w.touch0[1];else return;w.zoom("touch",n(v(K,G,j),w.extent,s))}}function F(k,...A){if(this.__zooming){var w=D(this,A).event(k),C=k.changedTouches,I=C.length,H,K;for(Vi(k),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),H=0;H<I;++H)K=C[H],w.touch0&&w.touch0[2]===K.identifier?delete w.touch0:w.touch1&&w.touch1[2]===K.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(K=rt(K,this),Math.hypot(c[0]-K[0],c[1]-K[1])<_)){var G=it(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return g.wheelDelta=function(k){return arguments.length?(i=typeof k=="function"?k:Wn(+k),g):i},g.filter=function(k){return arguments.length?(t=typeof k=="function"?k:Wn(!!k),g):t},g.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:Wn(!!k),g):o},g.extent=function(k){return arguments.length?(e=typeof k=="function"?k:Wn([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),g):e},g.scaleExtent=function(k){return arguments.length?(r[0]=+k[0],r[1]=+k[1],g):[r[0],r[1]]},g.translateExtent=function(k){return arguments.length?(s[0][0]=+k[0][0],s[1][0]=+k[1][0],s[0][1]=+k[0][1],s[1][1]=+k[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(k){return arguments.length?(n=k,g):n},g.duration=function(k){return arguments.length?(l=+k,g):l},g.interpolate=function(k){return arguments.length?(a=k,g):a},g.on=function(){var k=u.on.apply(u,arguments);return k===u?g:k},g.clickDistance=function(k){return arguments.length?(m=(k=+k)*k,g):Math.sqrt(m)},g.tapDistance=function(k){return arguments.length?(_=+k,g):_},g}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},ai=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Yt;(function(t){t.Strict="strict",t.Loose="loose"})(Yt||(Yt={}));var mt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(mt||(mt={}));var ui;(function(t){t.Partial="partial",t.Full="full"})(ui||(ui={}));const no={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var nn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(nn||(nn={}));var ln;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ln||(ln={}));var de;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(de||(de={}));const tr={[de.Left]:de.Right,[de.Right]:de.Left,[de.Top]:de.Bottom,[de.Bottom]:de.Top};function zd(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function nr(t,e,n){if(!n)return;const i=[];t.forEach((o,r)=>{e!=null&&e.has(r)||i.push(o)}),i.length&&n(i)}function ir(t){return t===null?null:t?"valid":"invalid"}const Od=t=>"id"in t&&"source"in t&&"target"in t,Nd=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),yo=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Nn=(t,e=[0,0])=>{const{width:n,height:i}=Rt(t),o=t.origin??e,r=n*o[0],s=i*o[1];return{x:t.position.x-r,y:t.position.y-s}},Kl=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const r=typeof o=="string";let s=!e.nodeLookup&&!r?o:void 0;e.nodeLookup&&(s=r?e.nodeLookup.get(o):yo(o)?o:e.nodeLookup.get(o.id));const l=s?fi(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ci(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Pi(n)},Dn=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=fi(i);n=Ci(n,o)}}),Pi(n)},ql=(t,e,[n,i,o]=[0,0,1],r=!1,s=!1)=>{const l={...Tn(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const u of t.values()){const{measured:f,selectable:c=!0,hidden:d=!1}=u;if(s&&!c||d)continue;const h=f.width??u.width??u.initialWidth??null,y=f.height??u.height??u.initialHeight??null,m=Sn(l,an(u)),_=(h??0)*(y??0),g=r&&m>0;(!u.internals.handleBounds||g||m>=_||u.dragging)&&a.push(u)}return a},io=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function or(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function rr({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:r},s){if(t.size===0)return Promise.resolve(!1);const l=Dn(t),a=Mi(l,e,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??r,(s==null?void 0:s.padding)??.1);return await i.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Dd({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:r}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},f=s.origin??i;let c=o;if(s.extent==="parent"&&!s.expandParent)if(!l)r==null||r("005",On.error005());else{const h=l.measured.width,y=l.measured.height;h&&y&&(c=[[a,u],[a+h,u+y]])}else l&&un(s.extent)&&(c=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const d=un(c)?Kt(e,c,s.measured):e;return{position:{x:d.x-a+s.measured.width*f[0],y:d.y-u+s.measured.height*f[1]},positionAbsolute:d}}async function Ul({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const r=new Set(t.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=r.has(d.id),y=!h&&d.parentId&&s.find(m=>m.id===d.parentId);(h||y)&&s.push(d)}const l=new Set(e.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),f=io(s,a);for(const d of a)l.has(d.id)&&!f.find(y=>y.id===d.id)&&f.push(d);if(!o)return{edges:f,nodes:s};const c=await o({nodes:s,edges:f});return typeof c=="boolean"?c?{edges:f,nodes:s}:{edges:[],nodes:[]}:c}const sn=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Kt=(t={x:0,y:0},e,n)=>({x:sn(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:sn(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function Zl(t,e,n){const{width:i,height:o}=Rt(n),{x:r,y:s}=n.internals.positionAbsolute;return Kt(t,[[r,s],[r+i,s+o]],e)}const lr=(t,e,n)=>t<e?sn(Math.abs(t-e),1,e)/e:t>n?-sn(Math.abs(t-n),1,e)/e:0,Gl=(t,e,n=15,i=40)=>{const o=lr(t.x,i,e.width-i)*n,r=lr(t.y,i,e.height-i)*n;return[o,r]},Ci=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),oo=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Pi=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),an=(t,e=[0,0])=>{var o,r;const{x:n,y:i}=yo(t)?t.internals.positionAbsolute:Nn(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((r=t.measured)==null?void 0:r.height)??t.height??t.initialHeight??0}},fi=(t,e=[0,0])=>{var o,r;const{x:n,y:i}=yo(t)?t.internals.positionAbsolute:Nn(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((r=t.measured)==null?void 0:r.height)??t.height??t.initialHeight??0)}},Jl=(t,e)=>Pi(Ci(oo(t),oo(e))),Sn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},sr=t=>ut(t.width)&&ut(t.height)&&ut(t.x)&&ut(t.y),ut=t=>!isNaN(t)&&isFinite(t),Td=(t,e)=>{},_o=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Tn=({x:t,y:e},[n,i,o],r=!1,s=[1,1])=>{const l={x:(t-n)/o,y:(e-i)/o};return r?_o(l,s):l},Ql=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),Mi=(t,e,n,i,o,r)=>{const s=e/(t.width*(1+r)),l=n/(t.height*(1+r)),a=Math.min(s,l),u=sn(a,i,o),f=t.x+t.width/2,c=t.y+t.height/2,d=e/2-f*u,h=n/2-c*u;return{x:d,y:h,zoom:u}},ci=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function un(t){return t!==void 0&&t!=="parent"}function Rt(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function di(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Id(t,e={width:0,height:0},n,i,o){let r=n;const s={...t};for(;r;){const l=i.get(r);if(r=l==null?void 0:l.parentId,l){const a=l.origin||o;s.x+=l.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=l.internals.positionAbsolute.y-(e.height??0)*a[1]}}return s}function Bi(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:r}=Ct(t),s=Tn({x:o,y:r},i),{x:l,y:a}=n?_o(s,e):s;return{xSnapped:l,ySnapped:a,...s}}const bo=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ad=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Hd=["INPUT","SELECT","TEXTAREA"];function Ld(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Hd.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const jl=t=>"clientX"in t,Ct=(t,e)=>{var r,s;const n=jl(t),i=n?t.clientX:(r=t.touches)==null?void 0:r[0].clientX,o=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},ar=(t,e,n,i,o)=>{const r=e.querySelectorAll(`.${t}`);return!r||!r.length?null:Array.from(r).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:o,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...bo(s)}})};function Rd({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:r,targetControlX:s,targetControlY:l}){const a=t*.125+o*.375+s*.375+n*.125,u=e*.125+r*.375+l*.375+i*.125,f=Math.abs(a-t),c=Math.abs(u-e);return[a,u,f,c]}function Xn(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ur({pos:t,x1:e,y1:n,x2:i,y2:o,c:r}){switch(t){case de.Left:return[e-Xn(e-i,r),n];case de.Right:return[e+Xn(i-e,r),n];case de.Top:return[e,n-Xn(n-o,r)];case de.Bottom:return[e,n+Xn(o-n,r)]}}function xl({sourceX:t,sourceY:e,sourcePosition:n=de.Bottom,targetX:i,targetY:o,targetPosition:r=de.Top,curvature:s=.25}){const[l,a]=ur({pos:n,x1:t,y1:e,x2:i,y2:o,c:s}),[u,f]=ur({pos:r,x1:i,y1:o,x2:t,y2:e,c:s}),[c,d,h,y]=Rd({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${l},${a} ${u},${f} ${i},${o}`,c,d,h,y]}function $l({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,r=n<t?n+o:n-o,s=Math.abs(i-e)/2,l=i<e?i+s:i-s;return[r,l,o,s]}function Vd({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const r=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(r?s:0)}function Bd({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const r=Ci(fi(t),fi(e));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Sn(s,Pi(r))>0}const Wd=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Xd=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Fd=(t,e)=>{if(!t.source||!t.target)return e;let n;return Od(t)?n={...t}:n={...t,id:Wd(t)},Xd(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function es({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,r,s,l]=$l({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,r,s,l]}const fr={[de.Left]:{x:-1,y:0},[de.Right]:{x:1,y:0},[de.Top]:{x:0,y:-1},[de.Bottom]:{x:0,y:1}},Yd=({source:t,sourcePosition:e=de.Bottom,target:n})=>e===de.Left||e===de.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},cr=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Kd({source:t,sourcePosition:e=de.Bottom,target:n,targetPosition:i=de.Top,center:o,offset:r}){const s=fr[e],l=fr[i],a={x:t.x+s.x*r,y:t.y+s.y*r},u={x:n.x+l.x*r,y:n.y+l.y*r},f=Yd({source:a,sourcePosition:e,target:u}),c=f.x!==0?"x":"y",d=f[c];let h=[],y,m;const _={x:0,y:0},g={x:0,y:0},[E,v,S,p]=$l({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[c]*l[c]===-1){y=o.x??E,m=o.y??v;const P=[{x:y,y:a.y},{x:y,y:u.y}],N=[{x:a.x,y:m},{x:u.x,y:m}];s[c]===d?h=c==="x"?P:N:h=c==="x"?N:P}else{const P=[{x:a.x,y:u.y}],N=[{x:u.x,y:a.y}];if(c==="x"?h=s.x===d?N:P:h=s.y===d?P:N,e===i){const F=Math.abs(t[c]-n[c]);if(F<=r){const k=Math.min(r-1,r-F);s[c]===d?_[c]=(a[c]>t[c]?-1:1)*k:g[c]=(u[c]>n[c]?-1:1)*k}}if(e!==i){const F=c==="x"?"y":"x",k=s[c]===l[F],A=a[F]>u[F],w=a[F]<u[F];(s[c]===1&&(!k&&A||k&&w)||s[c]!==1&&(!k&&w||k&&A))&&(h=c==="x"?P:N)}const O={x:a.x+_.x,y:a.y+_.y},L={x:u.x+g.x,y:u.y+g.y},T=Math.max(Math.abs(O.x-h[0].x),Math.abs(L.x-h[0].x)),R=Math.max(Math.abs(O.y-h[0].y),Math.abs(L.y-h[0].y));T>=R?(y=(O.x+L.x)/2,m=h[0].y):(y=h[0].x,m=(O.y+L.y)/2)}return[[t,{x:a.x+_.x,y:a.y+_.y},...h,{x:u.x+g.x,y:u.y+g.y},n],y,m,S,p]}function qd(t,e,n,i){const o=Math.min(cr(t,e)/2,cr(e,n)/2,i),{x:r,y:s}=e;if(t.x===r&&r===n.x||t.y===s&&s===n.y)return`L${r} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${r+o*u},${s}Q ${r},${s} ${r},${s+o*f}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${r},${s+o*a}Q ${r},${s} ${r+o*l},${s}`}function hi({sourceX:t,sourceY:e,sourcePosition:n=de.Bottom,targetX:i,targetY:o,targetPosition:r=de.Top,borderRadius:s=5,centerX:l,centerY:a,offset:u=20}){const[f,c,d,h,y]=Kd({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:r,center:{x:l,y:a},offset:u});return[f.reduce((_,g,E)=>{let v="";return E>0&&E<f.length-1?v=qd(f[E-1],g,f[E+1],s):v=`${E===0?"M":"L"}${g.x} ${g.y}`,_+=v,_},""),c,d,h,y]}function dr(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Ud(t){var c;const{sourceNode:e,targetNode:n}=t;if(!dr(e)||!dr(n))return null;const i=e.internals.handleBounds||hr(e.handles),o=n.internals.handleBounds||hr(n.handles),r=gr((i==null?void 0:i.source)??[],t.sourceHandle),s=gr(t.connectionMode===Yt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!r||!s)return(c=t.onError)==null||c.call(t,"008",On.error008(r?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=(r==null?void 0:r.position)||de.Bottom,a=(s==null?void 0:s.position)||de.Top,u=pn(e,r,l),f=pn(n,s,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:a}}function hr(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function pn(t,e,n=de.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,r=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:s,height:l}=e??Rt(t);if(i)return{x:o+s/2,y:r+l/2};switch((e==null?void 0:e.position)??n){case de.Top:return{x:o+s/2,y:r};case de.Right:return{x:o+s,y:r+l/2};case de.Bottom:return{x:o+s/2,y:r+l};case de.Left:return{x:o,y:r+l/2}}}function gr(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function ro(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Zd(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const r=new Set;return t.reduce((s,l)=>([l.markerStart||i,l.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=ro(a,e);r.has(u)||(s.push({id:u,color:a.color||n,...a}),r.add(u))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const wo={nodeOrigin:[0,0],nodeExtent:ai,elevateNodesOnSelect:!0,defaults:{}},Gd={...wo,checkEquality:!0};function ko(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function Jd(t,e,n){const i=ko(wo,n);for(const o of t.values())if(o.parentId)vo(o,t,e,i);else{const r=Nn(o,i.nodeOrigin),s=un(o.extent)?o.extent:i.nodeExtent,l=Kt(r,s,Rt(o));o.internals.positionAbsolute=l}}function ts(t,e,n,i){var l,a;const o=ko(Gd,i),r=new Map(e),s=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let f=r.get(u.id);if(o.checkEquality&&u===(f==null?void 0:f.internals.userNode))e.set(u.id,f);else{const c=Nn(u,o.nodeOrigin),d=un(u.extent)?u.extent:o.nodeExtent,h=Kt(c,d,Rt(u));f={...o.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:h,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:ns(u,s),userNode:u}},e.set(u.id,f)}u.parentId&&vo(f,e,n,i)}}function Qd(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function vo(t,e,n,i){const{elevateNodesOnSelect:o,nodeOrigin:r,nodeExtent:s}=ko(wo,i),l=t.parentId,a=e.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Qd(t,n);const u=o?1e3:0,{x:f,y:c,z:d}=jd(t,a,r,s,u),{positionAbsolute:h}=t.internals,y=f!==h.x||c!==h.y;(y||d!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:y?{x:f,y:c}:h,z:d})}function ns(t,e){return(ut(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function jd(t,e,n,i,o){const{x:r,y:s}=e.internals.positionAbsolute,l=Rt(t),a=Nn(t,n),u=un(t.extent)?Kt(a,t.extent,l):a;let f=Kt({x:r+u.x,y:s+u.y},i,l);t.extent==="parent"&&(f=Zl(f,l,e));const c=ns(t,o),d=e.internals.z??0;return{x:f.x,y:f.y,z:d>c?d:c}}function xd(t,e,n,i=[0,0]){var s;const o=[],r=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const u=((s=r.get(l.parentId))==null?void 0:s.expandedRect)??an(a),f=Jl(u,l.rect);r.set(l.parentId,{expandedRect:f,parent:a})}return r.size>0&&r.forEach(({expandedRect:l,parent:a},u)=>{var v;const f=a.internals.positionAbsolute,c=Rt(a),d=a.origin??i,h=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,y=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,m=Math.max(c.width,Math.round(l.width)),_=Math.max(c.height,Math.round(l.height)),g=(m-c.width)*d[0],E=(_-c.height)*d[1];(h>0||y>0||g||E)&&(o.push({id:u,type:"position",position:{x:a.position.x-h+g,y:a.position.y-y+E}}),(v=n.get(u))==null||v.forEach(S=>{t.some(p=>p.id===S.id)||o.push({id:S.id,type:"position",position:{x:S.position.x+h,y:S.position.y+y}})})),(c.width<l.width||c.height<l.height||h||y)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?d[0]*h-g:0),height:_+(y?d[1]*y-E:0)}})}),o}function $d(t,e,n,i,o,r){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(s),{m22:f}=new window.DOMMatrixReadOnly(u.transform),c=[];for(const d of t.values()){const h=e.get(d.id);if(h)if(h.hidden)h.internals={...h.internals,handleBounds:void 0},l=!0;else{const y=bo(d.nodeElement),m=h.measured.width!==y.width||h.measured.height!==y.height;if(!!(y.width&&y.height&&(m||!h.internals.handleBounds||d.force))){const g=d.nodeElement.getBoundingClientRect(),E=un(h.extent)?h.extent:r;let{positionAbsolute:v}=h.internals;h.parentId&&h.extent==="parent"?v=Zl(v,y,e.get(h.parentId)):E&&(v=Kt(v,E,y)),h.measured=y,h.internals={...h.internals,positionAbsolute:v,handleBounds:{source:ar("source",d.nodeElement,g,f,h.id),target:ar("target",d.nodeElement,g,f,h.id)}},h.parentId&&vo(h,e,n,{nodeOrigin:o}),l=!0,m&&(a.push({id:h.id,type:"dimensions",dimensions:y}),h.expandParent&&h.parentId&&c.push({id:h.id,parentId:h.parentId,rect:an(h,o)}))}}}if(c.length>0){const d=xd(c,e,n,o);a.push(...d)}return{changes:a,updatedInternals:l}}async function eh({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:r}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,r]],i),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function is(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:r,sourceHandle:s=null,targetHandle:l=null}=i,a=`${o}-source-${s}`,u=`${r}-target-${l}`,f=t.get(a)||new Map,c=t.get(u)||new Map,d={edgeId:i.id,source:o,target:r,sourceHandle:s,targetHandle:l};e.set(i.id,i),t.set(a,f.set(`${r}-${l}`,d)),t.set(u,c.set(`${o}-${s}`,d))}}function os(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:os(n,e):!1}function mr(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function th(t,e,n,i){const o=new Map;for(const[r,s]of t)if((s.selected||s.id===i)&&(!s.parentId||!os(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const l=t.get(r);l&&o.set(r,{id:r,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function Wi({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var s,l,a;const o=[];for(const[u,f]of e){const c=(s=n.get(u))==null?void 0:s.internals.userNode;c&&o.push({...c,position:f.position,dragging:i})}if(!t)return[o[0],o];const r=(l=n.get(t))==null?void 0:l.internals.userNode;return[r?{...r,position:((a=e.get(t))==null?void 0:a.position)||r.position,dragging:i}:o[0],o]}function nh({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let r={x:null,y:null},s=0,l=new Map,a=!1,u={x:0,y:0},f=null,c=!1,d=null,h=!1;function y({noDragClassName:_,handleSelector:g,domNode:E,isSelectable:v,nodeId:S,nodeClickDistance:p=0}){d=it(E);function D({x:L,y:T},R){const{nodeLookup:F,nodeExtent:k,snapGrid:A,snapToGrid:w,nodeOrigin:C,onNodeDrag:I,onSelectionDrag:H,onError:K,updateNodePositions:G}=e();r={x:L,y:T};let j=!1,ae={x:0,y:0,x2:0,y2:0};if(l.size>1&&k){const B=Dn(l);ae=oo(B)}for(const[B,$]of l){if(!F.has(B))continue;let fe={x:L-$.distance.x,y:T-$.distance.y};w&&(fe=_o(fe,A));let V=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];if(l.size>1&&k&&!$.extent){const{positionAbsolute:we}=$.internals,ke=we.x-ae.x+k[0][0],pe=we.x+$.measured.width-ae.x2+k[1][0],Le=we.y-ae.y+k[0][1],q=we.y+$.measured.height-ae.y2+k[1][1];V=[[ke,Le],[pe,q]]}const{position:he,positionAbsolute:be}=Dd({nodeId:B,nextPosition:fe,nodeLookup:F,nodeExtent:V,nodeOrigin:C,onError:K});j=j||$.position.x!==he.x||$.position.y!==he.y,$.position=he,$.internals.positionAbsolute=be}if(j&&(G(l,!0),R&&(i||I||!S&&H))){const[B,$]=Wi({nodeId:S,dragItems:l,nodeLookup:F});i==null||i(R,l,B,$),I==null||I(R,B,$),S||H==null||H(R,$)}}async function P(){if(!f)return;const{transform:L,panBy:T,autoPanSpeed:R}=e(),[F,k]=Gl(u,f,R);(F!==0||k!==0)&&(r.x=(r.x??0)-F/L[2],r.y=(r.y??0)-k/L[2],await T({x:F,y:k})&&D(r,null)),s=requestAnimationFrame(P)}function N(L){var j;const{nodeLookup:T,multiSelectionActive:R,nodesDraggable:F,transform:k,snapGrid:A,snapToGrid:w,selectNodesOnDrag:C,onNodeDragStart:I,onSelectionDragStart:H,unselectNodesAndEdges:K}=e();c=!0,(!C||!v)&&!R&&S&&((j=T.get(S))!=null&&j.selected||K()),v&&C&&S&&(t==null||t(S));const G=Bi(L.sourceEvent,{transform:k,snapGrid:A,snapToGrid:w});if(r=G,l=th(T,F,G,S),l.size>0&&(n||I||!S&&H)){const[ae,B]=Wi({nodeId:S,dragItems:l,nodeLookup:T});n==null||n(L.sourceEvent,l,ae,B),I==null||I(L.sourceEvent,ae,B),S||H==null||H(L.sourceEvent,B)}}const O=Vf().clickDistance(p).on("start",L=>{const{domNode:T,nodeDragThreshold:R,transform:F,snapGrid:k,snapToGrid:A}=e();h=!1,R===0&&N(L),r=Bi(L.sourceEvent,{transform:F,snapGrid:k,snapToGrid:A}),f=(T==null?void 0:T.getBoundingClientRect())||null,u=Ct(L.sourceEvent,f)}).on("drag",L=>{const{autoPanOnNodeDrag:T,transform:R,snapGrid:F,snapToGrid:k,nodeDragThreshold:A,nodeLookup:w}=e(),C=Bi(L.sourceEvent,{transform:R,snapGrid:F,snapToGrid:k});if((L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||S&&!w.has(S))&&(h=!0),!h){if(!a&&T&&c&&(a=!0,P()),!c){const I=C.xSnapped-(r.x??0),H=C.ySnapped-(r.y??0);Math.sqrt(I*I+H*H)>A&&N(L)}(r.x!==C.xSnapped||r.y!==C.ySnapped)&&l&&c&&(u=Ct(L.sourceEvent,f),D(C,L.sourceEvent))}}).on("end",L=>{if(!(!c||h)&&(a=!1,c=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:T,updateNodePositions:R,onNodeDragStop:F,onSelectionDragStop:k}=e();if(R(l,!1),o||F||!S&&k){const[A,w]=Wi({nodeId:S,dragItems:l,nodeLookup:T,dragging:!1});o==null||o(L.sourceEvent,l,A,w),F==null||F(L.sourceEvent,A,w),S||k==null||k(L.sourceEvent,w)}}}).filter(L=>{const T=L.target;return!L.button&&(!_||!mr(T,`.${_}`,E))&&(!g||mr(T,g,E))});d.call(O)}function m(){d==null||d.on(".drag",null)}return{update:y,destroy:m}}function ih(t,e,n){const i=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const r of e.values())Sn(o,an(r))>0&&i.push(r);return i}const oh=250;function rh(t,e,n,i){var l,a;let o=[],r=1/0;const s=ih(t,n,e+oh);for(const u of s){const f=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const c of f){if(i.nodeId===c.nodeId&&i.type===c.type&&i.id===c.id)continue;const{x:d,y:h}=pn(u,c,c.position,!0),y=Math.sqrt(Math.pow(d-t.x,2)+Math.pow(h-t.y,2));y>e||(y<r?(o=[{...c,x:d,y:h}],r=y):y===r&&o.push({...c,x:d,y:h}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(f=>f.type===u)??o[0]}return o[0]}function rs(t,e,n,i,o,r=!1){var u,f,c;const s=i.get(t);if(!s)return null;const l=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[e]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((c=s.internals.handleBounds)==null?void 0:c.target)??[]],a=(n?l==null?void 0:l.find(d=>d.id===n):l==null?void 0:l[0])??null;return a&&r?{...a,...pn(s,a,a.position,!0)}:a}function ls(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function lh(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const ss=()=>!0;function sh(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:r,isTarget:s,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:c,panBy:d,cancelConnection:h,onConnectStart:y,onConnect:m,onConnectEnd:_,isValidConnection:g=ss,onReconnectEnd:E,updateConnection:v,getTransform:S,getFromHandle:p,autoPanSpeed:D}){const P=Ad(t.target);let N=0,O;const{x:L,y:T}=Ct(t),R=P==null?void 0:P.elementFromPoint(L,T),F=ls(r,R),k=l==null?void 0:l.getBoundingClientRect();if(!k||!F)return;const A=rs(o,F,i,a,e);if(!A)return;let w=Ct(t,k),C=!1,I=null,H=!1,K=null;function G(){if(!f||!k)return;const[be,we]=Gl(w,k,D);d({x:be,y:we}),N=requestAnimationFrame(G)}const j={...A,nodeId:o,type:F,position:A.position},ae=a.get(o),$={inProgress:!0,isValid:null,from:pn(ae,j,de.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:ae,to:w,toHandle:null,toPosition:tr[j.position],toNode:null};v($);let fe=$;y==null||y(t,{nodeId:o,handleId:i,handleType:F});function V(be){if(!p()||!j){he(be);return}const we=S();w=Ct(be,k),O=rh(Tn(w,we,!1,[1,1]),n,a,j),C||(G(),C=!0);const ke=as(be,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:P,lib:u,flowId:c,nodeLookup:a});K=ke.handleDomNode,I=ke.connection,H=lh(!!O,ke.isValid);const pe={...fe,isValid:H,to:O&&H?Ql({x:O.x,y:O.y},we):w,toHandle:ke.toHandle,toPosition:H&&ke.toHandle?ke.toHandle.position:tr[j.position],toNode:ke.toHandle?a.get(ke.toHandle.nodeId):null};H&&O&&fe.toHandle&&pe.toHandle&&fe.toHandle.type===pe.toHandle.type&&fe.toHandle.nodeId===pe.toHandle.nodeId&&fe.toHandle.id===pe.toHandle.id&&fe.to.x===pe.to.x&&fe.to.y===pe.to.y||(v(pe),fe=pe)}function he(be){(O||K)&&I&&H&&(m==null||m(I));const{inProgress:we,...ke}=fe,pe={...ke,toPosition:fe.toHandle?fe.toPosition:null};_==null||_(be,pe),r&&(E==null||E(be,pe)),h(),cancelAnimationFrame(N),C=!1,H=!1,I=null,K=null,P.removeEventListener("mousemove",V),P.removeEventListener("mouseup",he),P.removeEventListener("touchmove",V),P.removeEventListener("touchend",he)}P.addEventListener("mousemove",V),P.addEventListener("mouseup",he),P.addEventListener("touchmove",V),P.addEventListener("touchend",he)}function as(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:r,doc:s,lib:l,flowId:a,isValidConnection:u=ss,nodeLookup:f}){const c=r==="target",d=e?s.querySelector(`.${l}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:h,y}=Ct(t),m=s.elementFromPoint(h,y),_=m!=null&&m.classList.contains(`${l}-flow__handle`)?m:d,g={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const E=ls(void 0,_),v=_.getAttribute("data-nodeid"),S=_.getAttribute("data-handleid"),p=_.classList.contains("connectable"),D=_.classList.contains("connectableend");if(!v||!E)return g;const P={source:c?v:i,sourceHandle:c?S:o,target:c?i:v,targetHandle:c?o:S};g.connection=P;const O=p&&D&&(n===Yt.Strict?c&&E==="source"||!c&&E==="target":v!==i||S!==o);g.isValid=O&&u(P),g.toHandle=rs(v,E,S,f,n,!1)}return g}const ah={onPointerDown:sh,isValid:as};function uh({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=it(t);function r({translateExtent:l,width:a,height:u,zoomStep:f=10,pannable:c=!0,zoomable:d=!0,inversePan:h=!1}){const y=v=>{const S=n();if(v.sourceEvent.type!=="wheel"||!e)return;const p=-v.sourceEvent.deltaY*(v.sourceEvent.deltaMode===1?.05:v.sourceEvent.deltaMode?1:.002)*f,D=S[2]*Math.pow(2,p);e.scaleTo(D)};let m=[0,0];const _=v=>{(v.sourceEvent.type==="mousedown"||v.sourceEvent.type==="touchstart")&&(m=[v.sourceEvent.clientX??v.sourceEvent.touches[0].clientX,v.sourceEvent.clientY??v.sourceEvent.touches[0].clientY])},g=v=>{const S=n();if(v.sourceEvent.type!=="mousemove"&&v.sourceEvent.type!=="touchmove"||!e)return;const p=[v.sourceEvent.clientX??v.sourceEvent.touches[0].clientX,v.sourceEvent.clientY??v.sourceEvent.touches[0].clientY],D=[p[0]-m[0],p[1]-m[1]];m=p;const P=i()*Math.max(S[2],Math.log(S[2]))*(h?-1:1),N={x:S[0]-D[0]*P,y:S[1]-D[1]*P},O=[[0,0],[a,u]];e.setViewportConstrained({x:N.x,y:N.y,zoom:S[2]},O,l)},E=Yl().on("start",_).on("zoom",c?g:null).on("zoom.wheel",d?y:null);o.call(E,{})}function s(){o.on("zoom",null)}return{update:r,destroy:s,pointer:rt}}const fh=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,zi=t=>({x:t.x,y:t.y,zoom:t.k}),Xi=({x:t,y:e,zoom:n})=>pi.translate(t,e).scale(n),xt=(t,e)=>t.target.closest(`.${e}`),us=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Fi=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},fs=t=>{const e=t.ctrlKey&&ci()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function ch({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:r,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(xt(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const c=n.property("__zoom").k||1;if(f.ctrlKey&&s){const _=rt(f),g=fs(f),E=c*Math.pow(2,g);i.scaleTo(n,E,_,f);return}const d=f.deltaMode===1?20:1;let h=o===mt.Vertical?0:f.deltaX*d,y=o===mt.Horizontal?0:f.deltaY*d;!ci()&&f.shiftKey&&o!==mt.Vertical&&(h=f.deltaY*d,y=0),i.translateBy(n,-(h/c)*r,-(y/c)*r,{internal:!0});const m=zi(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l==null||l(f,m)),t.isPanScrolling&&(a==null||a(f,m),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,m),t.isPanScrolling=!1},150))}}function dh({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||xt(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function hh({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var r,s,l;if((r=i.sourceEvent)!=null&&r.internal)return;const o=zi(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function gh({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return r=>{var s,l;t.usedRightMouseButton=!!(n&&us(e,t.mouseButton??0)),(s=r.sourceEvent)!=null&&s.sync||i([r.transform.x,r.transform.y,r.transform.k]),o&&!((l=r.sourceEvent)!=null&&l.internal)&&(o==null||o(r.sourceEvent,zi(r.transform)))}}function mh({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:r}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,r&&us(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&r(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&fh(t.prevViewport,s.transform))){const a=zi(s.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,a)},n?150:0)}}}function yh({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:r,userSelectionActive:s,noWheelClassName:l,noPanClassName:a,lib:u}){return f=>{var y;const c=t||e,d=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(xt(f,`${u}-flow__node`)||xt(f,`${u}-flow__edge`)))return!0;if(!i&&!c&&!o&&!r&&!n||s||xt(f,l)&&f.type==="wheel"||xt(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((y=f.touches)==null?void 0:y.length)>1)return f.preventDefault(),!1;if(!c&&!o&&!d&&f.type==="wheel"||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const h=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&h}}function _h({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:r,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=t.getBoundingClientRect(),d=Yl().clickDistance(!ut(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),h=it(t).call(d);v({x:r.x,y:r.y,zoom:sn(r.zoom,e,n)},[[0,0],[c.width,c.height]],o);const y=h.on("wheel.zoom"),m=h.on("dblclick.zoom");d.wheelDelta(fs);function _(R,F){return h?new Promise(k=>{d==null||d.transform(Fi(h,F==null?void 0:F.duration,()=>k(!0)),R)}):Promise.resolve(!1)}function g({noWheelClassName:R,noPanClassName:F,onPaneContextMenu:k,userSelectionActive:A,panOnScroll:w,panOnDrag:C,panOnScrollMode:I,panOnScrollSpeed:H,preventScrolling:K,zoomOnPinch:G,zoomOnScroll:j,zoomOnDoubleClick:ae,zoomActivationKeyPressed:B,lib:$,onTransformChange:fe}){A&&!f.isZoomingOrPanning&&E();const he=w&&!B&&!A?ch({zoomPanValues:f,noWheelClassName:R,d3Selection:h,d3Zoom:d,panOnScrollMode:I,panOnScrollSpeed:H,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:a}):dh({noWheelClassName:R,preventScrolling:K,d3ZoomHandler:y});if(h.on("wheel.zoom",he,{passive:!1}),!A){const we=hh({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:l});d.on("start",we);const ke=gh({zoomPanValues:f,panOnDrag:C,onPaneContextMenu:!!k,onPanZoom:s,onTransformChange:fe});d.on("zoom",ke);const pe=mh({zoomPanValues:f,panOnDrag:C,panOnScroll:w,onPaneContextMenu:k,onPanZoomEnd:a,onDraggingChange:u});d.on("end",pe)}const be=yh({zoomActivationKeyPressed:B,panOnDrag:C,zoomOnScroll:j,panOnScroll:w,zoomOnDoubleClick:ae,zoomOnPinch:G,userSelectionActive:A,noPanClassName:F,noWheelClassName:R,lib:$});d.filter(be),ae?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function E(){d.on("zoom",null)}async function v(R,F,k){const A=Xi(R),w=d==null?void 0:d.constrain()(A,F,k);return w&&await _(w),new Promise(C=>C(w))}async function S(R,F){const k=Xi(R);return await _(k,F),new Promise(A=>A(k))}function p(R){if(h){const F=Xi(R),k=h.property("__zoom");(k.k!==R.zoom||k.x!==R.x||k.y!==R.y)&&(d==null||d.transform(h,F,null,{sync:!0}))}}function D(){const R=h?Fl(h.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function P(R,F){return h?new Promise(k=>{d==null||d.scaleTo(Fi(h,F==null?void 0:F.duration,()=>k(!0)),R)}):Promise.resolve(!1)}function N(R,F){return h?new Promise(k=>{d==null||d.scaleBy(Fi(h,F==null?void 0:F.duration,()=>k(!0)),R)}):Promise.resolve(!1)}function O(R){d==null||d.scaleExtent(R)}function L(R){d==null||d.translateExtent(R)}function T(R){const F=!ut(R)||R<0?0:R;d==null||d.clickDistance(F)}return{update:g,destroy:E,setViewport:S,setViewportConstrained:v,getViewport:D,scaleTo:P,scaleBy:N,setScaleExtent:O,setTranslateExtent:L,syncViewport:p,setClickDistance:T}}var yr;(function(t){t.Line="line",t.Handle="handle"})(yr||(yr={}));function bh(t){let e,n,i,o,r,s;const l=t[45].default,a=Ue(l,t,t[44],null);return{c(){e=ze("div"),a&&a.c(),this.h()},l(u){e=Oe(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var f=U(e);a&&a.l(f),f.forEach(z),this.h()},h(){b(e,"data-handleid",t[6]),b(e,"data-nodeid",t[14]),b(e,"data-handlepos",t[2]),b(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),b(e,"class",i=De(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),b(e,"style",t[3]),b(e,"role","button"),b(e,"tabindex","-1"),ye(e,"valid",t[7]),ye(e,"connectingto",t[5]),ye(e,"connectingfrom",t[9]),ye(e,"source",!t[11]),ye(e,"target",t[11]),ye(e,"connectablestart",t[12]),ye(e,"connectableend",t[12]),ye(e,"connectable",t[12]),ye(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(u,f){J(u,e,f),a&&a.m(e,null),o=!0,r||(s=[Me(e,"mousedown",t[32]),Me(e,"touchstart",t[32])],r=!0)},p(u,f){a&&a.p&&(!o||f[1]&8192)&&Ze(a,l,u,u[44],o?Je(l,u[44],f,null):Ge(u[44]),null),(!o||f[0]&64)&&b(e,"data-handleid",u[6]),(!o||f[0]&4)&&b(e,"data-handlepos",u[2]),(!o||f[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&b(e,"data-id",n),(!o||f[0]&20&&i!==(i=De(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&b(e,"class",i),(!o||f[0]&8)&&b(e,"style",u[3]),(!o||f[0]&148)&&ye(e,"valid",u[7]),(!o||f[0]&52)&&ye(e,"connectingto",u[5]),(!o||f[0]&532)&&ye(e,"connectingfrom",u[9]),(!o||f[0]&2068)&&ye(e,"source",!u[11]),(!o||f[0]&2068)&&ye(e,"target",u[11]),(!o||f[0]&4116)&&ye(e,"connectablestart",u[12]),(!o||f[0]&4116)&&ye(e,"connectableend",u[12]),(!o||f[0]&4116)&&ye(e,"connectable",u[12]),(!o||f[0]&5396)&&ye(e,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(W(a,u),o=!0)},o(u){Y(a,u),o=!1},d(u){u&&z(e),a&&a.d(u),r=!1,ct(s)}}}function wh(t,e,n){let i,o,r,s,l,a,u,f,c,d,h,y,m,_,g,E,v,S,p,D,P,N,O,L,T,{$$slots:R={},$$scope:F}=e,{id:k=void 0}=e,{type:A="source"}=e,{position:w=de.Top}=e,{style:C=void 0}=e,{isValidConnection:I=void 0}=e,{onconnect:H=void 0}=e,{ondisconnect:K=void 0}=e,{isConnectable:G=void 0}=e,{class:j=void 0}=e;const ae=Qn("svelteflow__node_id"),B=Qn("svelteflow__node_connectable");Q(t,B,ee=>n(43,T=ee));const $=He(),{connectionMode:fe,domNode:V,nodeLookup:he,connectionRadius:be,viewport:we,isValidConnection:ke,lib:pe,addEdge:Le,onedgecreate:q,panBy:Re,cancelConnection:Te,updateConnection:Ot,autoPanOnConnect:bt,edges:wt,connectionLookup:Xe,onconnect:kt,onconnectstart:ie,onconnectend:Nt,flowId:Dt,connection:Z}=$;Q(t,fe,ee=>n(40,d=ee)),Q(t,V,ee=>n(55,O=ee)),Q(t,he,ee=>n(54,N=ee)),Q(t,be,ee=>n(56,L=ee)),Q(t,we,ee=>n(46,m=ee)),Q(t,ke,ee=>n(51,S=ee)),Q(t,pe,ee=>n(53,P=ee)),Q(t,q,ee=>n(50,v=ee)),Q(t,bt,ee=>n(52,D=ee)),Q(t,wt,ee=>n(42,y=ee)),Q(t,Xe,ee=>n(41,h=ee)),Q(t,kt,ee=>n(49,E=ee)),Q(t,ie,ee=>n(48,g=ee)),Q(t,Nt,ee=>n(47,_=ee)),Q(t,Dt,ee=>n(13,p=ee)),Q(t,Z,ee=>n(39,c=ee));function Tt(ee){const vt=jl(ee);(vt&&ee.button===0||!vt)&&ah.onPointerDown(ee,{handleId:r,nodeId:ae,isTarget:i,connectionRadius:L,domNode:O,nodeLookup:N,connectionMode:d,lib:P,autoPanOnConnect:D,flowId:p,isValidConnection:I??S,updateConnection:Ot,cancelConnection:Te,panBy:Re,onConnect:je=>{const Ye=v?v(je):je;Ye&&(Le(Ye),E==null||E(je))},onConnectStart:(je,Ye)=>{g==null||g(je,{nodeId:Ye.nodeId,handleId:Ye.handleId,handleType:Ye.handleType})},onConnectEnd:(je,Ye)=>{_==null||_(je,Ye)},getTransform:()=>[m.x,m.y,m.zoom],getFromHandle:()=>c.fromHandle})}let Fe=null,Qe;return t.$$set=ee=>{"id"in ee&&n(0,k=ee.id),"type"in ee&&n(1,A=ee.type),"position"in ee&&n(2,w=ee.position),"style"in ee&&n(3,C=ee.style),"isValidConnection"in ee&&n(33,I=ee.isValidConnection),"onconnect"in ee&&n(34,H=ee.onconnect),"ondisconnect"in ee&&n(35,K=ee.ondisconnect),"isConnectable"in ee&&n(36,G=ee.isConnectable),"class"in ee&&n(4,j=ee.class),"$$scope"in ee&&n(44,F=ee.$$scope)},t.$$.update=()=>{var ee,vt,je,Ye,Ut,Zt,Gt,Jt,It;if(t.$$.dirty[0]&2&&n(11,i=A==="target"),t.$$.dirty[1]&4128&&n(12,o=G!==void 0?G:T),t.$$.dirty[0]&1&&n(6,r=k||null),t.$$.dirty[0]&3|t.$$.dirty[1]&3096&&(H||K)&&n(38,Qe=h.get(`${ae}-${A}-${k||null}`)),t.$$.dirty[1]&216){if(Fe&&!zd(Qe,Fe)){const Vt=Qe??new Map;nr(Fe,Vt,K),nr(Vt,Fe,H)}n(37,Fe=Qe??new Map)}t.$$.dirty[1]&256&&n(10,s=!!c.fromHandle),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(9,l=((ee=c.fromHandle)==null?void 0:ee.nodeId)===ae&&((vt=c.fromHandle)==null?void 0:vt.type)===A&&((je=c.fromHandle)==null?void 0:je.id)===r),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(5,a=((Ye=c.toHandle)==null?void 0:Ye.nodeId)===ae&&((Ut=c.toHandle)==null?void 0:Ut.type)===A&&((Zt=c.toHandle)==null?void 0:Zt.id)===r),t.$$.dirty[0]&66|t.$$.dirty[1]&768&&n(8,u=d===Yt.Strict?((Gt=c.fromHandle)==null?void 0:Gt.type)!==A:ae!==((Jt=c.fromHandle)==null?void 0:Jt.nodeId)||r!==((It=c.fromHandle)==null?void 0:It.id)),t.$$.dirty[0]&32|t.$$.dirty[1]&256&&n(7,f=a&&c.isValid)},[k,A,w,C,j,a,r,f,u,l,s,i,o,p,ae,B,fe,V,he,be,we,ke,pe,q,bt,wt,Xe,kt,ie,Nt,Dt,Z,Tt,I,H,K,G,Fe,Qe,c,d,h,y,T,F,R]}class lt extends ge{constructor(e){super(),me(this,e,wh,bh,_e,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function kh(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,r,s,l;return e=new lt({props:{type:"target",position:t[1]??de.Top}}),s=new lt({props:{type:"source",position:t[2]??de.Bottom}}),{c(){oe(e.$$.fragment),n=ve(),o=Mt(i),r=ve(),oe(s.$$.fragment)},l(u){se(e.$$.fragment,u),n=Ee(u),o=zt(u,i),r=Ee(u),se(s.$$.fragment,u)},m(u,f){re(e,u,f),J(u,n,f),J(u,o,f),J(u,r,f),re(s,u,f),l=!0},p(u,[f]){var h;const c={};f&2&&(c.position=u[1]??de.Top),e.$set(c),(!l||f&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+"")&&qt(o,i);const d={};f&4&&(d.position=u[2]??de.Bottom),s.$set(d)},i(u){l||(W(e.$$.fragment,u),W(s.$$.fragment,u),l=!0)},o(u){Y(e.$$.fragment,u),Y(s.$$.fragment,u),l=!1},d(u){u&&(z(n),z(o),z(r)),le(e,u),le(s,u)}}}function vh(t,e,n){const i=["data","targetPosition","sourcePosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{targetPosition:r=void 0}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=Se(Se({},e),nt(l)),n(3,Ie(e,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,r=l.targetPosition),"sourcePosition"in l&&n(2,s=l.sourcePosition)},[o,r,s]}class cs extends ge{constructor(e){super(),me(this,e,vh,kh,_e,{data:0,targetPosition:1,sourcePosition:2})}}function Eh(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,r;return o=new lt({props:{type:"source",position:t[1]??de.Bottom}}),{c(){n=Mt(e),i=ve(),oe(o.$$.fragment)},l(l){n=zt(l,e),i=Ee(l),se(o.$$.fragment,l)},m(l,a){J(l,n,a),J(l,i,a),re(o,l,a),r=!0},p(l,[a]){var f;(!r||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+"")&&qt(n,e);const u={};a&2&&(u.position=l[1]??de.Bottom),o.$set(u)},i(l){r||(W(o.$$.fragment,l),r=!0)},o(l){Y(o.$$.fragment,l),r=!1},d(l){l&&(z(n),z(i)),le(o,l)}}}function Sh(t,e,n){const i=["data","sourcePosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:r=void 0}=e;return t.$$set=s=>{e=Se(Se({},e),nt(s)),n(2,Ie(e,i)),"data"in s&&n(0,o=s.data),"sourcePosition"in s&&n(1,r=s.sourcePosition)},[o,r]}class ph extends ge{constructor(e){super(),me(this,e,Sh,Eh,_e,{data:0,sourcePosition:1})}}function Ch(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,r;return o=new lt({props:{type:"target",position:t[1]??de.Top}}),{c(){n=Mt(e),i=ve(),oe(o.$$.fragment)},l(l){n=zt(l,e),i=Ee(l),se(o.$$.fragment,l)},m(l,a){J(l,n,a),J(l,i,a),re(o,l,a),r=!0},p(l,[a]){var f;(!r||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+"")&&qt(n,e);const u={};a&2&&(u.position=l[1]??de.Top),o.$set(u)},i(l){r||(W(o.$$.fragment,l),r=!0)},o(l){Y(o.$$.fragment,l),r=!1},d(l){l&&(z(n),z(i)),le(o,l)}}}function Ph(t,e,n){const i=["data","targetPosition"];Ie(e,i);let{data:o={label:"Node"}}=e,{targetPosition:r=void 0}=e;return t.$$set=s=>{e=Se(Se({},e),nt(s)),n(2,Ie(e,i)),"data"in s&&n(0,o=s.data),"targetPosition"in s&&n(1,r=s.targetPosition)},[o,r]}class Mh extends ge{constructor(e){super(),me(this,e,Ph,Ch,_e,{data:0,targetPosition:1})}}function zh(t,e,n){const i=[];return Ie(e,i),t.$$set=o=>{e=Se(Se({},e),nt(o)),n(0,Ie(e,i))},[]}class Oh extends ge{constructor(e){super(),me(this,e,zh,null,_e,{})}}function _r(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Nh(t,{target:e,domNode:n}){return _r(t,n,e),{async update({target:i,domNode:o}){_r(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Dh(t){let e,n,i,o,r;const s=t[3].default,l=Ue(s,t,t[2],null);return{c(){e=ze("div"),l&&l.c()},l(a){e=Oe(a,"DIV",{});var u=U(e);l&&l.l(u),u.forEach(z)},m(a,u){J(a,e,u),l&&l.m(e,null),i=!0,o||(r=qe(n=Nh.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ze(l,s,a,a[2],i?Je(s,a[2],u,null):Ge(a[2]),null),n&&Ae(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(W(l,a),i=!0)},o(a){Y(l,a),i=!1},d(a){a&&z(e),l&&l.d(a),o=!1,r()}}}function Th(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const{domNode:s}=He();return Q(t,s,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class Ih extends ge{constructor(e){super(),me(this,e,Th,Dh,_e,{})}}function ds(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:r,elementsSelectable:s}=He();return l=>{const a=X(t).get(l);if(!a){console.warn("012",On.error012(l));return}(a.selectable||X(s)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&X(i)&&r({nodes:[],edges:[a]}):o([l]))}}function Ah(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,r,s;const l=t[5].default,a=Ue(l,t,t[7],null);return{c(){e=ze("div"),a&&a.c(),this.h()},l(u){e=Oe(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var f=U(e);a&&a.l(f),f.forEach(z),this.h()},h(){b(e,"class","svelte-flow__edge-label"),b(e,"style",n="pointer-events: all;"+t[0]),b(e,"role","button"),b(e,"tabindex","-1"),ce(e,"transform",i)},m(u,f){J(u,e,f),a&&a.m(e,null),o=!0,r||(s=[Me(e,"keyup",Lh),Me(e,"click",t[6])],r=!0)},p(u,f){a&&a.p&&(!o||f&128)&&Ze(a,l,u,u[7],o?Je(l,u[7],f,null):Ge(u[7]),null),(!o||f&1&&n!==(n="pointer-events: all;"+u[0]))&&b(e,"style",n);const c=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||c)&&ce(e,"transform",i)},i(u){o||(W(a,u),o=!0)},o(u){Y(a,u),o=!1},d(u){u&&z(e),a&&a.d(u),r=!1,ct(s)}}}function Hh(t){let e,n;return e=new Ih({props:{$$slots:{default:[Ah]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&135&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}const Lh=()=>{};function Rh(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:r=void 0}=e,{x:s=void 0}=e,{y:l=void 0}=e;const a=ds(),u=Qn("svelteflow__edge_id"),f=()=>{u&&a(u)};return t.$$set=c=>{"style"in c&&n(0,r=c.style),"x"in c&&n(1,s=c.x),"y"in c&&n(2,l=c.y),"$$scope"in c&&n(7,o=c.$$scope)},[r,s,l,a,u,i,f,o]}class Vh extends ge{constructor(e){super(),me(this,e,Rh,Hh,_e,{style:0,x:1,y:2})}}function Bh(t){let e;return{c(){e=te("path"),this.h()},l(n){e=ne(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),U(e).forEach(z),this.h()},h(){b(e,"d",t[1]),b(e,"stroke-opacity",0),b(e,"stroke-width",t[10]),b(e,"fill","none"),b(e,"class","svelte-flow__edge-interaction")},m(n,i){J(n,e,i)},p(n,i){i&2&&b(e,"d",n[1])},d(n){n&&z(e)}}}function br(t){let e,n;return e=new Vh({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Wh]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.x=i[3]),o&16&&(r.y=i[4]),o&32&&(r.style=i[5]),o&4100&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Wh(t){let e;return{c(){e=Mt(t[2])},l(n){e=zt(n,t[2])},m(n,i){J(n,e,i)},p(n,i){i&4&&qt(e,n[2])},d(n){n&&z(e)}}}function Xh(t){let e,n,i,o,r,s,l=t[10]&&Bh(t),a=t[2]&&br(t);return{c(){e=te("path"),i=ve(),l&&l.c(),o=ve(),a&&a.c(),r=Ne(),this.h()},l(u){e=ne(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),U(e).forEach(z),i=Ee(u),l&&l.l(u),o=Ee(u),a&&a.l(u),r=Ne(),this.h()},h(){b(e,"id",t[0]),b(e,"d",t[1]),b(e,"class",n=De(["svelte-flow__edge-path",t[9]])),b(e,"marker-start",t[6]),b(e,"marker-end",t[7]),b(e,"fill","none"),b(e,"style",t[8])},m(u,f){J(u,e,f),J(u,i,f),l&&l.m(u,f),J(u,o,f),a&&a.m(u,f),J(u,r,f),s=!0},p(u,[f]){(!s||f&1)&&b(e,"id",u[0]),(!s||f&2)&&b(e,"d",u[1]),(!s||f&512&&n!==(n=De(["svelte-flow__edge-path",u[9]])))&&b(e,"class",n),(!s||f&64)&&b(e,"marker-start",u[6]),(!s||f&128)&&b(e,"marker-end",u[7]),(!s||f&256)&&b(e,"style",u[8]),u[10]&&l.p(u,f),u[2]?a?(a.p(u,f),f&4&&W(a,1)):(a=br(u),a.c(),W(a,1),a.m(r.parentNode,r)):a&&(Be(),Y(a,1,1,()=>{a=null}),We())},i(u){s||(W(a),s=!0)},o(u){Y(a),s=!1},d(u){u&&(z(e),z(i),z(o),z(r)),l&&l.d(u),a&&a.d(u)}}}function Fh(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:r=void 0}=e,{labelX:s=void 0}=e,{labelY:l=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:c=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,y=d===void 0?20:d;return t.$$set=m=>{"id"in m&&n(0,i=m.id),"path"in m&&n(1,o=m.path),"label"in m&&n(2,r=m.label),"labelX"in m&&n(3,s=m.labelX),"labelY"in m&&n(4,l=m.labelY),"labelStyle"in m&&n(5,a=m.labelStyle),"markerStart"in m&&n(6,u=m.markerStart),"markerEnd"in m&&n(7,f=m.markerEnd),"style"in m&&n(8,c=m.style),"interactionWidth"in m&&n(11,d=m.interactionWidth),"class"in m&&n(9,h=m.class)},[i,o,r,s,l,a,u,f,c,h,y,d]}class Oi extends ge{constructor(e){super(),me(this,e,Fh,Xh,_e,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Yh(t){let e,n;return e=new Oi({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Kh(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=v=>{e=Se(Se({},e),nt(v)),n(15,Ie(e,s)),"label"in v&&n(0,l=v.label),"labelStyle"in v&&n(1,a=v.labelStyle),"style"in v&&n(2,u=v.style),"markerStart"in v&&n(3,f=v.markerStart),"markerEnd"in v&&n(4,c=v.markerEnd),"interactionWidth"in v&&n(5,d=v.interactionWidth),"sourceX"in v&&n(9,h=v.sourceX),"sourceY"in v&&n(10,y=v.sourceY),"sourcePosition"in v&&n(11,m=v.sourcePosition),"targetX"in v&&n(12,_=v.targetX),"targetY"in v&&n(13,g=v.targetY),"targetPosition"in v&&n(14,E=v.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=xl({sourceX:h,sourceY:y,targetX:_,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)),(n(6,r),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)))},[l,a,u,f,c,d,r,o,i,h,y,m,_,g,E]}class hs extends ge{constructor(e){super(),me(this,e,Kh,Yh,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function qh(t){let e,n;return e=new Oi({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Uh(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=v=>{e=Se(Se({},e),nt(v)),n(15,Ie(e,s)),"label"in v&&n(0,l=v.label),"labelStyle"in v&&n(1,a=v.labelStyle),"style"in v&&n(2,u=v.style),"markerStart"in v&&n(3,f=v.markerStart),"markerEnd"in v&&n(4,c=v.markerEnd),"interactionWidth"in v&&n(5,d=v.interactionWidth),"sourceX"in v&&n(9,h=v.sourceX),"sourceY"in v&&n(10,y=v.sourceY),"sourcePosition"in v&&n(11,m=v.sourcePosition),"targetX"in v&&n(12,_=v.targetX),"targetY"in v&&n(13,g=v.targetY),"targetPosition"in v&&n(14,E=v.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=hi({sourceX:h,sourceY:y,targetX:_,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)),(n(6,r),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)))},[l,a,u,f,c,d,r,o,i,h,y,m,_,g,E]}class Zh extends ge{constructor(e){super(),me(this,e,Uh,qh,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Gh(t){let e,n;return e=new Oi({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Jh(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:y}=e,{targetX:m}=e,{targetY:_}=e;return t.$$set=g=>{e=Se(Se({},e),nt(g)),n(13,Ie(e,s)),"label"in g&&n(0,l=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,f=g.markerStart),"markerEnd"in g&&n(4,c=g.markerEnd),"interactionWidth"in g&&n(5,d=g.interactionWidth),"sourceX"in g&&n(9,h=g.sourceX),"sourceY"in g&&n(10,y=g.sourceY),"targetX"in g&&n(11,m=g.targetX),"targetY"in g&&n(12,_=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,r]=es({sourceX:h,sourceY:y,targetX:m,targetY:_}),i,(n(7,o),n(9,h),n(10,y),n(11,m),n(12,_)),(n(6,r),n(9,h),n(10,y),n(11,m),n(12,_)))},[l,a,u,f,c,d,r,o,i,h,y,m,_]}class Qh extends ge{constructor(e){super(),me(this,e,Jh,Gh,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function jh(t){let e,n;return e=new Oi({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function xh(t,e,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Ie(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:_}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=v=>{e=Se(Se({},e),nt(v)),n(15,Ie(e,s)),"label"in v&&n(0,l=v.label),"labelStyle"in v&&n(1,a=v.labelStyle),"style"in v&&n(2,u=v.style),"markerStart"in v&&n(3,f=v.markerStart),"markerEnd"in v&&n(4,c=v.markerEnd),"interactionWidth"in v&&n(5,d=v.interactionWidth),"sourceX"in v&&n(9,h=v.sourceX),"sourceY"in v&&n(10,y=v.sourceY),"sourcePosition"in v&&n(11,m=v.sourcePosition),"targetX"in v&&n(12,_=v.targetX),"targetY"in v&&n(13,g=v.targetY),"targetPosition"in v&&n(14,E=v.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,r]=hi({sourceX:h,sourceY:y,targetX:_,targetY:g,sourcePosition:m,targetPosition:E,borderRadius:0}),i,(n(7,o),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)),(n(6,r),n(9,h),n(10,y),n(12,_),n(13,g),n(11,m),n(14,E)))},[l,a,u,f,c,d,r,o,i,h,y,m,_,g,E]}class $h extends ge{constructor(e){super(),me(this,e,xh,jh,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function eg(t,e){const n=t.set,i=e.set,o=X(t),r=X(e);let l=o.length===0&&r.length>0?r:o;t.set(l);const a=u=>{const f=n(u);return l=f,i(l),f};t.set=e.set=a,t.update=e.update=u=>a(u(l))}function tg(t,e){const n=t.set,i=e.set;let o=X(e);t.set(o);const r=s=>{n(s),i(s),o=s};t.set=e.set=r,t.update=e.update=s=>r(s(o))}const ng=(t,e,n)=>{if(!n)return;const i=X(t),o=e.set,r=n.set;let s=n?X(n):{x:0,y:0,zoom:1};e.set(s),e.set=l=>(o(l),r(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),o(l),r(l),s=l,l),e.update=l=>{e.set(l(s))},n.update=l=>{n.set(l(s))}},ig=(t,e,n,i=[0,0],o=ai)=>{const{subscribe:r,set:s,update:l}=ue([]);let a=t,u={},f=!0;const c=m=>(ts(m,e,n,{elevateNodesOnSelect:f,nodeOrigin:i,nodeExtent:o,defaults:u,checkEquality:!1}),a=m,s(a),a),d=m=>c(m(a)),h=m=>{u=m},y=m=>{f=m.elevateNodesOnSelect??f};return c(a),{subscribe:r,set:c,update:d,setDefaultOptions:h,setOptions:y}},og=(t,e,n,i)=>{const{subscribe:o,set:r,update:s}=ue([]);let l=t,a={};const u=d=>{const h=a?d.map(y=>({...a,...y})):d;is(e,n,h),l=h,r(l)},f=d=>u(d(l)),c=d=>{a=d};return u(l),{subscribe:o,set:u,update:f,setDefaultOptions:c}},gs={input:ph,output:Mh,default:cs,group:Oh},ms={straight:Qh,smoothstep:Zh,default:hs,step:$h},rg=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s})=>{const l=new Map,a=new Map,u=new Map,f=new Map,c=r??[0,0],d=s??ai;ts(t,l,a,{nodeExtent:d,nodeOrigin:c,elevateNodesOnSelect:!1,checkEquality:!1}),is(u,f,e);let h={x:0,y:0,zoom:1};if(o&&n&&i){const y=Dn(l,{filter:m=>!!((m.width||m.initialWidth)&&(m.height||m.initialHeight))});h=Mi(y,n,i,.5,2,.1)}return{flowId:ue(null),nodes:ig(t,l,a,c,d),nodeLookup:ot(l),parentLookup:ot(a),edgeLookup:ot(f),visibleNodes:ot([]),edges:og(e,u,f),visibleEdges:ot([]),connectionLookup:ot(u),height:ue(500),width:ue(500),minZoom:ue(.5),maxZoom:ue(2),nodeOrigin:ue(c),nodeDragThreshold:ue(1),nodeExtent:ue(d),translateExtent:ue(ai),autoPanOnNodeDrag:ue(!0),autoPanOnConnect:ue(!0),fitViewOnInit:ue(!1),fitViewOnInitDone:ue(!1),fitViewOptions:ue(void 0),panZoom:ue(null),snapGrid:ue(null),dragging:ue(!1),selectionRect:ue(null),selectionKeyPressed:ue(!1),multiselectionKeyPressed:ue(!1),deleteKeyPressed:ue(!1),panActivationKeyPressed:ue(!1),zoomActivationKeyPressed:ue(!1),selectionRectMode:ue(null),selectionMode:ue(ui.Partial),nodeTypes:ue(gs),edgeTypes:ue(ms),viewport:ue(h),connectionMode:ue(Yt.Strict),domNode:ue(null),connection:ot(no),connectionLineType:ue(nn.Bezier),connectionRadius:ue(20),isValidConnection:ue(()=>!0),nodesDraggable:ue(!0),nodesConnectable:ue(!0),elementsSelectable:ue(!0),selectNodesOnDrag:ue(!0),markers:ot([]),defaultMarkerColor:ue("#b1b1b7"),lib:ot("svelte"),onlyRenderVisibleElements:ue(!1),onerror:ue(Td),ondelete:ue(void 0),onedgecreate:ue(void 0),onconnect:ue(void 0),onconnectstart:ue(void 0),onconnectend:ue(void 0),onbeforedelete:ue(void 0),nodesInitialized:ue(!1),edgesInitialized:ue(!1),viewportInitialized:ue(!1),initialized:ot(!1)}};function lg(t){const e=$t([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,r,s,l])=>o&&s&&l?n.filter(u=>{const f=i.get(u.source),c=i.get(u.target);return f&&c&&Bd({sourceNode:f,targetNode:c,width:s,height:l,transform:[r.x,r.y,r.zoom]})}):n);return $t([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,r])=>n.reduce((l,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return l;const c=Ud({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:r});return c&&l.push({...a,zIndex:Vd({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...c}),l},[]))}function sg(t){return $t([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,r])=>{const s=[r.x,r.y,r.zoom];return n?ql(e,{x:0,y:0,width:i,height:o},s,!0):Array.from(e.values())})}const Ni=Symbol();function ys({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=rg({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});function a(w){l.nodeTypes.set({...gs,...w})}function u(w){l.edgeTypes.set({...ms,...w})}function f(w){const C=X(l.edges);l.edges.set(Fd(w,C))}const c=(w,C=!1)=>{var H;const I=X(l.nodeLookup);for(const[K,G]of w){const j=(H=I.get(K))==null?void 0:H.internals.userNode;j&&(j.position=G.position,j.dragging=C)}l.nodes.update(K=>K)};function d(w){var G,j,ae;const C=X(l.nodeLookup),I=X(l.parentLookup),{changes:H,updatedInternals:K}=$d(w,C,X(l.parentLookup),X(l.domNode),X(l.nodeOrigin));if(K){if(Jd(C,I,{nodeOrigin:r,nodeExtent:s}),!X(l.fitViewOnInitDone)&&X(l.fitViewOnInit)){const B=X(l.fitViewOptions),$=y({...B,nodes:B==null?void 0:B.nodes});l.fitViewOnInitDone.set($)}for(const B of H){const $=(G=C.get(B.id))==null?void 0:G.internals.userNode;if($)switch(B.type){case"dimensions":{const fe={...$.measured,...B.dimensions};B.setAttributes&&($.width=((j=B.dimensions)==null?void 0:j.width)??$.width,$.height=((ae=B.dimensions)==null?void 0:ae.height)??$.height),$.measured=fe;break}case"position":$.position=B.position??$.position;break}}l.nodes.update(B=>B),X(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function h(w){const C=X(l.panZoom),I=X(l.domNode);if(!C||!I)return Promise.resolve(!1);const{width:H,height:K}=bo(I),G=or(X(l.nodeLookup),w);return rr({nodes:G,width:H,height:K,minZoom:X(l.minZoom),maxZoom:X(l.maxZoom),panZoom:C},w)}function y(w){const C=X(l.panZoom);if(!C)return!1;const I=or(X(l.nodeLookup),w);return rr({nodes:I,width:X(l.width),height:X(l.height),minZoom:X(l.minZoom),maxZoom:X(l.maxZoom),panZoom:C},w),I.size>0}function m(w,C){const I=X(l.panZoom);return I?I.scaleBy(w,C):Promise.resolve(!1)}function _(w){return m(1.2,w)}function g(w){return m(1/1.2,w)}function E(w){const C=X(l.panZoom);C&&(C.setScaleExtent([w,X(l.maxZoom)]),l.minZoom.set(w))}function v(w){const C=X(l.panZoom);C&&(C.setScaleExtent([X(l.minZoom),w]),l.maxZoom.set(w))}function S(w){const C=X(l.panZoom);C&&(C.setTranslateExtent(w),l.translateExtent.set(w))}function p(w){let C=!1;return w.forEach(I=>{I.selected&&(I.selected=!1,C=!0)}),C}function D(w){var C;(C=X(l.panZoom))==null||C.setClickDistance(w)}function P(w){p((w==null?void 0:w.nodes)||X(l.nodes))&&l.nodes.set(X(l.nodes)),p((w==null?void 0:w.edges)||X(l.edges))&&l.edges.set(X(l.edges))}l.deleteKeyPressed.subscribe(async w=>{var C;if(w){const I=X(l.nodes),H=X(l.edges),K=I.filter(B=>B.selected),G=H.filter(B=>B.selected),{nodes:j,edges:ae}=await Ul({nodesToRemove:K,edgesToRemove:G,nodes:I,edges:H,onBeforeDelete:X(l.onbeforedelete)});(j.length||ae.length)&&(l.nodes.update(B=>B.filter($=>!j.some(fe=>fe.id===$.id))),l.edges.update(B=>B.filter($=>!ae.some(fe=>fe.id===$.id))),(C=X(l.ondelete))==null||C({nodes:j,edges:ae}))}});function N(w){const C=X(l.multiselectionKeyPressed);l.nodes.update(I=>I.map(H=>{const K=w.includes(H.id),G=C&&H.selected||K;return H.selected=G,H})),C||l.edges.update(I=>I.map(H=>(H.selected=!1,H)))}function O(w){const C=X(l.multiselectionKeyPressed);l.edges.update(I=>I.map(H=>{const K=w.includes(H.id),G=C&&H.selected||K;return H.selected=G,H})),C||l.nodes.update(I=>I.map(H=>(H.selected=!1,H)))}function L(w){var I;const C=(I=X(l.nodes))==null?void 0:I.find(H=>H.id===w);if(!C){console.warn("012",On.error012(w));return}l.selectionRect.set(null),l.selectionRectMode.set(null),C.selected?C.selected&&X(l.multiselectionKeyPressed)&&P({nodes:[C],edges:[]}):N([w])}function T(w){const C=X(l.viewport);return eh({delta:w,panZoom:X(l.panZoom),transform:[C.x,C.y,C.zoom],translateExtent:X(l.translateExtent),width:X(l.width),height:X(l.height)})}const R=ue(no),F=w=>{R.set({...w})};function k(){R.set(no)}function A(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),P(),k()}return{...l,visibleEdges:lg(l),visibleNodes:sg(l),connection:$t([R,l.viewport],([w,C])=>w.inProgress?{...w,to:Tn(w.to,[C.x,C.y,C.zoom])}:{...w}),markers:$t([l.edges,l.defaultMarkerColor,l.flowId],([w,C,I])=>Zd(w,{defaultColor:C,id:I})),initialized:(()=>{let w=!1;const C=X(l.nodes).length,I=X(l.edges).length;return $t([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([H,K,G])=>w||(C===0?w=G:I===0?w=G&&H:w=G&&H&&K,w))})(),syncNodeStores:w=>eg(l.nodes,w),syncEdgeStores:w=>tg(l.edges,w),syncViewport:w=>ng(l.panZoom,l.viewport,w),setNodeTypes:a,setEdgeTypes:u,addEdge:f,updateNodePositions:c,updateNodeInternals:d,zoomIn:_,zoomOut:g,fitView:w=>h(w),setMinZoom:E,setMaxZoom:v,setTranslateExtent:S,setPaneClickDistance:D,unselectNodesAndEdges:P,addSelectedNodes:N,addSelectedEdges:O,handleNodeSelection:L,panBy:T,updateConnection:F,cancelConnection:k,reset:A}}function He(){const t=Qn(Ni);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function ag({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=ys({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});return _n(Ni,{getStore:()=>l}),l}function ug(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:r,viewport:s,dragging:l,translateExtent:a,paneClickDistance:u}=e,f=_h({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:r,paneClickDistance:u,onDraggingChange:l.set}),c=f.getViewport();return s.set(c),n.set(f),f.update(e),{update(d){f.update(d)}}}function fg(t){let e,n,i,o,r;const s=t[35].default,l=Ue(s,t,t[34],null);return{c(){e=ze("div"),l&&l.c(),this.h()},l(a){e=Oe(a,"DIV",{class:!0});var u=U(e);l&&l.l(u),u.forEach(z),this.h()},h(){b(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){J(a,e,u),l&&l.m(e,null),i=!0,o||(r=qe(n=ug.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||mt.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})),o=!0)},p(a,u){l&&l.p&&(!i||u[1]&8)&&Ze(l,s,a,a[34],i?Je(s,a[34],u,null):Ge(a[34]),null),n&&Ae(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||mt.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){i||(W(l,a),i=!0)},o(a){Y(l,a),i=!1},d(a){a&&z(e),l&&l.d(a),o=!1,r()}}}function cg(t,e,n){let i,o,r,s,l,a,u,f,c,d,h,{$$slots:y={},$$scope:m}=e,{initialViewport:_=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:E=void 0}=e,{onMoveEnd:v=void 0}=e,{panOnScrollMode:S}=e,{preventScrolling:p}=e,{zoomOnScroll:D}=e,{zoomOnDoubleClick:P}=e,{zoomOnPinch:N}=e,{panOnDrag:O}=e,{panOnScroll:L}=e,{paneClickDistance:T}=e;const{viewport:R,panZoom:F,selectionRect:k,minZoom:A,maxZoom:w,dragging:C,translateExtent:I,lib:H,panActivationKeyPressed:K,zoomActivationKeyPressed:G,viewportInitialized:j}=He();Q(t,k,B=>n(15,c=B)),Q(t,A,B=>n(12,a=B)),Q(t,w,B=>n(13,u=B)),Q(t,I,B=>n(16,d=B)),Q(t,H,B=>n(17,h=B)),Q(t,K,B=>n(33,l=B)),Q(t,G,B=>n(14,f=B)),Q(t,j,B=>n(36,s=B));const ae=B=>R.set({x:B[0],y:B[1],zoom:B[2]});return Cn(()=>{jn(j,s=!0,s)}),t.$$set=B=>{"initialViewport"in B&&n(30,_=B.initialViewport),"onMoveStart"in B&&n(0,g=B.onMoveStart),"onMove"in B&&n(1,E=B.onMove),"onMoveEnd"in B&&n(2,v=B.onMoveEnd),"panOnScrollMode"in B&&n(3,S=B.panOnScrollMode),"preventScrolling"in B&&n(4,p=B.preventScrolling),"zoomOnScroll"in B&&n(5,D=B.zoomOnScroll),"zoomOnDoubleClick"in B&&n(6,P=B.zoomOnDoubleClick),"zoomOnPinch"in B&&n(7,N=B.zoomOnPinch),"panOnDrag"in B&&n(31,O=B.panOnDrag),"panOnScroll"in B&&n(32,L=B.panOnScroll),"paneClickDistance"in B&&n(8,T=B.paneClickDistance),"$$scope"in B&&n(34,m=B.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1073741824&&n(11,i=_||{x:0,y:0,zoom:1}),t.$$.dirty[1]&5&&n(10,o=l||O),t.$$.dirty[1]&6&&n(9,r=l||L)},[g,E,v,S,p,D,P,N,T,r,o,i,a,u,f,c,d,h,R,F,k,A,w,C,I,H,K,G,j,ae,_,O,L,l,m,y]}class dg extends ge{constructor(e){super(),me(this,e,cg,fg,_e,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function hg(t){let e,n,i,o;const r=t[28].default,s=Ue(r,t,t[27],null);return{c(){e=ze("div"),s&&s.c(),this.h()},l(l){e=Oe(l,"DIV",{class:!0});var a=U(e);s&&s.l(a),a.forEach(z),this.h()},h(){b(e,"class","svelte-flow__pane svelte-1esy7hx"),ye(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),ye(e,"dragging",t[4]),ye(e,"selection",t[1])},m(l,a){J(l,e,a),s&&s.m(e,null),t[29](e),n=!0,i||(o=[Me(e,"click",function(){Ae(t[3]?void 0:Fn(t[15],t[2]))&&(t[3]?void 0:Fn(t[15],t[2])).apply(this,arguments)}),Me(e,"pointerdown",function(){Ae(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),Me(e,"pointermove",function(){Ae(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),Me(e,"pointerup",function(){Ae(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),Me(e,"contextmenu",function(){Ae(Fn(t[19],t[2]))&&Fn(t[19],t[2]).apply(this,arguments)})],i=!0)},p(l,a){t=l,s&&s.p&&(!n||a[0]&134217728)&&Ze(s,r,t,t[27],n?Je(r,t[27],a,null):Ge(t[27]),null),(!n||a[0]&1)&&ye(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),(!n||a[0]&16)&&ye(e,"dragging",t[4]),(!n||a[0]&2)&&ye(e,"selection",t[1])},i(l){n||(W(s,l),n=!0)},o(l){Y(s,l),n=!1},d(l){l&&z(e),s&&s.d(l),t[29](null),i=!1,ct(o)}}}function Fn(t,e){return n=>{n.target===e&&(t==null||t(n))}}function wr(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function gg(t,e,n){let i,o,r,s,l,a,u,f,c,d,h,y,m,{$$slots:_={},$$scope:g}=e,{panOnDrag:E=void 0}=e,{selectionOnDrag:v=void 0}=e;const S=Pn(),{nodes:p,nodeLookup:D,edges:P,viewport:N,dragging:O,elementsSelectable:L,selectionRect:T,selectionRectMode:R,selectionKeyPressed:F,selectionMode:k,panActivationKeyPressed:A,unselectNodesAndEdges:w}=He();Q(t,D,V=>n(36,c=V)),Q(t,P,V=>n(33,a=V)),Q(t,N,V=>n(35,f=V)),Q(t,O,V=>n(4,m=V)),Q(t,L,V=>n(25,h=V)),Q(t,T,V=>n(24,d=V)),Q(t,R,V=>n(23,l=V)),Q(t,F,V=>n(22,s=V)),Q(t,k,V=>n(34,u=V)),Q(t,A,V=>n(26,y=V));let C,I=null,H=[],K=!1;function G(V){if(K){K=!1;return}S("paneclick",{event:V}),w(),R.set(null)}function j(V){var we,ke;if(I=C.getBoundingClientRect(),!L||!o||V.button!==0||V.target!==C||!I)return;(ke=(we=V.target)==null?void 0:we.setPointerCapture)==null||ke.call(we,V.pointerId);const{x:he,y:be}=Ct(V,I);w(),T.set({width:0,height:0,startX:he,startY:be,x:he,y:be})}function ae(V){if(!o||!I||!d)return;K=!0;const he=Ct(V,I),be=d.startX??0,we=d.startY??0,ke={...d,x:he.x<be?he.x:be,y:he.y<we?he.y:we,width:Math.abs(he.x-be),height:Math.abs(he.y-we)},pe=H.map(Te=>Te.id),Le=io(H,a).map(Te=>Te.id);H=ql(c,ke,[f.x,f.y,f.zoom],u===ui.Partial,!0);const q=io(H,a).map(Te=>Te.id),Re=H.map(Te=>Te.id);(pe.length!==Re.length||Re.some(Te=>!pe.includes(Te)))&&p.update(Te=>Te.map(wr(Re))),(Le.length!==q.length||q.some(Te=>!Le.includes(Te)))&&P.update(Te=>Te.map(wr(q))),R.set("user"),T.set(ke)}function B(V){var he,be;V.button===0&&((be=(he=V.target)==null?void 0:he.releasePointerCapture)==null||be.call(he,V.pointerId),!o&&l==="user"&&V.target===C&&(G==null||G(V)),T.set(null),H.length>0&&jn(R,l="nodes",l),s&&(K=!1))}const $=V=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){V.preventDefault();return}S("panecontextmenu",{event:V})};function fe(V){at[V?"unshift":"push"](()=>{C=V,n(2,C)})}return t.$$set=V=>{"panOnDrag"in V&&n(0,E=V.panOnDrag),"selectionOnDrag"in V&&n(20,v=V.selectionOnDrag),"$$scope"in V&&n(27,g=V.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=y||E),t.$$.dirty[0]&24117248&&n(1,o=s||d||v&&i!==!0),t.$$.dirty[0]&41943042&&n(3,r=h&&(o||l==="user"))},[E,o,C,r,m,D,P,N,O,L,T,R,F,k,A,G,j,ae,B,$,v,i,s,l,d,h,y,g,_,fe]}class mg extends ge{constructor(e){super(),me(this,e,gg,hg,_e,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function yg(t){let e,n;const i=t[3].default,o=Ue(i,t,t[2],null);return{c(){e=ze("div"),o&&o.c(),this.h()},l(r){e=Oe(r,"DIV",{class:!0,style:!0});var s=U(e);o&&o.l(s),s.forEach(z),this.h()},h(){b(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ce(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(r,s){J(r,e,s),o&&o.m(e,null),n=!0},p(r,[s]){o&&o.p&&(!n||s&4)&&Ze(o,i,r,r[2],n?Je(i,r[2],s,null):Ge(r[2]),null),(!n||s&1)&&ce(e,"transform","translate("+r[0].x+"px, "+r[0].y+"px) scale("+r[0].zoom+")")},i(r){n||(W(o,r),n=!0)},o(r){Y(o,r),n=!1},d(r){r&&z(e),o&&o.d(r)}}}function _g(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const{viewport:s}=He();return Q(t,s,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class bg extends ge{constructor(e){super(),me(this,e,_g,yg,_e,{})}}function _s(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s}=e,l=nh({onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s,getStoreItems:()=>{const u=X(n.snapGrid),f=X(n.viewport);return{nodes:X(n.nodes),nodeLookup:X(n.nodeLookup),edges:X(n.edges),nodeExtent:X(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:X(n.nodeOrigin),multiSelectionActive:X(n.multiselectionKeyPressed),domNode:X(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:X(n.autoPanOnNodeDrag),nodesDraggable:X(n.nodesDraggable),selectNodesOnDrag:X(n.selectNodesOnDrag),nodeDragThreshold:X(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){l.destroy()}}}function wg({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:r}){if(o===void 0&&r===void 0){const s=t??n,l=e??i;return{width:s?`width:${s}px;`:"",height:l?`height:${l}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function kr(t){let e,n,i,o,r,s=`translate(${t[12]}px, ${t[13]}px)`,l,a,u;var f=t[27];function c(d,h){return{props:{data:d[2],id:d[1],selected:d[3],selectable:d[5],deletable:d[7],sourcePosition:d[14],targetPosition:d[15],zIndex:d[16],dragging:d[9],draggable:d[4],dragHandle:d[19],parentId:d[21],type:d[25],isConnectable:d[28],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[17],height:d[18]}}}return f&&(n=xn(f,c(t))),{c(){e=ze("div"),n&&oe(n.$$.fragment),this.h()},l(d){e=Oe(d,"DIV",{"data-id":!0,class:!0,style:!0});var h=U(e);n&&se(n.$$.fragment,h),h.forEach(z),this.h()},h(){b(e,"data-id",t[1]),b(e,"class",i=De(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),b(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),ye(e,"dragging",t[9]),ye(e,"selected",t[3]),ye(e,"draggable",t[4]),ye(e,"connectable",t[6]),ye(e,"selectable",t[5]),ye(e,"nopan",t[4]),ye(e,"parent",t[11]),ce(e,"z-index",t[16]),ce(e,"transform",s),ce(e,"visibility",t[20]?"visible":"hidden")},m(d,h){J(d,e,h),n&&re(n,e,null),t[50](e),l=!0,a||(u=[qe(r=_s.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),Me(e,"click",t[34]),Me(e,"mouseenter",t[51]),Me(e,"mouseleave",t[52]),Me(e,"mousemove",t[53]),Me(e,"contextmenu",t[54])],a=!0)},p(d,h){if(h[0]&134217728&&f!==(f=d[27])){if(n){Be();const m=n;Y(m.$$.fragment,1,0,()=>{le(m,1)}),We()}f?(n=xn(f,c(d)),oe(n.$$.fragment),W(n.$$.fragment,1),re(n,e,null)):n=null}else if(f){const m={};h[0]&4&&(m.data=d[2]),h[0]&2&&(m.id=d[1]),h[0]&8&&(m.selected=d[3]),h[0]&32&&(m.selectable=d[5]),h[0]&128&&(m.deletable=d[7]),h[0]&16384&&(m.sourcePosition=d[14]),h[0]&32768&&(m.targetPosition=d[15]),h[0]&65536&&(m.zIndex=d[16]),h[0]&512&&(m.dragging=d[9]),h[0]&16&&(m.draggable=d[4]),h[0]&524288&&(m.dragHandle=d[19]),h[0]&2097152&&(m.parentId=d[21]),h[0]&33554432&&(m.type=d[25]),h[0]&268435456&&(m.isConnectable=d[28]),h[0]&4096&&(m.positionAbsoluteX=d[12]),h[0]&8192&&(m.positionAbsoluteY=d[13]),h[0]&131072&&(m.width=d[17]),h[0]&262144&&(m.height=d[18]),n.$set(m)}(!l||h[0]&2)&&b(e,"data-id",d[1]),(!l||h[0]&41943040&&i!==(i=De(["svelte-flow__node",`svelte-flow__node-${d[25]}`,d[23]])))&&b(e,"class",i),(!l||h[0]&67109888&&o!==(o=(d[10]??"")+";"+d[26].width+d[26].height))&&b(e,"style",o),r&&Ae(r.update)&&h[0]&4718626&&r.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[19],noDragClass:"nodrag",nodeClickDistance:d[22],onNodeMouseDown:d[31],onDrag:d[47],onDragStart:d[48],onDragStop:d[49],store:d[29]}),(!l||h[0]&41943552)&&ye(e,"dragging",d[9]),(!l||h[0]&41943048)&&ye(e,"selected",d[3]),(!l||h[0]&41943056)&&ye(e,"draggable",d[4]),(!l||h[0]&41943104)&&ye(e,"connectable",d[6]),(!l||h[0]&41943072)&&ye(e,"selectable",d[5]),(!l||h[0]&41943056)&&ye(e,"nopan",d[4]),(!l||h[0]&41945088)&&ye(e,"parent",d[11]);const y=h[0]&67109888;(h[0]&67175424||y)&&ce(e,"z-index",d[16]),(h[0]&67122176&&s!==(s=`translate(${d[12]}px, ${d[13]}px)`)||y)&&ce(e,"transform",s),(h[0]&68158464||y)&&ce(e,"visibility",d[20]?"visible":"hidden")},i(d){l||(n&&W(n.$$.fragment,d),l=!0)},o(d){n&&Y(n.$$.fragment,d),l=!1},d(d){d&&z(e),n&&le(n),t[50](null),a=!1,ct(u)}}}function kg(t){let e,n,i=!t[8]&&kr(t);return{c(){i&&i.c(),e=Ne()},l(o){i&&i.l(o),e=Ne()},m(o,r){i&&i.m(o,r),J(o,e,r),n=!0},p(o,r){o[8]?i&&(Be(),Y(i,1,1,()=>{i=null}),We()):i?(i.p(o,r),r[0]&256&&W(i,1)):(i=kr(o),i.c(),W(i,1),i.m(e.parentNode,e))},i(o){n||(W(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&z(e),i&&i.d(o)}}}function vg(t,e,n){let i,o,r,s,l,a,{node:u}=e,{id:f}=e,{data:c={}}=e,{selected:d=!1}=e,{draggable:h=void 0}=e,{selectable:y=void 0}=e,{connectable:m=!0}=e,{deletable:_=!0}=e,{hidden:g=!1}=e,{dragging:E=!1}=e,{resizeObserver:v=null}=e,{style:S=void 0}=e,{type:p="default"}=e,{isParent:D=!1}=e,{positionX:P}=e,{positionY:N}=e,{sourcePosition:O=void 0}=e,{targetPosition:L=void 0}=e,{zIndex:T}=e,{measuredWidth:R=void 0}=e,{measuredHeight:F=void 0}=e,{initialWidth:k=void 0}=e,{initialHeight:A=void 0}=e,{width:w=void 0}=e,{height:C=void 0}=e,{dragHandle:I=void 0}=e,{initialized:H=!1}=e,{parentId:K=void 0}=e,{nodeClickDistance:G=void 0}=e,{class:j=""}=e;const ae=He(),{nodeTypes:B,nodeDragThreshold:$,selectNodesOnDrag:fe,handleNodeSelection:V,updateNodeInternals:he}=ae;Q(t,B,Z=>n(46,l=Z));let be,we=null;const ke=Pn(),pe=ue(m);Q(t,pe,Z=>n(28,a=Z));let Le,q,Re;_n("svelteflow__node_id",f),_n("svelteflow__node_connectable",pe),yi(()=>{we&&(v==null||v.unobserve(we))});function Te(Z){y&&(!X(fe)||!h||X($)>0)&&V(f),ke("nodeclick",{node:u.internals.userNode,event:Z})}const Ot=(Z,Tt,Fe,Qe)=>{ke("nodedrag",{event:Z,targetNode:Fe,nodes:Qe})},bt=(Z,Tt,Fe,Qe)=>{ke("nodedragstart",{event:Z,targetNode:Fe,nodes:Qe})},wt=(Z,Tt,Fe,Qe)=>{ke("nodedragstop",{event:Z,targetNode:Fe,nodes:Qe})};function Xe(Z){at[Z?"unshift":"push"](()=>{be=Z,n(24,be)})}const kt=Z=>ke("nodemouseenter",{node:u,event:Z}),ie=Z=>ke("nodemouseleave",{node:u,event:Z}),Nt=Z=>ke("nodemousemove",{node:u,event:Z}),Dt=Z=>ke("nodecontextmenu",{node:u,event:Z});return t.$$set=Z=>{"node"in Z&&n(0,u=Z.node),"id"in Z&&n(1,f=Z.id),"data"in Z&&n(2,c=Z.data),"selected"in Z&&n(3,d=Z.selected),"draggable"in Z&&n(4,h=Z.draggable),"selectable"in Z&&n(5,y=Z.selectable),"connectable"in Z&&n(6,m=Z.connectable),"deletable"in Z&&n(7,_=Z.deletable),"hidden"in Z&&n(8,g=Z.hidden),"dragging"in Z&&n(9,E=Z.dragging),"resizeObserver"in Z&&n(35,v=Z.resizeObserver),"style"in Z&&n(10,S=Z.style),"type"in Z&&n(36,p=Z.type),"isParent"in Z&&n(11,D=Z.isParent),"positionX"in Z&&n(12,P=Z.positionX),"positionY"in Z&&n(13,N=Z.positionY),"sourcePosition"in Z&&n(14,O=Z.sourcePosition),"targetPosition"in Z&&n(15,L=Z.targetPosition),"zIndex"in Z&&n(16,T=Z.zIndex),"measuredWidth"in Z&&n(37,R=Z.measuredWidth),"measuredHeight"in Z&&n(38,F=Z.measuredHeight),"initialWidth"in Z&&n(39,k=Z.initialWidth),"initialHeight"in Z&&n(40,A=Z.initialHeight),"width"in Z&&n(17,w=Z.width),"height"in Z&&n(18,C=Z.height),"dragHandle"in Z&&n(19,I=Z.dragHandle),"initialized"in Z&&n(20,H=Z.initialized),"parentId"in Z&&n(21,K=Z.parentId),"nodeClickDistance"in Z&&n(22,G=Z.nodeClickDistance),"class"in Z&&n(23,j=Z.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=p||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!l[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,r=l[i]||cs),t.$$.dirty[1]&16416&&(o||console.warn("003",On.error003(p))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,s=wg({width:w,height:C,initialWidth:k,initialHeight:A,measuredWidth:R,measuredHeight:F})),t.$$.dirty[0]&64&&pe.set(!!m),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((Le&&i!==Le||q&&O!==q||Re&&L!==Re)&&requestAnimationFrame(()=>he(new Map([[f,{id:f,nodeElement:be,force:!0}]]))),n(42,Le=i),n(43,q=O),n(44,Re=L)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&v&&(be!==we||!H)&&(we&&v.unobserve(we),be&&v.observe(be),n(41,we=be))},[u,f,c,d,h,y,m,_,g,E,S,D,P,N,O,L,T,w,C,I,H,K,G,j,be,i,s,r,a,ae,B,V,ke,pe,Te,v,p,R,F,k,A,we,Le,q,Re,o,l,Ot,bt,wt,Xe,kt,ie,Nt,Dt]}class Eg extends ge{constructor(e){super(),me(this,e,vg,kg,sl,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Sg}=ia;function vr(t,e,n){const i=t.slice();return i[21]=e[n],i}function Er(t,e){let n,i,o;return i=new Eg({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:di(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=Ne(),oe(i.$$.fragment),this.h()},l(r){n=Ne(),se(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){J(r,n,s),re(i,r,s),o=!0},p(r,s){e=r;const l={};s&2&&(l.node=e[21]),s&2&&(l.id=e[21].id),s&2&&(l.data=e[21].data),s&2&&(l.selected=!!e[21].selected),s&2&&(l.hidden=!!e[21].hidden),s&6&&(l.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),s&10&&(l.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),s&18&&(l.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),s&2&&(l.deletable=e[21].deletable??!0),s&2&&(l.positionX=e[21].internals.positionAbsolute.x),s&2&&(l.positionY=e[21].internals.positionAbsolute.y),s&34&&(l.isParent=e[5].has(e[21].id)),s&2&&(l.style=e[21].style),s&2&&(l.class=e[21].class),s&2&&(l.type=e[21].type??"default"),s&2&&(l.sourcePosition=e[21].sourcePosition),s&2&&(l.targetPosition=e[21].targetPosition),s&2&&(l.dragging=e[21].dragging),s&2&&(l.zIndex=e[21].internals.z??0),s&2&&(l.dragHandle=e[21].dragHandle),s&2&&(l.initialized=di(e[21])),s&2&&(l.width=e[21].width),s&2&&(l.height=e[21].height),s&2&&(l.initialWidth=e[21].initialWidth),s&2&&(l.initialHeight=e[21].initialHeight),s&2&&(l.measuredWidth=e[21].measured.width),s&2&&(l.measuredHeight=e[21].measured.height),s&2&&(l.parentId=e[21].parentId),s&1&&(l.nodeClickDistance=e[0]),i.$set(l)},i(r){o||(W(i.$$.fragment,r),o=!0)},o(r){Y(i.$$.fragment,r),o=!1},d(r){r&&z(n),le(i,r)}}}function pg(t){let e,n=[],i=new Sg,o,r=yt(t[1]);const s=l=>l[21].id;for(let l=0;l<r.length;l+=1){let a=vr(t,r,l),u=s(a);i.set(u,n[l]=Er(u,a))}return{c(){e=ze("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=Oe(l,"DIV",{class:!0});var a=U(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(z),this.h()},h(){b(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(l,a){J(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&2111&&(r=yt(l[1]),Be(),n=bi(n,a,s,1,l,r,i,e,_i,Er,null,vr),We())},i(l){if(!o){for(let a=0;a<r.length;a+=1)W(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)Y(n[a]);o=!1},d(l){l&&z(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Cg(t,e,n){let i,o,r,s,l,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:f,nodesConnectable:c,elementsSelectable:d,updateNodeInternals:h,parentLookup:y}=He();Q(t,u,N=>n(1,i=N)),Q(t,f,N=>n(2,o=N)),Q(t,c,N=>n(4,s=N)),Q(t,d,N=>n(3,r=N)),Q(t,y,N=>n(5,l=N));const m=typeof ResizeObserver>"u"?null:new ResizeObserver(N=>{const O=new Map;N.forEach(L=>{const T=L.target.getAttribute("data-id");O.set(T,{id:T,nodeElement:L.target,force:!0})}),h(O)});yi(()=>{m==null||m.disconnect()});function _(N){Ce.call(this,t,N)}function g(N){Ce.call(this,t,N)}function E(N){Ce.call(this,t,N)}function v(N){Ce.call(this,t,N)}function S(N){Ce.call(this,t,N)}function p(N){Ce.call(this,t,N)}function D(N){Ce.call(this,t,N)}function P(N){Ce.call(this,t,N)}return t.$$set=N=>{"nodeClickDistance"in N&&n(0,a=N.nodeClickDistance)},[a,i,o,r,s,l,u,f,c,d,y,m,_,g,E,v,S,p,D,P]}class Pg extends ge{constructor(e){super(),me(this,e,Cg,pg,_e,{nodeClickDistance:0})}}function Sr(t){let e,n,i,o,r,s,l,a;var u=t[27];function f(c,d){return{props:{id:c[0],source:c[1],target:c[2],sourceX:c[14],sourceY:c[15],targetX:c[16],targetY:c[17],sourcePosition:c[18],targetPosition:c[19],animated:c[6],selected:c[7],label:c[10],labelStyle:c[11],data:c[3],style:c[4],interactionWidth:c[21],selectable:c[24],deletable:c[8]??!0,type:c[23],sourceHandleId:c[12],targetHandleId:c[13],markerStart:c[26],markerEnd:c[25]}}}return u&&(i=xn(u,f(t))),{c(){e=te("svg"),n=te("g"),i&&oe(i.$$.fragment),this.h()},l(c){e=ne(c,"svg",{});var d=U(e);n=ne(d,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var h=U(n);i&&se(i.$$.fragment,h),h.forEach(z),d.forEach(z),this.h()},h(){b(n,"class",o=De(["svelte-flow__edge",t[22]])),b(n,"data-id",t[0]),b(n,"aria-label",r=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),b(n,"role","img"),ye(n,"animated",t[6]),ye(n,"selected",t[7]),ye(n,"selectable",t[24]),ce(e,"z-index",t[5])},m(c,d){J(c,e,d),x(e,n),i&&re(i,n,null),s=!0,l||(a=[Me(n,"click",t[32]),Me(n,"contextmenu",t[41]),Me(n,"mouseenter",t[42]),Me(n,"mouseleave",t[43])],l=!0)},p(c,d){if(d[0]&134217728&&u!==(u=c[27])){if(i){Be();const h=i;Y(h.$$.fragment,1,0,()=>{le(h,1)}),We()}u?(i=xn(u,f(c)),oe(i.$$.fragment),W(i.$$.fragment,1),re(i,n,null)):i=null}else if(u){const h={};d[0]&1&&(h.id=c[0]),d[0]&2&&(h.source=c[1]),d[0]&4&&(h.target=c[2]),d[0]&16384&&(h.sourceX=c[14]),d[0]&32768&&(h.sourceY=c[15]),d[0]&65536&&(h.targetX=c[16]),d[0]&131072&&(h.targetY=c[17]),d[0]&262144&&(h.sourcePosition=c[18]),d[0]&524288&&(h.targetPosition=c[19]),d[0]&64&&(h.animated=c[6]),d[0]&128&&(h.selected=c[7]),d[0]&1024&&(h.label=c[10]),d[0]&2048&&(h.labelStyle=c[11]),d[0]&8&&(h.data=c[3]),d[0]&16&&(h.style=c[4]),d[0]&2097152&&(h.interactionWidth=c[21]),d[0]&16777216&&(h.selectable=c[24]),d[0]&256&&(h.deletable=c[8]??!0),d[0]&8388608&&(h.type=c[23]),d[0]&4096&&(h.sourceHandleId=c[12]),d[0]&8192&&(h.targetHandleId=c[13]),d[0]&67108864&&(h.markerStart=c[26]),d[0]&33554432&&(h.markerEnd=c[25]),i.$set(h)}(!s||d[0]&4194304&&o!==(o=De(["svelte-flow__edge",c[22]])))&&b(n,"class",o),(!s||d[0]&1)&&b(n,"data-id",c[0]),(!s||d[0]&1048582&&r!==(r=c[20]===null?void 0:c[20]?c[20]:`Edge from ${c[1]} to ${c[2]}`))&&b(n,"aria-label",r),(!s||d[0]&4194368)&&ye(n,"animated",c[6]),(!s||d[0]&4194432)&&ye(n,"selected",c[7]),(!s||d[0]&20971520)&&ye(n,"selectable",c[24]),d[0]&32&&ce(e,"z-index",c[5])},i(c){s||(i&&W(i.$$.fragment,c),s=!0)},o(c){i&&Y(i.$$.fragment,c),s=!1},d(c){c&&z(e),i&&le(i),l=!1,ct(a)}}}function Mg(t){let e,n,i=!t[9]&&Sr(t);return{c(){i&&i.c(),e=Ne()},l(o){i&&i.l(o),e=Ne()},m(o,r){i&&i.m(o,r),J(o,e,r),n=!0},p(o,r){o[9]?i&&(Be(),Y(i,1,1,()=>{i=null}),We()):i?(i.p(o,r),r[0]&512&&W(i,1)):(i=Sr(o),i.c(),W(i,1),i.m(e.parentNode,e))},i(o){n||(W(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&z(e),i&&i.d(o)}}}function zg(t,e,n){let i,o,r,s,l,a,u,f,c,{id:d}=e,{type:h="default"}=e,{source:y=""}=e,{target:m=""}=e,{data:_={}}=e,{style:g=void 0}=e,{zIndex:E=void 0}=e,{animated:v=!1}=e,{selected:S=!1}=e,{selectable:p=void 0}=e,{deletable:D=void 0}=e,{hidden:P=!1}=e,{label:N=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:L=void 0}=e,{markerEnd:T=void 0}=e,{sourceHandle:R=void 0}=e,{targetHandle:F=void 0}=e,{sourceX:k}=e,{sourceY:A}=e,{targetX:w}=e,{targetY:C}=e,{sourcePosition:I}=e,{targetPosition:H}=e,{ariaLabel:K=void 0}=e,{interactionWidth:G=void 0}=e,{class:j=""}=e;_n("svelteflow__edge_id",d);const{edgeLookup:ae,edgeTypes:B,flowId:$,elementsSelectable:fe}=He();Q(t,ae,q=>n(44,a=q)),Q(t,B,q=>n(40,c=q)),Q(t,$,q=>n(39,f=q)),Q(t,fe,q=>n(38,u=q));const V=Pn(),he=ds();function be(q){const Re=a.get(d);Re&&(he(d),V("edgeclick",{event:q,edge:Re}))}function we(q,Re){const Te=a.get(d);Te&&V(Re,{event:q,edge:Te})}const ke=q=>{we(q,"edgecontextmenu")},pe=q=>{we(q,"edgemouseenter")},Le=q=>{we(q,"edgemouseleave")};return t.$$set=q=>{"id"in q&&n(0,d=q.id),"type"in q&&n(34,h=q.type),"source"in q&&n(1,y=q.source),"target"in q&&n(2,m=q.target),"data"in q&&n(3,_=q.data),"style"in q&&n(4,g=q.style),"zIndex"in q&&n(5,E=q.zIndex),"animated"in q&&n(6,v=q.animated),"selected"in q&&n(7,S=q.selected),"selectable"in q&&n(35,p=q.selectable),"deletable"in q&&n(8,D=q.deletable),"hidden"in q&&n(9,P=q.hidden),"label"in q&&n(10,N=q.label),"labelStyle"in q&&n(11,O=q.labelStyle),"markerStart"in q&&n(36,L=q.markerStart),"markerEnd"in q&&n(37,T=q.markerEnd),"sourceHandle"in q&&n(12,R=q.sourceHandle),"targetHandle"in q&&n(13,F=q.targetHandle),"sourceX"in q&&n(14,k=q.sourceX),"sourceY"in q&&n(15,A=q.sourceY),"targetX"in q&&n(16,w=q.targetX),"targetY"in q&&n(17,C=q.targetY),"sourcePosition"in q&&n(18,I=q.sourcePosition),"targetPosition"in q&&n(19,H=q.targetPosition),"ariaLabel"in q&&n(20,K=q.ariaLabel),"interactionWidth"in q&&n(21,G=q.interactionWidth),"class"in q&&n(22,j=q.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=h||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=c[i]||hs),t.$$.dirty[1]&288&&n(26,r=L?`url('#${ro(L,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,s=T?`url('#${ro(T,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,l=p??u)},[d,y,m,_,g,E,v,S,D,P,N,O,R,F,k,A,w,C,I,H,K,G,j,i,l,s,r,o,ae,B,$,fe,be,we,h,p,L,T,u,f,c,ke,pe,Le]}class Og extends ge{constructor(e){super(),me(this,e,zg,Mg,sl,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Ng(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return Cn(()=>(i==null||i(),o)),t.$$set=r=>{"onMount"in r&&n(0,i=r.onMount),"onDestroy"in r&&n(1,o=r.onDestroy)},[i,o]}class Dg extends ge{constructor(e){super(),me(this,e,Ng,null,_e,{onMount:0,onDestroy:1})}}function pr(t,e,n){const i=t.slice();return i[2]=e[n],i}function Cr(t,e){let n,i,o;const r=[e[2]];let s={};for(let l=0;l<r.length;l+=1)s=Se(s,r[l]);return i=new Bg({props:s}),{key:t,first:null,c(){n=Ne(),oe(i.$$.fragment),this.h()},l(l){n=Ne(),se(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,a){J(l,n,a),re(i,l,a),o=!0},p(l,a){e=l;const u=a&1?ft(r,[Xt(e[2])]):{};i.$set(u)},i(l){o||(W(i.$$.fragment,l),o=!0)},o(l){Y(i.$$.fragment,l),o=!1},d(l){l&&z(n),le(i,l)}}}function Tg(t){let e,n=[],i=new Map,o,r=yt(t[0]);const s=l=>l[2].id;for(let l=0;l<r.length;l+=1){let a=pr(t,r,l),u=s(a);i.set(u,n[l]=Cr(u,a))}return{c(){e=te("defs");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=ne(l,"defs",{});var a=U(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(z)},m(l,a){J(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&1&&(r=yt(l[0]),Be(),n=bi(n,a,s,1,l,r,i,e,_i,Cr,null,pr),We())},i(l){if(!o){for(let a=0;a<r.length;a+=1)W(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)Y(n[a]);o=!1},d(l){l&&z(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Ig(t,e,n){let i;const{markers:o}=He();return Q(t,o,r=>n(0,i=r)),[i,o]}class Ag extends ge{constructor(e){super(),me(this,e,Ig,Tg,_e,{})}}function Hg(t){let e;return{c(){e=te("polyline"),this.h()},l(n){e=ne(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),U(e).forEach(z),this.h()},h(){b(e,"stroke",t[6]),b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width",t[7]),b(e,"fill",t[6]),b(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){J(n,e,i)},p(n,i){i&64&&b(e,"stroke",n[6]),i&128&&b(e,"stroke-width",n[7]),i&64&&b(e,"fill",n[6])},d(n){n&&z(e)}}}function Lg(t){let e;return{c(){e=te("polyline"),this.h()},l(n){e=ne(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),U(e).forEach(z),this.h()},h(){b(e,"stroke",t[6]),b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width",t[7]),b(e,"fill","none"),b(e,"points","-5,-4 0,0 -5,4")},m(n,i){J(n,e,i)},p(n,i){i&64&&b(e,"stroke",n[6]),i&128&&b(e,"stroke-width",n[7])},d(n){n&&z(e)}}}function Rg(t){let e,n,i;function o(l,a){if(l[1]===ln.Arrow)return Lg;if(l[1]===ln.ArrowClosed)return Hg}let r=o(t),s=r&&r(t);return{c(){e=te("marker"),s&&s.c(),this.h()},l(l){e=ne(l,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=U(e);s&&s.l(a),a.forEach(z),this.h()},h(){b(e,"class","svelte-flow__arrowhead"),b(e,"id",t[0]),b(e,"markerWidth",n=`${t[2]}`),b(e,"markerHeight",i=`${t[3]}`),b(e,"viewBox","-10 -10 20 20"),b(e,"markerUnits",t[4]),b(e,"orient",t[5]),b(e,"refX","0"),b(e,"refY","0")},m(l,a){J(l,e,a),s&&s.m(e,null)},p(l,[a]){r===(r=o(l))&&s?s.p(l,a):(s&&s.d(1),s=r&&r(l),s&&(s.c(),s.m(e,null))),a&1&&b(e,"id",l[0]),a&4&&n!==(n=`${l[2]}`)&&b(e,"markerWidth",n),a&8&&i!==(i=`${l[3]}`)&&b(e,"markerHeight",i),a&16&&b(e,"markerUnits",l[4]),a&32&&b(e,"orient",l[5])},i:Pe,o:Pe,d(l){l&&z(e),s&&s.d()}}}function Vg(t,e,n){let{id:i}=e,{type:o}=e,{width:r=12.5}=e,{height:s=12.5}=e,{markerUnits:l="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=c=>{"id"in c&&n(0,i=c.id),"type"in c&&n(1,o=c.type),"width"in c&&n(2,r=c.width),"height"in c&&n(3,s=c.height),"markerUnits"in c&&n(4,l=c.markerUnits),"orient"in c&&n(5,a=c.orient),"color"in c&&n(6,u=c.color),"strokeWidth"in c&&n(7,f=c.strokeWidth)},[i,o,r,s,l,a,u,f]}class Bg extends ge{constructor(e){super(),me(this,e,Vg,Rg,_e,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Pr(t,e,n){const i=t.slice();return i[14]=e[n],i}function Mr(t,e){let n,i,o;return i=new Og({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=Ne(),oe(i.$$.fragment),this.h()},l(r){n=Ne(),se(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){J(r,n,s),re(i,r,s),o=!0},p(r,s){e=r;const l={};s&1&&(l.id=e[14].id),s&1&&(l.source=e[14].source),s&1&&(l.target=e[14].target),s&1&&(l.data=e[14].data),s&1&&(l.style=e[14].style),s&1&&(l.animated=e[14].animated),s&1&&(l.selected=e[14].selected),s&3&&(l.selectable=e[14].selectable??e[1]),s&1&&(l.deletable=e[14].deletable),s&1&&(l.hidden=e[14].hidden),s&1&&(l.label=e[14].label),s&1&&(l.labelStyle=e[14].labelStyle),s&1&&(l.markerStart=e[14].markerStart),s&1&&(l.markerEnd=e[14].markerEnd),s&1&&(l.sourceHandle=e[14].sourceHandle),s&1&&(l.targetHandle=e[14].targetHandle),s&1&&(l.sourceX=e[14].sourceX),s&1&&(l.sourceY=e[14].sourceY),s&1&&(l.targetX=e[14].targetX),s&1&&(l.targetY=e[14].targetY),s&1&&(l.sourcePosition=e[14].sourcePosition),s&1&&(l.targetPosition=e[14].targetPosition),s&1&&(l.ariaLabel=e[14].ariaLabel),s&1&&(l.interactionWidth=e[14].interactionWidth),s&1&&(l.class=e[14].class),s&1&&(l.type=e[14].type||"default"),s&1&&(l.zIndex=e[14].zIndex),i.$set(l)},i(r){o||(W(i.$$.fragment,r),o=!0)},o(r){Y(i.$$.fragment,r),o=!1},d(r){r&&z(n),le(i,r)}}}function zr(t){let e,n;return e=new Dg({props:{onMount:t[11],onDestroy:t[12]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.onMount=i[11]),o&4&&(r.onDestroy=i[12]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Wg(t){let e,n,i,o,r=[],s=new Map,l,a;i=new Ag({});let u=yt(t[0]);const f=d=>d[14].id;for(let d=0;d<u.length;d+=1){let h=Pr(t,u,d),y=f(h);s.set(y,r[d]=Mr(y,h))}let c=t[0].length>0&&zr(t);return{c(){e=ze("div"),n=te("svg"),oe(i.$$.fragment),o=ve();for(let d=0;d<r.length;d+=1)r[d].c();l=ve(),c&&c.c(),this.h()},l(d){e=Oe(d,"DIV",{class:!0});var h=U(e);n=ne(h,"svg",{class:!0});var y=U(n);se(i.$$.fragment,y),y.forEach(z),o=Ee(h);for(let m=0;m<r.length;m+=1)r[m].l(h);l=Ee(h),c&&c.l(h),h.forEach(z),this.h()},h(){b(n,"class","svelte-flow__marker"),b(e,"class","svelte-flow__edges")},m(d,h){J(d,e,h),x(e,n),re(i,n,null),x(e,o);for(let y=0;y<r.length;y+=1)r[y]&&r[y].m(e,null);x(e,l),c&&c.m(e,null),a=!0},p(d,[h]){h&3&&(u=yt(d[0]),Be(),r=bi(r,h,f,1,d,u,s,e,_i,Mr,l,Pr),We()),d[0].length>0?c?(c.p(d,h),h&1&&W(c,1)):(c=zr(d),c.c(),W(c,1),c.m(e,null)):c&&(Be(),Y(c,1,1,()=>{c=null}),We())},i(d){if(!a){W(i.$$.fragment,d);for(let h=0;h<u.length;h+=1)W(r[h]);W(c),a=!0}},o(d){Y(i.$$.fragment,d);for(let h=0;h<r.length;h+=1)Y(r[h]);Y(c),a=!1},d(d){d&&z(e),le(i);for(let h=0;h<r.length;h+=1)r[h].d();c&&c.d()}}}function Xg(t,e,n){let i,o,r,{defaultEdgeOptions:s}=e;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=He();Q(t,l,g=>n(0,i=g)),Q(t,a,g=>n(2,r=g)),Q(t,f,g=>n(1,o=g)),Cn(()=>{s&&u(s)});function c(g){Ce.call(this,t,g)}function d(g){Ce.call(this,t,g)}function h(g){Ce.call(this,t,g)}function y(g){Ce.call(this,t,g)}const m=()=>{jn(a,r=!0,r)},_=()=>{jn(a,r=!1,r)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,s=g.defaultEdgeOptions)},[i,o,r,l,a,f,s,c,d,h,y,m,_]}class Fg extends ge{constructor(e){super(),me(this,e,Xg,Wg,_e,{defaultEdgeOptions:6})}}function Or(t){let e;return{c(){e=ze("div"),this.h()},l(n){e=Oe(n,"DIV",{class:!0}),U(e).forEach(z),this.h()},h(){b(e,"class","svelte-flow__selection svelte-1iugwpu"),ce(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),ce(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),ce(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){J(n,e,i)},p(n,i){i&4&&ce(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ce(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ce(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&z(e)}}}function Yg(t){let e,n=t[4]&&Or(t);return{c(){n&&n.c(),e=Ne()},l(i){n&&n.l(i),e=Ne()},m(i,o){n&&n.m(i,o),J(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Or(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Pe,o:Pe,d(i){i&&z(e),n&&n.d(i)}}}function Kg(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:r=0}=e,{height:s=0}=e,{isVisible:l=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,r=a.width),"height"in a&&n(3,s=a.height),"isVisible"in a&&n(4,l=a.isVisible)},[i,o,r,s,l]}class bs extends ge{constructor(e){super(),me(this,e,Kg,Yg,_e,{x:0,y:1,width:2,height:3,isVisible:4})}}function qg(t){var i,o,r,s;let e,n;return e=new bs({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(r=t[0])==null?void 0:r.x,y:(s=t[0])==null?void 0:s.y}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){re(e,l,a),n=!0},p(l,[a]){var f,c,d,h;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]==="user")),a&1&&(u.width=(f=l[0])==null?void 0:f.width),a&1&&(u.height=(c=l[0])==null?void 0:c.height),a&1&&(u.x=(d=l[0])==null?void 0:d.x),a&1&&(u.y=(h=l[0])==null?void 0:h.y),e.$set(u)},i(l){n||(W(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){le(e,l)}}}function Ug(t,e,n){let i,o;const{selectionRect:r,selectionRectMode:s}=He();return Q(t,r,l=>n(0,i=l)),Q(t,s,l=>n(1,o=l)),[i,o,r,s]}class Zg extends ge{constructor(e){super(),me(this,e,Ug,qg,_e,{})}}function Nr(t){let e,n,i,o,r;return n=new bs({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=ze("div"),oe(n.$$.fragment),this.h()},l(s){e=Oe(s,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var l=U(e);se(n.$$.fragment,l),l.forEach(z),this.h()},h(){b(e,"class","selection-wrapper nopan svelte-5pxri"),ce(e,"width",t[1].width+"px"),ce(e,"height",t[1].height+"px"),ce(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),b(e,"role","button"),b(e,"tabindex","-1")},m(s,l){J(s,e,l),re(n,e,null),i=!0,o||(r=[qe(_s.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),Me(e,"contextmenu",t[7]),Me(e,"click",t[8]),Me(e,"keyup",Jg)],o=!0)},p(s,l){(!i||l&2)&&ce(e,"width",s[1].width+"px"),(!i||l&2)&&ce(e,"height",s[1].height+"px"),(!i||l&2)&&ce(e,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(W(n.$$.fragment,s),i=!0)},o(s){Y(n.$$.fragment,s),i=!1},d(s){s&&z(e),le(n),o=!1,ct(r)}}}function Gg(t){let e=t[0]==="nodes"&&t[1]&&ut(t[1].x)&&ut(t[1].y),n,i,o=e&&Nr(t);return{c(){o&&o.c(),n=Ne()},l(r){o&&o.l(r),n=Ne()},m(r,s){o&&o.m(r,s),J(r,n,s),i=!0},p(r,[s]){s&3&&(e=r[0]==="nodes"&&r[1]&&ut(r[1].x)&&ut(r[1].y)),e?o?(o.p(r,s),s&3&&W(o,1)):(o=Nr(r),o.c(),W(o,1),o.m(n.parentNode,n)):o&&(Be(),Y(o,1,1,()=>{o=null}),We())},i(r){i||(W(o),i=!0)},o(r){Y(o),i=!1},d(r){r&&z(n),o&&o.d(r)}}}const Jg=()=>{};function Qg(t,e,n){let i,o,r;const s=He(),{selectionRectMode:l,nodes:a,nodeLookup:u}=s;Q(t,l,g=>n(0,r=g)),Q(t,a,g=>n(9,i=g)),Q(t,u,g=>n(10,o=g));const f=Pn();let c=null;function d(g){const E=i.filter(v=>v.selected);f("selectioncontextmenu",{nodes:E,event:g})}function h(g){const E=i.filter(v=>v.selected);f("selectionclick",{nodes:E,event:g})}const y=(g,E,v,S)=>{f("nodedrag",{event:g,targetNode:null,nodes:S})},m=(g,E,v,S)=>{f("nodedragstart",{event:g,targetNode:null,nodes:S})},_=(g,E,v,S)=>{f("nodedragstop",{event:g,targetNode:null,nodes:S})};return t.$$.update=()=>{t.$$.dirty&1537&&r==="nodes"&&n(1,c=Dn(o,{filter:g=>!!g.selected}))},[r,c,s,l,a,u,f,d,h,i,o,y,m,_]}class jg extends ge{constructor(e){super(),me(this,e,Qg,Gg,_e,{})}}function ht(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function r(s){const l=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of l){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:c,key:d,callback:h,preventDefault:y,enabled:m}=f;if(m){if(c.length&&!(Array.isArray(c)?c:[c]).map(E=>typeof E=="string"?[E]:E).some(E=>E.every(v=>a[v])))continue;if(s.key===d){y&&s.preventDefault();const _={node:t,trigger:f,originalEvent:s};t.dispatchEvent(new CustomEvent("shortcut",{detail:_})),h==null||h(_)}}}}return n&&t.addEventListener(o,r),{update:s=>{const{enabled:l=!0,type:a="keydown"}=s;n&&(!l||o!==a)?t.removeEventListener(o,r):!n&&l&&t.addEventListener(a,r),n=l,o=a,i=s.trigger},destroy:()=>{t.removeEventListener(o,r)}}}function xg(t){let e,n,i,o,r,s,l,a,u,f,c,d;return{c:Pe,l:Pe,m(h,y){c||(d=[qe(e=ht.call(null,window,{trigger:Ve(t[0],t[11]),type:"keydown"})),qe(n=ht.call(null,window,{trigger:Ve(t[0],t[12]),type:"keyup"})),qe(i=ht.call(null,window,{trigger:Ve(t[1],t[13]),type:"keydown"})),qe(o=ht.call(null,window,{trigger:Ve(t[1],t[14]),type:"keyup"})),qe(r=ht.call(null,window,{trigger:Ve(t[2],t[15]),type:"keydown"})),qe(s=ht.call(null,window,{trigger:Ve(t[2],t[16]),type:"keyup"})),qe(l=ht.call(null,window,{trigger:Ve(t[3],t[17]),type:"keydown"})),qe(a=ht.call(null,window,{trigger:Ve(t[3],t[18]),type:"keyup"})),qe(u=ht.call(null,window,{trigger:Ve(t[4],t[19]),type:"keydown"})),qe(f=ht.call(null,window,{trigger:Ve(t[4],t[20]),type:"keyup"})),Me(window,"blur",t[10]),Me(window,"contextmenu",t[10])],c=!0)},p(h,[y]){e&&Ae(e.update)&&y&1&&e.update.call(null,{trigger:Ve(h[0],h[11]),type:"keydown"}),n&&Ae(n.update)&&y&1&&n.update.call(null,{trigger:Ve(h[0],h[12]),type:"keyup"}),i&&Ae(i.update)&&y&2&&i.update.call(null,{trigger:Ve(h[1],h[13]),type:"keydown"}),o&&Ae(o.update)&&y&2&&o.update.call(null,{trigger:Ve(h[1],h[14]),type:"keyup"}),r&&Ae(r.update)&&y&4&&r.update.call(null,{trigger:Ve(h[2],h[15]),type:"keydown"}),s&&Ae(s.update)&&y&4&&s.update.call(null,{trigger:Ve(h[2],h[16]),type:"keyup"}),l&&Ae(l.update)&&y&8&&l.update.call(null,{trigger:Ve(h[3],h[17]),type:"keydown"}),a&&Ae(a.update)&&y&8&&a.update.call(null,{trigger:Ve(h[3],h[18]),type:"keyup"}),u&&Ae(u.update)&&y&16&&u.update.call(null,{trigger:Ve(h[4],h[19]),type:"keydown"}),f&&Ae(f.update)&&y&16&&f.update.call(null,{trigger:Ve(h[4],h[20]),type:"keyup"})},i:Pe,o:Pe,d(h){c=!1,ct(d)}}}function ws(t){return t!==null&&typeof t=="object"}function $g(t){return ws(t)?t.modifier||[]:[]}function em(t){return t==null?"":ws(t)?t.key:t}function Ve(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=em(i);return{key:o,modifier:$g(i),enabled:o!==null,callback:e}})}function tm(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=ci()?"Meta":"Control"}=e,{deleteKey:r="Backspace"}=e,{panActivationKey:s=" "}=e,{zoomActivationKey:l=ci()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:c,zoomActivationKeyPressed:d,selectionRect:h}=He();function y(){h.set(null),a.set(!1),u.set(!1),f.set(!1),c.set(!1),d.set(!1)}const m=()=>a.set(!0),_=()=>a.set(!1),g=()=>u.set(!0),E=()=>u.set(!1),v=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!Ld(O.originalEvent)&&f.set(!0)},S=()=>f.set(!1),p=()=>c.set(!0),D=()=>c.set(!1),P=()=>d.set(!0),N=()=>d.set(!1);return t.$$set=O=>{"selectionKey"in O&&n(0,i=O.selectionKey),"multiSelectionKey"in O&&n(1,o=O.multiSelectionKey),"deleteKey"in O&&n(2,r=O.deleteKey),"panActivationKey"in O&&n(3,s=O.panActivationKey),"zoomActivationKey"in O&&n(4,l=O.zoomActivationKey)},[i,o,r,s,l,a,u,f,c,d,y,m,_,g,E,v,S,p,D,P,N]}class nm extends ge{constructor(e){super(),me(this,e,tm,xg,_e,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const im=t=>({}),Dr=t=>({});function Tr(t){let e,n,i,o;const r=t[13].connectionLine,s=Ue(r,t,t[12],Dr);let l=!t[2]&&Ir(t);return{c(){e=te("svg"),n=te("g"),s&&s.c(),l&&l.c(),this.h()},l(a){e=ne(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=U(e);n=ne(u,"g",{class:!0});var f=U(n);s&&s.l(f),l&&l.l(f),f.forEach(z),u.forEach(z),this.h()},h(){b(n,"class",i=De(["svelte-flow__connection",ir(t[3].isValid)])),b(e,"width",t[5]),b(e,"height",t[6]),b(e,"class","svelte-flow__connectionline"),b(e,"style",t[0])},m(a,u){J(a,e,u),x(e,n),s&&s.m(n,null),l&&l.m(n,null),o=!0},p(a,u){s&&s.p&&(!o||u&4096)&&Ze(s,r,a,a[12],o?Je(r,a[12],u,im):Ge(a[12]),Dr),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=Ir(a),l.c(),l.m(n,null)),(!o||u&8&&i!==(i=De(["svelte-flow__connection",ir(a[3].isValid)])))&&b(n,"class",i),(!o||u&32)&&b(e,"width",a[5]),(!o||u&64)&&b(e,"height",a[6]),(!o||u&1)&&b(e,"style",a[0])},i(a){o||(W(s,a),o=!0)},o(a){Y(s,a),o=!1},d(a){a&&z(e),s&&s.d(a),l&&l.d()}}}function Ir(t){let e;return{c(){e=te("path"),this.h()},l(n){e=ne(n,"path",{d:!0,style:!0,fill:!0,class:!0}),U(e).forEach(z),this.h()},h(){b(e,"d",t[4]),b(e,"style",t[1]),b(e,"fill","none"),b(e,"class","svelte-flow__connection-path")},m(n,i){J(n,e,i)},p(n,i){i&16&&b(e,"d",n[4]),i&2&&b(e,"style",n[1])},d(n){n&&z(e)}}}function om(t){let e,n,i=t[3].inProgress&&Tr(t);return{c(){i&&i.c(),e=Ne()},l(o){i&&i.l(o),e=Ne()},m(o,r){i&&i.m(o,r),J(o,e,r),n=!0},p(o,[r]){o[3].inProgress?i?(i.p(o,r),r&8&&W(i,1)):(i=Tr(o),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(Be(),Y(i,1,1,()=>{i=null}),We())},i(o){n||(W(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&z(e),i&&i.d(o)}}}function rm(t,e,n){let i,o,r,s,{$$slots:l={},$$scope:a}=e,{containerStyle:u=""}=e,{style:f=""}=e,{isCustomComponent:c=!1}=e;const{width:d,height:h,connection:y,connectionLineType:m}=He();Q(t,d,g=>n(5,r=g)),Q(t,h,g=>n(6,s=g)),Q(t,y,g=>n(3,o=g)),Q(t,m,g=>n(11,i=g));let _=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,f=g.style),"isCustomComponent"in g&&n(2,c=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!c){const{from:g,to:E,fromPosition:v,toPosition:S}=o,p={sourceX:g.x,sourceY:g.y,sourcePosition:v,targetX:E.x,targetY:E.y,targetPosition:S};switch(i){case nn.Bezier:n(4,[_]=xl(p),_);break;case nn.Step:n(4,[_]=hi({...p,borderRadius:0}),_);break;case nn.SmoothStep:n(4,[_]=hi(p),_);break;default:n(4,[_]=es(p),_)}}},[u,f,c,o,_,r,s,d,h,y,m,i,a,l]}class lm extends ge{constructor(e){super(),me(this,e,rm,om,_e,{containerStyle:0,style:1,isCustomComponent:2})}}function sm(t){let e,n,i;const o=t[8].default,r=Ue(o,t,t[7],null);let s=[{class:n=De(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let a=0;a<s.length;a+=1)l=Se(l,s[a]);return{c(){e=ze("div"),r&&r.c(),this.h()},l(a){e=Oe(a,"DIV",{class:!0,style:!0});var u=U(e);r&&r.l(u),u.forEach(z),this.h()},h(){Lt(e,l),ce(e,"pointer-events",t[3]?"none":"")},m(a,u){J(a,e,u),r&&r.m(e,null),i=!0},p(a,[u]){r&&r.p&&(!i||u&128)&&Ze(r,o,a,a[7],i?Je(o,a[7],u,null):Ge(a[7]),null),Lt(e,l=ft(s,[(!i||u&6&&n!==(n=De(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),ce(e,"pointer-events",a[3]?"none":"")},i(a){i||(W(r,a),i=!0)},o(a){Y(r,a),i=!1},d(a){a&&z(e),r&&r.d(a)}}}function am(t,e,n){let i;const o=["position","style","class"];let r=Ie(e,o),s,{$$slots:l={},$$scope:a}=e,{position:u="top-right"}=e,{style:f=void 0}=e,{class:c=void 0}=e;const{selectionRectMode:d}=He();return Q(t,d,h=>n(3,s=h)),t.$$set=h=>{e=Se(Se({},e),nt(h)),n(5,r=Ie(e,o)),"position"in h&&n(6,u=h.position),"style"in h&&n(0,f=h.style),"class"in h&&n(1,c=h.class),"$$scope"in h&&n(7,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[f,c,i,s,d,r,u,a,l]}class Eo extends ge{constructor(e){super(),me(this,e,am,sm,_e,{position:6,style:0,class:1})}}function Ar(t){let e,n;return e=new Eo({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[um]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.position=i[1]),o&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function um(t){let e,n="Svelte Flow";return{c(){e=ze("a"),e.textContent=n,this.h()},l(i){e=Oe(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),lo(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){b(e,"href","https://svelteflow.dev"),b(e,"target","_blank"),b(e,"rel","noopener noreferrer"),b(e,"aria-label","Svelte Flow attribution")},m(i,o){J(i,e,o)},p:Pe,d(i){i&&z(e)}}}function fm(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&Ar(t);return{c(){i&&i.c(),e=Ne()},l(r){i&&i.l(r),e=Ne()},m(r,s){i&&i.m(r,s),J(r,e,s),n=!0},p(r,[s]){var l;(l=r[0])!=null&&l.hideAttribution?i&&(Be(),Y(i,1,1,()=>{i=null}),We()):i?(i.p(r,s),s&1&&W(i,1)):(i=Ar(r),i.c(),W(i,1),i.m(e.parentNode,e))},i(r){n||(W(i),n=!0)},o(r){Y(i),n=!1},d(r){r&&z(e),i&&i.d(r)}}}function cm(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=r=>{"proOptions"in r&&n(0,i=r.proOptions),"position"in r&&n(1,o=r.position)},[i,o]}class dm extends ge{constructor(e){super(),me(this,e,cm,fm,_e,{proOptions:0,position:1})}}function Hr(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:r,paneClickDistance:s}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),r!==void 0&&t.setTranslateExtent(r),s!==void 0&&t.setPaneClickDistance(s)}const hm=t=>Object.keys(t);function gm(t,e){hm(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function mm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ym(t="light"){return ot("light",n=>{if(t!=="system"){n(t);return}const i=mm(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const _m=t=>({}),Lr=t=>({slot:"connectionLine"});function bm(t){let e;const n=t[75].connectionLine,i=Ue(n,t,t[99],Lr);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r[3]&64)&&Ze(i,n,o,o[99],e?Je(n,o[99],r,_m):Ge(o[99]),Lr)},i(o){e||(W(i,o),e=!0)},o(o){Y(i,o),e=!1},d(o){i&&i.d(o)}}}function wm(t){let e,n,i,o,r,s,l,a,u,f,c,d;return e=new Fg({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[78]),e.$on("edgecontextmenu",t[79]),e.$on("edgemouseenter",t[80]),e.$on("edgemouseleave",t[81]),i=new lm({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[bm]},$$scope:{ctx:t}}}),u=new Pg({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[82]),u.$on("nodemouseenter",t[83]),u.$on("nodemousemove",t[84]),u.$on("nodemouseleave",t[85]),u.$on("nodedragstart",t[86]),u.$on("nodedrag",t[87]),u.$on("nodedragstop",t[88]),u.$on("nodecontextmenu",t[89]),c=new jg({}),c.$on("selectionclick",t[90]),c.$on("selectioncontextmenu",t[91]),c.$on("nodedragstart",t[92]),c.$on("nodedrag",t[93]),c.$on("nodedragstop",t[94]),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment),o=ve(),r=ze("div"),s=ve(),l=ze("div"),a=ve(),oe(u.$$.fragment),f=ve(),oe(c.$$.fragment),this.h()},l(h){se(e.$$.fragment,h),n=Ee(h),se(i.$$.fragment,h),o=Ee(h),r=Oe(h,"DIV",{class:!0}),U(r).forEach(z),s=Ee(h),l=Oe(h,"DIV",{class:!0}),U(l).forEach(z),a=Ee(h),se(u.$$.fragment,h),f=Ee(h),se(c.$$.fragment,h),this.h()},h(){b(r,"class","svelte-flow__edgelabel-renderer"),b(l,"class","svelte-flow__viewport-portal")},m(h,y){re(e,h,y),J(h,n,y),re(i,h,y),J(h,o,y),J(h,r,y),J(h,s,y),J(h,l,y),J(h,a,y),re(u,h,y),J(h,f,y),re(c,h,y),d=!0},p(h,y){const m={};y[0]&2097152&&(m.defaultEdgeOptions=h[21]),e.$set(m);const _={};y[0]&128&&(_.containerStyle=h[7]),y[0]&64&&(_.style=h[6]),y[1]&8&&(_.isCustomComponent=h[34].connectionLine),y[3]&64&&(_.$$scope={dirty:y,ctx:h}),i.$set(_);const g={};y[0]&8388608&&(g.nodeClickDistance=h[23]),u.$set(g)},i(h){d||(W(e.$$.fragment,h),W(i.$$.fragment,h),W(u.$$.fragment,h),W(c.$$.fragment,h),d=!0)},o(h){Y(e.$$.fragment,h),Y(i.$$.fragment,h),Y(u.$$.fragment,h),Y(c.$$.fragment,h),d=!1},d(h){h&&(z(n),z(o),z(r),z(s),z(l),z(a),z(f)),le(e,h),le(i,h),le(u,h),le(c,h)}}}function km(t){let e,n,i,o;return e=new bg({props:{$$slots:{default:[wm]},$$scope:{ctx:t}}}),i=new Zg({}),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment)},l(r){se(e.$$.fragment,r),n=Ee(r),se(i.$$.fragment,r)},m(r,s){re(e,r,s),J(r,n,s),re(i,r,s),o=!0},p(r,s){const l={};s[0]&10485952|s[1]&8|s[3]&64&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){o||(W(e.$$.fragment,r),W(i.$$.fragment,r),o=!0)},o(r){Y(e.$$.fragment,r),Y(i.$$.fragment,r),o=!1},d(r){r&&z(n),le(e,r),le(i,r)}}}function vm(t){let e,n;return e=new mg({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[km]},$$scope:{ctx:t}}}),e.$on("paneclick",t[95]),e.$on("panecontextmenu",t[96]),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&131072&&(r.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(r.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Em(t){let e,n,i,o,r,s,l,a,u,f,c,d;n=new nm({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new dg({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?mt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[vm]},$$scope:{ctx:t}}}),s=new dm({props:{proOptions:t[20],position:t[19]}});const h=t[75].default,y=Ue(h,t,t[99],null);let m=[{style:t[24]},{class:a=De(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],_={};for(let g=0;g<m.length;g+=1)_=Se(_,m[g]);return{c(){e=ze("div"),oe(n.$$.fragment),i=ve(),oe(o.$$.fragment),r=ve(),oe(s.$$.fragment),l=ve(),y&&y.c(),this.h()},l(g){e=Oe(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var E=U(e);se(n.$$.fragment,E),i=Ee(E),se(o.$$.fragment,E),r=Ee(E),se(s.$$.fragment,E),l=Ee(E),y&&y.l(E),E.forEach(z),this.h()},h(){Lt(e,_),al(()=>t[98].call(e)),ye(e,"svelte-12wlba6",!0)},m(g,E){J(g,e,E),re(n,e,null),x(e,i),re(o,e,null),x(e,r),re(s,e,null),x(e,l),y&&y.m(e,null),t[97](e),u=Qs(e,t[98].bind(e)),f=!0,c||(d=[Me(e,"dragover",t[76]),Me(e,"drop",t[77])],c=!0)},p(g,E){const v={};E[0]&2&&(v.selectionKey=g[1]),E[0]&32&&(v.deleteKey=g[5]),E[0]&4&&(v.panActivationKey=g[2]),E[0]&8&&(v.multiSelectionKey=g[3]),E[0]&16&&(v.zoomActivationKey=g[4]),n.$set(v);const S={};E[0]&256&&(S.onMoveStart=g[8]),E[0]&512&&(S.onMove=g[9]),E[0]&1024&&(S.onMoveEnd=g[10]),E[0]&2048&&(S.panOnScrollMode=g[11]===void 0?mt.Free:g[11]),E[0]&4096&&(S.preventScrolling=g[12]===void 0?!0:g[12]),E[0]&8192&&(S.zoomOnScroll=g[13]===void 0?!0:g[13]),E[0]&16384&&(S.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),E[0]&32768&&(S.zoomOnPinch=g[15]===void 0?!0:g[15]),E[0]&65536&&(S.panOnScroll=g[16]===void 0?!1:g[16]),E[0]&131072&&(S.panOnDrag=g[17]===void 0?!0:g[17]),E[0]&4194304&&(S.paneClickDistance=g[22]===void 0?0:g[22]),E[0]&10879168|E[1]&8|E[3]&64&&(S.$$scope={dirty:E,ctx:g}),o.$set(S);const p={};E[0]&1048576&&(p.proOptions=g[20]),E[0]&524288&&(p.position=g[19]),s.$set(p),y&&y.p&&(!f||E[3]&64)&&Ze(y,h,g,g[99],f?Je(h,g[99],E,null):Ge(g[99]),null),Lt(e,_=ft(m,[(!f||E[0]&16777216)&&{style:g[24]},(!f||E[0]&1107296256&&a!==(a=De(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},E[1]&4&&g[33],{role:"application"}])),ye(e,"svelte-12wlba6",!0)},i(g){f||(W(n.$$.fragment,g),W(o.$$.fragment,g),W(s.$$.fragment,g),W(y,g),f=!0)},o(g){Y(n.$$.fragment,g),Y(o.$$.fragment,g),Y(s.$$.fragment,g),Y(y,g),f=!1},d(g){g&&z(e),le(n),le(o),le(s),y&&y.d(g),t[97](null),u(),c=!1,ct(d)}}}function Sm(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let r=Ie(e,o),s,l,a=Pe,u=()=>(a(),a=zo(N,M=>n(100,l=M)),N),f,c=Pe,d=()=>(c(),c=zo(i,M=>n(30,f=M)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c());let{$$slots:h={},$$scope:y}=e;const m=js(h);let{id:_="1"}=e,{nodes:g}=e,{edges:E}=e,{fitView:v=void 0}=e,{fitViewOptions:S=void 0}=e,{minZoom:p=void 0}=e,{maxZoom:D=void 0}=e,{initialViewport:P=void 0}=e,{viewport:N=void 0}=e;u();let{nodeTypes:O=void 0}=e,{edgeTypes:L=void 0}=e,{selectionKey:T=void 0}=e,{selectionMode:R=void 0}=e,{panActivationKey:F=void 0}=e,{multiSelectionKey:k=void 0}=e,{zoomActivationKey:A=void 0}=e,{nodesDraggable:w=void 0}=e,{nodesConnectable:C=void 0}=e,{nodeDragThreshold:I=void 0}=e,{elementsSelectable:H=void 0}=e,{snapGrid:K=void 0}=e,{deleteKey:G=void 0}=e,{connectionRadius:j=void 0}=e,{connectionLineType:ae=void 0}=e,{connectionMode:B=Yt.Strict}=e,{connectionLineStyle:$=""}=e,{connectionLineContainerStyle:fe=""}=e,{onMoveStart:V=void 0}=e,{onMove:he=void 0}=e,{onMoveEnd:be=void 0}=e,{isValidConnection:we=void 0}=e,{translateExtent:ke=void 0}=e,{nodeExtent:pe=void 0}=e,{onlyRenderVisibleElements:Le=void 0}=e,{panOnScrollMode:q=mt.Free}=e,{preventScrolling:Re=!0}=e,{zoomOnScroll:Te=!0}=e,{zoomOnDoubleClick:Ot=!0}=e,{zoomOnPinch:bt=!0}=e,{panOnScroll:wt=!1}=e,{panOnDrag:Xe=!0}=e,{selectionOnDrag:kt=void 0}=e,{autoPanOnConnect:ie=!0}=e,{autoPanOnNodeDrag:Nt=!0}=e,{onerror:Dt=void 0}=e,{ondelete:Z=void 0}=e,{onedgecreate:Tt=void 0}=e,{attributionPosition:Fe=void 0}=e,{proOptions:Qe=void 0}=e,{defaultEdgeOptions:ee=void 0}=e,{width:vt=void 0}=e,{height:je=void 0}=e,{colorMode:Ye="light"}=e,{onconnect:Ut=void 0}=e,{onconnectstart:Zt=void 0}=e,{onconnectend:Gt=void 0}=e,{onbeforedelete:Jt=void 0}=e,{oninit:It=void 0}=e,{nodeOrigin:Vt=void 0}=e,{paneClickDistance:In=0}=e,{nodeClickDistance:po=0}=e,{defaultMarkerColor:Ti="#b1b1b7"}=e,{style:Co=void 0}=e,{class:Po=void 0}=e,An,Qt,jt;const Ps=l||P,Ke=xs(Ni)?He():ag({nodes:X(g),edges:X(E),width:vt,height:je,fitView:v,nodeOrigin:Vt,nodeExtent:pe});Cn(()=>(Ke.width.set(Qt),Ke.height.set(jt),Ke.domNode.set(An),Ke.syncNodeStores(g),Ke.syncEdgeStores(E),Ke.syncViewport(N),v!==void 0&&Ke.fitViewOnInit.set(v),S&&Ke.fitViewOptions.set(S),Hr(Ke,{nodeTypes:O,edgeTypes:L,minZoom:p,maxZoom:D,translateExtent:ke,paneClickDistance:In}),()=>{Ke.reset()}));const{initialized:Mo}=Ke;Q(t,Mo,M=>n(74,s=M));let Ii=!1;function Ms(M){Ce.call(this,t,M)}function zs(M){Ce.call(this,t,M)}function Os(M){Ce.call(this,t,M)}function Ns(M){Ce.call(this,t,M)}function Ds(M){Ce.call(this,t,M)}function Ts(M){Ce.call(this,t,M)}function Is(M){Ce.call(this,t,M)}function As(M){Ce.call(this,t,M)}function Hs(M){Ce.call(this,t,M)}function Ls(M){Ce.call(this,t,M)}function Rs(M){Ce.call(this,t,M)}function Vs(M){Ce.call(this,t,M)}function Bs(M){Ce.call(this,t,M)}function Ws(M){Ce.call(this,t,M)}function Xs(M){Ce.call(this,t,M)}function Fs(M){Ce.call(this,t,M)}function Ys(M){Ce.call(this,t,M)}function Ks(M){Ce.call(this,t,M)}function qs(M){Ce.call(this,t,M)}function Us(M){Ce.call(this,t,M)}function Zs(M){Ce.call(this,t,M)}function Gs(M){at[M?"unshift":"push"](()=>{An=M,n(28,An)})}function Js(){Qt=this.clientWidth,jt=this.clientHeight,n(26,Qt),n(27,jt)}return t.$$set=M=>{e=Se(Se({},e),nt(M)),n(33,r=Ie(e,o)),"id"in M&&n(35,_=M.id),"nodes"in M&&n(36,g=M.nodes),"edges"in M&&n(37,E=M.edges),"fitView"in M&&n(38,v=M.fitView),"fitViewOptions"in M&&n(39,S=M.fitViewOptions),"minZoom"in M&&n(40,p=M.minZoom),"maxZoom"in M&&n(41,D=M.maxZoom),"initialViewport"in M&&n(42,P=M.initialViewport),"viewport"in M&&u(n(0,N=M.viewport)),"nodeTypes"in M&&n(43,O=M.nodeTypes),"edgeTypes"in M&&n(44,L=M.edgeTypes),"selectionKey"in M&&n(1,T=M.selectionKey),"selectionMode"in M&&n(45,R=M.selectionMode),"panActivationKey"in M&&n(2,F=M.panActivationKey),"multiSelectionKey"in M&&n(3,k=M.multiSelectionKey),"zoomActivationKey"in M&&n(4,A=M.zoomActivationKey),"nodesDraggable"in M&&n(46,w=M.nodesDraggable),"nodesConnectable"in M&&n(47,C=M.nodesConnectable),"nodeDragThreshold"in M&&n(48,I=M.nodeDragThreshold),"elementsSelectable"in M&&n(49,H=M.elementsSelectable),"snapGrid"in M&&n(50,K=M.snapGrid),"deleteKey"in M&&n(5,G=M.deleteKey),"connectionRadius"in M&&n(51,j=M.connectionRadius),"connectionLineType"in M&&n(52,ae=M.connectionLineType),"connectionMode"in M&&n(53,B=M.connectionMode),"connectionLineStyle"in M&&n(6,$=M.connectionLineStyle),"connectionLineContainerStyle"in M&&n(7,fe=M.connectionLineContainerStyle),"onMoveStart"in M&&n(8,V=M.onMoveStart),"onMove"in M&&n(9,he=M.onMove),"onMoveEnd"in M&&n(10,be=M.onMoveEnd),"isValidConnection"in M&&n(54,we=M.isValidConnection),"translateExtent"in M&&n(55,ke=M.translateExtent),"nodeExtent"in M&&n(56,pe=M.nodeExtent),"onlyRenderVisibleElements"in M&&n(57,Le=M.onlyRenderVisibleElements),"panOnScrollMode"in M&&n(11,q=M.panOnScrollMode),"preventScrolling"in M&&n(12,Re=M.preventScrolling),"zoomOnScroll"in M&&n(13,Te=M.zoomOnScroll),"zoomOnDoubleClick"in M&&n(14,Ot=M.zoomOnDoubleClick),"zoomOnPinch"in M&&n(15,bt=M.zoomOnPinch),"panOnScroll"in M&&n(16,wt=M.panOnScroll),"panOnDrag"in M&&n(17,Xe=M.panOnDrag),"selectionOnDrag"in M&&n(18,kt=M.selectionOnDrag),"autoPanOnConnect"in M&&n(58,ie=M.autoPanOnConnect),"autoPanOnNodeDrag"in M&&n(59,Nt=M.autoPanOnNodeDrag),"onerror"in M&&n(60,Dt=M.onerror),"ondelete"in M&&n(61,Z=M.ondelete),"onedgecreate"in M&&n(62,Tt=M.onedgecreate),"attributionPosition"in M&&n(19,Fe=M.attributionPosition),"proOptions"in M&&n(20,Qe=M.proOptions),"defaultEdgeOptions"in M&&n(21,ee=M.defaultEdgeOptions),"width"in M&&n(63,vt=M.width),"height"in M&&n(64,je=M.height),"colorMode"in M&&n(65,Ye=M.colorMode),"onconnect"in M&&n(66,Ut=M.onconnect),"onconnectstart"in M&&n(67,Zt=M.onconnectstart),"onconnectend"in M&&n(68,Gt=M.onconnectend),"onbeforedelete"in M&&n(69,Jt=M.onbeforedelete),"oninit"in M&&n(70,It=M.oninit),"nodeOrigin"in M&&n(71,Vt=M.nodeOrigin),"paneClickDistance"in M&&n(22,In=M.paneClickDistance),"nodeClickDistance"in M&&n(23,po=M.nodeClickDistance),"defaultMarkerColor"in M&&n(72,Ti=M.defaultMarkerColor),"style"in M&&n(24,Co=M.style),"class"in M&&n(25,Po=M.class),"$$scope"in M&&n(99,y=M.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Qt!==void 0&&jt!==void 0&&(Ke.width.set(Qt),Ke.height.set(jt)),t.$$.dirty[2]&6400&&!Ii&&s&&(It==null||It(),n(73,Ii=!0)),t.$$.dirty[1]&2097135632|t.$$.dirty[2]&1777&&gm(Ke,{flowId:_,connectionLineType:ae,connectionRadius:j,selectionMode:R,snapGrid:K,defaultMarkerColor:Ti,nodesDraggable:w,nodesConnectable:C,elementsSelectable:H,onlyRenderVisibleElements:Le,isValidConnection:we,autoPanOnConnect:ie,autoPanOnNodeDrag:Nt,onerror:Dt,ondelete:Z,onedgecreate:Tt,connectionMode:B,nodeDragThreshold:I,onconnect:Ut,onconnectstart:Zt,onconnectend:Gt,onbeforedelete:Jt,nodeOrigin:Vt}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Hr(Ke,{nodeTypes:O,edgeTypes:L,minZoom:p,maxZoom:D,translateExtent:ke,paneClickDistance:In}),t.$$.dirty[2]&8&&d(n(29,i=ym(Ye)))},[N,T,F,k,A,G,$,fe,V,he,be,q,Re,Te,Ot,bt,wt,Xe,kt,Fe,Qe,ee,In,po,Co,Po,Qt,jt,An,i,f,Ps,Mo,r,m,_,g,E,v,S,p,D,P,O,L,R,w,C,I,H,K,j,ae,B,we,ke,pe,Le,ie,Nt,Dt,Z,Tt,vt,je,Ye,Ut,Zt,Gt,Jt,It,Vt,Ti,Ii,s,h,Ms,zs,Os,Ns,Ds,Ts,Is,As,Hs,Ls,Rs,Vs,Bs,Ws,Xs,Fs,Ys,Ks,qs,Us,Zs,Gs,Js,y]}class pm extends ge{constructor(e){super(),me(this,e,Sm,Em,_e,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function Cm(t){let e;const n=t[7].default,i=Ue(n,t,t[6],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,r){i&&i.m(o,r),e=!0},p(o,[r]){i&&i.p&&(!e||r&64)&&Ze(i,n,o,o[6],e?Je(n,o[6],r,null):Ge(o[6]),null)},i(o){e||(W(i,o),e=!0)},o(o){Y(i,o),e=!1},d(o){i&&i.d(o)}}}function Pm(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:r=void 0}=e,{initialEdges:s=void 0}=e,{initialWidth:l=void 0}=e,{initialHeight:a=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const c=ys({nodes:r,edges:s,width:l,height:a,nodeOrigin:f,fitView:u});return _n(Ni,{getStore:()=>c}),yi(()=>{c.reset()}),t.$$set=d=>{"initialNodes"in d&&n(0,r=d.initialNodes),"initialEdges"in d&&n(1,s=d.initialEdges),"initialWidth"in d&&n(2,l=d.initialWidth),"initialHeight"in d&&n(3,a=d.initialHeight),"fitView"in d&&n(4,u=d.fitView),"nodeOrigin"in d&&n(5,f=d.nodeOrigin),"$$scope"in d&&n(6,o=d.$$scope)},[r,s,l,a,u,f,o,i]}class Mm extends ge{constructor(e){super(),me(this,e,Pm,Cm,_e,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const zm=t=>({}),Rr=t=>({class:"button-svg"});function Om(t){let e,n,i,o,r;const s=t[8].default,l=Ue(s,t,t[7],Rr);let a=[{type:"button"},{class:n=De(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=Se(u,a[f]);return{c(){e=ze("button"),l&&l.c(),this.h()},l(f){e=Oe(f,"BUTTON",{type:!0,class:!0});var c=U(e);l&&l.l(c),c.forEach(z),this.h()},h(){Lt(e,u),ce(e,"--xy-controls-button-background-color-props",t[1]),ce(e,"--xy-controls-button-background-color-hover-props",t[2]),ce(e,"--xy-controls-button-color-props",t[3]),ce(e,"--xy-controls-button-color-hover-props",t[4]),ce(e,"--xy-controls-button-border-color-props",t[5])},m(f,c){J(f,e,c),l&&l.m(e,null),e.autofocus&&e.focus(),i=!0,o||(r=Me(e,"click",t[9]),o=!0)},p(f,[c]){l&&l.p&&(!i||c&128)&&Ze(l,s,f,f[7],i?Je(s,f[7],c,zm):Ge(f[7]),Rr),Lt(e,u=ft(a,[{type:"button"},(!i||c&1&&n!==(n=De(["svelte-flow__controls-button",f[0]])))&&{class:n},c&64&&f[6]])),ce(e,"--xy-controls-button-background-color-props",f[1]),ce(e,"--xy-controls-button-background-color-hover-props",f[2]),ce(e,"--xy-controls-button-color-props",f[3]),ce(e,"--xy-controls-button-color-hover-props",f[4]),ce(e,"--xy-controls-button-border-color-props",f[5])},i(f){i||(W(l,f),i=!0)},o(f){Y(l,f),i=!1},d(f){f&&z(e),l&&l.d(f),o=!1,r()}}}function Nm(t,e,n){const i=["class"];let o=Ie(e,i),{$$slots:r={},$$scope:s}=e,{class:l=void 0}=e,a,u,f,c,d;function h(y){Ce.call(this,t,y)}return t.$$set=y=>{e=Se(Se({},e),nt(y)),n(6,o=Ie(e,i)),"class"in y&&n(0,l=y.class),"$$scope"in y&&n(7,s=y.$$scope)},[l,a,u,f,c,d,o,s,r,h]}class gi extends ge{constructor(e){super(),me(this,e,Nm,Om,_e,{class:0})}}function Dm(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(i){e=ne(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=ne(o,"path",{d:!0}),U(n).forEach(z),o.forEach(z),this.h()},h(){b(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 32")},m(i,o){J(i,e,o),x(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&z(e)}}}class Tm extends ge{constructor(e){super(),me(this,e,null,Dm,_e,{})}}function Im(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(i){e=ne(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=ne(o,"path",{d:!0}),U(n).forEach(z),o.forEach(z),this.h()},h(){b(n,"d","M0 0h32v4.2H0z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 5")},m(i,o){J(i,e,o),x(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&z(e)}}}class Am extends ge{constructor(e){super(),me(this,e,null,Im,_e,{})}}function Hm(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(i){e=ne(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=ne(o,"path",{d:!0}),U(n).forEach(z),o.forEach(z),this.h()},h(){b(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 32 30")},m(i,o){J(i,e,o),x(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&z(e)}}}class Lm extends ge{constructor(e){super(),me(this,e,null,Hm,_e,{})}}function Rm(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(i){e=ne(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=ne(o,"path",{d:!0}),U(n).forEach(z),o.forEach(z),this.h()},h(){b(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 25 32")},m(i,o){J(i,e,o),x(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&z(e)}}}class Vm extends ge{constructor(e){super(),me(this,e,null,Rm,_e,{})}}function Bm(t){let e,n;return{c(){e=te("svg"),n=te("path"),this.h()},l(i){e=ne(i,"svg",{xmlns:!0,viewBox:!0});var o=U(e);n=ne(o,"path",{d:!0}),U(n).forEach(z),o.forEach(z),this.h()},h(){b(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 25 32")},m(i,o){J(i,e,o),x(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&z(e)}}}class Wm extends ge{constructor(e){super(),me(this,e,null,Bm,_e,{})}}const Xm=t=>({}),Vr=t=>({}),Fm=t=>({}),Br=t=>({});function Wr(t){let e,n,i,o;const r=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let s={$$slots:{default:[Ym]},$$scope:{ctx:t}};for(let u=0;u<r.length;u+=1)s=Se(s,r[u]);e=new gi({props:s}),e.$on("click",t[18]);const l=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Km]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)a=Se(a,l[u]);return i=new gi({props:a}),i.$on("click",t[19]),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment)},l(u){se(e.$$.fragment,u),n=Ee(u),se(i.$$.fragment,u)},m(u,f){re(e,u,f),J(u,n,f),re(i,u,f),o=!0},p(u,f){const c=f[0]&131584?ft(r,[r[0],r[1],r[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Xt(u[17])]):{};f[1]&32&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d=f[0]&132096?ft(l,[l[0],l[1],l[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Xt(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),i.$set(d)},i(u){o||(W(e.$$.fragment,u),W(i.$$.fragment,u),o=!0)},o(u){Y(e.$$.fragment,u),Y(i.$$.fragment,u),o=!1},d(u){u&&z(n),le(e,u),le(i,u)}}}function Ym(t){let e,n;return e=new Tm({}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Km(t){let e,n;return e=new Am({}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Xr(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let o={$$slots:{default:[qm]},$$scope:{ctx:t}};for(let r=0;r<i.length;r+=1)o=Se(o,i[r]);return e=new gi({props:o}),e.$on("click",t[20]),{c(){oe(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const l=s[0]&131072?ft(i,[i[0],i[1],i[2],Xt(r[17])]):{};s[1]&32&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){n||(W(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function qm(t){let e,n;return e=new Lm({}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Fr(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let o={$$slots:{default:[Gm]},$$scope:{ctx:t}};for(let r=0;r<i.length;r+=1)o=Se(o,i[r]);return e=new gi({props:o}),e.$on("click",t[21]),{c(){oe(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,s){re(e,r,s),n=!0},p(r,s){const l=s[0]&131072?ft(i,[i[0],i[1],i[2],Xt(r[17])]):{};s[0]&256|s[1]&32&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){n||(W(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function Um(t){let e,n;return e=new Vm({}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Zm(t){let e,n;return e=new Wm({}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Gm(t){let e,n,i,o;const r=[Zm,Um],s=[];function l(a,u){return a[8]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=Ne()},l(a){n.l(a),i=Ne()},m(a,u){s[e].m(a,u),J(a,i,u),o=!0},p(a,u){let f=e;e=l(a),e!==f&&(Be(),Y(s[f],1,1,()=>{s[f]=null}),We(),n=s[e],n||(n=s[e]=r[e](a),n.c()),W(n,1),n.m(i.parentNode,i))},i(a){o||(W(n),o=!0)},o(a){Y(n),o=!1},d(a){a&&z(i),s[e].d(a)}}}function Jm(t){let e,n,i,o,r,s;const l=t[35].before,a=Ue(l,t,t[36],Br);let u=t[1]&&Wr(t),f=t[2]&&Xr(t),c=t[3]&&Fr(t);const d=t[35].default,h=Ue(d,t,t[36],null),y=t[35].after,m=Ue(y,t,t[36],Vr);return{c(){a&&a.c(),e=ve(),u&&u.c(),n=ve(),f&&f.c(),i=ve(),c&&c.c(),o=ve(),h&&h.c(),r=ve(),m&&m.c()},l(_){a&&a.l(_),e=Ee(_),u&&u.l(_),n=Ee(_),f&&f.l(_),i=Ee(_),c&&c.l(_),o=Ee(_),h&&h.l(_),r=Ee(_),m&&m.l(_)},m(_,g){a&&a.m(_,g),J(_,e,g),u&&u.m(_,g),J(_,n,g),f&&f.m(_,g),J(_,i,g),c&&c.m(_,g),J(_,o,g),h&&h.m(_,g),J(_,r,g),m&&m.m(_,g),s=!0},p(_,g){a&&a.p&&(!s||g[1]&32)&&Ze(a,l,_,_[36],s?Je(l,_[36],g,Fm):Ge(_[36]),Br),_[1]?u?(u.p(_,g),g[0]&2&&W(u,1)):(u=Wr(_),u.c(),W(u,1),u.m(n.parentNode,n)):u&&(Be(),Y(u,1,1,()=>{u=null}),We()),_[2]?f?(f.p(_,g),g[0]&4&&W(f,1)):(f=Xr(_),f.c(),W(f,1),f.m(i.parentNode,i)):f&&(Be(),Y(f,1,1,()=>{f=null}),We()),_[3]?c?(c.p(_,g),g[0]&8&&W(c,1)):(c=Fr(_),c.c(),W(c,1),c.m(o.parentNode,o)):c&&(Be(),Y(c,1,1,()=>{c=null}),We()),h&&h.p&&(!s||g[1]&32)&&Ze(h,d,_,_[36],s?Je(d,_[36],g,null):Ge(_[36]),null),m&&m.p&&(!s||g[1]&32)&&Ze(m,y,_,_[36],s?Je(y,_[36],g,Xm):Ge(_[36]),Vr)},i(_){s||(W(a,_),W(u),W(f),W(c),W(h,_),W(m,_),s=!0)},o(_){Y(a,_),Y(u),Y(f),Y(c),Y(h,_),Y(m,_),s=!1},d(_){_&&(z(e),z(n),z(i),z(o),z(r)),a&&a.d(_),u&&u.d(_),f&&f.d(_),c&&c.d(_),h&&h.d(_),m&&m.d(_)}}}function Qm(t){let e,n;return e=new Eo({props:{class:De(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[Jm]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&192&&(r.class=De(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(r.position=i[0]),o[0]&16&&(r["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(r.style=i[5]),o[0]&1806|o[1]&32&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function jm(t,e,n){let i,o,r,s,l,a,u,f,c,d,{$$slots:h={},$$scope:y}=e,{position:m="bottom-left"}=e,{showZoom:_=!0}=e,{showFitView:g=!0}=e,{showLock:E=!0}=e,{buttonBgColor:v=void 0}=e,{buttonBgColorHover:S=void 0}=e,{buttonColor:p=void 0}=e,{buttonColorHover:D=void 0}=e,{buttonBorderColor:P=void 0}=e,{ariaLabel:N=void 0}=e,{style:O=void 0}=e,{orientation:L="vertical"}=e,{fitViewOptions:T=void 0}=e,{class:R=""}=e;const{zoomIn:F,zoomOut:k,fitView:A,viewport:w,minZoom:C,maxZoom:I,nodesDraggable:H,nodesConnectable:K,elementsSelectable:G}=He();Q(t,w,V=>n(30,a=V)),Q(t,C,V=>n(31,u=V)),Q(t,I,V=>n(29,l=V)),Q(t,H,V=>n(34,d=V)),Q(t,K,V=>n(33,c=V)),Q(t,G,V=>n(32,f=V));const j={bgColor:v,bgColorHover:S,color:p,colorHover:D,borderColor:P},ae=()=>{F()},B=()=>{k()},$=()=>{A(T)},fe=()=>{n(8,i=!i),H.set(i),K.set(i),G.set(i)};return t.$$set=V=>{"position"in V&&n(0,m=V.position),"showZoom"in V&&n(1,_=V.showZoom),"showFitView"in V&&n(2,g=V.showFitView),"showLock"in V&&n(3,E=V.showLock),"buttonBgColor"in V&&n(22,v=V.buttonBgColor),"buttonBgColorHover"in V&&n(23,S=V.buttonBgColorHover),"buttonColor"in V&&n(24,p=V.buttonColor),"buttonColorHover"in V&&n(25,D=V.buttonColorHover),"buttonBorderColor"in V&&n(26,P=V.buttonBorderColor),"ariaLabel"in V&&n(4,N=V.ariaLabel),"style"in V&&n(5,O=V.style),"orientation"in V&&n(27,L=V.orientation),"fitViewOptions"in V&&n(28,T=V.fitViewOptions),"class"in V&&n(6,R=V.class),"$$scope"in V&&n(36,y=V.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=d||c||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,o=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,r=a.zoom>=l),t.$$.dirty[0]&134217728&&n(7,s=L==="horizontal"?"horizontal":"vertical")},[m,_,g,E,N,O,R,s,i,r,o,w,C,I,H,K,G,j,ae,B,$,fe,v,S,p,D,P,L,T,l,a,u,f,c,d,h,y]}class xm extends ge{constructor(e){super(),me(this,e,jm,Qm,_e,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var Ht;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ht||(Ht={}));function $m(t){let e,n;return{c(){e=te("circle"),this.h()},l(i){e=ne(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),U(e).forEach(z),this.h()},h(){b(e,"cx",t[0]),b(e,"cy",t[0]),b(e,"r",t[0]),b(e,"class",n=De(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){J(i,e,o)},p(i,[o]){o&1&&b(e,"cx",i[0]),o&1&&b(e,"cy",i[0]),o&1&&b(e,"r",i[0]),o&2&&n!==(n=De(["svelte-flow__background-pattern","dots",i[1]]))&&b(e,"class",n)},i:Pe,o:Pe,d(i){i&&z(e)}}}function e0(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=r=>{"radius"in r&&n(0,i=r.radius),"class"in r&&n(1,o=r.class)},[i,o]}class t0 extends ge{constructor(e){super(),me(this,e,e0,$m,_e,{radius:0,class:1})}}function n0(t){let e,n,i;return{c(){e=te("path"),this.h()},l(o){e=ne(o,"path",{"stroke-width":!0,d:!0,class:!0}),U(e).forEach(z),this.h()},h(){b(e,"stroke-width",t[0]),b(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),b(e,"class",i=De(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,r){J(o,e,r)},p(o,[r]){r&1&&b(e,"stroke-width",o[0]),r&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&b(e,"d",n),r&12&&i!==(i=De(["svelte-flow__background-pattern",o[2],o[3]]))&&b(e,"class",i)},i:Pe,o:Pe,d(o){o&&z(e)}}}function i0(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:r=void 0}=e,{class:s=""}=e;return t.$$set=l=>{"lineWidth"in l&&n(0,i=l.lineWidth),"dimensions"in l&&n(1,o=l.dimensions),"variant"in l&&n(2,r=l.variant),"class"in l&&n(3,s=l.class)},[i,o,r,s]}class o0 extends ge{constructor(e){super(),me(this,e,i0,n0,_e,{lineWidth:0,dimensions:1,variant:2,class:3})}}function r0(t){let e,n;return e=new o0({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&64&&(r.dimensions=i[6]),o&1&&(r.variant=i[0]),o&2&&(r.lineWidth=i[1]),o&16&&(r.class=i[4]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function l0(t){let e,n;return e=new t0({props:{radius:t[7]/2,class:t[4]}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o&128&&(r.radius=i[7]/2),o&16&&(r.class=i[4]),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function s0(t){let e,n,i,o,r,s,l,a,u,f,c,d,h;const y=[l0,r0],m=[];function _(g,E){return g[14]?0:1}return i=_(t),o=m[i]=y[i](t),{c(){e=te("svg"),n=te("pattern"),o.c(),f=te("rect"),this.h()},l(g){e=ne(g,"svg",{class:!0,"data-testid":!0});var E=U(e);n=ne(E,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var v=U(n);o.l(v),v.forEach(z),f=ne(E,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),U(f).forEach(z),E.forEach(z),this.h()},h(){b(n,"id",t[11]),b(n,"x",r=t[9].x%t[8][0]),b(n,"y",s=t[9].y%t[8][1]),b(n,"width",l=t[8][0]),b(n,"height",a=t[8][1]),b(n,"patternUnits","userSpaceOnUse"),b(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),b(f,"x","0"),b(f,"y","0"),b(f,"width","100%"),b(f,"height","100%"),b(f,"fill",c=`url(#${t[11]})`),b(e,"class",d=$n(De(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),b(e,"data-testid","svelte-flow__background"),ce(e,"--xy-background-color-props",t[2]),ce(e,"--xy-background-pattern-color-props",t[3])},m(g,E){J(g,e,E),x(e,n),m[i].m(n,null),x(e,f),h=!0},p(g,[E]){o.p(g,E),(!h||E&2048)&&b(n,"id",g[11]),(!h||E&768&&r!==(r=g[9].x%g[8][0]))&&b(n,"x",r),(!h||E&768&&s!==(s=g[9].y%g[8][1]))&&b(n,"y",s),(!h||E&256&&l!==(l=g[8][0]))&&b(n,"width",l),(!h||E&256&&a!==(a=g[8][1]))&&b(n,"height",a),(!h||E&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&b(n,"patternTransform",u),(!h||E&2048&&c!==(c=`url(#${g[11]})`))&&b(f,"fill",c),(!h||E&32&&d!==(d=$n(De(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&b(e,"class",d),E&4&&ce(e,"--xy-background-color-props",g[2]),E&8&&ce(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(W(o),h=!0)},o(g){Y(o),h=!1},d(g){g&&z(e),m[i].d()}}}const a0={[Ht.Dots]:1,[Ht.Lines]:1,[Ht.Cross]:6};function u0(t,e,n){let i,o,r,s,l,a,u,{id:f=void 0}=e,{variant:c=Ht.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:y=1}=e,{bgColor:m=void 0}=e,{patternColor:_=void 0}=e,{patternClass:g=void 0}=e,{class:E=""}=e;const{viewport:v,flowId:S}=He();Q(t,v,O=>n(9,a=O)),Q(t,S,O=>n(18,u=O));const p=h||a0[c],D=c===Ht.Dots,P=c===Ht.Cross,N=Array.isArray(d)?d:[d,d];return t.$$set=O=>{"id"in O&&n(15,f=O.id),"variant"in O&&n(0,c=O.variant),"gap"in O&&n(16,d=O.gap),"size"in O&&n(17,h=O.size),"lineWidth"in O&&n(1,y=O.lineWidth),"bgColor"in O&&n(2,m=O.bgColor),"patternColor"in O&&n(3,_=O.patternColor),"patternClass"in O&&n(4,g=O.patternClass),"class"in O&&n(5,E=O.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||""}`),t.$$.dirty&512&&n(8,o=[N[0]*a.zoom||1,N[1]*a.zoom||1]),t.$$.dirty&512&&n(7,r=p*a.zoom),t.$$.dirty&384&&n(6,s=P?[r,r]:o),t.$$.dirty&192&&n(10,l=D?[r/2,r/2]:[s[0]/2,s[1]/2])},[c,y,m,_,g,E,s,r,o,a,l,i,v,S,D,f,d,h,u]}class f0 extends ge{constructor(e){super(),me(this,e,u0,s0,_e,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function c0(t){let e,n,i;return{c(){e=te("rect"),this.h()},l(o){e=ne(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,style:!0,"shape-rendering":!0}),U(e).forEach(z),this.h()},h(){b(e,"class",n=De(["svelte-flow__minimap-node",t[10]])),b(e,"x",t[0]),b(e,"y",t[1]),b(e,"rx",t[4]),b(e,"ry",t[4]),b(e,"width",t[2]),b(e,"height",t[3]),b(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),b(e,"shape-rendering",t[6]),ye(e,"selected",t[9])},m(o,r){J(o,e,r)},p(o,[r]){r&1024&&n!==(n=De(["svelte-flow__minimap-node",o[10]]))&&b(e,"class",n),r&1&&b(e,"x",o[0]),r&2&&b(e,"y",o[1]),r&16&&b(e,"rx",o[4]),r&16&&b(e,"ry",o[4]),r&4&&b(e,"width",o[2]),r&8&&b(e,"height",o[3]),r&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&b(e,"style",i),r&64&&b(e,"shape-rendering",o[6]),r&1536&&ye(e,"selected",o[9])},i:Pe,o:Pe,d(o){o&&z(e)}}}function d0(t,e,n){let{x:i}=e,{y:o}=e,{width:r=0}=e,{height:s=0}=e,{borderRadius:l=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:c=2}=e,{selected:d=!1}=e,{class:h=""}=e;return t.$$set=y=>{"x"in y&&n(0,i=y.x),"y"in y&&n(1,o=y.y),"width"in y&&n(2,r=y.width),"height"in y&&n(3,s=y.height),"borderRadius"in y&&n(4,l=y.borderRadius),"color"in y&&n(5,a=y.color),"shapeRendering"in y&&n(6,u=y.shapeRendering),"strokeColor"in y&&n(7,f=y.strokeColor),"strokeWidth"in y&&n(8,c=y.strokeWidth),"selected"in y&&n(9,d=y.selected),"class"in y&&n(10,h=y.class)},[i,o,r,s,l,a,u,f,c,d,h]}class h0 extends ge{constructor(e){super(),me(this,e,d0,c0,_e,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function g0(t,e){const n=uh({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=X(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function Yr(t,e,n){const i=t.slice();i[55]=e[n];const o=i[20].get(i[55].id);return i[56]=o,i}function Yi(t){const e=t.slice(),n=Rt(e[56]);return e[59]=n,e}function Kr(t){let e,n,i=[],o=new Map,r,s,l,a,u,f,c,d=t[1]&&qr(t),h=yt(t[19]);const y=m=>m[55].id;for(let m=0;m<h.length;m+=1){let _=Yr(t,h,m),g=y(_);o.set(g,i[m]=Zr(g,_))}return{c(){e=te("svg"),d&&d.c(),n=Ne();for(let m=0;m<i.length;m+=1)i[m].c();r=te("path"),this.h()},l(m){e=ne(m,"svg",{width:!0,height:!0,viewBox:!0,class:!0,role:!0,"aria-labelledby":!0});var _=U(e);d&&d.l(_),n=Ne();for(let g=0;g<i.length;g+=1)i[g].l(_);r=ne(_,"path",{class:!0,d:!0,"fill-rule":!0,"pointer-events":!0}),U(r).forEach(z),_.forEach(z),this.h()},h(){b(r,"class","svelte-flow__minimap-mask"),b(r,"d",s="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+t[15]*2)+"v"+(t[23]+t[15]*2)+"h"+(-t[24]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),b(r,"fill-rule","evenodd"),b(r,"pointer-events","none"),b(e,"width",t[17]),b(e,"height",t[16]),b(e,"viewBox",l=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),b(e,"class","svelte-flow__minimap-svg"),b(e,"role","img"),b(e,"aria-labelledby",t[41]),ce(e,"--xy-minimap-mask-background-color-props",t[5]),ce(e,"--xy-minimap-mask-stroke-color-props",t[6]),ce(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(m,_){J(m,e,_),d&&d.m(e,null),x(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);x(e,r),u=!0,f||(c=qe(a=g0.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(m,_){m[1]?d?d.p(m,_):(d=qr(m),d.c(),d.m(e,n)):d&&(d.d(1),d=null),_[0]&1572876|_[1]&960&&(h=yt(m[19]),Be(),i=bi(i,_,y,1,m,h,o,e,_i,Zr,r,Yr),We()),(!u||_[0]&126124032&&s!==(s="M"+(m[26]-m[15])+","+(m[25]-m[15])+"h"+(m[24]+m[15]*2)+"v"+(m[23]+m[15]*2)+"h"+(-m[24]-m[15]*2)+`z
      M`+m[18].x+","+m[18].y+"h"+m[18].width+"v"+m[18].height+"h"+-m[18].width+"z"))&&b(r,"d",s),(!u||_[0]&131072)&&b(e,"width",m[17]),(!u||_[0]&65536)&&b(e,"height",m[16]),(!u||_[0]&125829120&&l!==(l=m[26]+" "+m[25]+" "+m[24]+" "+m[23]))&&b(e,"viewBox",l),a&&Ae(a.update)&&_[0]&408948480&&a.update.call(null,{panZoom:m[27],viewport:m[31],getViewScale:m[42],translateExtent:m[28],width:m[22],height:m[21],inversePan:m[10],zoomStep:m[11],pannable:m[8],zoomable:m[9]}),_[0]&32&&ce(e,"--xy-minimap-mask-background-color-props",m[5]),_[0]&64&&ce(e,"--xy-minimap-mask-stroke-color-props",m[6]),_[0]&16512&&ce(e,"--xy-minimap-mask-stroke-width-props",m[7]?m[7]*m[14]:void 0)},i(m){if(!u){for(let _=0;_<h.length;_+=1)W(i[_]);u=!0}},o(m){for(let _=0;_<i.length;_+=1)Y(i[_]);u=!1},d(m){m&&z(e),d&&d.d();for(let _=0;_<i.length;_+=1)i[_].d();f=!1,c()}}}function qr(t){let e,n;return{c(){e=te("title"),n=Mt(t[1]),this.h()},l(i){e=ne(i,"title",{id:!0});var o=U(e);n=zt(o,t[1]),o.forEach(z),this.h()},h(){b(e,"id",t[41])},m(i,o){J(i,e,o),x(e,n)},p(i,o){o[0]&2&&qt(n,i[1])},d(i){i&&z(e)}}}function Ur(t){var r;let e,n;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:(r=t[37])==null?void 0:r.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let o={};for(let s=0;s<i.length;s+=1)o=Se(o,i[s]);return e=new h0({props:o}),{c(){oe(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,l){re(e,s,l),n=!0},p(s,l){var u;const a=l[0]&1572876|l[1]&960?ft(i,[l[0]&1572864&&{x:s[56].internals.positionAbsolute.x},l[0]&1572864&&{y:s[56].internals.positionAbsolute.y},l[0]&1572864&&Xt(s[59]),l[0]&1572864&&{selected:s[56].selected},l[0]&1572864|l[1]&64&&{color:(u=s[37])==null?void 0:u.call(s,s[56])},l[0]&4&&{borderRadius:s[2]},l[0]&1572864|l[1]&128&&{strokeColor:s[38](s[56])},l[0]&8&&{strokeWidth:s[3]},l[1]&512&&{shapeRendering:s[40]},l[0]&1572864|l[1]&256&&{class:s[39](s[56])}]):{};e.$set(a)},i(s){n||(W(e.$$.fragment,s),n=!0)},o(s){Y(e.$$.fragment,s),n=!1},d(s){le(e,s)}}}function Zr(t,e){let n,i=e[56]&&di(e[56]),o,r,s=i&&Ur(Yi(e));return{key:t,first:null,c(){n=Ne(),s&&s.c(),o=Ne(),this.h()},l(l){n=Ne(),s&&s.l(l),o=Ne(),this.h()},h(){this.first=n},m(l,a){J(l,n,a),s&&s.m(l,a),J(l,o,a),r=!0},p(l,a){e=l,a[0]&1572864&&(i=e[56]&&di(e[56])),i?s?(s.p(Yi(e),a),a[0]&1572864&&W(s,1)):(s=Ur(Yi(e)),s.c(),W(s,1),s.m(o.parentNode,o)):s&&(Be(),Y(s,1,1,()=>{s=null}),We())},i(l){r||(W(s),r=!0)},o(l){Y(s),r=!1},d(l){l&&(z(n),z(o)),s&&s.d(l)}}}function m0(t){let e,n,i=t[27]&&Kr(t);return{c(){i&&i.c(),e=Ne()},l(o){i&&i.l(o),e=Ne()},m(o,r){i&&i.m(o,r),J(o,e,r),n=!0},p(o,r){o[27]?i?(i.p(o,r),r[0]&134217728&&W(i,1)):(i=Kr(o),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(Be(),Y(i,1,1,()=>{i=null}),We())},i(o){n||(W(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&z(e),i&&i.d(o)}}}function y0(t){let e,n;return e=new Eo({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:De(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[m0]},$$scope:{ctx:t}}}),{c(){oe(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,o){re(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.position=i[0]),o[0]&4112&&(r.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(r.class=De(["svelte-flow__minimap",i[13]])),o[0]&536858606|o[1]&536870912&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(W(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}const Ki=t=>t instanceof Function?t:()=>t,_0=200,b0=150;function w0(t,e,n){let i,o,r,s,l,a,u,f,c,d,h,y,m,_,g,E,v,S,p,D,P,{position:N="bottom-right"}=e,{ariaLabel:O="Mini map"}=e,{nodeStrokeColor:L="transparent"}=e,{nodeColor:T=void 0}=e,{nodeClass:R=""}=e,{nodeBorderRadius:F=5}=e,{nodeStrokeWidth:k=2}=e,{bgColor:A=void 0}=e,{maskColor:w=void 0}=e,{maskStrokeColor:C=void 0}=e,{maskStrokeWidth:I=void 0}=e,{width:H=void 0}=e,{height:K=void 0}=e,{pannable:G=!0}=e,{zoomable:j=!0}=e,{inversePan:ae=void 0}=e,{zoomStep:B=void 0}=e,{style:$=""}=e,{class:fe=""}=e;const{nodes:V,nodeLookup:he,viewport:be,width:we,height:ke,flowId:pe,panZoom:Le,translateExtent:q}=He();Q(t,V,ie=>n(19,_=ie)),Q(t,he,ie=>n(20,g=ie)),Q(t,be,ie=>n(53,E=ie)),Q(t,we,ie=>n(22,S=ie)),Q(t,ke,ie=>n(21,v=ie)),Q(t,pe,ie=>n(54,p=ie)),Q(t,Le,ie=>n(27,D=ie)),Q(t,q,ie=>n(28,P=ie));const Re=T===void 0?void 0:Ki(T),Te=Ki(L),Ot=Ki(R),bt=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",wt=`svelte-flow__minimap-desc-${p}`;let Xe=i;const kt=()=>a;return t.$$set=ie=>{"position"in ie&&n(0,N=ie.position),"ariaLabel"in ie&&n(1,O=ie.ariaLabel),"nodeStrokeColor"in ie&&n(43,L=ie.nodeStrokeColor),"nodeColor"in ie&&n(44,T=ie.nodeColor),"nodeClass"in ie&&n(45,R=ie.nodeClass),"nodeBorderRadius"in ie&&n(2,F=ie.nodeBorderRadius),"nodeStrokeWidth"in ie&&n(3,k=ie.nodeStrokeWidth),"bgColor"in ie&&n(4,A=ie.bgColor),"maskColor"in ie&&n(5,w=ie.maskColor),"maskStrokeColor"in ie&&n(6,C=ie.maskStrokeColor),"maskStrokeWidth"in ie&&n(7,I=ie.maskStrokeWidth),"width"in ie&&n(46,H=ie.width),"height"in ie&&n(47,K=ie.height),"pannable"in ie&&n(8,G=ie.pannable),"zoomable"in ie&&n(9,j=ie.zoomable),"inversePan"in ie&&n(10,ae=ie.inversePan),"zoomStep"in ie&&n(11,B=ie.zoomStep),"style"in ie&&n(12,$=ie.style),"class"in ie&&n(13,fe=ie.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-E.x/E.zoom,y:-E.y/E.zoom,width:S/E.zoom,height:v/E.zoom}),t.$$.dirty[0]&1835008&&n(48,Xe=g.size>0?Jl(Dn(g),i):i),t.$$.dirty[1]&32768&&n(17,o=H??_0),t.$$.dirty[1]&65536&&n(16,r=K??b0),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,s=Xe.width/o),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,l=Xe.height/r),t.$$.dirty[1]&3145728&&n(14,a=Math.max(s,l)),t.$$.dirty[0]&147456&&n(50,u=a*o),t.$$.dirty[0]&81920&&n(49,f=a*r),t.$$.dirty[0]&16384&&n(15,c=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,d=Xe.x-(u-Xe.width)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,h=Xe.y-(f-Xe.height)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,y=u+c*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,m=f+c*2)},[N,O,F,k,A,w,C,I,G,j,ae,B,$,fe,a,c,r,o,i,_,g,v,S,m,y,h,d,D,P,V,he,be,we,ke,pe,Le,q,Re,Te,Ot,bt,wt,kt,L,T,R,H,K,Xe,f,u,l,s,E]}class k0 extends ge{constructor(e){super(),me(this,e,w0,y0,_e,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}const Gr=t=>Nd(t);function v0(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:i,snapGrid:o,viewport:r,width:s,height:l,minZoom:a,maxZoom:u,panZoom:f,nodes:c,edges:d,domNode:h,nodeLookup:y,nodeOrigin:m,edgeLookup:_,connectionLookup:g}=He(),E=p=>{var L,T;const D=X(y),P=Gr(p)?p:D.get(p.id),N=P.parentId?Id(P.position,P.measured,P.parentId,D,X(m)):P.position,O={id:P.id,position:N,width:((L=P.measured)==null?void 0:L.width)??P.width,height:((T=P.measured)==null?void 0:T.height)??P.height,data:P.data};return an(O)},v=(p,D,P={replace:!1})=>{var L;const N=(L=X(y).get(p))==null?void 0:L.internals.userNode;if(!N)return;const O=typeof D=="function"?D(N):D;P.replace?c.update(T=>T.map(R=>R.id===p?Gr(O)?O:{...R,...O}:R)):(Object.assign(N,O),c.update(T=>T))},S=p=>X(y).get(p);return{zoomIn:t,zoomOut:e,getInternalNode:S,getNode:p=>{var D;return(D=S(p))==null?void 0:D.internals.userNode},getNodes:p=>p===void 0?X(c):Jr(X(y),p),getEdge:p=>X(_).get(p),getEdges:p=>p===void 0?X(d):Jr(X(_),p),setZoom:(p,D)=>{const P=X(f);return P?P.scaleTo(p,{duration:D==null?void 0:D.duration}):Promise.resolve(!1)},getZoom:()=>X(r).zoom,setViewport:async(p,D)=>{const P=X(r),N=X(f);return N?(await N.setViewport({x:p.x??P.x,y:p.y??P.y,zoom:p.zoom??P.zoom},{duration:D==null?void 0:D.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>X(r),setCenter:async(p,D,P)=>{const N=typeof(P==null?void 0:P.zoom)<"u"?P.zoom:X(u),O=X(f);return O?(await O.setViewport({x:X(s)/2-p*N,y:X(l)/2-D*N,zoom:N},{duration:P==null?void 0:P.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(p,D)=>{const P=X(f);if(!P)return Promise.resolve(!1);const N=Mi(p,X(s),X(l),X(a),X(u),(D==null?void 0:D.padding)??.1);return await P.setViewport(N,{duration:D==null?void 0:D.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,D=!0,P)=>{const N=sr(p),O=N?p:E(p);return O?(P||X(c)).filter(L=>{const T=X(y).get(L.id);if(!T||!N&&L.id===p.id)return!1;const R=an(T),F=Sn(R,O);return D&&F>0||F>=O.width*O.height}):[]},isNodeIntersecting:(p,D,P=!0)=>{const O=sr(p)?p:E(p);if(!O)return!1;const L=Sn(O,D);return P&&L>0||L>=O.width*O.height},deleteElements:async({nodes:p=[],edges:D=[]})=>{const{nodes:P,edges:N}=await Ul({nodesToRemove:p,edgesToRemove:D,nodes:X(c),edges:X(d),onBeforeDelete:X(i)});return P&&c.update(O=>O.filter(L=>!P.some(({id:T})=>T===L.id))),N&&d.update(O=>O.filter(L=>!N.some(({id:T})=>T===L.id))),{deletedNodes:P,deletedEdges:N}},screenToFlowPosition:(p,D={snapToGrid:!0})=>{const P=X(h);if(!P)return p;const N=D.snapToGrid?X(o):!1,{x:O,y:L,zoom:T}=X(r),{x:R,y:F}=P.getBoundingClientRect(),k={x:p.x-R,y:p.y-F};return Tn(k,[O,L,T],N!==null,N||[1,1])},flowToScreenPosition:p=>{const D=X(h);if(!D)return p;const{x:P,y:N,zoom:O}=X(r),{x:L,y:T}=D.getBoundingClientRect(),R=Ql(p,[P,N,O]);return{x:R.x+L,y:R.y+T}},toObject:()=>({nodes:X(c).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:X(d).map(p=>({...p})),viewport:{...X(r)}}),updateNode:v,updateNodeData:(p,D,P)=>{var L;const N=(L=X(y).get(p))==null?void 0:L.internals.userNode;if(!N)return;const O=typeof D=="function"?D(N):D;N.data=P!=null&&P.replace?O:{...N.data,...O},c.update(T=>T)},getNodesBounds:p=>{const D=X(y),P=X(m);return Kl(p,{nodeLookup:D,nodeOrigin:P})},getHandleConnections:({type:p,id:D,nodeId:P})=>{var N;return Array.from(((N=X(g).get(`${P}-${p}-${D??null}`))==null?void 0:N.values())??[])},viewport:r}}function Jr(t,e){var i;const n=[];for(const o of e){const r=t.get(o);if(r){const s="internals"in r?(i=r.internals)==null?void 0:i.userNode:r;n.push(s)}}return n}function E0(t){let e,n,i,o,r=[t[1],{alt:"save as image"},{placeholder:"save chart as image"}],s={};for(let l=0;l<r.length;l+=1)s=Se(s,r[l]);return{c(){e=ze("button"),n=Mt(""),this.h()},l(l){e=Oe(l,"BUTTON",{alt:!0,placeholder:!0});var a=U(e);n=zt(a,""),a.forEach(z),this.h()},h(){Lt(e,s)},m(l,a){J(l,e,a),x(e,n),e.autofocus&&e.focus(),i||(o=Me(e,"click",t[0]),i=!0)},p(l,[a]){Lt(e,s=ft(r,[a&2&&l[1],{alt:"save as image"},{placeholder:"save chart as image"}]))},i:Pe,o:Pe,d(l){l&&z(e),i=!1,o()}}}const qi=1024,Ui=768;function S0(t,e,n){const i=["nodes","fileName"];let o=Ie(e,i),{nodes:r=[]}=e,{fileName:s=""}=e;function l(){if(!Array.isArray(r)||r.length===0){console.error("No nodes available to generate image.");return}const a=Kl(r),u=Mi(a,qi,Ui,.5,2,.2),f=document.querySelector(".svelte-flow__viewport");u&&Ja(f,{width:qi,height:Ui,style:{width:`${qi}px`,height:`${Ui}px`,transform:`translate(${u.x}px, ${u.y}px) scale(${u.zoom})`}}).then(c=>{const d=document.createElement("a");d.download=`${s||""}_solothought-flowchart.png`,d.href=c,d.click()})}return t.$$set=a=>{e=Se(Se({},e),nt(a)),n(1,o=Ie(e,i)),"nodes"in a&&n(2,r=a.nodes),"fileName"in a&&n(3,s=a.fileName)},[l,o,r,s]}class p0 extends ge{constructor(e){super(),me(this,e,S0,E0,_e,{nodes:2,fileName:3})}}function Qr(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function jr(t){let e,n=t[8].flowName+"",i;return{c(){e=ze("option"),i=Mt(n),this.h()},l(o){e=Oe(o,"OPTION",{});var r=U(e);i=zt(r,n),r.forEach(z),this.h()},h(){e.__value=t[10],ea(e,e.__value)},m(o,r){J(o,e,r),x(e,i)},p(o,r){r&2&&n!==(n=o[8].flowName+"")&&qt(i,n)},d(o){o&&z(e)}}}function C0(t){let e,n,i,o,r,s,l,a,u,f,c,d=yt(t[1]),h=[];for(let y=0;y<d.length;y+=1)h[y]=jr(Qr(t,d,y));return a=new p0({props:{nodes:t[4],fileName:t[2]}}),{c(){e=ze("div"),n=ze("select");for(let y=0;y<h.length;y+=1)h[y].c();i=ve(),o=ze("button"),r=Mt(""),l=ve(),oe(a.$$.fragment),this.h()},l(y){e=Oe(y,"DIV",{class:!0});var m=U(e);n=Oe(m,"SELECT",{class:!0});var _=U(n);for(let E=0;E<h.length;E+=1)h[E].l(_);_.forEach(z),i=Ee(m),o=Oe(m,"BUTTON",{class:!0});var g=U(o);r=zt(g,""),g.forEach(z),l=Ee(m),se(a.$$.fragment,m),m.forEach(z),this.h()},h(){b(n,"class","st-flow-chart-tool"),t[0]===void 0&&al(()=>t[7].call(n)),b(o,"class",s=$n(t[3].hideMsgDetail?"passive":"")+" svelte-795jrn"),b(e,"class","st-toolbox")},m(y,m){J(y,e,m),x(e,n);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(n,null);Oo(n,t[0],!0),x(e,i),x(e,o),x(o,r),x(e,l),re(a,e,null),u=!0,f||(c=[Me(n,"change",function(){Ae(t[5])&&t[5].apply(this,arguments)}),Me(n,"change",t[7]),Me(o,"click",function(){Ae(t[6])&&t[6].apply(this,arguments)})],f=!0)},p(y,[m]){if(t=y,m&2){d=yt(t[1]);let g;for(g=0;g<d.length;g+=1){const E=Qr(t,d,g);h[g]?h[g].p(E,m):(h[g]=jr(E),h[g].c(),h[g].m(n,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=d.length}m&1&&Oo(n,t[0]),(!u||m&8&&s!==(s=$n(t[3].hideMsgDetail?"passive":"")+" svelte-795jrn"))&&b(o,"class",s);const _={};m&16&&(_.nodes=t[4]),m&4&&(_.fileName=t[2]),a.$set(_)},i(y){u||(W(a.$$.fragment,y),u=!0)},o(y){Y(a.$$.fragment,y),u=!1},d(y){y&&z(e),$s(h,y),le(a),f=!1,ct(c)}}}function P0(t,e,n){let{flowsData:i=[]}=e,{selectedFlowIndex:o}=e,{flowName:r=""}=e,{nodeState:s={}}=e,{nodes:l=[]}=e,{handleFlowChange:a}=e,{hideNodeMsgDetail:u}=e;function f(){o=ta(this),n(0,o)}return t.$$set=c=>{"flowsData"in c&&n(1,i=c.flowsData),"selectedFlowIndex"in c&&n(0,o=c.selectedFlowIndex),"flowName"in c&&n(2,r=c.flowName),"nodeState"in c&&n(3,s=c.nodeState),"nodes"in c&&n(4,l=c.nodes),"handleFlowChange"in c&&n(5,a=c.handleFlowChange),"hideNodeMsgDetail"in c&&n(6,u=c.hideNodeMsgDetail)},[o,i,r,s,l,a,u,f]}class M0 extends ge{constructor(e){super(),me(this,e,P0,C0,_e,{flowsData:1,selectedFlowIndex:0,flowName:2,nodeState:3,nodes:4,handleFlowChange:5,hideNodeMsgDetail:6})}}function z0(t,e){if(!t||t.length===0)return null;let n=1/0,i=1/0,o=-1/0,r=-1/0;return t.forEach(s=>{const l=e.find(a=>a.id===s);if(l){const{x:a,y:u,width:f,height:c}=l;n=Math.min(n,a),i=Math.min(i,u),o=Math.max(o,a+f),r=Math.max(r,u+c)}}),{x:n,y:i,width:o-n,height:r-i}}function O0(t,e,n){let i,{selection:o}=e,{nodes:r}=e;function s(l,a){if(z0(l,a)){const f=a.filter(c=>l.includes(c.id));i.fitView({nodes:f})}}return t.$$set=l=>{"selection"in l&&n(0,o=l.selection),"nodes"in l&&n(1,r=l.nodes)},t.$$.update=()=>{t.$$.dirty&3&&o&&o.nodeIds&&s(o.nodeIds,r)},i=v0(),[o,r]}class N0 extends ge{constructor(e){super(),me(this,e,O0,null,_e,{selection:0,nodes:1})}}let fn={width:180,height:72};function xr(t){let e,n,i,o,r,s,l,a,u,f,c,d,h,y;return{c(){e=te("svg"),n=te("g"),i=te("g"),o=te("g"),r=te("g"),s=te("g"),l=te("path"),a=te("path"),u=te("g"),f=te("g"),c=te("g"),d=te("g"),h=te("g"),this.h()},l(m){e=ne(m,"svg",{class:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,width:!0,height:!0,viewBox:!0});var _=U(e);n=ne(_,"g",{});var g=U(n);i=ne(g,"g",{"data-cell-id":!0});var E=U(i);o=ne(E,"g",{"data-cell-id":!0});var v=U(o);r=ne(v,"g",{"data-cell-id":!0});var S=U(r);s=ne(S,"g",{});var p=U(s);l=ne(p,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,transform:!0,"pointer-events":!0}),U(l).forEach(z),a=ne(p,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,transform:!0,"pointer-events":!0}),U(a).forEach(z),p.forEach(z),S.forEach(z),u=ne(v,"g",{"data-cell-id":!0}),U(u).forEach(z),f=ne(v,"g",{"data-cell-id":!0}),U(f).forEach(z),c=ne(v,"g",{"data-cell-id":!0}),U(c).forEach(z),d=ne(v,"g",{"data-cell-id":!0}),U(d).forEach(z),h=ne(v,"g",{"data-cell-id":!0}),U(h).forEach(z),v.forEach(z),E.forEach(z),g.forEach(z),_.forEach(z),this.h()},h(){b(l,"d","M 44 23.11 C 44 34.65 35.05 44 24 44 C 12.95 44 4 34.65 4 23.11 C 4 11.57 12.95 2.22 24 2.22"),b(l,"fill","none"),b(l,"stroke","#000000"),b(l,"stroke-width","2"),b(l,"stroke-miterlimit","10"),b(l,"transform","rotate(90,24,20.5)"),b(l,"pointer-events","all"),b(a,"d","M 24 -3 L 31.5 2.22 L 24 7.44 Z"),b(a,"fill","none"),b(a,"stroke","#000000"),b(a,"stroke-width","2"),b(a,"stroke-miterlimit","10"),b(a,"transform","rotate(90,24,20.5)"),b(a,"pointer-events","all"),b(r,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-2"),b(u,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-5"),b(f,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-6"),b(c,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-3"),b(d,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-4"),b(h,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-8"),b(o,"data-cell-id","1"),b(i,"data-cell-id","0"),b(e,"class",y="icon "+(t[0].isEnd?"invert":"")+" svelte-1kwq3ut"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"version","1.1"),b(e,"width","49px"),b(e,"height","42px"),b(e,"viewBox","-0.5 -0.5 49 42")},m(m,_){J(m,e,_),x(e,n),x(n,i),x(i,o),x(o,r),x(r,s),x(s,l),x(s,a),x(o,u),x(o,f),x(o,c),x(o,d),x(o,h)},p(m,_){_&1&&y!==(y="icon "+(m[0].isEnd?"invert":"")+" svelte-1kwq3ut")&&b(e,"class",y)},d(m){m&&z(e)}}}function $r(t){let e,n,i,o,r,s,l,a,u,f,c,d,h,y,m,_,g,E,v,S,p;return{c(){e=te("svg"),n=te("g"),i=te("g"),o=te("g"),r=te("g"),s=te("g"),l=te("g"),a=te("path"),u=te("g"),f=te("g"),c=te("path"),d=te("g"),h=te("g"),y=te("ellipse"),m=te("g"),_=te("g"),g=te("ellipse"),E=te("g"),v=te("g"),S=te("ellipse"),this.h()},l(D){e=ne(D,"svg",{class:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,width:!0,height:!0,viewBox:!0});var P=U(e);n=ne(P,"g",{});var N=U(n);i=ne(N,"g",{"data-cell-id":!0});var O=U(i);o=ne(O,"g",{"data-cell-id":!0});var L=U(o);r=ne(L,"g",{"data-cell-id":!0}),U(r).forEach(z),s=ne(L,"g",{"data-cell-id":!0});var T=U(s);l=ne(T,"g",{});var R=U(l);a=ne(R,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,"pointer-events":!0}),U(a).forEach(z),R.forEach(z),T.forEach(z),u=ne(L,"g",{"data-cell-id":!0});var F=U(u);f=ne(F,"g",{});var k=U(f);c=ne(k,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0,"pointer-events":!0}),U(c).forEach(z),k.forEach(z),F.forEach(z),d=ne(L,"g",{"data-cell-id":!0});var A=U(d);h=ne(A,"g",{});var w=U(h);y=ne(w,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(y).forEach(z),w.forEach(z),A.forEach(z),m=ne(L,"g",{"data-cell-id":!0});var C=U(m);_=ne(C,"g",{});var I=U(_);g=ne(I,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(g).forEach(z),I.forEach(z),C.forEach(z),E=ne(L,"g",{"data-cell-id":!0});var H=U(E);v=ne(H,"g",{});var K=U(v);S=ne(K,"ellipse",{cx:!0,cy:!0,rx:!0,ry:!0,fill:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),U(S).forEach(z),K.forEach(z),H.forEach(z),L.forEach(z),O.forEach(z),N.forEach(z),P.forEach(z),this.h()},h(){b(r,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-2"),b(a,"d","M 11 21 Q 11 61 57 61"),b(a,"fill","none"),b(a,"stroke","rgb(0, 0, 0)"),b(a,"stroke-width","2"),b(a,"stroke-miterlimit","10"),b(a,"pointer-events","stroke"),b(s,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-5"),b(c,"d","M 11 21 L 11 91"),b(c,"fill","none"),b(c,"stroke","rgb(0, 0, 0)"),b(c,"stroke-width","2"),b(c,"stroke-miterlimit","10"),b(c,"pointer-events","stroke"),b(u,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-6"),b(y,"cx","11"),b(y,"cy","11"),b(y,"rx","10"),b(y,"ry","10"),b(y,"fill","none"),b(y,"stroke","rgb(0, 0, 0)"),b(y,"stroke-width","2"),b(y,"pointer-events","all"),b(d,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-3"),b(g,"cx","67"),b(g,"cy","61"),b(g,"rx","10"),b(g,"ry","10"),b(g,"fill","none"),b(g,"stroke","rgb(0, 0, 0)"),b(g,"stroke-width","2"),b(g,"pointer-events","all"),b(m,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-4"),b(S,"cx","11"),b(S,"cy","101"),b(S,"rx","10"),b(S,"ry","10"),b(S,"fill","none"),b(S,"stroke","rgb(0, 0, 0)"),b(S,"stroke-width","2"),b(S,"pointer-events","all"),b(E,"data-cell-id","cL7QPJKOe-qMU4ihb_zf-8"),b(o,"data-cell-id","1"),b(i,"data-cell-id","0"),b(e,"class",p="icon "+(t[0].isEnd?"invert":"")+" svelte-1kwq3ut"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"version","1.1"),b(e,"width","78px"),b(e,"height","112px"),b(e,"viewBox","-0.5 -0.5 78 112")},m(D,P){J(D,e,P),x(e,n),x(n,i),x(i,o),x(o,r),x(o,s),x(s,l),x(l,a),x(o,u),x(u,f),x(f,c),x(o,d),x(d,h),x(h,y),x(o,m),x(m,_),x(_,g),x(o,E),x(E,v),x(v,S)},p(D,P){P&1&&p!==(p="icon "+(D[0].isEnd?"invert":"")+" svelte-1kwq3ut")&&b(e,"class",p)},d(D){D&&z(e)}}}function el(t){let e,n="";return{c(){e=ze("span"),e.textContent=n,this.h()},l(i){e=Oe(i,"SPAN",{style:!0,"data-svelte-h":!0}),lo(e)!=="svelte-11ojfk2"&&(e.textContent=n),this.h()},h(){ce(e,"font-size","1.25em")},m(i,o){J(i,e,o)},d(i){i&&z(e)}}}function tl(t){let e,n="";return{c(){e=ze("span"),e.textContent=n,this.h()},l(i){e=Oe(i,"SPAN",{style:!0,"data-svelte-h":!0}),lo(e)!=="svelte-mw21ye"&&(e.textContent=n),this.h()},h(){ce(e,"font-size","1.5em")},m(i,o){J(i,e,o)},d(i){i&&z(e)}}}function D0(t){let e,n,i,o,r,s,l,a,u,f,c,d=(t[0].hideMsgDetail?t[0].msg:t[0].rawMsg)+"",h,y,m,_,g,E,v,S,p,D,P,N,O,L,T,R=t[0].type==="LOOP"&&xr(t),F=(t[0].type==="IF"||t[0].type==="ELSE_IF")&&$r(t),k=t[0].type==="ERR"&&el(),A=t[0].type==="FOLLOW"&&tl();return l=new lt({props:{class:"hndl",id:"t",type:"target",position:de.Top}}),m=new lt({props:{class:"hndl",id:"b",type:"source",position:de.Bottom}}),g=new lt({props:{class:"hndl",id:"bt",type:"target",position:de.Bottom}}),v=new lt({props:{class:"hndl",id:"l",type:"source",position:de.Left}}),p=new lt({props:{class:"hndl",id:"lt",type:"target",position:de.Left}}),P=new lt({props:{class:"hndl",id:"r",type:"source",position:de.Right}}),O=new lt({props:{class:"hndl",id:"rt",type:"target",position:de.Right}}),{c(){e=ze("div"),n=ze("div"),R&&R.c(),i=ve(),F&&F.c(),o=ve(),k&&k.c(),r=ve(),A&&A.c(),s=ve(),oe(l.$$.fragment),a=ve(),u=ze("div"),f=ze("div"),c=ze("p"),h=Mt(d),y=ve(),oe(m.$$.fragment),_=ve(),oe(g.$$.fragment),E=ve(),oe(v.$$.fragment),S=ve(),oe(p.$$.fragment),D=ve(),oe(P.$$.fragment),N=ve(),oe(O.$$.fragment),this.h()},l(w){e=Oe(w,"DIV",{class:!0});var C=U(e);n=Oe(C,"DIV",{style:!0});var I=U(n);R&&R.l(I),i=Ee(I),F&&F.l(I),o=Ee(I),k&&k.l(I),r=Ee(I),A&&A.l(I),I.forEach(z),s=Ee(C),se(l.$$.fragment,C),a=Ee(C),u=Oe(C,"DIV",{class:!0,style:!0});var H=U(u);f=Oe(H,"DIV",{class:!0});var K=U(f);c=Oe(K,"P",{});var G=U(c);h=zt(G,d),G.forEach(z),K.forEach(z),H.forEach(z),y=Ee(C),se(m.$$.fragment,C),_=Ee(C),se(g.$$.fragment,C),E=Ee(C),se(v.$$.fragment,C),S=Ee(C),se(p.$$.fragment,C),D=Ee(C),se(P.$$.fragment,C),N=Ee(C),se(O.$$.fragment,C),C.forEach(z),this.h()},h(){ce(n,"position","absolute"),b(f,"class","msgWrapper svelte-1kwq3ut"),b(u,"class","container svelte-1kwq3ut"),ce(u,"width",fn.width+"px"),ce(u,"height",fn.height+"px"),b(e,"class",L=(t[0].highlight?"hovered":"")+" "+(t[0].isEnd?"endStep":"step")+" svelte-1kwq3ut")},m(w,C){J(w,e,C),x(e,n),R&&R.m(n,null),x(n,i),F&&F.m(n,null),x(n,o),k&&k.m(n,null),x(n,r),A&&A.m(n,null),x(e,s),re(l,e,null),x(e,a),x(e,u),x(u,f),x(f,c),x(c,h),t[6](c),t[7](u),x(e,y),re(m,e,null),x(e,_),re(g,e,null),x(e,E),re(v,e,null),x(e,S),re(p,e,null),x(e,D),re(P,e,null),x(e,N),re(O,e,null),T=!0},p(w,[C]){w[0].type==="LOOP"?R?R.p(w,C):(R=xr(w),R.c(),R.m(n,i)):R&&(R.d(1),R=null),w[0].type==="IF"||w[0].type==="ELSE_IF"?F?F.p(w,C):(F=$r(w),F.c(),F.m(n,o)):F&&(F.d(1),F=null),w[0].type==="ERR"?k||(k=el(),k.c(),k.m(n,r)):k&&(k.d(1),k=null),w[0].type==="FOLLOW"?A||(A=tl(),A.c(),A.m(n,null)):A&&(A.d(1),A=null),(!T||C&1)&&d!==(d=(w[0].hideMsgDetail?w[0].msg:w[0].rawMsg)+"")&&qt(h,d),(!T||C&1&&L!==(L=(w[0].highlight?"hovered":"")+" "+(w[0].isEnd?"endStep":"step")+" svelte-1kwq3ut"))&&b(e,"class",L)},i(w){T||(W(l.$$.fragment,w),W(m.$$.fragment,w),W(g.$$.fragment,w),W(v.$$.fragment,w),W(p.$$.fragment,w),W(P.$$.fragment,w),W(O.$$.fragment,w),T=!0)},o(w){Y(l.$$.fragment,w),Y(m.$$.fragment,w),Y(g.$$.fragment,w),Y(v.$$.fragment,w),Y(p.$$.fragment,w),Y(P.$$.fragment,w),Y(O.$$.fragment,w),T=!1},d(w){w&&z(e),R&&R.d(),F&&F.d(),k&&k.d(),A&&A.d(),le(l),t[6](null),t[7](null),le(m),le(g),le(v),le(p),le(P),le(O)}}}function T0(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight}function I0(t,e,n){const i={desire:15,min:10,max:80};function o(h,y){let m=i.min,_=i.max,g=m;for(;m<=_;)g=Math.floor((m+_)/2),h.style.fontSize=`${g}px`,T0(y)?_=--g:m=++g;h.style.fontSize=`${_}px`}let r,s;function l(){r&&s&&o(s,r)}Cn(()=>{l()}),na(()=>{l()});let{data:a}=e,{position:u}=e,{id:f}=e;function c(h){at[h?"unshift":"push"](()=>{s=h,n(2,s)})}function d(h){at[h?"unshift":"push"](()=>{r=h,n(1,r)})}return t.$$set=h=>{"data"in h&&n(0,a=h.data),"position"in h&&n(4,u=h.position),"id"in h&&n(5,f=h.id)},[a,r,s,i,u,f,c,d]}class A0 extends ge{constructor(e){super(),me(this,e,I0,D0,_e,{fontSize:3,data:0,position:4,id:5})}get fontSize(){return this.$$.ctx[3]}}function H0(t,e,n){const i=new Set,o=new Set,r=new Set,s=new Set;return(n===0||n===2)&&ks(t,e,i,o),(n===1||n===2)&&vs(t,e,r,s),{seletedNodes:new Set([...i,...r]),seletedEdges:new Set([...o,...s])}}function ks(t,e,n,i){n.has(t)||(n.add(t),e[t].parent.forEach(o=>{i.add(`${o}-${t}`),ks(o,e,n,i)}))}function vs(t,e,n,i){n.has(t)||(n.add(t),e[t].target.forEach(o=>{i.add(`${t}-${o}`),vs(o,e,n,i)}))}function mi(t,e,n={},i=null){return i?t.forEach(o=>{i.has(o.id)&&(o.data={...o.data,...e,...n})}):t.forEach(o=>{o.data={...o.data,...e,...n}}),t}const Es="stroke-width: 2px; stroke: #cac2c2;",L0="stroke-width: 2px; stroke: #FF4000",R0="font-size: 10px; font-weight: inherit; color: inherit;",V0="font-size: 16px; font-weight: bold; color: #ff6347;",Ss={type:ln.ArrowClosed,width:20,height:20,color:"#cac2c2"},B0={type:ln.ArrowClosed,width:20,height:20,color:"#FF4000"},W0={type:"smoothstep",markerEnd:Ss,style:Es};class X0{constructor(e,n,i){this.nodes=e,this.edges=n,this.nodeState=i,this.selectedNodes=new Set,this.selectedEdges=new Set}update(e,n){this.nodes=e,this.edges=n}selectPath(e,n,i={}){this.selectNodes(e),n&&this.selectEdges(n,Kn)}selectNodes(e){mi(this.nodes,this.nodeState,{highlight:!0},e),this.selectedNodes=e}selectEdges(e){Yn(this.edges,e,Kn),this.selectedEdges=e}unselectPath(){this.unselectNodes(),this.selectedEdges.size>0&&this.unselectEdges(Kn)}unselectNodes(){mi(this.nodes,this.nodeState,{highlight:!1},this.selectedNodes),this.selectedNodes.clear()}unselectEdges(){Yn(this.edges,this.selectedEdges,nl),this.selectedEdges.clear()}toggleEdge(e){this.selectedEdges.has(e)?(this.selectedEdges.delete(e),Yn(this.edges,new Set([e]),nl)):(this.selectedEdges.add(e),Yn(this.edges,new Set([e]),Kn))}}function Yn(t,e,n){t.forEach(i=>{e.has(i.id)&&n(i)})}function nl(t){t.style=Es,t.markerEnd=Ss,t.labelStyle=R0}function Kn(t){t.style=L0,t.markerEnd=B0,t.labelStyle=V0}function F0(t){let e,n,i,o,r,s;return e=new xm({}),i=new f0({}),r=new k0({}),{c(){oe(e.$$.fragment),n=ve(),oe(i.$$.fragment),o=ve(),oe(r.$$.fragment)},l(l){se(e.$$.fragment,l),n=Ee(l),se(i.$$.fragment,l),o=Ee(l),se(r.$$.fragment,l)},m(l,a){re(e,l,a),J(l,n,a),re(i,l,a),J(l,o,a),re(r,l,a),s=!0},i(l){s||(W(e.$$.fragment,l),W(i.$$.fragment,l),W(r.$$.fragment,l),s=!0)},o(l){Y(e.$$.fragment,l),Y(i.$$.fragment,l),Y(r.$$.fragment,l),s=!1},d(l){l&&(z(n),z(o)),le(e,l),le(i,l),le(r,l)}}}function Y0(t){let e,n,i,o,r,s,l,a;function u(m){t[18](m)}function f(m){t[19](m)}let c={};t[1]!==void 0&&(c.selection=t[1]),t[0]!==void 0&&(c.nodes=t[0]),e=new N0({props:c}),at.push(()=>gn(e,"selection",u)),at.push(()=>gn(e,"nodes",f));function d(m){t[20](m)}function h(m){t[21](m)}let y={nodeTypes:t[6],fitView:!0,defaultEdgeOptions:W0,$$slots:{default:[F0]},$$scope:{ctx:t}};return t[4]!==void 0&&(y.nodes=t[4]),t[5]!==void 0&&(y.edges=t[5]),r=new pm({props:y}),at.push(()=>gn(r,"nodes",d)),at.push(()=>gn(r,"edges",h)),r.$on("nodemouseenter",t[7]),r.$on("nodemouseleave",t[8]),r.$on("nodeclick",t[12]),r.$on("edgeclick",t[9]),{c(){oe(e.$$.fragment),o=ve(),oe(r.$$.fragment)},l(m){se(e.$$.fragment,m),o=Ee(m),se(r.$$.fragment,m)},m(m,_){re(e,m,_),J(m,o,_),re(r,m,_),a=!0},p(m,_){const g={};!n&&_&2&&(n=!0,g.selection=m[1],hn(()=>n=!1)),!i&&_&1&&(i=!0,g.nodes=m[0],hn(()=>i=!1)),e.$set(g);const E={};_&16777216&&(E.$$scope={dirty:_,ctx:m}),!s&&_&16&&(s=!0,E.nodes=m[4],hn(()=>s=!1)),!l&&_&32&&(l=!0,E.edges=m[5],hn(()=>l=!1)),r.$set(E)},i(m){a||(W(e.$$.fragment,m),W(r.$$.fragment,m),a=!0)},o(m){Y(e.$$.fragment,m),Y(r.$$.fragment,m),a=!1},d(m){m&&z(o),le(e,m),le(r,m)}}}function K0(t){let e,n,i,o,r;return n=new Mm({props:{$$slots:{default:[Y0]},$$scope:{ctx:t}}}),{c(){e=ze("div"),oe(n.$$.fragment),this.h()},l(s){e=Oe(s,"DIV",{style:!0,class:!0});var l=U(e);se(n.$$.fragment,l),l.forEach(z),this.h()},h(){b(e,"style",t[2]),b(e,"class",t[3])},m(s,l){J(s,e,l),re(n,e,null),i=!0,o||(r=[Me(window,"keyup",t[11]),Me(window,"keydown",t[10])],o=!0)},p(s,[l]){const a={};l&16777267&&(a.$$scope={dirty:l,ctx:s}),n.$set(a),(!i||l&4)&&b(e,"style",s[2]),(!i||l&8)&&b(e,"class",s[3])},i(s){i||(W(n.$$.fragment,s),i=!0)},o(s){Y(n.$$.fragment,s),i=!1},d(s){s&&z(e),le(n),o=!1,ct(r)}}}function q0(t,e,n){const i=Pn(),o={step:A0};let{nodes:r=[]}=e,{edges:s=[]}=e,{nodeState:l={}}=e,{connections:a={}}=e,{style:u=""}=e,{clazz:f=""}=e,{selection:c=[]}=e,d=new X0(r,s,l),h=ue(r),y=ue(s),m="";function _(T){const R=T.detail.node.id;let F=2;m==="Shift"?F=0:m==="Control"&&(F=1);const k=H0(R,a,F);d.selectPath(k.seletedNodes,k.seletedEdges),D(r,s)}function g(){d.unselectPath(),D(r,s)}function E(T){d.toggleEdge(T.detail.edge.id),y.set(s)}function v(T){m=T.key}function S(){m=""}function p(T){const R=T.detail.node.data;R.type==="FOLLOW"&&i("flowChange",{flowName:R.msg})}function D(T,R){d.update(T,R),h.set(T),y.set(R)}yi(()=>{D([],[])});function P(T){c=T,n(1,c)}function N(T){r=T,n(0,r)}function O(T){h=T,n(4,h)}function L(T){y=T,n(5,y)}return t.$$set=T=>{"nodes"in T&&n(0,r=T.nodes),"edges"in T&&n(13,s=T.edges),"nodeState"in T&&n(14,l=T.nodeState),"connections"in T&&n(15,a=T.connections),"style"in T&&n(2,u=T.style),"clazz"in T&&n(3,f=T.clazz),"selection"in T&&n(1,c=T.selection)},t.$$.update=()=>{t.$$.dirty&16384&&n(17,d.nodeState=l,d),t.$$.dirty&131091&&c&&c.nodeIds&&(d.unselectNodes(),d.selectNodes(new Set(c.nodeIds)),h.set(r))},[r,c,u,f,h,y,o,_,g,E,v,S,p,s,l,a,D,d,P,N,O,L]}class U0 extends ge{constructor(e){super(),me(this,e,q0,K0,_e,{nodes:0,edges:13,nodeState:14,connections:15,style:2,clazz:3,selection:1,updateStore:16})}get updateStore(){return this.$$.ctx[16]}}function Z0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const G0=["IF","ELSE_IF","ELSE","LOOP"],J0=["GOTO","SKIP","STOP","END"];function Q0(t){return G0.includes(t.type)}function j0(t){return J0.includes(t.type)}function Di(t,e,n,i){let o=-2;if(n!==void 0){const r=t[n],s=t[e].indent;for(let l=e+1;l<t.length;l++){const a=t[l].indent;if(a===s){o=l;break}else if(a<s){a>r.indent?o=l:o=n;break}}o===-2&&(o=n)}else{for(let r=e+1;r<t.length;r++)if(t[r].indent<=t[e].indent){o=r;break}o===-2&&(o=-1)}return o>-1&&t[o].type.startsWith("ELSE")&&(!i&&t[e].indent===t[o].indent&&(t[e].type==="IF"||t[e].type==="ELSE_IF")||(o=Di(t,o,n,!0))),o}function x0(t,e,n,i){const o=Di(t,e,So(i));n[e].push(o)}function $0(t,e){const n=t[e].indent;for(let i=e-1;i>-1;i--)if(n===t[i].indent)return i;throw new Error("Unable to find last step of same indent level")}function e1(t,e,n,i,o){if(t.type==="ELSE"){delete n[i];return}const r=t.indent;e[i+1]&&e[i+1].indent>r?n[i].push(i+1):n[i].push(void 0);let s=Di(e,i,So(o));s!==-1&&e[s].type==="ELSE"&&s++,n[i].push(s),t.type==="LOOP"&&o.push(i)}function ps(t,e){if(e===0)throw new Error(`${t[e].type} can't be first step of the flow`)}function t1(t,e,n,i,o){if(ps(t,o),n[e.msg]===void 0)throw new Error(`GOTO is pointing to ${e.msg} that doesn't specified with any step`);Jn(t,i,o,n[e.msg])}function n1(t,e,n,i){ps(t,e);const o=t[e];if(o.type==="SKIP"){if(i.length<1)throw new Error("SKIP must be inside LOOP");const r=i[i.length-1];Jn(t,n,e,r)}else if(o.type==="STOP"){if(i.length<1)throw new Error("STOP must be inside LOOP");const r=Di(t,So(i));Jn(t,n,e,r)}else o.type==="END"&&Jn(t,n,e,-1)}function Jn(t,e,n,i){for(let o=0;o<n;o++){let r=e[o];if(r!==void 0){const s=r.indexOf(n);s!==-1&&(t[o].type==="ELSE"&&(r=$0(t,r)),r[s]=i)}}delete e[n]}function i1(t,e,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o],s=r.indent;if(i.length>0)for(let l=i.length-1;l>-1;l--){const a=i[l];s<=t[a].indent&&i.pop()}r.type==="GOTO"?t1(t,r,e,n,o):Q0(r)?e1(r,t,n,o,i):j0(r)?n1(t,o,n,i):x0(t,o,n,i)}}function So(t){return t[t.length-1]}var o1=i1;const il=o1,r1=["IF","ELSE_IF","LOOP","ELSE"],l1=["GOTO","SKIP","STOP","END"],s1=["AND","THEN","BUT","FOLLOW","ERR"];class a1{constructor(e){this.name=e,this.headers={},this.steps=[],this.links={},this.leveledSteps=[[]]}}function u1(t){const e=t.split(`
`),n=[];let i={},o=[],r=0,s=-1,l=null,a=!1;return e.forEach((u,f)=>{const c=u.trim();if(!c||c[0]==="#")return;if(c.startsWith("FLOW:")){l&&il(l.steps,i,l.links),i={},o=[],r=0,s=-1,l=new a1(c.substring(6)),n.push(l),a=!0;return}else if(a&&c.match(/^[a-z]{1,70}:/)){const[m,_]=u.split(":");l.headers[m.trim()]=_.trim();return}else a=!1;s++;const d=u.search(/\S/);let h;if(o[r]!==void 0?h=o[r]:(h=d,o[r]=d),h===d)l.leveledSteps[r].push(s);else if(h<d)o[++r]=d,l.leveledSteps[r]?l.leveledSteps[r].push(s):l.leveledSteps.push([s]);else{for(;r>-1&&o[r]!==d;r--);if(r===-1)throw new Error(`Indentation issue with line |${u}|`);l.leveledSteps[r].push(s)}let y=f1(u.trim());y.indent=r,y.index&&(i[y.index]=s),l.steps.push(y),l.links[s]=[]}),il(l.steps,i,l.links),n}function f1(t){const e={msg:"",rawMsg:"",type:""};if(t[0]==="["){const i=t.indexOf("]");e.index=t.substring(1,i).trim(),t=t.substring(i+1).trimStart()}const n=t.indexOf(" ");if(n<1)ol(t)?e.type=t:e.msg=e.rawMsg=t;else{const i=t.substring(0,n),o=t.substring(n+1);ol(i)&&(e.type=i,t=o),e.rawMsg=t.replace(/\s+/g," "),e.msg=c1(t).replace(/\s+/g," ")}return e}function c1(t){let e=0,n="";for(let i=0;i<t.length;i++){const o=t[i];if(o==="(")e++;else if(o===")")e--;else{if(e>0)continue;n+=o}}return n.trim()}function ol(t){return l1.indexOf(t)!==-1||r1.indexOf(t)!==-1||s1.indexOf(t)!==-1}var d1=u1;const h1=Z0(d1),g1=fn.width,m1=fn.height,y1=fn.height*1.5,_1=fn.width*1.1,rl=g1+_1,ll=m1+y1;function b1(t,e,n){return{id:t+"",type:"step",data:e,position:n}}function w1(t,e,n,i="",o){let r=!1,s="",l="",a="";return Cs(i)&&n==0&&(s="r",l="lt"),t>e&&(s="l",r=!0),i==="IF"||i==="ELSE_IF"?n===0?a="True":n===1&&(a="False"):i==="LOOP"&&n===1&&(a="Exit"),{id:`${t}-${e}`,source:t+"",target:e+"",label:"",data:{},sourceHandle:s,targetHandle:l,animated:r,label:a}}function k1(t){const e=[];try{const n=h1(t);for(let i=0;i<n.length;i++){const o=n[i];if(o.steps.length>0){const r=v1(o);e.push(r)}}}catch(n){console.error(n)}return e}function v1(t){const e=[],n=[],i={};let o;const r=[];let s=0,l=-1;for(;s<t.steps.length;s++){const a=t.steps[s];if(t.links[s]){l++;let u;if(i[s]?i[s].target=[...t.links[s].map(String)]:i[s]={target:[...t.links[s].map(String)],parent:[]},!o)u={x:0,y:0};else{const c=t.steps[o.id];if(c.indent===a.indent)u={x:o.position.x,y:o.position.y+ll};else if(c.indent<a.indent)l--,u={x:o.position.x+rl,y:o.position.y};else{let d=c.indent-a.indent,h;for(;d-- >0;)h=r.pop();u={x:h.position.x,y:l*ll}}t.steps[s-1].type==="ELSE"&&(u={x:u.x-rl,y:u.y})}const f=b1(s,{msg:a.msg,rawMsg:a.rawMsg,type:a.type},u);e.push(f),o=f,Cs(a.type)&&r.push(f);for(let c=0;c<t.links[s].length;c++){const d=t.links[s][c];if(i[d]||(i[d]={target:[],parent:[]}),d>s&&i[d].parent.push(String(s)),d===-1)f.data.isEnd=!0;else{if(!t.links[d])throw new Error(`Link for Step ${d} is not present`);const h=w1(s,d,c,a.type,t.steps[d].type);n.push(h)}}}}return e[0].data.isStart=!0,{flowName:t.name,nodes:e,edges:n,connections:i}}const E1=["IF","ELSE_IF","LOOP"];function Cs(t){return E1.indexOf(t)!==-1}function S1(t){let e,n,i,o,r,s;function l(c){t[14](c)}let a={flowsData:t[1],flowName:t[6],nodeState:t[7],nodes:t[3],handleFlowChange:t[9],hideNodeMsgDetail:t[11]};t[2]!==void 0&&(a.selectedFlowIndex=t[2]),n=new M0({props:a}),at.push(()=>gn(n,"selectedFlowIndex",l));const u=[{nodes:t[3]},{edges:t[4]},{nodeState:t[7]},{connections:t[5]},t[12],{selection:t[0]}];let f={};for(let c=0;c<u.length;c+=1)f=Se(f,u[c]);return r=new U0({props:f}),t[15](r),r.$on("flowChange",t[10]),{c(){e=ze("div"),oe(n.$$.fragment),o=ve(),oe(r.$$.fragment),this.h()},l(c){e=Oe(c,"DIV",{class:!0});var d=U(e);se(n.$$.fragment,d),o=Ee(d),se(r.$$.fragment,d),d.forEach(z),this.h()},h(){b(e,"class","solothought_text2chart_flow")},m(c,d){J(c,e,d),re(n,e,null),x(e,o),re(r,e,null),s=!0},p(c,[d]){const h={};d&2&&(h.flowsData=c[1]),d&64&&(h.flowName=c[6]),d&128&&(h.nodeState=c[7]),d&8&&(h.nodes=c[3]),!i&&d&4&&(i=!0,h.selectedFlowIndex=c[2],hn(()=>i=!1)),n.$set(h);const y=d&4281?ft(u,[d&8&&{nodes:c[3]},d&16&&{edges:c[4]},d&128&&{nodeState:c[7]},d&32&&{connections:c[5]},d&4096&&Xt(c[12]),d&1&&{selection:c[0]}]):{};r.$set(y)},i(c){s||(W(n.$$.fragment,c),W(r.$$.fragment,c),s=!0)},o(c){Y(n.$$.fragment,c),Y(r.$$.fragment,c),s=!1},d(c){c&&z(e),le(n),t[15](null),le(r)}}}function p1(t,e,n){const i=["text","selection","flowsData"];let o=Ie(e,i),{text:r=""}=e,{selection:s=[]}=e,{flowsData:l=[]}=e,a=0,u=[],f=[],c={},d="",h={hideMsgDetail:!1,standardShape:!1},y;function m(p){if(n(2,a=p),l[a]){const D=l[a];n(3,u=D.nodes),n(4,f=D.edges),n(5,c=D.connections),n(6,d=D.flowName),mi(u,h),y&&typeof y.updateStore=="function"&&y.updateStore(u,f)}}function _(p){n(0,s=[]),m(parseInt(p.target.value))}function g(p){if(p.detail.flowName){const D=p.detail.flowName;l.forEach((P,N)=>{P.flowName===D&&(n(0,s=[]),m(N))})}}function E(){n(7,h.hideMsgDetail=!h.hideMsgDetail,h),mi(u,h),y.updateStore(u,f)}function v(p){a=p,n(2,a)}function S(p){at[p?"unshift":"push"](()=>{y=p,n(8,y)})}return t.$$set=p=>{e=Se(Se({},e),nt(p)),n(12,o=Ie(e,i)),"text"in p&&n(13,r=p.text),"selection"in p&&n(0,s=p.selection),"flowsData"in p&&n(1,l=p.flowsData)},t.$$.update=()=>{t.$$.dirty&8196&&r.length>0&&(n(1,l=k1(r)),m(a)),t.$$.dirty&6&&l.length>0&&m(a),t.$$.dirty&5&&s&&s.nodeIds&&s.nodeIds.length&&s.flowIndex!==a&&m(s.flowIndex)},[s,l,a,u,f,c,d,h,y,_,g,E,o,r,v,S]}class z1 extends ge{constructor(e){super(),me(this,e,p1,S1,_e,{text:13,selection:0,flowsData:1})}}export{z1 as F,yt as e};
