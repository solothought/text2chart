{"version":3,"file":"text2chart.min.js","sources":["../../node_modules/svelte/src/runtime/internal/utils.js","../../node_modules/svelte/src/runtime/internal/globals.js","../../node_modules/svelte/src/runtime/internal/dom.js","../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../node_modules/svelte/src/runtime/internal/scheduler.js","../../node_modules/svelte/src/runtime/internal/transitions.js","../../node_modules/svelte/src/runtime/internal/each.js","../../node_modules/svelte/src/runtime/internal/spread.js","../../node_modules/svelte/src/runtime/internal/Component.js","../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../node_modules/svelte/src/shared/version.js","../../node_modules/html-to-image/es/util.js","../../node_modules/html-to-image/es/clone-pseudos.js","../../node_modules/html-to-image/es/mimes.js","../../node_modules/html-to-image/es/dataurl.js","../../node_modules/html-to-image/es/clone-node.js","../../node_modules/html-to-image/es/embed-resources.js","../../node_modules/html-to-image/es/embed-images.js","../../node_modules/html-to-image/es/embed-webfonts.js","../../node_modules/html-to-image/es/index.js","../../node_modules/html-to-image/es/apply-style.js","../../node_modules/svelte/src/runtime/store/index.js","../../node_modules/classcat/index.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-drag/src/constant.js","../../node_modules/d3-drag/src/event.js","../../node_modules/d3-drag/src/drag.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../node_modules/@xyflow/system/dist/esm/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/Handle/Handle.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/DefaultNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/InputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/OutputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/portal/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabelRenderer/EdgeLabelRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/hooks/useHandleEdgeSelect.js","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabel/EdgeLabel.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/BaseEdge/BaseEdge.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/BezierEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/SmoothStepEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StraightEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StepEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/store/utils.js","../../node_modules/@xyflow/svelte/dist/lib/store/initial-store.js","../../node_modules/@xyflow/svelte/dist/lib/store/visible-edges.js","../../node_modules/@xyflow/svelte/dist/lib/store/visible-nodes.js","../../node_modules/@xyflow/svelte/dist/lib/store/index.js","../../node_modules/@xyflow/svelte/dist/lib/actions/zoom/index.js","../../node_modules/@xyflow/svelte/dist/lib/container/Zoom/Zoom.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Pane/Pane.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Viewport/Viewport.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/drag/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/NodeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/utils.js","../../node_modules/@xyflow/svelte/dist/lib/container/NodeRenderer/NodeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeWrapper/EdgeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/CallOnMount/CallOnMount.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/MarkerDefinition.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/Marker.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/EdgeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Selection/Selection.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/UserSelection/UserSelection.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/NodeSelection/NodeSelection.svelte","../../node_modules/@svelte-put/shortcut/src/shortcut.js","../../node_modules/@xyflow/svelte/dist/lib/components/KeyHandler/KeyHandler.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/ConnectionLine/ConnectionLine.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Panel/Panel.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Attribution/Attribution.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/utils.js","../../node_modules/@xyflow/svelte/dist/lib/hooks/useColorModeClass.js","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/SvelteFlow.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/SvelteFlowProvider/SvelteFlowProvider.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/ControlButton.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Plus.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Minus.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Fit.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Lock.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Unlock.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Controls.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/types.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/DotPattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/LinePattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/Background.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/MinimapNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/interactive.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/Minimap.svelte","../../node_modules/@xyflow/svelte/dist/lib/utils/index.js","../../node_modules/@xyflow/svelte/dist/lib/hooks/useSvelteFlow.js","../../src/lib/icons/download-image.svelte","../../src/lib/DownloadButton.svelte","../../src/lib/icons/branch.svelte","../../src/lib/flow/PathsDropdown.svelte","../../src/lib/icons/analysis.svelte","../../src/lib/flow/AnalysisDropdown.svelte","../../src/lib/flow/Help.svelte","../../src/lib/icons/longText.svelte","../../src/lib/icons/shortText.svelte","../../src/lib/icons/focus.svelte","../../src/lib/flow/Toolbar.svelte","../../src/lib/flow/ViewportAdjuster.svelte","../../src/lib/config.js","../../src/lib/icons/loop.svelte","../../src/lib/icons/error.svelte","../../src/lib/icons/linkExternal.svelte","../../src/lib/flow/Step.svelte","../../src/lib/flow/nodeUpdater.js","../../src/lib/flow/Highlighter.js","../../src/lib/flow/ExpandCollapse.js","../../src/lib/flow/CoreChart.svelte","../../src/lib/flow/PathSelector.js","../../node_modules/@solothought/text2obj/src/flow/flow.js","../../node_modules/@solothought/text2obj/src/flow/LinkGenerator.js","../../src/lib/flow/NodesAndEdgesBuilder.js","../../src/lib/flow/FlowChart.svelte"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n","export function resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    const doc = document.implementation.createHTMLDocument();\n    const base = doc.createElement('base');\n    const a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexport const uuid = (() => {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    let counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    const random = () => \n    // eslint-disable-next-line no-bitwise\n    `0000${((Math.random() * 36 ** 4) << 0).toString(36)}`.slice(-4);\n    return () => {\n        counter += 1;\n        return `u${random()}${counter}`;\n    };\n})();\nexport function delay(ms) {\n    return (args) => new Promise((resolve) => {\n        setTimeout(() => resolve(args), ms);\n    });\n}\nexport function toArray(arrayLike) {\n    const arr = [];\n    for (let i = 0, l = arrayLike.length; i < l; i++) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nfunction px(node, styleProperty) {\n    const win = node.ownerDocument.defaultView || window;\n    const val = win.getComputedStyle(node).getPropertyValue(styleProperty);\n    return val ? parseFloat(val.replace('px', '')) : 0;\n}\nfunction getNodeWidth(node) {\n    const leftBorder = px(node, 'border-left-width');\n    const rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nfunction getNodeHeight(node) {\n    const topBorder = px(node, 'border-top-width');\n    const bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getImageSize(targetNode, options = {}) {\n    const width = options.width || getNodeWidth(targetNode);\n    const height = options.height || getNodeHeight(targetNode);\n    return { width, height };\n}\nexport function getPixelRatio() {\n    let ratio;\n    let FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    const val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\n// @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nconst canvasDimensionLimit = 16384;\nexport function checkCanvasDimensions(canvas) {\n    if (canvas.width > canvasDimensionLimit ||\n        canvas.height > canvasDimensionLimit) {\n        if (canvas.width > canvasDimensionLimit &&\n            canvas.height > canvasDimensionLimit) {\n            if (canvas.width > canvas.height) {\n                canvas.height *= canvasDimensionLimit / canvas.width;\n                canvas.width = canvasDimensionLimit;\n            }\n            else {\n                canvas.width *= canvasDimensionLimit / canvas.height;\n                canvas.height = canvasDimensionLimit;\n            }\n        }\n        else if (canvas.width > canvasDimensionLimit) {\n            canvas.height *= canvasDimensionLimit / canvas.width;\n            canvas.width = canvasDimensionLimit;\n        }\n        else {\n            canvas.width *= canvasDimensionLimit / canvas.height;\n            canvas.height = canvasDimensionLimit;\n        }\n    }\n}\nexport function canvasToBlob(canvas, options = {}) {\n    if (canvas.toBlob) {\n        return new Promise((resolve) => {\n            canvas.toBlob(resolve, options.type ? options.type : 'image/png', options.quality ? options.quality : 1);\n        });\n    }\n    return new Promise((resolve) => {\n        const binaryString = window.atob(canvas\n            .toDataURL(options.type ? options.type : undefined, options.quality ? options.quality : undefined)\n            .split(',')[1]);\n        const len = binaryString.length;\n        const binaryArray = new Uint8Array(len);\n        for (let i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], {\n            type: options.type ? options.type : 'image/png',\n        }));\n    });\n}\nexport function createImage(url) {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.decode = () => resolve(img);\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'async';\n        img.src = url;\n    });\n}\nexport async function svgToDataURL(svg) {\n    return Promise.resolve()\n        .then(() => new XMLSerializer().serializeToString(svg))\n        .then(encodeURIComponent)\n        .then((html) => `data:image/svg+xml;charset=utf-8,${html}`);\n}\nexport async function nodeToDataURL(node, width, height) {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttribute('width', `${width}`);\n    svg.setAttribute('height', `${height}`);\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    foreignObject.setAttribute('width', '100%');\n    foreignObject.setAttribute('height', '100%');\n    foreignObject.setAttribute('x', '0');\n    foreignObject.setAttribute('y', '0');\n    foreignObject.setAttribute('externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svgToDataURL(svg);\n}\nexport const isInstanceOfElement = (node, instance) => {\n    if (node instanceof instance)\n        return true;\n    const nodePrototype = Object.getPrototypeOf(node);\n    if (nodePrototype === null)\n        return false;\n    return (nodePrototype.constructor.name === instance.name ||\n        isInstanceOfElement(nodePrototype, instance));\n};\n//# sourceMappingURL=util.js.map","import { uuid, toArray } from './util';\nfunction formatCSSText(style) {\n    const content = style.getPropertyValue('content');\n    return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`;\n}\nfunction formatCSSProperties(style) {\n    return toArray(style)\n        .map((name) => {\n        const value = style.getPropertyValue(name);\n        const priority = style.getPropertyPriority(name);\n        return `${name}: ${value}${priority ? ' !important' : ''};`;\n    })\n        .join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    const selector = `.${className}:${pseudo}`;\n    const cssText = style.cssText\n        ? formatCSSText(style)\n        : formatCSSProperties(style);\n    return document.createTextNode(`${selector}{${cssText}}`);\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    const style = window.getComputedStyle(nativeNode, pseudo);\n    const content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    const className = uuid();\n    try {\n        clonedNode.className = `${clonedNode.className} ${className}`;\n    }\n    catch (err) {\n        return;\n    }\n    const styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n}\nexport function clonePseudoElements(nativeNode, clonedNode) {\n    clonePseudoElement(nativeNode, clonedNode, ':before');\n    clonePseudoElement(nativeNode, clonedNode, ':after');\n}\n//# sourceMappingURL=clone-pseudos.js.map","const WOFF = 'application/font-woff';\nconst JPEG = 'image/jpeg';\nconst mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n    webp: 'image/webp',\n};\nfunction getExtension(url) {\n    const match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n    const extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\n//# sourceMappingURL=mimes.js.map","function getContentFromDataUrl(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexport function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n}\nexport async function fetchAsDataURL(url, init, process) {\n    const res = await fetch(url, init);\n    if (res.status === 404) {\n        throw new Error(`Resource \"${res.url}\" not found`);\n    }\n    const blob = await res.blob();\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = () => {\n            try {\n                resolve(process({ res, result: reader.result }));\n            }\n            catch (error) {\n                reject(error);\n            }\n        };\n        reader.readAsDataURL(blob);\n    });\n}\nconst cache = {};\nfunction getCacheKey(url, contentType, includeQueryParams) {\n    let key = url.replace(/\\?.*/, '');\n    if (includeQueryParams) {\n        key = url;\n    }\n    // font resource\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return contentType ? `[${contentType}]${key}` : key;\n}\nexport async function resourceToDataURL(resourceUrl, contentType, options) {\n    const cacheKey = getCacheKey(resourceUrl, contentType, options.includeQueryParams);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        resourceUrl += (/\\?/.test(resourceUrl) ? '&' : '?') + new Date().getTime();\n    }\n    let dataURL;\n    try {\n        const content = await fetchAsDataURL(resourceUrl, options.fetchRequestInit, ({ res, result }) => {\n            if (!contentType) {\n                // eslint-disable-next-line no-param-reassign\n                contentType = res.headers.get('Content-Type') || '';\n            }\n            return getContentFromDataUrl(result);\n        });\n        dataURL = makeDataUrl(content, contentType);\n    }\n    catch (error) {\n        dataURL = options.imagePlaceholder || '';\n        let msg = `Failed to fetch resource: ${resourceUrl}`;\n        if (error) {\n            msg = typeof error === 'string' ? error : error.message;\n        }\n        if (msg) {\n            console.warn(msg);\n        }\n    }\n    cache[cacheKey] = dataURL;\n    return dataURL;\n}\n//# sourceMappingURL=dataurl.js.map","import { clonePseudoElements } from './clone-pseudos';\nimport { createImage, toArray, isInstanceOfElement } from './util';\nimport { getMimeType } from './mimes';\nimport { resourceToDataURL } from './dataurl';\nasync function cloneCanvasElement(canvas) {\n    const dataURL = canvas.toDataURL();\n    if (dataURL === 'data:,') {\n        return canvas.cloneNode(false);\n    }\n    return createImage(dataURL);\n}\nasync function cloneVideoElement(video, options) {\n    if (video.currentSrc) {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        canvas.width = video.clientWidth;\n        canvas.height = video.clientHeight;\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const dataURL = canvas.toDataURL();\n        return createImage(dataURL);\n    }\n    const poster = video.poster;\n    const contentType = getMimeType(poster);\n    const dataURL = await resourceToDataURL(poster, contentType, options);\n    return createImage(dataURL);\n}\nasync function cloneIFrameElement(iframe) {\n    var _a;\n    try {\n        if ((_a = iframe === null || iframe === void 0 ? void 0 : iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.body) {\n            return (await cloneNode(iframe.contentDocument.body, {}, true));\n        }\n    }\n    catch (_b) {\n        // Failed to clone iframe\n    }\n    return iframe.cloneNode(false);\n}\nasync function cloneSingleNode(node, options) {\n    if (isInstanceOfElement(node, HTMLCanvasElement)) {\n        return cloneCanvasElement(node);\n    }\n    if (isInstanceOfElement(node, HTMLVideoElement)) {\n        return cloneVideoElement(node, options);\n    }\n    if (isInstanceOfElement(node, HTMLIFrameElement)) {\n        return cloneIFrameElement(node);\n    }\n    return node.cloneNode(false);\n}\nconst isSlotElement = (node) => node.tagName != null && node.tagName.toUpperCase() === 'SLOT';\nasync function cloneChildren(nativeNode, clonedNode, options) {\n    var _a, _b;\n    let children = [];\n    if (isSlotElement(nativeNode) && nativeNode.assignedNodes) {\n        children = toArray(nativeNode.assignedNodes());\n    }\n    else if (isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n        ((_a = nativeNode.contentDocument) === null || _a === void 0 ? void 0 : _a.body)) {\n        children = toArray(nativeNode.contentDocument.body.childNodes);\n    }\n    else {\n        children = toArray(((_b = nativeNode.shadowRoot) !== null && _b !== void 0 ? _b : nativeNode).childNodes);\n    }\n    if (children.length === 0 ||\n        isInstanceOfElement(nativeNode, HTMLVideoElement)) {\n        return clonedNode;\n    }\n    await children.reduce((deferred, child) => deferred\n        .then(() => cloneNode(child, options))\n        .then((clonedChild) => {\n        if (clonedChild) {\n            clonedNode.appendChild(clonedChild);\n        }\n    }), Promise.resolve());\n    return clonedNode;\n}\nfunction cloneCSSStyle(nativeNode, clonedNode) {\n    const targetStyle = clonedNode.style;\n    if (!targetStyle) {\n        return;\n    }\n    const sourceStyle = window.getComputedStyle(nativeNode);\n    if (sourceStyle.cssText) {\n        targetStyle.cssText = sourceStyle.cssText;\n        targetStyle.transformOrigin = sourceStyle.transformOrigin;\n    }\n    else {\n        toArray(sourceStyle).forEach((name) => {\n            let value = sourceStyle.getPropertyValue(name);\n            if (name === 'font-size' && value.endsWith('px')) {\n                const reducedFont = Math.floor(parseFloat(value.substring(0, value.length - 2))) - 0.1;\n                value = `${reducedFont}px`;\n            }\n            if (isInstanceOfElement(nativeNode, HTMLIFrameElement) &&\n                name === 'display' &&\n                value === 'inline') {\n                value = 'block';\n            }\n            if (name === 'd' && clonedNode.getAttribute('d')) {\n                value = `path(${clonedNode.getAttribute('d')})`;\n            }\n            targetStyle.setProperty(name, value, sourceStyle.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (isInstanceOfElement(nativeNode, HTMLTextAreaElement)) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (isInstanceOfElement(nativeNode, HTMLInputElement)) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction cloneSelectValue(nativeNode, clonedNode) {\n    if (isInstanceOfElement(nativeNode, HTMLSelectElement)) {\n        const clonedSelect = clonedNode;\n        const selectedOption = Array.from(clonedSelect.children).find((child) => nativeNode.value === child.getAttribute('value'));\n        if (selectedOption) {\n            selectedOption.setAttribute('selected', '');\n        }\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    if (isInstanceOfElement(clonedNode, Element)) {\n        cloneCSSStyle(nativeNode, clonedNode);\n        clonePseudoElements(nativeNode, clonedNode);\n        cloneInputValue(nativeNode, clonedNode);\n        cloneSelectValue(nativeNode, clonedNode);\n    }\n    return clonedNode;\n}\nasync function ensureSVGSymbols(clone, options) {\n    const uses = clone.querySelectorAll ? clone.querySelectorAll('use') : [];\n    if (uses.length === 0) {\n        return clone;\n    }\n    const processedDefs = {};\n    for (let i = 0; i < uses.length; i++) {\n        const use = uses[i];\n        const id = use.getAttribute('xlink:href');\n        if (id) {\n            const exist = clone.querySelector(id);\n            const definition = document.querySelector(id);\n            if (!exist && definition && !processedDefs[id]) {\n                // eslint-disable-next-line no-await-in-loop\n                processedDefs[id] = (await cloneNode(definition, options, true));\n            }\n        }\n    }\n    const nodes = Object.values(processedDefs);\n    if (nodes.length) {\n        const ns = 'http://www.w3.org/1999/xhtml';\n        const svg = document.createElementNS(ns, 'svg');\n        svg.setAttribute('xmlns', ns);\n        svg.style.position = 'absolute';\n        svg.style.width = '0';\n        svg.style.height = '0';\n        svg.style.overflow = 'hidden';\n        svg.style.display = 'none';\n        const defs = document.createElementNS(ns, 'defs');\n        svg.appendChild(defs);\n        for (let i = 0; i < nodes.length; i++) {\n            defs.appendChild(nodes[i]);\n        }\n        clone.appendChild(svg);\n    }\n    return clone;\n}\nexport async function cloneNode(node, options, isRoot) {\n    if (!isRoot && options.filter && !options.filter(node)) {\n        return null;\n    }\n    return Promise.resolve(node)\n        .then((clonedNode) => cloneSingleNode(clonedNode, options))\n        .then((clonedNode) => cloneChildren(node, clonedNode, options))\n        .then((clonedNode) => decorate(node, clonedNode))\n        .then((clonedNode) => ensureSVGSymbols(clonedNode, options));\n}\n//# sourceMappingURL=clone-node.js.map","import { resolveUrl } from './util';\nimport { getMimeType } from './mimes';\nimport { isDataUrl, makeDataUrl, resourceToDataURL } from './dataurl';\nconst URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nconst URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"']?)([^\"']+)\\1\\)/g;\nconst FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nfunction toRegex(url) {\n    // eslint-disable-next-line no-useless-escape\n    const escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    return new RegExp(`(url\\\\(['\"]?)(${escaped})(['\"]?\\\\))`, 'g');\n}\nexport function parseURLs(cssText) {\n    const urls = [];\n    cssText.replace(URL_REGEX, (raw, quotation, url) => {\n        urls.push(url);\n        return raw;\n    });\n    return urls.filter((url) => !isDataUrl(url));\n}\nexport async function embed(cssText, resourceURL, baseURL, options, getContentFromUrl) {\n    try {\n        const resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n        const contentType = getMimeType(resourceURL);\n        let dataURL;\n        if (getContentFromUrl) {\n            const content = await getContentFromUrl(resolvedURL);\n            dataURL = makeDataUrl(content, contentType);\n        }\n        else {\n            dataURL = await resourceToDataURL(resolvedURL, contentType, options);\n        }\n        return cssText.replace(toRegex(resourceURL), `$1${dataURL}$3`);\n    }\n    catch (error) {\n        // pass\n    }\n    return cssText;\n}\nfunction filterPreferredFontFormat(str, { preferredFontFormat }) {\n    return !preferredFontFormat\n        ? str\n        : str.replace(FONT_SRC_REGEX, (match) => {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                const [src, , format] = URL_WITH_FORMAT_REGEX.exec(match) || [];\n                if (!format) {\n                    return '';\n                }\n                if (format === preferredFontFormat) {\n                    return `src: ${src};`;\n                }\n            }\n        });\n}\nexport function shouldEmbed(url) {\n    return url.search(URL_REGEX) !== -1;\n}\nexport async function embedResources(cssText, baseUrl, options) {\n    if (!shouldEmbed(cssText)) {\n        return cssText;\n    }\n    const filteredCSSText = filterPreferredFontFormat(cssText, options);\n    const urls = parseURLs(filteredCSSText);\n    return urls.reduce((deferred, url) => deferred.then((css) => embed(css, url, baseUrl, options)), Promise.resolve(filteredCSSText));\n}\n//# sourceMappingURL=embed-resources.js.map","import { embedResources } from './embed-resources';\nimport { toArray, isInstanceOfElement } from './util';\nimport { isDataUrl, resourceToDataURL } from './dataurl';\nimport { getMimeType } from './mimes';\nasync function embedProp(propName, node, options) {\n    var _a;\n    const propValue = (_a = node.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue(propName);\n    if (propValue) {\n        const cssString = await embedResources(propValue, null, options);\n        node.style.setProperty(propName, cssString, node.style.getPropertyPriority(propName));\n        return true;\n    }\n    return false;\n}\nasync function embedBackground(clonedNode, options) {\n    if (!(await embedProp('background', clonedNode, options))) {\n        await embedProp('background-image', clonedNode, options);\n    }\n    if (!(await embedProp('mask', clonedNode, options))) {\n        await embedProp('mask-image', clonedNode, options);\n    }\n}\nasync function embedImageNode(clonedNode, options) {\n    const isImageElement = isInstanceOfElement(clonedNode, HTMLImageElement);\n    if (!(isImageElement && !isDataUrl(clonedNode.src)) &&\n        !(isInstanceOfElement(clonedNode, SVGImageElement) &&\n            !isDataUrl(clonedNode.href.baseVal))) {\n        return;\n    }\n    const url = isImageElement ? clonedNode.src : clonedNode.href.baseVal;\n    const dataURL = await resourceToDataURL(url, getMimeType(url), options);\n    await new Promise((resolve, reject) => {\n        clonedNode.onload = resolve;\n        clonedNode.onerror = reject;\n        const image = clonedNode;\n        if (image.decode) {\n            image.decode = resolve;\n        }\n        if (image.loading === 'lazy') {\n            image.loading = 'eager';\n        }\n        if (isImageElement) {\n            clonedNode.srcset = '';\n            clonedNode.src = dataURL;\n        }\n        else {\n            clonedNode.href.baseVal = dataURL;\n        }\n    });\n}\nasync function embedChildren(clonedNode, options) {\n    const children = toArray(clonedNode.childNodes);\n    const deferreds = children.map((child) => embedImages(child, options));\n    await Promise.all(deferreds).then(() => clonedNode);\n}\nexport async function embedImages(clonedNode, options) {\n    if (isInstanceOfElement(clonedNode, Element)) {\n        await embedBackground(clonedNode, options);\n        await embedImageNode(clonedNode, options);\n        await embedChildren(clonedNode, options);\n    }\n}\n//# sourceMappingURL=embed-images.js.map","import { toArray } from './util';\nimport { fetchAsDataURL } from './dataurl';\nimport { shouldEmbed, embedResources } from './embed-resources';\nconst cssFetchCache = {};\nasync function fetchCSS(url) {\n    let cache = cssFetchCache[url];\n    if (cache != null) {\n        return cache;\n    }\n    const res = await fetch(url);\n    const cssText = await res.text();\n    cache = { url, cssText };\n    cssFetchCache[url] = cache;\n    return cache;\n}\nasync function embedFonts(data, options) {\n    let cssText = data.cssText;\n    const regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n    const fontLocs = cssText.match(/url\\([^)]+\\)/g) || [];\n    const loadFonts = fontLocs.map(async (loc) => {\n        let url = loc.replace(regexUrl, '$1');\n        if (!url.startsWith('https://')) {\n            url = new URL(url, data.url).href;\n        }\n        return fetchAsDataURL(url, options.fetchRequestInit, ({ result }) => {\n            cssText = cssText.replace(loc, `url(${result})`);\n            return [loc, result];\n        });\n    });\n    return Promise.all(loadFonts).then(() => cssText);\n}\nfunction parseCSS(source) {\n    if (source == null) {\n        return [];\n    }\n    const result = [];\n    const commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n    // strip out comments\n    let cssText = source.replace(commentsRegex, '');\n    // eslint-disable-next-line prefer-regex-literals\n    const keyframesRegex = new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const matches = keyframesRegex.exec(cssText);\n        if (matches === null) {\n            break;\n        }\n        result.push(matches[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    const importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\n    // to match css & media queries together\n    const combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n        '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})';\n    // unified regex\n    const unifiedRegex = new RegExp(combinedCSSRegex, 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        let matches = importRegex.exec(cssText);\n        if (matches === null) {\n            matches = unifiedRegex.exec(cssText);\n            if (matches === null) {\n                break;\n            }\n            else {\n                importRegex.lastIndex = unifiedRegex.lastIndex;\n            }\n        }\n        else {\n            unifiedRegex.lastIndex = importRegex.lastIndex;\n        }\n        result.push(matches[0]);\n    }\n    return result;\n}\nasync function getCSSRules(styleSheets, options) {\n    const ret = [];\n    const deferreds = [];\n    // First loop inlines imports\n    styleSheets.forEach((sheet) => {\n        if ('cssRules' in sheet) {\n            try {\n                toArray(sheet.cssRules || []).forEach((item, index) => {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                        let importIndex = index + 1;\n                        const url = item.href;\n                        const deferred = fetchCSS(url)\n                            .then((metadata) => embedFonts(metadata, options))\n                            .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                            try {\n                                sheet.insertRule(rule, rule.startsWith('@import')\n                                    ? (importIndex += 1)\n                                    : sheet.cssRules.length);\n                            }\n                            catch (error) {\n                                console.error('Error inserting rule from remote css', {\n                                    rule,\n                                    error,\n                                });\n                            }\n                        }))\n                            .catch((e) => {\n                            console.error('Error loading remote css', e.toString());\n                        });\n                        deferreds.push(deferred);\n                    }\n                });\n            }\n            catch (e) {\n                const inline = styleSheets.find((a) => a.href == null) || document.styleSheets[0];\n                if (sheet.href != null) {\n                    deferreds.push(fetchCSS(sheet.href)\n                        .then((metadata) => embedFonts(metadata, options))\n                        .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                        inline.insertRule(rule, sheet.cssRules.length);\n                    }))\n                        .catch((err) => {\n                        console.error('Error loading remote stylesheet', err);\n                    }));\n                }\n                console.error('Error inlining remote css file', e);\n            }\n        }\n    });\n    return Promise.all(deferreds).then(() => {\n        // Second loop parses rules\n        styleSheets.forEach((sheet) => {\n            if ('cssRules' in sheet) {\n                try {\n                    toArray(sheet.cssRules || []).forEach((item) => {\n                        ret.push(item);\n                    });\n                }\n                catch (e) {\n                    console.error(`Error while reading CSS rules from ${sheet.href}`, e);\n                }\n            }\n        });\n        return ret;\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter((rule) => rule.type === CSSRule.FONT_FACE_RULE)\n        .filter((rule) => shouldEmbed(rule.style.getPropertyValue('src')));\n}\nasync function parseWebFontRules(node, options) {\n    if (node.ownerDocument == null) {\n        throw new Error('Provided element is not within a Document');\n    }\n    const styleSheets = toArray(node.ownerDocument.styleSheets);\n    const cssRules = await getCSSRules(styleSheets, options);\n    return getWebFontRules(cssRules);\n}\nexport async function getWebFontCSS(node, options) {\n    const rules = await parseWebFontRules(node, options);\n    const cssTexts = await Promise.all(rules.map((rule) => {\n        const baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n        return embedResources(rule.cssText, baseUrl, options);\n    }));\n    return cssTexts.join('\\n');\n}\nexport async function embedWebFonts(clonedNode, options) {\n    const cssText = options.fontEmbedCSS != null\n        ? options.fontEmbedCSS\n        : options.skipFonts\n            ? null\n            : await getWebFontCSS(clonedNode, options);\n    if (cssText) {\n        const styleNode = document.createElement('style');\n        const sytleContent = document.createTextNode(cssText);\n        styleNode.appendChild(sytleContent);\n        if (clonedNode.firstChild) {\n            clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n        }\n        else {\n            clonedNode.appendChild(styleNode);\n        }\n    }\n}\n//# sourceMappingURL=embed-webfonts.js.map","import { cloneNode } from './clone-node';\nimport { embedImages } from './embed-images';\nimport { applyStyle } from './apply-style';\nimport { embedWebFonts, getWebFontCSS } from './embed-webfonts';\nimport { getImageSize, getPixelRatio, createImage, canvasToBlob, nodeToDataURL, checkCanvasDimensions, } from './util';\nexport async function toSvg(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const clonedNode = (await cloneNode(node, options, true));\n    await embedWebFonts(clonedNode, options);\n    await embedImages(clonedNode, options);\n    applyStyle(clonedNode, options);\n    const datauri = await nodeToDataURL(clonedNode, width, height);\n    return datauri;\n}\nexport async function toCanvas(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const svg = await toSvg(node, options);\n    const img = await createImage(svg);\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const ratio = options.pixelRatio || getPixelRatio();\n    const canvasWidth = options.canvasWidth || width;\n    const canvasHeight = options.canvasHeight || height;\n    canvas.width = canvasWidth * ratio;\n    canvas.height = canvasHeight * ratio;\n    if (!options.skipAutoScale) {\n        checkCanvasDimensions(canvas);\n    }\n    canvas.style.width = `${canvasWidth}`;\n    canvas.style.height = `${canvasHeight}`;\n    if (options.backgroundColor) {\n        context.fillStyle = options.backgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n    return canvas;\n}\nexport async function toPixelData(node, options = {}) {\n    const { width, height } = getImageSize(node, options);\n    const canvas = await toCanvas(node, options);\n    const ctx = canvas.getContext('2d');\n    return ctx.getImageData(0, 0, width, height).data;\n}\nexport async function toPng(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL();\n}\nexport async function toJpeg(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL('image/jpeg', options.quality || 1);\n}\nexport async function toBlob(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    const blob = await canvasToBlob(canvas);\n    return blob;\n}\nexport async function getFontEmbedCSS(node, options = {}) {\n    return getWebFontCSS(node, options);\n}\n//# sourceMappingURL=index.js.map","export function applyStyle(node, options) {\n    const { style } = node;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = `${options.width}px`;\n    }\n    if (options.height) {\n        style.height = `${options.height}px`;\n    }\n    const manual = options.style;\n    if (manual != null) {\n        Object.keys(manual).forEach((key) => {\n            style[key] = manual[key];\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=apply-style.js.map","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\n\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is useable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is useable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * Pass in a node, and get connected nodes where edge.source === node.id\n * @public\n * @param node - The node to get the connected nodes from\n * @param nodes - The array of all nodes\n * @param edges - The array of all edges\n * @returns An array of nodes that are connected over eges where the source is the given node\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * Pass in a node, and get connected nodes where edge.target === node.id\n * @public\n * @param node - The node to get the connected nodes from\n * @param nodes - The array of all nodes\n * @param edges - The array of all edges\n * @returns An array of nodes that are connected over eges where the target is the given node\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Internal function for determining a bounding box that contains all given nodes in an array.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for\n * @param params.nodeOrigin - Origin of the nodes: [0, 0] - top left, [0.5, 0.5] - center\n * @returns Bounding box enclosing all nodes\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0], nodeLookup: undefined }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * Get all connecting edges for a given set of nodes\n * @param nodes - Nodes you want to get the connected edges for\n * @param edges - All edges\n * @returns Array of edges that connect any of the given nodes with each other\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitView({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(false);\n    }\n    const bounds = getInternalNodesBounds(nodes);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, { duration: options?.duration });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + node.measured.width * origin[0],\n            y: positionAbsolute.y - parentY + node.measured.height * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Returns a viewport that encloses the given bounds with optional padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport\n * @param width - Width of the viewport\n * @param height  - Height of the viewport\n * @param minZoom - Minimum zoom level of the resulting viewport\n * @param maxZoom - Maximum zoom level of the resulting viewport\n * @param padding - Optional padding around the bounds\n * @returns A transforned {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n  { x: 0, y: 0, width: 100, height: 100},\n  1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    const xZoom = width / (bounds.width * (1 + padding));\n    const yZoom = height / (bounds.height * (1 + padding));\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    return { x, y, zoom: clampedZoom };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    let nextParentId = parentId;\n    const positionAbsolute = { ...position };\n    while (nextParentId) {\n        const parent = nodeLookup.get(nextParentId);\n        nextParentId = parent?.parentId;\n        if (parent) {\n            const origin = parent.origin || nodeOrigin;\n            positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n            positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n        }\n    }\n    return positionAbsolute;\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x, y }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    const isInput = inputTags.includes(target?.nodeName) || target?.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target?.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n// The handle bounds are calculated relative to the node element.\n// We store them in the internals object of the node in order to avoid\n// unnecessary recalculations.\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n    // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * Get a bezier path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.sourcePosition - The position of the source handle (default: Position.Bottom)\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @param params.targetPosition - The position of the target handle (default: Position.Top)\n * @param params.curvature - The curvature of the bezier edge\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n});\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex = 0, elevateOnSelect = false, }) {\n    if (!elevateOnSelect) {\n        return zIndex;\n    }\n    const edgeOrConnectedNodeSelected = selected || targetNode.selected || sourceNode.selected;\n    const selectedZIndex = Math.max(sourceNode.internals.z || 0, targetNode.internals.z || 0, 1000);\n    return zIndex + (edgeOrConnectedNodeSelected ? selectedZIndex : 0);\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges\n * @remarks It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an Edge or a Connection you want to add\n * @param edges -  The array of all current edges\n * @returns A new array of edges with the new edge added\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to reconnect an existing edge with new properties\n * @param oldEdge - The edge you want to update\n * @param newConnection - The new connection you want to update the edge with\n * @param edges - The array of all current edges\n * @param options.shouldReplaceId - should the id of the old edge be replaced with the new connection id\n * @returns the updated edges array\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Get a straight path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n    });\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n// ith this function we try to mimic a orthogonal edge routing behaviour\n// It's not as good as a real orthogonal edge routing but it's faster and good enough as a default for step and smooth step edges\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        centerX = center.x ?? defaultCenterX;\n        centerY = center.y ?? defaultCenterY;\n        //    --->\n        //    |\n        // >---\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        //    |\n        //  ---\n        //  |\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * Get a smooth step path from source to target handle\n * @param params.sourceX - The x position of the source handle\n * @param params.sourceY - The y position of the source handle\n * @param params.sourcePosition - The position of the source handle (default: Position.Bottom)\n * @param params.targetX - The x position of the target handle\n * @param params.targetY - The y position of the target handle\n * @param params.targetPosition - The position of the target handle (default: Position.Top)\n * @returns A path string you can use in an SVG, the labelX and labelY position (center of path) and offsetX, offsetY between source handle and label\n * @example\n *  const source = { x: 0, y: 20 };\n    const target = { x: 150, y: 100 };\n    \n    const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n      sourceX: source.x,\n      sourceY: source.y,\n      sourcePosition: Position.Right,\n      targetX: target.x,\n      targetY: target.y,\n      targetPosition: Position.Left,\n    });\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    // position === Position.Top\n    // we set the x any y position of the toolbar based on the nodes position\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        node.internals = {\n            ...node.internals,\n            positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n            z,\n        };\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ > childZ ? parentZ : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                // We move all child nodes in the oppsite direction\n                // so the x,y changes of the parent do not move the children\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            node.internals = {\n                ...node.internals,\n                handleBounds: undefined,\n            };\n            updatedInternals = true;\n        }\n        else {\n            const dimensions = getDimensions(update.nodeElement);\n            const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n            const doUpdate = !!(dimensions.width &&\n                dimensions.height &&\n                (dimensionChanged || !node.internals.handleBounds || update.force));\n            if (doUpdate) {\n                const nodeBounds = update.nodeElement.getBoundingClientRect();\n                const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n                let { positionAbsolute } = node.internals;\n                if (node.parentId && node.extent === 'parent') {\n                    positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n                }\n                else if (extent) {\n                    positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n                }\n                node.measured = dimensions;\n                node.internals = {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                };\n                if (node.parentId) {\n                    updateChildNode(node, nodeLookup, parentLookup, { nodeOrigin });\n                }\n                updatedInternals = true;\n                if (dimensionChanged) {\n                    changes.push({\n                        id: node.id,\n                        type: 'dimensions',\n                        dimensions,\n                    });\n                    if (node.expandParent && node.parentId) {\n                        parentExpandChildren.push({\n                            id: node.id,\n                            parentId: node.parentId,\n                            rect: nodeToRect(node, nodeOrigin),\n                        });\n                    }\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source, target, sourceHandle = null, targetHandle = null } = edge;\n        const sourceKey = `${source}-source-${sourceHandle}`;\n        const targetKey = `${target}-target-${targetHandle}`;\n        const prevSource = connectionLookup.get(sourceKey) || new Map();\n        const prevTarget = connectionLookup.get(targetKey) || new Map();\n        const connection = { edgeId: edge.id, source, target, sourceHandle, targetHandle };\n        edgeLookup.set(edge.id, edge);\n        connectionLookup.set(sourceKey, prevSource.set(`${target}-${targetHandle}`, connection));\n        connectionLookup.set(targetKey, prevTarget.set(`${source}-${sourceHandle}`, connection));\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n// returns two params:\n// 1. the dragged node (or the first of the list, if we are dragging a node selection)\n// 2. array of selected nodes (for multi selections)\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }, dragEvent) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            let nodesBox = { x: 0, y: 0, x2: 0, y2: 0 };\n            if (dragItems.size > 1 && nodeExtent) {\n                const rect = getInternalNodesBounds(dragItems);\n                nodesBox = rectToBox(rect);\n            }\n            for (const [id, dragItem] of dragItems) {\n                if (!nodeLookup.has(id)) {\n                    // if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                    // and we don't need to update it anymore\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = snapPosition(nextPosition, snapGrid);\n                }\n                // if there is selection with multiple nodes and a node extent is set, we need to adjust the node extent for each node\n                // based on its position so that the node stays at it's position relative to the selection.\n                let adjustedNodeExtent = [\n                    [nodeExtent[0][0], nodeExtent[0][1]],\n                    [nodeExtent[1][0], nodeExtent[1][1]],\n                ];\n                if (dragItems.size > 1 && nodeExtent && !dragItem.extent) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed } = getStoreItems();\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos, null);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            abortDrag = false;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            lastPos = pointerPos;\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                // dragEvent = event.sourceEvent as MouseEvent;\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos, event.sourceEvent);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                updateNodePositions(dragItems, false);\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n// this distance is used for the area around the user pointer\n// while doing a connection for finding the closest nodes\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const clickedHandle = doc?.elementFromPoint(x, y);\n    const handleType = getHandleType(edgeUpdaterType, clickedHandle);\n    const containerBounds = domNode?.getBoundingClientRect();\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let handleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    const newConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    updateConnection(newConnection);\n    let previousConnection = newConnection;\n    onConnectStart?.(event, { nodeId, handleId, handleType });\n    function onPointerMove(event) {\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        handleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: closestHandle && isValid\n                ? rendererPointToPoint({ x: closestHandle.x, y: closestHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        // we don't want to trigger an update when the connection\n        // is snapped to the same handle as before\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if ((closestHandle || handleDomNode) && connection && isValid) {\n            onConnect?.(connection);\n        }\n        // it's important to get a fresh reference from the store here\n        // in order to get the latest state of onConnectEnd\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { inProgress, ...connectionState } = previousConnection;\n        const finalConnectionState = {\n            ...connectionState,\n            toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n        };\n        onConnectEnd?.(event, finalConnectionState);\n        if (edgeUpdaterType) {\n            onReconnectEnd?.(event, finalConnectionState);\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    // we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n    // because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, false);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 10, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            const transform = getTransform();\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\nconst getD3Transition = (selection, duration = 0, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        // increase scroll speed in firefox\n        // firefox: deltaMode === 1; chrome: deltaMode === 0\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        // for pan on scroll we need to handle the event calls on our own\n        // we can't use the start, zoom and end events from d3-zoom\n        // because start and move gets called on every scroll event and not once at the beginning\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && event.type === 'wheel' && !event.ctrlKey;\n        if (preventZoom || isWrappedWithClass(event, noWheelClassName)) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.transform(getD3Transition(d3Selection, options?.duration, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        // We cannot add zoomOnDoubleClick to the filter above because\n        // double tapping on touch screens circumvents the filter and\n        // dblclick.zoom is fired on the selection directly\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleTo(getD3Transition(d3Selection, options?.duration, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleBy(getD3Transition(d3Selection, options?.duration, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            // Collect all child nodes to correct their relative positions when top/left changes\n            // Determine largest minimal extent the parent node is allowed to resize to\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                // when top/left changes, correct the relative positions of child nodes\n                // so that they stay in the same position\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width = isWidthChange ? width : prevValues.width;\n                change.height = isHeightChange ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.();\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitView, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getFitViewNodes, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals };\n","<script>import { getContext } from 'svelte';\nimport cc from 'classcat';\nimport { Position, XYHandle, isMouseEvent, areConnectionMapsEqual, handleConnectionChange, ConnectionMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let id = undefined;\nexport let type = 'source';\nexport let position = Position.Top;\nexport let style = undefined;\nexport let isValidConnection = undefined;\nexport let onconnect = undefined;\nexport let ondisconnect = undefined;\n// @todo implement connectablestart, connectableend\n// export let isConnectableStart: $$Props['isConnectableStart'] = undefined;\n// export let isConnectableEnd: $$Props['isConnectableEnd'] = undefined;\nlet isConnectableProp = undefined;\nexport { isConnectableProp as isConnectable };\nlet className = undefined;\nexport { className as class };\n$: isTarget = type === 'target';\nconst nodeId = getContext('svelteflow__node_id');\nconst connectable = getContext('svelteflow__node_connectable');\n$: isConnectable = isConnectableProp !== undefined ? isConnectableProp : $connectable;\n$: handleId = id || null;\nconst store = useStore();\nconst { connectionMode, domNode, nodeLookup, connectionRadius, viewport, isValidConnection: isValidConnectionStore, lib, addEdge, onedgecreate, panBy, cancelConnection, updateConnection, autoPanOnConnect, edges, connectionLookup, onconnect: onConnectAction, onconnectstart: onConnectStartAction, onconnectend: onConnectEndAction, flowId, connection } = store;\nfunction onPointerDown(event) {\n    const isMouseTriggered = isMouseEvent(event);\n    if ((isMouseTriggered && event.button === 0) || !isMouseTriggered) {\n        XYHandle.onPointerDown(event, {\n            handleId,\n            nodeId,\n            isTarget,\n            connectionRadius: $connectionRadius,\n            domNode: $domNode,\n            nodeLookup: $nodeLookup,\n            connectionMode: $connectionMode,\n            lib: $lib,\n            autoPanOnConnect: $autoPanOnConnect,\n            flowId: $flowId,\n            isValidConnection: isValidConnection ?? $isValidConnectionStore,\n            updateConnection,\n            cancelConnection,\n            panBy,\n            onConnect: (connection) => {\n                const edge = $onedgecreate ? $onedgecreate(connection) : connection;\n                if (!edge) {\n                    return;\n                }\n                addEdge(edge);\n                $onConnectAction?.(connection);\n            },\n            onConnectStart: (event, startParams) => {\n                $onConnectStartAction?.(event, {\n                    nodeId: startParams.nodeId,\n                    handleId: startParams.handleId,\n                    handleType: startParams.handleType\n                });\n            },\n            onConnectEnd: (event, connectionState) => {\n                $onConnectEndAction?.(event, connectionState);\n            },\n            getTransform: () => [$viewport.x, $viewport.y, $viewport.zoom],\n            getFromHandle: () => $connection.fromHandle\n        });\n    }\n}\nlet prevConnections = null;\nlet connections;\n$: if (onconnect || ondisconnect) {\n    // connectionLookup is not reactive, so we use edges to get notified about updates\n    $edges;\n    connections = $connectionLookup.get(`${nodeId}-${type}-${id || null}`);\n}\n$: {\n    if (prevConnections && !areConnectionMapsEqual(connections, prevConnections)) {\n        const _connections = connections ?? new Map();\n        handleConnectionChange(prevConnections, _connections, ondisconnect);\n        handleConnectionChange(_connections, prevConnections, onconnect);\n    }\n    prevConnections = connections ?? new Map();\n}\n$: connectionInProcess = !!$connection.fromHandle;\n$: connectingFrom =\n    $connection.fromHandle?.nodeId === nodeId &&\n        $connection.fromHandle?.type === type &&\n        $connection.fromHandle?.id === handleId;\n$: connectingTo =\n    $connection.toHandle?.nodeId === nodeId &&\n        $connection.toHandle?.type === type &&\n        $connection.toHandle?.id === handleId;\n$: isPossibleEndHandle =\n    $connectionMode === ConnectionMode.Strict\n        ? $connection.fromHandle?.type !== type\n        : nodeId !== $connection.fromHandle?.nodeId || handleId !== $connection.fromHandle?.id;\n$: valid = connectingTo && $connection.isValid;\n</script>\n\n<!--\n@component\nThe Handle component is the part of a node that can be used to connect nodes.\n-->\n<div\n  data-handleid={handleId}\n  data-nodeid={nodeId}\n  data-handlepos={position}\n  data-id=\"{$flowId}-{nodeId}-{id || null}-{type}\"\n  class={cc([\n    'svelte-flow__handle',\n    `svelte-flow__handle-${position}`,\n    'nodrag',\n    'nopan',\n    position,\n    className\n  ])}\n  class:valid\n  class:connectingto={connectingTo}\n  class:connectingfrom={connectingFrom}\n  class:source={!isTarget}\n  class:target={isTarget}\n  class:connectablestart={isConnectable}\n  class:connectableend={isConnectable}\n  class:connectable={isConnectable}\n  class:connectionindicator={isConnectable && (!connectionInProcess || isPossibleEndHandle)}\n  on:mousedown={onPointerDown}\n  on:touchstart={onPointerDown}\n  {style}\n  role=\"button\"\n  tabindex=\"-1\"\n>\n  <slot />\n</div>\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n","function tryToMount(node, domNode, target) {\n    if (!domNode) {\n        return;\n    }\n    const targetEl = target ? domNode.querySelector(target) : domNode;\n    if (targetEl) {\n        targetEl.appendChild(node);\n    }\n}\nexport default function (node, { target, domNode }) {\n    tryToMount(node, domNode, target);\n    return {\n        async update({ target, domNode }) {\n            tryToMount(node, domNode, target);\n        },\n        destroy() {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n}\n","<script>import portal from '../../actions/portal';\nimport { useStore } from '../../store';\nconst { domNode } = useStore();\n</script>\n\n<div use:portal={{ target: '.svelte-flow__edgelabel-renderer', domNode: $domNode }}>\n  <slot />\n</div>\n","import { get } from 'svelte/store';\nimport { errorMessages } from '@xyflow/system';\nimport { useStore } from '../store';\nexport function useHandleEdgeSelect() {\n    const { edgeLookup, selectionRect, selectionRectMode, multiselectionKeyPressed, addSelectedEdges, unselectNodesAndEdges, elementsSelectable } = useStore();\n    return (id) => {\n        const edge = get(edgeLookup).get(id);\n        if (!edge) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        const selectable = edge.selectable || (get(elementsSelectable) && typeof edge.selectable === 'undefined');\n        if (selectable) {\n            selectionRect.set(null);\n            selectionRectMode.set(null);\n            if (!edge.selected) {\n                addSelectedEdges([id]);\n            }\n            else if (edge.selected && get(multiselectionKeyPressed)) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n            }\n        }\n    };\n}\n","<script>import { getContext } from 'svelte';\nimport { EdgeLabelRenderer } from '../EdgeLabelRenderer';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let style = undefined;\nexport let x = undefined;\nexport let y = undefined;\nconst handleEdgeSelect = useHandleEdgeSelect();\nconst id = getContext('svelteflow__edge_id');\n</script>\n\n<EdgeLabelRenderer>\n  <div\n    class=\"svelte-flow__edge-label\"\n    style:transform=\"translate(-50%, -50%) translate({x}px,{y}px)\"\n    style={'pointer-events: all;' + style}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n    on:click={() => {\n      if (id) handleEdgeSelect(id);\n    }}\n  >\n    <slot />\n  </div>\n</EdgeLabelRenderer>\n","<script>import cc from 'classcat';\nimport EdgeLabel from '../EdgeLabel/EdgeLabel.svelte';\nexport let id = undefined;\nexport let path;\nexport let label = undefined;\nexport let labelX = undefined;\nexport let labelY = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let style = undefined;\nexport let interactionWidth = 20;\nlet className = undefined;\nexport { className as class };\nlet interactionWidthValue = interactionWidth === undefined ? 20 : interactionWidth;\n</script>\n\n<path\n  {id}\n  d={path}\n  class={cc(['svelte-flow__edge-path', className])}\n  marker-start={markerStart}\n  marker-end={markerEnd}\n  fill=\"none\"\n  {style}\n/>\n\n{#if interactionWidthValue}\n  <path\n    d={path}\n    stroke-opacity={0}\n    stroke-width={interactionWidthValue}\n    fill=\"none\"\n    class=\"svelte-flow__edge-interaction\"\n  />\n{/if}\n\n{#if label}\n  <EdgeLabel x={labelX} y={labelY} style={labelStyle}>\n    {label}\n  </EdgeLabel>\n{/if}\n","<script>import { getBezierPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getBezierPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getStraightPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\n$: [path, labelX, labelY] = getStraightPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition,\n    borderRadius: 0\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","import { writable, get } from 'svelte/store';\nimport { adoptUserNodes, updateConnectionLookup, infiniteExtent } from '@xyflow/system';\n// we need to sync the user nodes and the internal nodes so that the user can receive the updates\n// made by Svelte Flow (like dragging or selecting a node).\nexport function syncNodeStores(nodesStore, userNodesStore) {\n    const nodesStoreSetter = nodesStore.set;\n    const userNodesStoreSetter = userNodesStore.set;\n    const currentNodesStore = get(nodesStore);\n    const currentUserNodesStore = get(userNodesStore);\n    // depending how the user initializes the nodes, we need to decide if we want to use\n    // the user nodes or the internal nodes for initialization. A user can use a SvelteFlowProvider\n    // without providing any nodes, in that case we want to use the nodes passed by the user.\n    // By default we are using the store nodes, because they already have the absolute positions.\n    const initWithUserNodes = currentNodesStore.length === 0 && currentUserNodesStore.length > 0;\n    let val = initWithUserNodes ? currentUserNodesStore : currentNodesStore;\n    nodesStore.set(val);\n    const _set = (nds) => {\n        const updatedNodes = nodesStoreSetter(nds);\n        val = updatedNodes;\n        userNodesStoreSetter(val);\n        return updatedNodes;\n    };\n    nodesStore.set = userNodesStore.set = _set;\n    nodesStore.update = userNodesStore.update = (fn) => _set(fn(val));\n}\n// same for edges\nexport function syncEdgeStores(edgesStore, userEdgesStore) {\n    const nodesStoreSetter = edgesStore.set;\n    const userEdgesStoreSetter = userEdgesStore.set;\n    let val = get(userEdgesStore);\n    edgesStore.set(val);\n    const _set = (eds) => {\n        nodesStoreSetter(eds);\n        userEdgesStoreSetter(eds);\n        val = eds;\n    };\n    edgesStore.set = userEdgesStore.set = _set;\n    edgesStore.update = userEdgesStore.update = (fn) => _set(fn(val));\n}\n// it is possible to pass a viewport store to SvelteFlow for having more control\n// if that's the case we need to sync the internal viewport with the user viewport\nexport const syncViewportStores = (panZoomStore, viewportStore, userViewportStore) => {\n    if (!userViewportStore) {\n        return;\n    }\n    const panZoom = get(panZoomStore);\n    const viewportStoreSetter = viewportStore.set;\n    const userViewportStoreSetter = userViewportStore.set;\n    let val = userViewportStore ? get(userViewportStore) : { x: 0, y: 0, zoom: 1 };\n    viewportStore.set(val);\n    viewportStore.set = (vp) => {\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    userViewportStore.set = (vp) => {\n        panZoom?.syncViewport(vp);\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    viewportStore.update = (fn) => {\n        viewportStore.set(fn(val));\n    };\n    userViewportStore.update = (fn) => {\n        userViewportStore.set(fn(val));\n    };\n};\n// we are creating a custom store for the internals nodes in order to update the zIndex and positionAbsolute.\n// The user only passes in relative positions, so we need to calculate the absolute positions based on the parent nodes.\nexport const createNodesStore = (nodes, nodeLookup, parentLookup, nodeOrigin = [0, 0], nodeExtent = infiniteExtent) => {\n    const { subscribe, set, update } = writable([]);\n    let value = nodes;\n    let defaults = {};\n    let elevateNodesOnSelect = true;\n    const _set = (nds) => {\n        adoptUserNodes(nds, nodeLookup, parentLookup, {\n            elevateNodesOnSelect,\n            nodeOrigin,\n            nodeExtent,\n            defaults,\n            checkEquality: false\n        });\n        value = nds;\n        set(value);\n        return value;\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    const setOptions = (options) => {\n        elevateNodesOnSelect = options.elevateNodesOnSelect ?? elevateNodesOnSelect;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions,\n        setOptions\n    };\n};\nexport const createEdgesStore = (edges, connectionLookup, edgeLookup, defaultOptions) => {\n    const { subscribe, set, update } = writable([]);\n    let value = edges;\n    let defaults = defaultOptions || {};\n    const _set = (eds) => {\n        const nextEdges = defaults ? eds.map((edge) => ({ ...defaults, ...edge })) : eds;\n        updateConnectionLookup(connectionLookup, edgeLookup, nextEdges);\n        value = nextEdges;\n        set(value);\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions\n    };\n};\n","import { readable, writable } from 'svelte/store';\nimport { infiniteExtent, SelectionMode, ConnectionMode, ConnectionLineType, devWarn, adoptUserNodes, getViewportForBounds, updateConnectionLookup, initialConnection, getInternalNodesBounds } from '@xyflow/system';\nimport DefaultNode from '../components/nodes/DefaultNode.svelte';\nimport InputNode from '../components/nodes/InputNode.svelte';\nimport OutputNode from '../components/nodes/OutputNode.svelte';\nimport GroupNode from '../components/nodes/GroupNode.svelte';\nimport { BezierEdgeInternal, SmoothStepEdgeInternal, StraightEdgeInternal, StepEdgeInternal } from '../components/edges';\nimport { createNodesStore, createEdgesStore } from './utils';\nexport const initialNodeTypes = {\n    input: InputNode,\n    output: OutputNode,\n    default: DefaultNode,\n    group: GroupNode\n};\nexport const initialEdgeTypes = {\n    straight: StraightEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    default: BezierEdgeInternal,\n    step: StepEdgeInternal\n};\nexport const getInitialStore = ({ nodes = [], edges = [], width, height, fitView, nodeOrigin, nodeExtent }) => {\n    const nodeLookup = new Map();\n    const parentLookup = new Map();\n    const connectionLookup = new Map();\n    const edgeLookup = new Map();\n    const storeNodeOrigin = nodeOrigin ?? [0, 0];\n    const storeNodeExtent = nodeExtent ?? infiniteExtent;\n    adoptUserNodes(nodes, nodeLookup, parentLookup, {\n        nodeExtent: storeNodeExtent,\n        nodeOrigin: storeNodeOrigin,\n        elevateNodesOnSelect: false,\n        checkEquality: false\n    });\n    updateConnectionLookup(connectionLookup, edgeLookup, edges);\n    let viewport = { x: 0, y: 0, zoom: 1 };\n    if (fitView && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight))\n        });\n        viewport = getViewportForBounds(bounds, width, height, 0.5, 2, 0.1);\n    }\n    return {\n        flowId: writable(null),\n        nodes: createNodesStore(nodes, nodeLookup, parentLookup, storeNodeOrigin, storeNodeExtent),\n        nodeLookup: readable(nodeLookup),\n        parentLookup: readable(parentLookup),\n        edgeLookup: readable(edgeLookup),\n        visibleNodes: readable([]),\n        edges: createEdgesStore(edges, connectionLookup, edgeLookup),\n        visibleEdges: readable([]),\n        connectionLookup: readable(connectionLookup),\n        height: writable(500),\n        width: writable(500),\n        minZoom: writable(0.5),\n        maxZoom: writable(2),\n        nodeOrigin: writable(storeNodeOrigin),\n        nodeDragThreshold: writable(1),\n        nodeExtent: writable(storeNodeExtent),\n        translateExtent: writable(infiniteExtent),\n        autoPanOnNodeDrag: writable(true),\n        autoPanOnConnect: writable(true),\n        fitViewOnInit: writable(false),\n        fitViewOnInitDone: writable(false),\n        fitViewOptions: writable(undefined),\n        panZoom: writable(null),\n        snapGrid: writable(null),\n        dragging: writable(false),\n        selectionRect: writable(null),\n        selectionKeyPressed: writable(false),\n        multiselectionKeyPressed: writable(false),\n        deleteKeyPressed: writable(false),\n        panActivationKeyPressed: writable(false),\n        zoomActivationKeyPressed: writable(false),\n        selectionRectMode: writable(null),\n        selectionMode: writable(SelectionMode.Partial),\n        nodeTypes: writable(initialNodeTypes),\n        edgeTypes: writable(initialEdgeTypes),\n        viewport: writable(viewport),\n        connectionMode: writable(ConnectionMode.Strict),\n        domNode: writable(null),\n        connection: readable(initialConnection),\n        connectionLineType: writable(ConnectionLineType.Bezier),\n        connectionRadius: writable(20),\n        isValidConnection: writable(() => true),\n        nodesDraggable: writable(true),\n        nodesConnectable: writable(true),\n        elementsSelectable: writable(true),\n        selectNodesOnDrag: writable(true),\n        markers: readable([]),\n        defaultMarkerColor: writable('#b1b1b7'),\n        lib: readable('svelte'),\n        onlyRenderVisibleElements: writable(false),\n        onerror: writable(devWarn),\n        ondelete: writable(undefined),\n        onedgecreate: writable(undefined),\n        onconnect: writable(undefined),\n        onconnectstart: writable(undefined),\n        onconnectend: writable(undefined),\n        onbeforedelete: writable(undefined),\n        nodesInitialized: writable(false),\n        edgesInitialized: writable(false),\n        viewportInitialized: writable(false),\n        initialized: readable(false)\n    };\n};\n","import { derived } from 'svelte/store';\nimport { isEdgeVisible, getEdgePosition, getElevatedEdgeZIndex } from '@xyflow/system';\nexport function getVisibleEdges(store) {\n    const visibleEdges = derived([\n        store.edges,\n        store.nodes,\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.viewport,\n        store.width,\n        store.height\n    ], ([edges, , nodeLookup, onlyRenderVisibleElements, viewport, width, height]) => {\n        const visibleEdges = onlyRenderVisibleElements && width && height\n            ? edges.filter((edge) => {\n                const sourceNode = nodeLookup.get(edge.source);\n                const targetNode = nodeLookup.get(edge.target);\n                return (sourceNode &&\n                    targetNode &&\n                    isEdgeVisible({\n                        sourceNode,\n                        targetNode,\n                        width,\n                        height,\n                        transform: [viewport.x, viewport.y, viewport.zoom]\n                    }));\n            })\n            : edges;\n        return visibleEdges;\n    });\n    return derived([visibleEdges, store.nodes, store.nodeLookup, store.connectionMode, store.onerror], ([visibleEdges, , nodeLookup, connectionMode, onerror]) => {\n        const layoutedEdges = visibleEdges.reduce((res, edge) => {\n            const sourceNode = nodeLookup.get(edge.source);\n            const targetNode = nodeLookup.get(edge.target);\n            if (!sourceNode || !targetNode) {\n                return res;\n            }\n            const edgePosition = getEdgePosition({\n                id: edge.id,\n                sourceNode,\n                targetNode,\n                sourceHandle: edge.sourceHandle || null,\n                targetHandle: edge.targetHandle || null,\n                connectionMode,\n                onError: onerror\n            });\n            if (edgePosition) {\n                res.push({\n                    ...edge,\n                    zIndex: getElevatedEdgeZIndex({\n                        selected: edge.selected,\n                        zIndex: edge.zIndex,\n                        sourceNode,\n                        targetNode,\n                        elevateOnSelect: false\n                    }),\n                    ...edgePosition\n                });\n            }\n            return res;\n        }, []);\n        return layoutedEdges;\n    });\n}\n","import { derived } from 'svelte/store';\nimport { getNodesInside } from '@xyflow/system';\nexport function getVisibleNodes(store) {\n    return derived([\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.width,\n        store.height,\n        store.viewport,\n        store.nodes\n    ], ([nodeLookup, onlyRenderVisibleElements, width, height, viewport]) => {\n        const transform = [viewport.x, viewport.y, viewport.zoom];\n        return onlyRenderVisibleElements\n            ? getNodesInside(nodeLookup, { x: 0, y: 0, width, height }, transform, true)\n            : Array.from(nodeLookup.values());\n    });\n}\n","import { getContext, setContext } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { createMarkerIds, fitView as fitViewSystem, getElementsToRemove, panBy as panBySystem, updateNodeInternals as updateNodeInternalsSystem, addEdge as addEdgeUtil, initialConnection, errorMessages, pointToRendererPoint, getFitViewNodes, updateAbsolutePositions, getDimensions } from '@xyflow/system';\nimport { initialEdgeTypes, initialNodeTypes, getInitialStore } from './initial-store';\nimport { syncNodeStores, syncEdgeStores, syncViewportStores } from './utils';\nimport { getVisibleEdges } from './visible-edges';\nimport { getVisibleNodes } from './visible-nodes';\nexport const key = Symbol();\nexport function createStore({ nodes, edges, width, height, fitView: fitViewOnCreate, nodeOrigin, nodeExtent }) {\n    const store = getInitialStore({\n        nodes,\n        edges,\n        width,\n        height,\n        fitView: fitViewOnCreate,\n        nodeOrigin,\n        nodeExtent\n    });\n    function setNodeTypes(nodeTypes) {\n        store.nodeTypes.set({\n            ...initialNodeTypes,\n            ...nodeTypes\n        });\n    }\n    function setEdgeTypes(edgeTypes) {\n        store.edgeTypes.set({\n            ...initialEdgeTypes,\n            ...edgeTypes\n        });\n    }\n    function addEdge(edgeParams) {\n        const edges = get(store.edges);\n        store.edges.set(addEdgeUtil(edgeParams, edges));\n    }\n    const updateNodePositions = (nodeDragItems, dragging = false) => {\n        const nodeLookup = get(store.nodeLookup);\n        for (const [id, dragItem] of nodeDragItems) {\n            const node = nodeLookup.get(id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            node.position = dragItem.position;\n            node.dragging = dragging;\n        }\n        store.nodes.update((nds) => nds);\n    };\n    function updateNodeInternals(updates) {\n        const nodeLookup = get(store.nodeLookup);\n        const parentLookup = get(store.parentLookup);\n        const { changes, updatedInternals } = updateNodeInternalsSystem(updates, nodeLookup, get(store.parentLookup), get(store.domNode), get(store.nodeOrigin));\n        if (!updatedInternals) {\n            return;\n        }\n        updateAbsolutePositions(nodeLookup, parentLookup, { nodeOrigin, nodeExtent });\n        if (!get(store.fitViewOnInitDone) && get(store.fitViewOnInit)) {\n            const fitViewOptions = get(store.fitViewOptions);\n            const fitViewOnInitDone = fitViewSync({\n                ...fitViewOptions,\n                nodes: fitViewOptions?.nodes\n            });\n            store.fitViewOnInitDone.set(fitViewOnInitDone);\n        }\n        for (const change of changes) {\n            const node = nodeLookup.get(change.id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            switch (change.type) {\n                case 'dimensions': {\n                    const measured = { ...node.measured, ...change.dimensions };\n                    if (change.setAttributes) {\n                        node.width = change.dimensions?.width ?? node.width;\n                        node.height = change.dimensions?.height ?? node.height;\n                    }\n                    node.measured = measured;\n                    break;\n                }\n                case 'position':\n                    node.position = change.position ?? node.position;\n                    break;\n            }\n        }\n        store.nodes.update((nds) => nds);\n        if (!get(store.nodesInitialized)) {\n            store.nodesInitialized.set(true);\n        }\n    }\n    function fitView(options) {\n        const panZoom = get(store.panZoom);\n        const domNode = get(store.domNode);\n        if (!panZoom || !domNode) {\n            return Promise.resolve(false);\n        }\n        const { width, height } = getDimensions(domNode);\n        const fitViewNodes = getFitViewNodes(get(store.nodeLookup), options);\n        return fitViewSystem({\n            nodes: fitViewNodes,\n            width,\n            height,\n            minZoom: get(store.minZoom),\n            maxZoom: get(store.maxZoom),\n            panZoom\n        }, options);\n    }\n    function fitViewSync(options) {\n        const panZoom = get(store.panZoom);\n        if (!panZoom) {\n            return false;\n        }\n        const fitViewNodes = getFitViewNodes(get(store.nodeLookup), options);\n        fitViewSystem({\n            nodes: fitViewNodes,\n            width: get(store.width),\n            height: get(store.height),\n            minZoom: get(store.minZoom),\n            maxZoom: get(store.maxZoom),\n            panZoom\n        }, options);\n        return fitViewNodes.size > 0;\n    }\n    function zoomBy(factor, options) {\n        const panZoom = get(store.panZoom);\n        if (!panZoom) {\n            return Promise.resolve(false);\n        }\n        return panZoom.scaleBy(factor, options);\n    }\n    function zoomIn(options) {\n        return zoomBy(1.2, options);\n    }\n    function zoomOut(options) {\n        return zoomBy(1 / 1.2, options);\n    }\n    function setMinZoom(minZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([minZoom, get(store.maxZoom)]);\n            store.minZoom.set(minZoom);\n        }\n    }\n    function setMaxZoom(maxZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([get(store.minZoom), maxZoom]);\n            store.maxZoom.set(maxZoom);\n        }\n    }\n    function setTranslateExtent(extent) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setTranslateExtent(extent);\n            store.translateExtent.set(extent);\n        }\n    }\n    function resetSelectedElements(elements) {\n        let elementsChanged = false;\n        elements.forEach((element) => {\n            if (element.selected) {\n                element.selected = false;\n                elementsChanged = true;\n            }\n        });\n        return elementsChanged;\n    }\n    function setPaneClickDistance(distance) {\n        get(store.panZoom)?.setClickDistance(distance);\n    }\n    function unselectNodesAndEdges(params) {\n        const resetNodes = resetSelectedElements(params?.nodes || get(store.nodes));\n        if (resetNodes)\n            store.nodes.set(get(store.nodes));\n        const resetEdges = resetSelectedElements(params?.edges || get(store.edges));\n        if (resetEdges)\n            store.edges.set(get(store.edges));\n    }\n    store.deleteKeyPressed.subscribe(async (deleteKeyPressed) => {\n        if (deleteKeyPressed) {\n            const nodes = get(store.nodes);\n            const edges = get(store.edges);\n            const selectedNodes = nodes.filter((node) => node.selected);\n            const selectedEdges = edges.filter((edge) => edge.selected);\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove: selectedNodes,\n                edgesToRemove: selectedEdges,\n                nodes,\n                edges,\n                onBeforeDelete: get(store.onbeforedelete)\n            });\n            if (matchingNodes.length || matchingEdges.length) {\n                store.nodes.update((nds) => nds.filter((node) => !matchingNodes.some((mN) => mN.id === node.id)));\n                store.edges.update((eds) => eds.filter((edge) => !matchingEdges.some((mE) => mE.id === edge.id)));\n                get(store.ondelete)?.({\n                    nodes: matchingNodes,\n                    edges: matchingEdges\n                });\n            }\n        }\n    });\n    function addSelectedNodes(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.nodes.update((ns) => ns.map((node) => {\n            const nodeWillBeSelected = ids.includes(node.id);\n            const selected = isMultiSelection\n                ? node.selected || nodeWillBeSelected\n                : nodeWillBeSelected;\n            // we need to mutate the node here in order to have the correct selected state in the drag handler\n            node.selected = selected;\n            return node;\n        }));\n        if (!isMultiSelection) {\n            store.edges.update((es) => es.map((edge) => {\n                edge.selected = false;\n                return edge;\n            }));\n        }\n    }\n    function addSelectedEdges(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.edges.update((edges) => edges.map((edge) => {\n            const edgeWillBeSelected = ids.includes(edge.id);\n            const selected = isMultiSelection\n                ? edge.selected || edgeWillBeSelected\n                : edgeWillBeSelected;\n            edge.selected = selected;\n            return edge;\n        }));\n        if (!isMultiSelection) {\n            store.nodes.update((ns) => ns.map((node) => {\n                node.selected = false;\n                return node;\n            }));\n        }\n    }\n    function handleNodeSelection(id) {\n        const node = get(store.nodes)?.find((n) => n.id === id);\n        if (!node) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        if (!node.selected) {\n            addSelectedNodes([id]);\n        }\n        else if (node.selected && get(store.multiselectionKeyPressed)) {\n            unselectNodesAndEdges({ nodes: [node], edges: [] });\n        }\n    }\n    function panBy(delta) {\n        const viewport = get(store.viewport);\n        return panBySystem({\n            delta,\n            panZoom: get(store.panZoom),\n            transform: [viewport.x, viewport.y, viewport.zoom],\n            translateExtent: get(store.translateExtent),\n            width: get(store.width),\n            height: get(store.height)\n        });\n    }\n    const _connection = writable(initialConnection);\n    const updateConnection = (newConnection) => {\n        _connection.set({ ...newConnection });\n    };\n    function cancelConnection() {\n        _connection.set(initialConnection);\n    }\n    function reset() {\n        store.fitViewOnInitDone.set(false);\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        store.snapGrid.set(null);\n        store.isValidConnection.set(() => true);\n        unselectNodesAndEdges();\n        cancelConnection();\n    }\n    return {\n        // state\n        ...store,\n        // derived state\n        visibleEdges: getVisibleEdges(store),\n        visibleNodes: getVisibleNodes(store),\n        connection: derived([_connection, store.viewport], ([connection, viewport]) => {\n            return connection.inProgress\n                ? {\n                    ...connection,\n                    to: pointToRendererPoint(connection.to, [viewport.x, viewport.y, viewport.zoom])\n                }\n                : { ...connection };\n        }),\n        markers: derived([store.edges, store.defaultMarkerColor, store.flowId], ([edges, defaultColor, id]) => createMarkerIds(edges, { defaultColor, id })),\n        initialized: (() => {\n            let initialized = false;\n            const initialNodesLength = get(store.nodes).length;\n            const initialEdgesLength = get(store.edges).length;\n            return derived([store.nodesInitialized, store.edgesInitialized, store.viewportInitialized], ([nodesInitialized, edgesInitialized, viewportInitialized]) => {\n                // If it was already initialized, return true from then on\n                if (initialized)\n                    return initialized;\n                // if it hasn't been initialised check if it's now\n                if (initialNodesLength === 0) {\n                    initialized = viewportInitialized;\n                }\n                else if (initialEdgesLength === 0) {\n                    initialized = viewportInitialized && nodesInitialized;\n                }\n                else {\n                    initialized = viewportInitialized && nodesInitialized && edgesInitialized;\n                }\n                return initialized;\n            });\n        })(),\n        // actions\n        syncNodeStores: (nodes) => syncNodeStores(store.nodes, nodes),\n        syncEdgeStores: (edges) => syncEdgeStores(store.edges, edges),\n        syncViewport: (viewport) => syncViewportStores(store.panZoom, store.viewport, viewport),\n        setNodeTypes,\n        setEdgeTypes,\n        addEdge,\n        updateNodePositions,\n        updateNodeInternals,\n        zoomIn,\n        zoomOut,\n        fitView: (options) => fitView(options),\n        setMinZoom,\n        setMaxZoom,\n        setTranslateExtent,\n        setPaneClickDistance,\n        unselectNodesAndEdges,\n        addSelectedNodes,\n        addSelectedEdges,\n        handleNodeSelection,\n        panBy,\n        updateConnection,\n        cancelConnection,\n        reset\n    };\n}\nexport function useStore() {\n    const store = getContext(key);\n    if (!store) {\n        throw new Error('In order to use useStore you need to wrap your component in a <SvelteFlowProvider />');\n    }\n    return store.getStore();\n}\nexport function createStoreContext({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent }) {\n    const store = createStore({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent });\n    setContext(key, {\n        getStore: () => store\n    });\n    return store;\n}\n","import { PanOnScrollMode, XYPanZoom } from '@xyflow/system';\nexport default function zoom(domNode, params) {\n    const { panZoom, minZoom, maxZoom, initialViewport, viewport, dragging, translateExtent, paneClickDistance } = params;\n    const panZoomInstance = XYPanZoom({\n        domNode,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        viewport: initialViewport,\n        paneClickDistance,\n        onDraggingChange: dragging.set\n    });\n    const currentViewport = panZoomInstance.getViewport();\n    viewport.set(currentViewport);\n    panZoom.set(panZoomInstance);\n    panZoomInstance.update(params);\n    return {\n        update(params) {\n            panZoomInstance.update(params);\n        }\n    };\n}\n","<script>import { onMount } from 'svelte';\nimport { PanOnScrollMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport zoom from '../../actions/zoom';\nexport let initialViewport = undefined;\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let panOnScrollMode;\nexport let preventScrolling;\nexport let zoomOnScroll;\nexport let zoomOnDoubleClick;\nexport let zoomOnPinch;\nexport let panOnDrag;\nexport let panOnScroll;\nexport let paneClickDistance;\nconst { viewport, panZoom, selectionRect, minZoom, maxZoom, dragging, translateExtent, lib, panActivationKeyPressed, zoomActivationKeyPressed, viewportInitialized } = useStore();\n$: viewPort = initialViewport || { x: 0, y: 0, zoom: 1 };\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: _panOnScroll = $panActivationKeyPressed || panOnScroll;\nconst onTransformChange = (transform) => viewport.set({ x: transform[0], y: transform[1], zoom: transform[2] });\nonMount(() => {\n    $viewportInitialized = true;\n});\n</script>\n\n<div\n  class=\"svelte-flow__zoom\"\n  use:zoom={{\n    viewport,\n    minZoom: $minZoom,\n    maxZoom: $maxZoom,\n    initialViewport: viewPort,\n    dragging,\n    panZoom,\n    onPanZoomStart: onMoveStart,\n    onPanZoom: onMove,\n    onPanZoomEnd: onMoveEnd,\n    zoomOnScroll,\n    zoomOnDoubleClick,\n    zoomOnPinch,\n    panOnScroll: _panOnScroll,\n    panOnDrag: _panOnDrag,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: panOnScrollMode || PanOnScrollMode.Free,\n    zoomActivationKeyPressed: $zoomActivationKeyPressed,\n    preventScrolling: typeof preventScrolling === 'boolean' ? preventScrolling : true,\n    noPanClassName: 'nopan',\n    noWheelClassName: 'nowheel',\n    userSelectionActive: !!$selectionRect,\n    translateExtent: $translateExtent,\n    lib: $lib,\n    paneClickDistance,\n    onTransformChange\n  }}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__zoom {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 4;\n  }\n</style>\n","<script context=\"module\">export function wrapHandler(handler, container) {\n    return (event) => {\n        if (event.target !== container) {\n            return;\n        }\n        handler?.(event);\n    };\n}\nexport function toggleSelected(ids) {\n    return (item) => {\n        const isSelected = ids.includes(item.id);\n        if (item.selected !== isSelected) {\n            item.selected = isSelected;\n        }\n        return item;\n    };\n}\n</script>\n\n<script>import { createEventDispatcher } from 'svelte';\nimport { SelectionMode, getEventPosition, getNodesInside, getConnectedEdges } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let panOnDrag = undefined;\nexport let selectionOnDrag = undefined;\nconst dispatch = createEventDispatcher();\nconst { nodes, nodeLookup, edges, viewport, dragging, elementsSelectable, selectionRect, selectionRectMode, selectionKeyPressed, selectionMode, panActivationKeyPressed, unselectNodesAndEdges } = useStore();\nlet container;\nlet containerBounds = null;\nlet selectedNodes = [];\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: isSelecting =\n    $selectionKeyPressed || $selectionRect || (selectionOnDrag && _panOnDrag !== true);\n$: hasActiveSelection = $elementsSelectable && (isSelecting || $selectionRectMode === 'user');\n// Used to prevent click events when the user lets go of the selectionKey during a selection\nlet selectionInProgress = false;\nfunction onClick(event) {\n    // We prevent click events when the user let go of the selectionKey during a selection\n    if (selectionInProgress) {\n        selectionInProgress = false;\n        return;\n    }\n    dispatch('paneclick', { event });\n    unselectNodesAndEdges();\n    selectionRectMode.set(null);\n}\nfunction onPointerDown(event) {\n    containerBounds = container.getBoundingClientRect();\n    if (!elementsSelectable ||\n        !isSelecting ||\n        event.button !== 0 ||\n        event.target !== container ||\n        !containerBounds) {\n        return;\n    }\n    event.target?.setPointerCapture?.(event.pointerId);\n    const { x, y } = getEventPosition(event, containerBounds);\n    unselectNodesAndEdges();\n    selectionRect.set({\n        width: 0,\n        height: 0,\n        startX: x,\n        startY: y,\n        x,\n        y\n    });\n    // onSelectionStart?.(event);\n}\nfunction onPointerMove(event) {\n    if (!isSelecting || !containerBounds || !$selectionRect) {\n        return;\n    }\n    selectionInProgress = true;\n    const mousePos = getEventPosition(event, containerBounds);\n    const startX = $selectionRect.startX ?? 0;\n    const startY = $selectionRect.startY ?? 0;\n    const nextUserSelectRect = {\n        ...$selectionRect,\n        x: mousePos.x < startX ? mousePos.x : startX,\n        y: mousePos.y < startY ? mousePos.y : startY,\n        width: Math.abs(mousePos.x - startX),\n        height: Math.abs(mousePos.y - startY)\n    };\n    const prevSelectedNodeIds = selectedNodes.map((n) => n.id);\n    const prevSelectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    selectedNodes = getNodesInside($nodeLookup, nextUserSelectRect, [$viewport.x, $viewport.y, $viewport.zoom], $selectionMode === SelectionMode.Partial, true);\n    const selectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    const selectedNodeIds = selectedNodes.map((n) => n.id);\n    // this prevents unnecessary updates while updating the selection rectangle\n    if (prevSelectedNodeIds.length !== selectedNodeIds.length ||\n        selectedNodeIds.some((id) => !prevSelectedNodeIds.includes(id))) {\n        nodes.update((nodes) => nodes.map(toggleSelected(selectedNodeIds)));\n    }\n    if (prevSelectedEdgeIds.length !== selectedEdgeIds.length ||\n        selectedEdgeIds.some((id) => !prevSelectedEdgeIds.includes(id))) {\n        edges.update((edges) => edges.map(toggleSelected(selectedEdgeIds)));\n    }\n    selectionRectMode.set('user');\n    selectionRect.set(nextUserSelectRect);\n}\nfunction onPointerUp(event) {\n    if (event.button !== 0) {\n        return;\n    }\n    event.target?.releasePointerCapture?.(event.pointerId);\n    // We only want to trigger click functions when in selection mode if\n    // the user did not move the mouse.\n    if (!isSelecting && $selectionRectMode === 'user' && event.target === container) {\n        onClick?.(event);\n    }\n    selectionRect.set(null);\n    if (selectedNodes.length > 0) {\n        $selectionRectMode = 'nodes';\n    }\n    // If the user kept holding the selectionKey during the selection,\n    // we need to reset the selectionInProgress, so the next click event is not prevented\n    if ($selectionKeyPressed) {\n        selectionInProgress = false;\n    }\n    // onSelectionEnd?.(event);\n}\nconst onContextMenu = (event) => {\n    if (Array.isArray(_panOnDrag) && _panOnDrag?.includes(2)) {\n        event.preventDefault();\n        return;\n    }\n    dispatch('panecontextmenu', { event });\n};\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n  bind:this={container}\n  class=\"svelte-flow__pane\"\n  class:draggable={panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0))}\n  class:dragging={$dragging}\n  class:selection={isSelecting}\n  on:click={hasActiveSelection ? undefined : wrapHandler(onClick, container)}\n  on:pointerdown={hasActiveSelection ? onPointerDown : undefined}\n  on:pointermove={hasActiveSelection ? onPointerMove : undefined}\n  on:pointerup={hasActiveSelection ? onPointerUp : undefined}\n  on:contextmenu={wrapHandler(onContextMenu, container)}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__pane {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nconst { viewport } = useStore();\n</script>\n\n<div\n  class=\"svelte-flow__viewport xyflow__viewport\"\n  style=\"transform: translate({$viewport.x}px, {$viewport.y}px) scale({$viewport.zoom})\"\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__viewport {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","import { get } from 'svelte/store';\nimport { XYDrag } from '@xyflow/system';\nexport default function drag(domNode, params) {\n    const { store, onDrag, onDragStart, onDragStop, onNodeMouseDown } = params;\n    const dragInstance = XYDrag({\n        onDrag,\n        onDragStart,\n        onDragStop,\n        onNodeMouseDown,\n        getStoreItems: () => {\n            const snapGrid = get(store.snapGrid);\n            const vp = get(store.viewport);\n            return {\n                nodes: get(store.nodes),\n                nodeLookup: get(store.nodeLookup),\n                edges: get(store.edges),\n                nodeExtent: get(store.nodeExtent),\n                snapGrid: snapGrid ? snapGrid : [0, 0],\n                snapToGrid: !!snapGrid,\n                nodeOrigin: get(store.nodeOrigin),\n                multiSelectionActive: get(store.multiselectionKeyPressed),\n                domNode: get(store.domNode),\n                transform: [vp.x, vp.y, vp.zoom],\n                autoPanOnNodeDrag: get(store.autoPanOnNodeDrag),\n                nodesDraggable: get(store.nodesDraggable),\n                selectNodesOnDrag: get(store.selectNodesOnDrag),\n                nodeDragThreshold: get(store.nodeDragThreshold),\n                unselectNodesAndEdges: store.unselectNodesAndEdges,\n                updateNodePositions: store.updateNodePositions,\n                panBy: store.panBy\n            };\n        }\n    });\n    function updateDrag(domNode, params) {\n        if (params.disabled) {\n            dragInstance.destroy();\n            return;\n        }\n        dragInstance.update({\n            domNode,\n            noDragClassName: params.noDragClass,\n            handleSelector: params.handleSelector,\n            nodeId: params.nodeId,\n            isSelectable: params.isSelectable,\n            nodeClickDistance: params.nodeClickDistance\n        });\n    }\n    updateDrag(domNode, params);\n    return {\n        update(params) {\n            updateDrag(domNode, params);\n        },\n        destroy() {\n            dragInstance.destroy();\n        }\n    };\n}\n","<svelte:options immutable />\n\n<script>import { setContext, onDestroy, createEventDispatcher } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport cc from 'classcat';\nimport { errorMessages, Position } from '@xyflow/system';\nimport drag from '../../actions/drag';\nimport { useStore } from '../../store';\nimport DefaultNode from '../nodes/DefaultNode.svelte';\nimport { getNodeInlineStyleDimensions } from './utils';\nexport let node;\nexport let id;\nexport let data = {};\nexport let selected = false;\nexport let draggable = undefined;\nexport let selectable = undefined;\nexport let connectable = true;\nexport let deletable = true;\nexport let hidden = false;\nexport let dragging = false;\nexport let resizeObserver = null;\nexport let style = undefined;\nexport let type = 'default';\nexport let isParent = false;\nexport let positionX;\nexport let positionY;\nexport let sourcePosition = undefined;\nexport let targetPosition = undefined;\nexport let zIndex;\nexport let measuredWidth = undefined;\nexport let measuredHeight = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let dragHandle = undefined;\nexport let initialized = false;\nexport let parentId = undefined;\nexport let nodeClickDistance = undefined;\nlet className = '';\nexport { className as class };\nconst store = useStore();\nconst { nodeTypes, nodeDragThreshold, selectNodesOnDrag, handleNodeSelection, updateNodeInternals } = store;\nlet nodeRef;\nlet prevNodeRef = null;\nconst dispatchNodeEvent = createEventDispatcher();\nconst connectableStore = writable(connectable);\nlet prevType = undefined;\nlet prevSourcePosition = undefined;\nlet prevTargetPosition = undefined;\n$: nodeType = type || 'default';\n$: nodeTypeValid = !!$nodeTypes[nodeType];\n$: nodeComponent = $nodeTypes[nodeType] || DefaultNode;\n$: {\n    if (!nodeTypeValid) {\n        console.warn('003', errorMessages['error003'](type));\n    }\n}\n$: inlineStyleDimensions = getNodeInlineStyleDimensions({\n    width,\n    height,\n    initialWidth,\n    initialHeight,\n    measuredWidth,\n    measuredHeight\n});\n$: {\n    connectableStore.set(!!connectable);\n}\n$: {\n    // if type, sourcePosition or targetPosition changes,\n    // we need to re-calculate the handle positions\n    const doUpdate = (prevType && nodeType !== prevType) ||\n        (prevSourcePosition && sourcePosition !== prevSourcePosition) ||\n        (prevTargetPosition && targetPosition !== prevTargetPosition);\n    if (doUpdate) {\n        requestAnimationFrame(() => updateNodeInternals(new Map([\n            [\n                id,\n                {\n                    id,\n                    nodeElement: nodeRef,\n                    force: true\n                }\n            ]\n        ])));\n    }\n    prevType = nodeType;\n    prevSourcePosition = sourcePosition;\n    prevTargetPosition = targetPosition;\n}\nsetContext('svelteflow__node_id', id);\nsetContext('svelteflow__node_connectable', connectableStore);\n$: {\n    if (resizeObserver && (nodeRef !== prevNodeRef || !initialized)) {\n        prevNodeRef && resizeObserver.unobserve(prevNodeRef);\n        nodeRef && resizeObserver.observe(nodeRef);\n        prevNodeRef = nodeRef;\n    }\n}\nonDestroy(() => {\n    if (prevNodeRef) {\n        resizeObserver?.unobserve(prevNodeRef);\n    }\n});\nfunction onSelectNodeHandler(event) {\n    if (selectable && (!get(selectNodesOnDrag) || !draggable || get(nodeDragThreshold) > 0)) {\n        // this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n        // here we only need to call it when selectNodesOnDrag=false\n        handleNodeSelection(id);\n    }\n    dispatchNodeEvent('nodeclick', { node: node.internals.userNode, event });\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n{#if !hidden}\n  <div\n    use:drag={{\n      nodeId: id,\n      isSelectable: selectable,\n      disabled: false,\n      handleSelector: dragHandle,\n      noDragClass: 'nodrag',\n      nodeClickDistance,\n      onNodeMouseDown: handleNodeSelection,\n      onDrag: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedrag', { event, targetNode, nodes });\n      },\n      onDragStart: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstart', { event, targetNode, nodes });\n      },\n      onDragStop: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstop', { event, targetNode, nodes });\n      },\n      store\n    }}\n    bind:this={nodeRef}\n    data-id={id}\n    class={cc(['svelte-flow__node', `svelte-flow__node-${nodeType}`, className])}\n    class:dragging\n    class:selected\n    class:draggable\n    class:connectable\n    class:selectable\n    class:nopan={draggable}\n    class:parent={isParent}\n    style:z-index={zIndex}\n    style:transform=\"translate({positionX}px, {positionY}px)\"\n    style:visibility={initialized ? 'visible' : 'hidden'}\n    style=\"{style ?? ''};{inlineStyleDimensions.width}{inlineStyleDimensions.height}\"\n    on:click={onSelectNodeHandler}\n    on:mouseenter={(event) => dispatchNodeEvent('nodemouseenter', { node, event })}\n    on:mouseleave={(event) => dispatchNodeEvent('nodemouseleave', { node, event })}\n    on:mousemove={(event) => dispatchNodeEvent('nodemousemove', { node, event })}\n    on:contextmenu={(event) => dispatchNodeEvent('nodecontextmenu', { node, event })}\n  >\n    <svelte:component\n      this={nodeComponent}\n      {data}\n      {id}\n      {selected}\n      {selectable}\n      {deletable}\n      {sourcePosition}\n      {targetPosition}\n      {zIndex}\n      {dragging}\n      {draggable}\n      {dragHandle}\n      {parentId}\n      type={nodeType}\n      isConnectable={$connectableStore}\n      positionAbsoluteX={positionX}\n      positionAbsoluteY={positionY}\n      {width}\n      {height}\n    />\n  </div>\n{/if}\n","export function getNodeInlineStyleDimensions({ width, height, initialWidth, initialHeight, measuredWidth, measuredHeight }) {\n    if (measuredWidth === undefined && measuredHeight === undefined) {\n        const styleWidth = width ?? initialWidth;\n        const styleHeight = height ?? initialHeight;\n        return {\n            width: styleWidth ? `width:${styleWidth}px;` : '',\n            height: styleHeight ? `height:${styleHeight}px;` : ''\n        };\n    }\n    return {\n        width: width ? `width:${width}px;` : '',\n        height: height ? `height:${height}px;` : ''\n    };\n}\n","<script>import { onDestroy } from 'svelte';\nimport { nodeHasDimensions } from '@xyflow/system';\nimport { NodeWrapper } from '../../components/NodeWrapper';\nimport { useStore } from '../../store';\nexport let nodeClickDistance = 0;\nconst { visibleNodes, nodesDraggable, nodesConnectable, elementsSelectable, updateNodeInternals, parentLookup } = useStore();\nconst resizeObserver = typeof ResizeObserver === 'undefined'\n    ? null\n    : new ResizeObserver((entries) => {\n        const updates = new Map();\n        entries.forEach((entry) => {\n            const id = entry.target.getAttribute('data-id');\n            updates.set(id, {\n                id,\n                nodeElement: entry.target,\n                force: true\n            });\n        });\n        updateNodeInternals(updates);\n    });\nonDestroy(() => {\n    resizeObserver?.disconnect();\n});\n</script>\n\n<div class=\"svelte-flow__nodes\">\n  {#each $visibleNodes as node (node.id)}\n    <NodeWrapper\n      {node}\n      id={node.id}\n      data={node.data}\n      selected={!!node.selected}\n      hidden={!!node.hidden}\n      draggable={!!(node.draggable || ($nodesDraggable && typeof node.draggable === 'undefined'))}\n      selectable={!!(\n        node.selectable ||\n        ($elementsSelectable && typeof node.selectable === 'undefined')\n      )}\n      connectable={!!(\n        node.connectable ||\n        ($nodesConnectable && typeof node.connectable === 'undefined')\n      )}\n      deletable={node.deletable ?? true}\n      positionX={node.internals.positionAbsolute.x}\n      positionY={node.internals.positionAbsolute.y}\n      isParent={$parentLookup.has(node.id)}\n      style={node.style}\n      class={node.class}\n      type={node.type ?? 'default'}\n      sourcePosition={node.sourcePosition}\n      targetPosition={node.targetPosition}\n      dragging={node.dragging}\n      zIndex={node.internals.z ?? 0}\n      dragHandle={node.dragHandle}\n      initialized={nodeHasDimensions(node)}\n      width={node.width}\n      height={node.height}\n      initialWidth={node.initialWidth}\n      initialHeight={node.initialHeight}\n      measuredWidth={node.measured.width}\n      measuredHeight={node.measured.height}\n      parentId={node.parentId}\n      {resizeObserver}\n      {nodeClickDistance}\n      on:nodeclick\n      on:nodemouseenter\n      on:nodemousemove\n      on:nodemouseleave\n      on:nodedrag\n      on:nodedragstart\n      on:nodedragstop\n      on:nodecontextmenu\n    />\n  {/each}\n</div>\n\n<style>\n  .svelte-flow__nodes {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n</style>\n","<svelte:options immutable />\n\n<script>import { createEventDispatcher, setContext } from 'svelte';\nimport cc from 'classcat';\nimport { getMarkerId } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { BezierEdgeInternal } from '../edges';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let id;\nexport let type = 'default';\nexport let source = '';\nexport let target = '';\nexport let data = {};\nexport let style = undefined;\nexport let zIndex = undefined;\nexport let animated = false;\nexport let selected = false;\nexport let selectable = undefined;\nexport let deletable = undefined;\nexport let hidden = false;\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let sourceHandle = undefined;\nexport let targetHandle = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\nexport let sourcePosition;\nexport let targetPosition;\nexport let ariaLabel = undefined;\nexport let interactionWidth = undefined;\n// @ todo: support edge updates\nlet className = '';\nexport { className as class };\nsetContext('svelteflow__edge_id', id);\nconst { edgeLookup, edgeTypes, flowId, elementsSelectable } = useStore();\nconst dispatch = createEventDispatcher();\n$: edgeType = type || 'default';\n$: edgeComponent = $edgeTypes[edgeType] || BezierEdgeInternal;\n$: markerStartUrl = markerStart ? `url('#${getMarkerId(markerStart, $flowId)}')` : undefined;\n$: markerEndUrl = markerEnd ? `url('#${getMarkerId(markerEnd, $flowId)}')` : undefined;\n$: isSelectable = selectable ?? $elementsSelectable;\nconst handleEdgeSelect = useHandleEdgeSelect();\nfunction onClick(event) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        handleEdgeSelect(id);\n        dispatch('edgeclick', { event, edge });\n    }\n}\nfunction onMouseEvent(event, type) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        dispatch(type, { event, edge });\n    }\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n{#if !hidden}\n  <svg style:z-index={zIndex}>\n    <g\n      class={cc(['svelte-flow__edge', className])}\n      class:animated\n      class:selected\n      class:selectable={isSelectable}\n      data-id={id}\n      on:click={onClick}\n      on:contextmenu={(e) => {\n        onMouseEvent(e, 'edgecontextmenu');\n      }}\n      on:mouseenter={(e) => {\n        onMouseEvent(e, 'edgemouseenter');\n      }}\n      on:mouseleave={(e) => {\n        onMouseEvent(e, 'edgemouseleave');\n      }}\n      aria-label={ariaLabel === null\n        ? undefined\n        : ariaLabel\n          ? ariaLabel\n          : `Edge from ${source} to ${target}`}\n      role=\"img\"\n    >\n      <svelte:component\n        this={edgeComponent}\n        {id}\n        {source}\n        {target}\n        {sourceX}\n        {sourceY}\n        {targetX}\n        {targetY}\n        {sourcePosition}\n        {targetPosition}\n        {animated}\n        {selected}\n        {label}\n        {labelStyle}\n        {data}\n        {style}\n        {interactionWidth}\n        selectable={isSelectable}\n        deletable={deletable ?? true}\n        type={edgeType}\n        sourceHandleId={sourceHandle}\n        targetHandleId={targetHandle}\n        markerStart={markerStartUrl}\n        markerEnd={markerEndUrl}\n      />\n    </g>\n  </svg>\n{/if}\n","<script>import { onMount } from 'svelte';\nlet _onMount = undefined;\nexport { _onMount as onMount };\nlet _onDestroy = undefined;\nexport { _onDestroy as onDestroy };\nonMount(() => {\n    _onMount?.();\n    return _onDestroy;\n});\n</script>\n","<script>import { useStore } from '../../../store';\nimport { Marker } from './';\nconst { markers } = useStore();\n</script>\n\n<defs>\n  {#each $markers as marker (marker.id)}\n    <Marker {...marker} />\n  {/each}\n</defs>\n","<script>import { MarkerType } from '@xyflow/system';\nexport let id;\nexport let type;\nexport let width = 12.5;\nexport let height = 12.5;\nexport let markerUnits = 'strokeWidth';\nexport let orient = 'auto-start-reverse';\nexport let color = undefined;\nexport let strokeWidth = undefined;\n</script>\n\n<marker\n  class=\"svelte-flow__arrowhead\"\n  {id}\n  markerWidth={`${width}`}\n  markerHeight={`${height}`}\n  viewBox=\"-10 -10 20 20\"\n  {markerUnits}\n  {orient}\n  refX=\"0\"\n  refY=\"0\"\n>\n  {#if type === MarkerType.Arrow}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill=\"none\"\n      points=\"-5,-4 0,0 -5,4\"\n    />\n  {:else if type === MarkerType.ArrowClosed}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill={color}\n      points=\"-5,-4 0,0 -5,4 -5,-4\"\n    />\n  {/if}\n</marker>\n","<script>import { onMount } from 'svelte';\nimport { EdgeWrapper } from '../../components/EdgeWrapper';\nimport { CallOnMount } from '../../components/CallOnMount';\nimport { MarkerDefinition } from './MarkerDefinition';\nimport { useStore } from '../../store';\nexport let defaultEdgeOptions;\nconst { visibleEdges, edgesInitialized, edges: { setDefaultOptions }, elementsSelectable } = useStore();\nonMount(() => {\n    if (defaultEdgeOptions)\n        setDefaultOptions(defaultEdgeOptions);\n});\n</script>\n\n<div class=\"svelte-flow__edges\">\n  <svg class=\"svelte-flow__marker\">\n    <MarkerDefinition />\n  </svg>\n\n  {#each $visibleEdges as edge (edge.id)}\n    <EdgeWrapper\n      id={edge.id}\n      source={edge.source}\n      target={edge.target}\n      data={edge.data}\n      style={edge.style}\n      animated={edge.animated}\n      selected={edge.selected}\n      selectable={edge.selectable ?? $elementsSelectable}\n      deletable={edge.deletable}\n      hidden={edge.hidden}\n      label={edge.label}\n      labelStyle={edge.labelStyle}\n      markerStart={edge.markerStart}\n      markerEnd={edge.markerEnd}\n      sourceHandle={edge.sourceHandle}\n      targetHandle={edge.targetHandle}\n      sourceX={edge.sourceX}\n      sourceY={edge.sourceY}\n      targetX={edge.targetX}\n      targetY={edge.targetY}\n      sourcePosition={edge.sourcePosition}\n      targetPosition={edge.targetPosition}\n      ariaLabel={edge.ariaLabel}\n      interactionWidth={edge.interactionWidth}\n      class={edge.class}\n      type={edge.type || 'default'}\n      zIndex={edge.zIndex}\n      on:edgeclick\n      on:edgecontextmenu\n      on:edgemouseenter\n      on:edgemouseleave\n    />\n  {/each}\n\n  {#if $visibleEdges.length > 0}\n    <CallOnMount\n      onMount={() => {\n        $edgesInitialized = true;\n      }}\n      onDestroy={() => {\n        $edgesInitialized = false;\n      }}\n    />\n  {/if}\n</div>\n","<script>export let x = 0;\nexport let y = 0;\nexport let width = 0;\nexport let height = 0;\nexport let isVisible = true;\n</script>\n\n{#if isVisible}\n  <div\n    class=\"svelte-flow__selection\"\n    style:width={typeof width === 'string' ? width : `${width}px`}\n    style:height={typeof height === 'string' ? height : `${height}px`}\n    style:transform={`translate(${x}px, ${y}px)`}\n  />\n{/if}\n\n<style>\n  .svelte-flow__selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nimport { Selection } from '../Selection';\nconst { selectionRect, selectionRectMode } = useStore();\n</script>\n\n<Selection\n  isVisible={!!($selectionRect && $selectionRectMode === 'user')}\n  width={$selectionRect?.width}\n  height={$selectionRect?.height}\n  x={$selectionRect?.x}\n  y={$selectionRect?.y}\n/>\n","<script>import { createEventDispatcher } from 'svelte';\nimport { getInternalNodesBounds, isNumeric } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { Selection } from '../Selection';\nimport drag from '../../actions/drag';\nconst store = useStore();\nconst { selectionRectMode, nodes, nodeLookup } = store;\nconst dispatch = createEventDispatcher();\nlet bounds = null;\n$: if ($selectionRectMode === 'nodes') {\n    bounds = getInternalNodesBounds($nodeLookup, { filter: (node) => !!node.selected });\n    $nodes;\n}\nfunction onContextMenu(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectioncontextmenu', { nodes: selectedNodes, event });\n}\nfunction onClick(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectionclick', { nodes: selectedNodes, event });\n}\n</script>\n\n{#if $selectionRectMode === 'nodes' && bounds && isNumeric(bounds.x) && isNumeric(bounds.y)}\n  <div\n    class=\"selection-wrapper nopan\"\n    style=\"width: {bounds.width}px; height: {bounds.height}px; transform: translate({bounds.x}px, {bounds.y}px)\"\n    use:drag={{\n      disabled: false,\n      store,\n      onDrag: (event, _, __, nodes) => {\n        dispatch('nodedrag', { event, targetNode: null, nodes });\n      },\n      onDragStart: (event, _, __, nodes) => {\n        dispatch('nodedragstart', { event, targetNode: null, nodes });\n      },\n      onDragStop: (event, _, __, nodes) => {\n        dispatch('nodedragstop', { event, targetNode: null, nodes });\n      }\n    }}\n    on:contextmenu={onContextMenu}\n    on:click={onClick}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n  >\n    <Selection width=\"100%\" height=\"100%\" x={0} y={0} />\n  </div>\n{/if}\n\n<style>\n  .selection-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 7;\n    pointer-events: all;\n  }\n</style>\n","/**\n * Listen for keyboard event and trigger `shortcut` {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent | CustomEvent }\n * @example Typical usage\n *\n * ```svelte\n * <script lang=\"ts\">\n *  import { shortcut, type ShortcutEventDetail } from '@svelte-put/shortcut';\n *\n *  let commandPalette = false;\n *\n *  function onOpenCommandPalette() {\n *    commandPalette = true;\n *  }\n *  function onCloseCommandPalette() {\n *    commandPalette = false;\n *  }\n *\n *  function doSomethingElse(details: ShortcutEventDetail) {\n *    console.log('Action was placed on:', details.node);\n *    console.log('Trigger:', details.trigger);\n *  }\n *\n *  function onShortcut(event: CustomEvent<ShortcutEventDetail>) {\n *    if (event.detail.trigger.id === 'do-something-else') {\n *      console.log('Same as doSomethingElse()');\n *      // be careful here doSomethingElse would have been called too\n *   }\n * }\n * </script>\n *\n * <svelte:window\n *   use:shortcut={{\n *     trigger: [\n *       {\n *         key: 'k',\n *\n *         // trigger if either ctrl or meta is pressed\n *         modifier: ['ctrl', 'meta'],\n *\n *         callback: onOpenCommandPalette,\n *         preventDefault: true,\n *       },\n *       {\n *         key: 'Escape',\n *\n *         // preferably avoid arrow functions here for better performance\n *         // with arrow functions the action has to be updated more frequently\n *         callback: onCloseCommandPalette,\n *\n *         enabled: commandPalette,\n *         preventDefault: true,\n *       },\n *      {\n *         key: 'k',\n *\n *         // trigger if both ctrl & shift are pressed\n *         modifier: [['ctrl', 'shift']],\n *         id: 'do-something-else',\n *         callback: doSomethingElse,\n *      },\n *     ],\n *   }}\n *   on:shortcut={onShortcut}\n * />\n * ```\n *\n *\n *\n * As with any svelte action, `shortcut` should be use with element and not component.\n *\n * ```html\n * <-- correct usage-->\n *  <div use:intersect />\n *\n * <-- incorrect usage-->\n * <Component use:intersect/>\n * ```\n *\n * You can either:\n *\n * - pass multiple callbacks to their associated triggers, or\n *\n * - pass one single handler to the `on:shortcut` event, in which case you should\n * provide an ID to each trigger to be able to distinguish what trigger was activated\n * in the event handler.\n *\n * Either way, only use `callback` or `on:shortcut` and not both to\n * avoid handler duplication.\n * @param {HTMLElement} node - HTMLElement to add event listener to\n * @param {import('./public').ShortcutParameter} param - svelte action parameters\n * @returns {import('./public').ShortcutActionReturn}\n */\nexport function shortcut(node, param) {\n\tlet { enabled = true, trigger, type = 'keydown' } = param;\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction handler(event) {\n\t\tconst normalizedTriggers = Array.isArray(trigger) ? trigger : [trigger];\n\t\t/** @type {Record<import('./public').ShortcutModifier, boolean>} */\n\t\tconst modifiedMap = {\n\t\t\talt: event.altKey,\n\t\t\tctrl: event.ctrlKey,\n\t\t\tshift: event.shiftKey,\n\t\t\tmeta: event.metaKey,\n\t\t};\n\t\tfor (const trigger of normalizedTriggers) {\n\t\t\tconst mergedTrigger = {\n\t\t\t\tmodifier: [],\n\t\t\t\tpreventDefault: false,\n\t\t\t\tenabled: true,\n\t\t\t\t...trigger,\n\t\t\t};\n\t\t\tconst { modifier, key, callback, preventDefault, enabled: triggerEnabled } = mergedTrigger;\n\t\t\tif (triggerEnabled) {\n\t\t\t\tif (modifier.length) {\n\t\t\t\t\tconst modifierDefs = (Array.isArray(modifier) ? modifier : [modifier]).map((def) =>\n\t\t\t\t\t\ttypeof def === 'string' ? [def] : def,\n\t\t\t\t\t);\n\t\t\t\t\tconst modified = modifierDefs.some((def) =>\n\t\t\t\t\t\tdef.every((modifier) => modifiedMap[modifier]),\n\t\t\t\t\t);\n\t\t\t\t\tif (!modified) continue;\n\t\t\t\t}\n\t\t\t\tif (event.key === key) {\n\t\t\t\t\tif (preventDefault) event.preventDefault();\n\t\t\t\t\t/** @type {import('./public').ShortcutEventDetail} */\n\t\t\t\t\tconst detail = {\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\ttrigger: mergedTrigger,\n\t\t\t\t\t\toriginalEvent: event,\n\t\t\t\t\t};\n\t\t\t\t\tnode.dispatchEvent(new CustomEvent('shortcut', { detail }));\n\t\t\t\t\tcallback?.(detail);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (enabled) node.addEventListener(type, handler);\n\n\treturn {\n\t\tupdate: (update) => {\n\t\t\tconst { enabled: newEnabled = true, type: newType = 'keydown' } = update;\n\n\t\t\tif (enabled && (!newEnabled || type !== newType)) {\n\t\t\t\tnode.removeEventListener(type, handler);\n\t\t\t} else if (!enabled && newEnabled) {\n\t\t\t\tnode.addEventListener(newType, handler);\n\t\t\t}\n\n\t\t\tenabled = newEnabled;\n\t\t\ttype = newType;\n\t\t\ttrigger = update.trigger;\n\t\t},\n\t\tdestroy: () => {\n\t\t\tnode.removeEventListener(type, handler);\n\t\t},\n\t};\n}\n","<script>import { shortcut } from '@svelte-put/shortcut';\nimport { isInputDOMNode, isMacOs } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let selectionKey = 'Shift';\nexport let multiSelectionKey = isMacOs() ? 'Meta' : 'Control';\nexport let deleteKey = 'Backspace';\nexport let panActivationKey = ' ';\nexport let zoomActivationKey = isMacOs() ? 'Meta' : 'Control';\nconst { selectionKeyPressed, multiselectionKeyPressed, deleteKeyPressed, panActivationKeyPressed, zoomActivationKeyPressed, selectionRect } = useStore();\nfunction isKeyObject(key) {\n    return key !== null && typeof key === 'object';\n}\nfunction getModifier(key) {\n    return isKeyObject(key) ? key.modifier || [] : [];\n}\nfunction getKeyString(key) {\n    if (key === null || key === undefined) {\n        // this is a workaround to check if a key is set\n        // if not we won't call the callback\n        return '';\n    }\n    return isKeyObject(key) ? key.key : key;\n}\nfunction getShortcutTrigger(key, callback) {\n    const keys = Array.isArray(key) ? key : [key];\n    return keys.map((_key) => {\n        const keyString = getKeyString(_key);\n        return {\n            key: keyString,\n            modifier: getModifier(_key),\n            enabled: keyString !== null,\n            callback\n        };\n    });\n}\nfunction resetKeysAndSelection() {\n    selectionRect.set(null);\n    selectionKeyPressed.set(false);\n    multiselectionKeyPressed.set(false);\n    deleteKeyPressed.set(false);\n    panActivationKeyPressed.set(false);\n    zoomActivationKeyPressed.set(false);\n}\n</script>\n\n<svelte:window\n  on:blur={resetKeysAndSelection}\n  on:contextmenu={resetKeysAndSelection}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, (detail) => {\n      const isModifierKey =\n        detail.originalEvent.ctrlKey ||\n        detail.originalEvent.metaKey ||\n        detail.originalEvent.shiftKey;\n      if (!isModifierKey && !isInputDOMNode(detail.originalEvent)) {\n        deleteKeyPressed.set(true);\n      }\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, () => deleteKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n/>\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nimport { ConnectionLineType, getBezierPath, getConnectionStatus, getSmoothStepPath, getStraightPath } from '@xyflow/system';\nexport let containerStyle = '';\nexport let style = '';\nexport let isCustomComponent = false;\nconst { width, height, connection, connectionLineType } = useStore();\nlet path = null;\n$: if ($connection.inProgress && !isCustomComponent) {\n    const { from, to, fromPosition, toPosition } = $connection;\n    const pathParams = {\n        sourceX: from.x,\n        sourceY: from.y,\n        sourcePosition: fromPosition,\n        targetX: to.x,\n        targetY: to.y,\n        targetPosition: toPosition\n    };\n    switch ($connectionLineType) {\n        case ConnectionLineType.Bezier:\n            [path] = getBezierPath(pathParams);\n            break;\n        case ConnectionLineType.Step:\n            [path] = getSmoothStepPath({\n                ...pathParams,\n                borderRadius: 0\n            });\n            break;\n        case ConnectionLineType.SmoothStep:\n            [path] = getSmoothStepPath(pathParams);\n            break;\n        default:\n            [path] = getStraightPath(pathParams);\n    }\n}\n</script>\n\n{#if $connection.inProgress}\n  <svg width={$width} height={$height} class=\"svelte-flow__connectionline\" style={containerStyle}>\n    <g class={cc(['svelte-flow__connection', getConnectionStatus($connection.isValid)])}>\n      <slot name=\"connectionLine\" />\n      <!-- slot fallbacks do not work if slots are forwarded in parent -->\n      {#if !isCustomComponent}\n        <path d={path} {style} fill=\"none\" class=\"svelte-flow__connection-path\" />\n      {/if}\n    </g>\n  </svg>\n{/if}\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nexport let position = 'top-right';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nconst { selectionRectMode } = useStore();\n$: positionClasses = `${position}`.split('-');\n</script>\n\n<div\n  class={cc(['svelte-flow__panel', className, ...positionClasses])}\n  {style}\n  style:pointer-events={$selectionRectMode ? 'none' : ''}\n  {...$$restProps}\n>\n  <slot />\n</div>\n","<script>import { Panel } from '../../container/Panel';\nexport let proOptions = undefined;\nexport let position = 'bottom-right';\n</script>\n\n{#if !proOptions?.hideAttribution}\n  <Panel\n    {position}\n    class=\"svelte-flow__attribution\"\n    data-message=\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\"\n  >\n    <a\n      href=\"https://svelteflow.dev\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      aria-label=\"Svelte Flow attribution\"\n    >\n      Svelte Flow\n    </a>\n  </Panel>\n{/if}\n","// this is helper function for updating the store\n// for props where we need to call a specific store action\nexport function updateStore(store, { nodeTypes, edgeTypes, minZoom, maxZoom, translateExtent, paneClickDistance }) {\n    if (nodeTypes !== undefined) {\n        store.setNodeTypes(nodeTypes);\n    }\n    if (edgeTypes !== undefined) {\n        store.setEdgeTypes(edgeTypes);\n    }\n    if (minZoom !== undefined) {\n        store.setMinZoom(minZoom);\n    }\n    if (maxZoom !== undefined) {\n        store.setMaxZoom(maxZoom);\n    }\n    if (translateExtent !== undefined) {\n        store.setTranslateExtent(translateExtent);\n    }\n    if (paneClickDistance !== undefined) {\n        store.setPaneClickDistance(paneClickDistance);\n    }\n}\nconst getKeys = (obj) => Object.keys(obj);\nexport function updateStoreByKeys(store, keys) {\n    getKeys(keys).forEach((prop) => {\n        const update = keys[prop];\n        if (update !== undefined) {\n            // @ts-expect-error @todo: how to fix this TS error?\n            store[prop].set(update);\n        }\n    });\n}\n","import { readable } from 'svelte/store';\nfunction getMediaQuery() {\n    if (typeof window === 'undefined' || !window.matchMedia) {\n        return null;\n    }\n    return window.matchMedia('(prefers-color-scheme: dark)');\n}\n/**\n * Hook for receiving the current color mode class 'dark' or 'light'.\n *\n * @internal\n * @param colorMode - The color mode to use ('dark', 'light' or 'system')\n */\nexport function useColorModeClass(colorMode = 'light') {\n    const colorModeClass = readable('light', (set) => {\n        if (colorMode !== 'system') {\n            set(colorMode);\n            return;\n        }\n        const mediaQuery = getMediaQuery();\n        const updateColorModeClass = () => set(mediaQuery?.matches ? 'dark' : 'light');\n        set(mediaQuery?.matches ? 'dark' : 'light');\n        mediaQuery?.addEventListener('change', updateColorModeClass);\n        return () => {\n            mediaQuery?.removeEventListener('change', updateColorModeClass);\n        };\n    });\n    return colorModeClass;\n}\n","<script>import { onMount, hasContext } from 'svelte';\nimport { get } from 'svelte/store';\nimport cc from 'classcat';\nimport { ConnectionMode, PanOnScrollMode } from '@xyflow/system';\nimport { Zoom } from '../Zoom';\nimport { Pane } from '../Pane';\nimport { Viewport as ViewportComponent } from '../Viewport';\nimport { NodeRenderer } from '../NodeRenderer';\nimport { EdgeRenderer } from '../EdgeRenderer';\nimport { UserSelection } from '../../components/UserSelection';\nimport { NodeSelection } from '../../components/NodeSelection';\nimport { KeyHandler } from '../../components/KeyHandler';\nimport { ConnectionLine } from '../../components/ConnectionLine';\nimport { Attribution } from '../../components/Attribution';\nimport { key, useStore, createStoreContext } from '../../store';\nimport { updateStore, updateStoreByKeys } from './utils';\nimport { useColorModeClass } from '../../hooks/useColorModeClass';\nexport let id = '1';\nexport let nodes;\nexport let edges;\nexport let fitView = undefined;\nexport let fitViewOptions = undefined;\nexport let minZoom = undefined;\nexport let maxZoom = undefined;\nexport let initialViewport = undefined;\nexport let viewport = undefined;\nexport let nodeTypes = undefined;\nexport let edgeTypes = undefined;\nexport let selectionKey = undefined;\nexport let selectionMode = undefined;\nexport let panActivationKey = undefined;\nexport let multiSelectionKey = undefined;\nexport let zoomActivationKey = undefined;\nexport let nodesDraggable = undefined;\nexport let nodesConnectable = undefined;\nexport let nodeDragThreshold = undefined;\nexport let elementsSelectable = undefined;\nexport let snapGrid = undefined;\nexport let deleteKey = undefined;\nexport let connectionRadius = undefined;\nexport let connectionLineType = undefined;\nexport let connectionMode = ConnectionMode.Strict;\nexport let connectionLineStyle = '';\nexport let connectionLineContainerStyle = '';\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let isValidConnection = undefined;\nexport let translateExtent = undefined;\nexport let nodeExtent = undefined;\nexport let onlyRenderVisibleElements = undefined;\nexport let panOnScrollMode = PanOnScrollMode.Free;\nexport let preventScrolling = true;\nexport let zoomOnScroll = true;\nexport let zoomOnDoubleClick = true;\nexport let zoomOnPinch = true;\nexport let panOnScroll = false;\nexport let panOnDrag = true;\nexport let selectionOnDrag = undefined;\nexport let autoPanOnConnect = true;\nexport let autoPanOnNodeDrag = true;\nexport let onerror = undefined;\nexport let ondelete = undefined;\nexport let onedgecreate = undefined;\nexport let attributionPosition = undefined;\nexport let proOptions = undefined;\nexport let defaultEdgeOptions = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let colorMode = 'light';\nexport let onconnect = undefined;\nexport let onconnectstart = undefined;\nexport let onconnectend = undefined;\nexport let onbeforedelete = undefined;\nexport let oninit = undefined;\nexport let nodeOrigin = undefined;\nexport let paneClickDistance = 0;\nexport let nodeClickDistance = 0;\nexport let defaultMarkerColor = '#b1b1b7';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nlet domNode;\nlet clientWidth;\nlet clientHeight;\nconst initViewport = $viewport || initialViewport;\nconst store = hasContext(key)\n    ? useStore()\n    : createStoreContext({\n        nodes: get(nodes),\n        edges: get(edges),\n        width,\n        height,\n        fitView,\n        nodeOrigin,\n        nodeExtent\n    });\nonMount(() => {\n    store.width.set(clientWidth);\n    store.height.set(clientHeight);\n    store.domNode.set(domNode);\n    store.syncNodeStores(nodes);\n    store.syncEdgeStores(edges);\n    store.syncViewport(viewport);\n    if (fitView !== undefined) {\n        store.fitViewOnInit.set(fitView);\n    }\n    if (fitViewOptions) {\n        store.fitViewOptions.set(fitViewOptions);\n    }\n    updateStore(store, {\n        nodeTypes,\n        edgeTypes,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        paneClickDistance\n    });\n    return () => {\n        store.reset();\n    };\n});\n// Update width & height on resize\n$: {\n    if (clientWidth !== undefined && clientHeight !== undefined) {\n        store.width.set(clientWidth);\n        store.height.set(clientHeight);\n    }\n}\n// Call oninit once when flow is intialized\nconst { initialized } = store;\nlet onInitCalled = false;\n$: {\n    if (!onInitCalled && $initialized) {\n        oninit?.();\n        onInitCalled = true;\n    }\n}\n// this updates the store for simple changes\n// where the prop names equals the store name\n$: {\n    const updatableProps = {\n        flowId: id,\n        connectionLineType,\n        connectionRadius,\n        selectionMode,\n        snapGrid,\n        defaultMarkerColor,\n        nodesDraggable,\n        nodesConnectable,\n        elementsSelectable,\n        onlyRenderVisibleElements,\n        isValidConnection,\n        autoPanOnConnect,\n        autoPanOnNodeDrag,\n        onerror,\n        ondelete,\n        onedgecreate,\n        connectionMode,\n        nodeDragThreshold,\n        onconnect,\n        onconnectstart,\n        onconnectend,\n        onbeforedelete,\n        nodeOrigin\n    };\n    updateStoreByKeys(store, updatableProps);\n}\n$: updateStore(store, {\n    nodeTypes,\n    edgeTypes,\n    minZoom,\n    maxZoom,\n    translateExtent,\n    paneClickDistance\n});\n$: colorModeClass = useColorModeClass(colorMode);\n</script>\n\n<div\n  bind:this={domNode}\n  bind:clientWidth\n  bind:clientHeight\n  {style}\n  class={cc(['svelte-flow', className, $colorModeClass])}\n  data-testid=\"svelte-flow__wrapper\"\n  on:dragover\n  on:drop\n  {...$$restProps}\n  role=\"application\"\n>\n  <KeyHandler\n    {selectionKey}\n    {deleteKey}\n    {panActivationKey}\n    {multiSelectionKey}\n    {zoomActivationKey}\n  />\n  <Zoom\n    initialViewport={initViewport}\n    {onMoveStart}\n    {onMove}\n    {onMoveEnd}\n    panOnScrollMode={panOnScrollMode === undefined ? PanOnScrollMode.Free : panOnScrollMode}\n    preventScrolling={preventScrolling === undefined ? true : preventScrolling}\n    zoomOnScroll={zoomOnScroll === undefined ? true : zoomOnScroll}\n    zoomOnDoubleClick={zoomOnDoubleClick === undefined ? true : zoomOnDoubleClick}\n    zoomOnPinch={zoomOnPinch === undefined ? true : zoomOnPinch}\n    panOnScroll={panOnScroll === undefined ? false : panOnScroll}\n    panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n    paneClickDistance={paneClickDistance === undefined ? 0 : paneClickDistance}\n  >\n    <Pane\n      on:paneclick\n      on:panecontextmenu\n      panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n      {selectionOnDrag}\n    >\n      <ViewportComponent>\n        <EdgeRenderer\n          on:edgeclick\n          on:edgecontextmenu\n          on:edgemouseenter\n          on:edgemouseleave\n          {defaultEdgeOptions}\n        />\n        <ConnectionLine\n          containerStyle={connectionLineContainerStyle}\n          style={connectionLineStyle}\n          isCustomComponent={$$slots.connectionLine}\n        >\n          <slot name=\"connectionLine\" slot=\"connectionLine\" />\n        </ConnectionLine>\n        <div class=\"svelte-flow__edgelabel-renderer\" />\n        <div class=\"svelte-flow__viewport-portal\" />\n        <NodeRenderer\n          {nodeClickDistance}\n          on:nodeclick\n          on:nodemouseenter\n          on:nodemousemove\n          on:nodemouseleave\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n          on:nodecontextmenu\n        />\n        <NodeSelection\n          on:selectionclick\n          on:selectioncontextmenu\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n        />\n      </ViewportComponent>\n      <UserSelection />\n    </Pane>\n  </Zoom>\n  <Attribution {proOptions} position={attributionPosition} />\n  <slot />\n</div>\n\n<style>\n  .svelte-flow {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    z-index: 0;\n\n    background-color: var(--background-color, var(--background-color-default));\n  }\n\n  :root {\n    --background-color-default: #fff;\n    --background-pattern-color-default: #ddd;\n\n    --minimap-mask-color-default: rgb(240, 240, 240, 0.6);\n    --minimap-mask-stroke-color-default: none;\n    --minimap-mask-stroke-width-default: 1;\n\n    --controls-button-background-color-default: #fefefe;\n    --controls-button-background-color-hover-default: #f4f4f4;\n    --controls-button-color-default: inherit;\n    --controls-button-color-hover-default: inherit;\n    --controls-button-border-color-default: #eee;\n  }\n</style>\n","<script>import { onDestroy, setContext } from 'svelte';\nimport { createStore, key } from '../../store';\nexport let initialNodes = undefined;\nexport let initialEdges = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let fitView = undefined;\nexport let nodeOrigin = undefined;\nconst store = createStore({\n    nodes: initialNodes,\n    edges: initialEdges,\n    width: initialWidth,\n    height: initialHeight,\n    nodeOrigin,\n    fitView\n});\nsetContext(key, {\n    getStore: () => store\n});\nonDestroy(() => {\n    store.reset();\n});\n</script>\n\n<slot />\n","<script>import cc from 'classcat';\nlet className = undefined;\nlet bgColor = undefined;\nlet bgColorHover = undefined;\nlet color = undefined;\nlet colorHover = undefined;\nlet borderColor = undefined;\nexport { className as class };\n</script>\n\n<button\n  type=\"button\"\n  on:click\n  class={cc(['svelte-flow__controls-button', className])}\n  style:--xy-controls-button-background-color-props={bgColor}\n  style:--xy-controls-button-background-color-hover-props={bgColorHover}\n  style:--xy-controls-button-color-props={color}\n  style:--xy-controls-button-color-hover-props={colorHover}\n  style:--xy-controls-button-border-color-props={borderColor}\n  {...$$restProps}\n>\n  <slot class=\"button-svg\" />\n</button>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n  <path d=\"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 5\">\n  <path d=\"M0 0h32v4.2H0z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\">\n  <path\n    d=\"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"\n  />\n</svg>\n","<script>import cc from 'classcat';\nimport Panel from '../../container/Panel/Panel.svelte';\nimport { useStore } from '../../store';\nimport ControlButton from './ControlButton.svelte';\nimport PlusIcon from './Icons/Plus.svelte';\nimport MinusIcon from './Icons/Minus.svelte';\nimport FitViewIcon from './Icons/Fit.svelte';\nimport LockIcon from './Icons/Lock.svelte';\nimport UnlockIcon from './Icons/Unlock.svelte';\nexport let position = 'bottom-left';\nexport let showZoom = true;\nexport let showFitView = true;\nexport let showLock = true;\nexport let buttonBgColor = undefined;\nexport let buttonBgColorHover = undefined;\nexport let buttonColor = undefined;\nexport let buttonColorHover = undefined;\nexport let buttonBorderColor = undefined;\nexport let ariaLabel = undefined;\nexport let style = undefined;\nexport let orientation = 'vertical';\nexport let fitViewOptions = undefined;\nlet className = '';\nexport { className as class };\nconst { zoomIn, zoomOut, fitView, viewport, minZoom, maxZoom, nodesDraggable, nodesConnectable, elementsSelectable } = useStore();\nconst buttonProps = {\n    bgColor: buttonBgColor,\n    bgColorHover: buttonBgColorHover,\n    color: buttonColor,\n    colorHover: buttonColorHover,\n    borderColor: buttonBorderColor\n};\n$: isInteractive = $nodesDraggable || $nodesConnectable || $elementsSelectable;\n$: minZoomReached = $viewport.zoom <= $minZoom;\n$: maxZoomReached = $viewport.zoom >= $maxZoom;\nconst onZoomInHandler = () => {\n    zoomIn();\n};\nconst onZoomOutHandler = () => {\n    zoomOut();\n};\nconst onFitViewHandler = () => {\n    fitView(fitViewOptions);\n};\nconst onToggleInteractivity = () => {\n    isInteractive = !isInteractive;\n    nodesDraggable.set(isInteractive);\n    nodesConnectable.set(isInteractive);\n    elementsSelectable.set(isInteractive);\n};\n$: orientationClass = orientation === 'horizontal' ? 'horizontal' : 'vertical';\n</script>\n\n<Panel\n  class={cc(['svelte-flow__controls', orientationClass, className])}\n  {position}\n  data-testid=\"svelte-flow__controls\"\n  aria-label={ariaLabel ?? 'Svelte Flow controls'}\n  {style}\n>\n  <slot name=\"before\" />\n  {#if showZoom}\n    <ControlButton\n      on:click={onZoomInHandler}\n      class=\"svelte-flow__controls-zoomin\"\n      title=\"zoom in\"\n      aria-label=\"zoom in\"\n      disabled={maxZoomReached}\n      {...buttonProps}\n    >\n      <PlusIcon />\n    </ControlButton>\n    <ControlButton\n      on:click={onZoomOutHandler}\n      class=\"svelte-flow__controls-zoomout\"\n      title=\"zoom out\"\n      aria-label=\"zoom out\"\n      disabled={minZoomReached}\n      {...buttonProps}\n    >\n      <MinusIcon />\n    </ControlButton>\n  {/if}\n  {#if showFitView}\n    <ControlButton\n      class=\"svelte-flow__controls-fitview\"\n      on:click={onFitViewHandler}\n      title=\"fit view\"\n      aria-label=\"fit view\"\n      {...buttonProps}\n    >\n      <FitViewIcon />\n    </ControlButton>\n  {/if}\n  {#if showLock}\n    <ControlButton\n      class=\"svelte-flow__controls-interactive\"\n      on:click={onToggleInteractivity}\n      title=\"toggle interactivity\"\n      aria-label=\"toggle interactivity\"\n      {...buttonProps}\n    >\n      {#if isInteractive}<UnlockIcon />{:else}<LockIcon />{/if}\n    </ControlButton>\n  {/if}\n  <slot />\n  <slot name=\"after\" />\n</Panel>\n","export var BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n","<script>import cc from 'classcat';\nexport let radius = 5;\nlet className = '';\nexport { className as class };\n</script>\n\n<circle\n  cx={radius}\n  cy={radius}\n  r={radius}\n  class={cc(['svelte-flow__background-pattern', 'dots', className])}\n/>\n","<script>import cc from 'classcat';\nexport let lineWidth = 1;\nexport let dimensions;\nexport let variant = undefined;\nlet className = '';\nexport { className as class };\n</script>\n\n<path\n  stroke-width={lineWidth}\n  d={`M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`}\n  class={cc(['svelte-flow__background-pattern', variant, className])}\n/>\n","<script labg=\"ts\" context=\"module\">\n  const defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6\n  };\n</script>\n\n<script>import cc from 'classcat';\nimport DotPattern from './DotPattern.svelte';\nimport LinePattern from './LinePattern.svelte';\nimport { useStore } from '../../store';\nimport { BackgroundVariant } from './types';\nexport let id = undefined;\nexport let variant = BackgroundVariant.Dots;\nexport let gap = 20;\nexport let size = 1;\nexport let lineWidth = 1;\nexport let bgColor = undefined;\nexport let patternColor = undefined;\nexport let patternClass = undefined;\nlet className = '';\nexport { className as class };\nconst { viewport, flowId } = useStore();\nconst patternSize = size || defaultSize[variant];\nconst isDots = variant === BackgroundVariant.Dots;\nconst isCross = variant === BackgroundVariant.Cross;\nconst gapXY = Array.isArray(gap) ? gap : [gap, gap];\n$: patternId = `background-pattern-${$flowId}-${id ? id : ''}`;\n$: scaledGap = [gapXY[0] * $viewport.zoom || 1, gapXY[1] * $viewport.zoom || 1];\n$: scaledSize = patternSize * $viewport.zoom;\n$: patternDimensions = (isCross ? [scaledSize, scaledSize] : scaledGap);\n$: patternOffset = isDots\n    ? [scaledSize / 2, scaledSize / 2]\n    : [patternDimensions[0] / 2, patternDimensions[1] / 2];\n</script>\n\n<svg\n  class={cc(['svelte-flow__background', className])}\n  data-testid=\"svelte-flow__background\"\n  style:--xy-background-color-props={bgColor}\n  style:--xy-background-pattern-color-props={patternColor}\n>\n  <pattern\n    id={patternId}\n    x={$viewport.x % scaledGap[0]}\n    y={$viewport.y % scaledGap[1]}\n    width={scaledGap[0]}\n    height={scaledGap[1]}\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform={`translate(-${patternOffset[0]},-${patternOffset[1]})`}\n  >\n    {#if isDots}\n      <DotPattern radius={scaledSize / 2} class={patternClass} />\n    {:else}\n      <LinePattern dimensions={patternDimensions} {variant} {lineWidth} class={patternClass} />\n    {/if}\n  </pattern>\n  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={`url(#${patternId})`} />\n</svg>\n\n<style>\n  .svelte-flow__background {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script>import cc from 'classcat';\nexport let x;\nexport let y;\nexport let width = 0;\nexport let height = 0;\nexport let borderRadius = 5;\nexport let color = undefined;\nexport let shapeRendering;\nexport let strokeColor = undefined;\nexport let strokeWidth = 2;\nexport let selected = false;\nlet className = '';\nexport { className as class };\n</script>\n\n<rect\n  class={cc(['svelte-flow__minimap-node', className])}\n  class:selected\n  {x}\n  {y}\n  rx={borderRadius}\n  ry={borderRadius}\n  {width}\n  {height}\n  style={`${color ? `fill: ${color};` : ''}${strokeColor ? `stroke: ${strokeColor};` : ''}${\n    strokeWidth ? `stroke-width: ${strokeWidth};` : ''\n  }`}\n  shape-rendering={shapeRendering}\n/>\n","import { get } from 'svelte/store';\nimport { XYMinimap } from '@xyflow/system';\nexport default function interactive(domNode, params) {\n    const minimap = XYMinimap({\n        domNode,\n        panZoom: params.panZoom,\n        getTransform: () => {\n            const viewport = get(params.viewport);\n            return [viewport.x, viewport.y, viewport.zoom];\n        },\n        getViewScale: params.getViewScale\n    });\n    function update(params) {\n        minimap.update({\n            translateExtent: params.translateExtent,\n            width: params.width,\n            height: params.height,\n            inversePan: params.inversePan,\n            zoomStep: params.zoomStep,\n            pannable: params.pannable,\n            zoomable: params.zoomable\n        });\n    }\n    return {\n        update,\n        destroy() {\n            minimap.destroy();\n        }\n    };\n}\n","<script context=\"module\">\"use strict\";\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst getAttrFunction = (func) => func instanceof Function ? func : () => func;\n</script>\n\n<script>import cc from 'classcat';\nimport { getBoundsOfRects, getInternalNodesBounds, getNodeDimensions, nodeHasDimensions } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { Panel } from '../../container/Panel';\nimport MinimapNode from './MinimapNode.svelte';\nimport interactive from './interactive';\nexport let position = 'bottom-right';\nexport let ariaLabel = 'Mini map';\nexport let nodeStrokeColor = 'transparent';\nexport let nodeColor = undefined;\nexport let nodeClass = '';\nexport let nodeBorderRadius = 5;\nexport let nodeStrokeWidth = 2;\nexport let bgColor = undefined;\nexport let maskColor = undefined;\nexport let maskStrokeColor = undefined;\nexport let maskStrokeWidth = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let pannable = true;\nexport let zoomable = true;\nexport let inversePan = undefined;\nexport let zoomStep = undefined;\nexport let style = '';\nlet className = '';\nexport { className as class };\nconst defaultWidth = 200;\nconst defaultHeight = 150;\nconst { nodes, nodeLookup, viewport, width: containerWidth, height: containerHeight, flowId, panZoom, translateExtent } = useStore();\nconst nodeColorFunc = nodeColor === undefined ? undefined : getAttrFunction(nodeColor);\nconst nodeStrokeColorFunc = getAttrFunction(nodeStrokeColor);\nconst nodeClassFunc = getAttrFunction(nodeClass);\nconst shapeRendering = \n// @ts-expect-error - TS doesn't know about chrome\ntypeof window === 'undefined' || !!window.chrome ? 'crispEdges' : 'geometricPrecision';\nconst labelledBy = `svelte-flow__minimap-desc-${$flowId}`;\n$: viewBB = {\n    x: -$viewport.x / $viewport.zoom,\n    y: -$viewport.y / $viewport.zoom,\n    width: $containerWidth / $viewport.zoom,\n    height: $containerHeight / $viewport.zoom\n};\nlet boundingRect = viewBB;\n$: {\n    boundingRect =\n        $nodeLookup.size > 0 ? getBoundsOfRects(getInternalNodesBounds($nodeLookup), viewBB) : viewBB;\n    $nodes;\n}\n$: elementWidth = width ?? defaultWidth;\n$: elementHeight = height ?? defaultHeight;\n$: scaledWidth = boundingRect.width / elementWidth;\n$: scaledHeight = boundingRect.height / elementHeight;\n$: viewScale = Math.max(scaledWidth, scaledHeight);\n$: viewWidth = viewScale * elementWidth;\n$: viewHeight = viewScale * elementHeight;\n$: offset = 5 * viewScale;\n$: x = boundingRect.x - (viewWidth - boundingRect.width) / 2 - offset;\n$: y = boundingRect.y - (viewHeight - boundingRect.height) / 2 - offset;\n$: viewboxWidth = viewWidth + offset * 2;\n$: viewboxHeight = viewHeight + offset * 2;\nconst getViewScale = () => viewScale;\n</script>\n\n<Panel\n  {position}\n  style={style + (bgColor ? `;--xy-minimap-background-color-props:${bgColor}` : '')}\n  class={cc(['svelte-flow__minimap', className])}\n  data-testid=\"svelte-flow__minimap\"\n>\n  {#if $panZoom}\n    <svg\n      width={elementWidth}\n      height={elementHeight}\n      viewBox=\"{x} {y} {viewboxWidth} {viewboxHeight}\"\n      class=\"svelte-flow__minimap-svg\"\n      role=\"img\"\n      aria-labelledby={labelledBy}\n      style:--xy-minimap-mask-background-color-props={maskColor}\n      style:--xy-minimap-mask-stroke-color-props={maskStrokeColor}\n      style:--xy-minimap-mask-stroke-width-props={maskStrokeWidth\n        ? maskStrokeWidth * viewScale\n        : undefined}\n      use:interactive={{\n        panZoom: $panZoom,\n        viewport,\n        getViewScale,\n        translateExtent: $translateExtent,\n        width: $containerWidth,\n        height: $containerHeight,\n        inversePan,\n        zoomStep,\n        pannable,\n        zoomable\n      }}\n    >\n      {#if ariaLabel}<title id={labelledBy}>{ariaLabel}</title>{/if}\n\n      {#each $nodes as userNode (userNode.id)}\n        {@const node = $nodeLookup.get(userNode.id)}\n        {#if node && nodeHasDimensions(node)}\n          {@const nodeDimesions = getNodeDimensions(node)}\n          <MinimapNode\n            x={node.internals.positionAbsolute.x}\n            y={node.internals.positionAbsolute.y}\n            {...nodeDimesions}\n            selected={node.selected}\n            color={nodeColorFunc?.(node)}\n            borderRadius={nodeBorderRadius}\n            strokeColor={nodeStrokeColorFunc(node)}\n            strokeWidth={nodeStrokeWidth}\n            {shapeRendering}\n            class={nodeClassFunc(node)}\n          />\n        {/if}\n      {/each}\n      <path\n        class=\"svelte-flow__minimap-mask\"\n        d=\"M{x - offset},{y - offset}h{viewboxWidth + offset * 2}v{viewboxHeight +\n          offset * 2}h{-viewboxWidth - offset * 2}z\n      M{viewBB.x},{viewBB.y}h{viewBB.width}v{viewBB.height}h{-viewBB.width}z\"\n        fill-rule=\"evenodd\"\n        pointer-events=\"none\"\n      />\n    </svg>\n  {/if}\n</Panel>\n","import { isNodeBase, isEdgeBase } from '@xyflow/system';\n/**\n * Test whether an object is useable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nexport const isNode = (element) => isNodeBase(element);\n/**\n * Test whether an object is useable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nexport const isEdge = (element) => isEdgeBase(element);\n","import { get } from 'svelte/store';\nimport { getOverlappingArea, isRectObject, nodeToRect, pointToRendererPoint, getViewportForBounds, getElementsToRemove, rendererPointToPoint, evaluateAbsolutePosition, getNodesBounds } from '@xyflow/system';\nimport { useStore } from '../store';\nimport { isNode } from '../utils';\n/**\n * Hook for accessing the ReactFlow instance.\n *\n * @public\n *\n * @returns helper functions\n */\nexport function useSvelteFlow() {\n    const { zoomIn, zoomOut, fitView, onbeforedelete, snapGrid, viewport, width, height, minZoom, maxZoom, panZoom, nodes, edges, domNode, nodeLookup, nodeOrigin, edgeLookup, connectionLookup } = useStore();\n    const getNodeRect = (node) => {\n        const $nodeLookup = get(nodeLookup);\n        const nodeToUse = isNode(node) ? node : $nodeLookup.get(node.id);\n        const position = nodeToUse.parentId\n            ? evaluateAbsolutePosition(nodeToUse.position, nodeToUse.measured, nodeToUse.parentId, $nodeLookup, get(nodeOrigin))\n            : nodeToUse.position;\n        const nodeWithPosition = {\n            id: nodeToUse.id,\n            position,\n            width: nodeToUse.measured?.width ?? nodeToUse.width,\n            height: nodeToUse.measured?.height ?? nodeToUse.height,\n            data: nodeToUse.data\n        };\n        return nodeToRect(nodeWithPosition);\n    };\n    const updateNode = (id, nodeUpdate, options = { replace: false }) => {\n        const node = get(nodeLookup).get(id)?.internals.userNode;\n        if (!node) {\n            return;\n        }\n        const nextNode = typeof nodeUpdate === 'function' ? nodeUpdate(node) : nodeUpdate;\n        if (options.replace) {\n            nodes.update((nds) => nds.map((node) => {\n                if (node.id === id) {\n                    return isNode(nextNode) ? nextNode : { ...node, ...nextNode };\n                }\n                return node;\n            }));\n        }\n        else {\n            Object.assign(node, nextNode);\n            nodes.update((nds) => nds);\n        }\n    };\n    const getInternalNode = (id) => get(nodeLookup).get(id);\n    return {\n        zoomIn,\n        zoomOut,\n        getInternalNode,\n        getNode: (id) => getInternalNode(id)?.internals.userNode,\n        getNodes: (ids) => (ids === undefined ? get(nodes) : getElements(get(nodeLookup), ids)),\n        getEdge: (id) => get(edgeLookup).get(id),\n        getEdges: (ids) => (ids === undefined ? get(edges) : getElements(get(edgeLookup), ids)),\n        setZoom: (zoomLevel, options) => {\n            const currentPanZoom = get(panZoom);\n            return currentPanZoom\n                ? currentPanZoom.scaleTo(zoomLevel, { duration: options?.duration })\n                : Promise.resolve(false);\n        },\n        getZoom: () => get(viewport).zoom,\n        setViewport: async (nextViewport, options) => {\n            const currentViewport = get(viewport);\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            await currentPanZoom.setViewport({\n                x: nextViewport.x ?? currentViewport.x,\n                y: nextViewport.y ?? currentViewport.y,\n                zoom: nextViewport.zoom ?? currentViewport.zoom\n            }, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        getViewport: () => get(viewport),\n        setCenter: async (x, y, options) => {\n            const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : get(maxZoom);\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            await currentPanZoom.setViewport({\n                x: get(width) / 2 - x * nextZoom,\n                y: get(height) / 2 - y * nextZoom,\n                zoom: nextZoom\n            }, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        fitView,\n        fitBounds: async (bounds, options) => {\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            const viewport = getViewportForBounds(bounds, get(width), get(height), get(minZoom), get(maxZoom), options?.padding ?? 0.1);\n            await currentPanZoom.setViewport(viewport, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        getIntersectingNodes: (nodeOrRect, partially = true, nodesToIntersect) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return [];\n            }\n            return (nodesToIntersect || get(nodes)).filter((n) => {\n                const internalNode = get(nodeLookup).get(n.id);\n                if (!internalNode || (!isRect && n.id === nodeOrRect.id)) {\n                    return false;\n                }\n                const currNodeRect = nodeToRect(internalNode);\n                const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n                const partiallyVisible = partially && overlappingArea > 0;\n                return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n            });\n        },\n        isNodeIntersecting: (nodeOrRect, area, partially = true) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return false;\n            }\n            const overlappingArea = getOverlappingArea(nodeRect, area);\n            const partiallyVisible = partially && overlappingArea > 0;\n            return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n        },\n        deleteElements: async ({ nodes: nodesToRemove = [], edges: edgesToRemove = [] }) => {\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove,\n                edgesToRemove,\n                nodes: get(nodes),\n                edges: get(edges),\n                onBeforeDelete: get(onbeforedelete)\n            });\n            if (matchingNodes) {\n                nodes.update((nds) => nds.filter((node) => !matchingNodes.some(({ id }) => id === node.id)));\n            }\n            if (matchingEdges) {\n                edges.update((eds) => eds.filter((edge) => !matchingEdges.some(({ id }) => id === edge.id)));\n            }\n            return {\n                deletedNodes: matchingNodes,\n                deletedEdges: matchingEdges\n            };\n        },\n        screenToFlowPosition: (position, options = { snapToGrid: true }) => {\n            const _domNode = get(domNode);\n            if (!_domNode) {\n                return position;\n            }\n            const _snapGrid = options.snapToGrid ? get(snapGrid) : false;\n            const { x, y, zoom } = get(viewport);\n            const { x: domX, y: domY } = _domNode.getBoundingClientRect();\n            const correctedPosition = {\n                x: position.x - domX,\n                y: position.y - domY\n            };\n            return pointToRendererPoint(correctedPosition, [x, y, zoom], _snapGrid !== null, _snapGrid || [1, 1]);\n        },\n        /**\n         *\n         * @param position\n         * @returns\n         */\n        flowToScreenPosition: (position) => {\n            const _domNode = get(domNode);\n            if (!_domNode) {\n                return position;\n            }\n            const { x, y, zoom } = get(viewport);\n            const { x: domX, y: domY } = _domNode.getBoundingClientRect();\n            const rendererPosition = rendererPointToPoint(position, [x, y, zoom]);\n            return {\n                x: rendererPosition.x + domX,\n                y: rendererPosition.y + domY\n            };\n        },\n        toObject: () => {\n            return {\n                nodes: get(nodes).map((node) => ({\n                    ...node,\n                    // we want to make sure that changes to the nodes object that gets returned by toObject\n                    // do not affect the nodes object\n                    position: { ...node.position },\n                    data: { ...node.data }\n                })),\n                edges: get(edges).map((edge) => ({ ...edge })),\n                viewport: { ...get(viewport) }\n            };\n        },\n        updateNode,\n        updateNodeData: (id, dataUpdate, options) => {\n            const node = get(nodeLookup).get(id)?.internals.userNode;\n            if (!node) {\n                return;\n            }\n            const nextData = typeof dataUpdate === 'function' ? dataUpdate(node) : dataUpdate;\n            node.data = options?.replace ? nextData : { ...node.data, ...nextData };\n            nodes.update((nds) => nds);\n        },\n        getNodesBounds: (nodes) => {\n            const _nodeLookup = get(nodeLookup);\n            const _nodeOrigin = get(nodeOrigin);\n            return getNodesBounds(nodes, { nodeLookup: _nodeLookup, nodeOrigin: _nodeOrigin });\n        },\n        getHandleConnections: ({ type, id, nodeId }) => Array.from(get(connectionLookup)\n            .get(`${nodeId}-${type}-${id ?? null}`)\n            ?.values() ?? []),\n        viewport\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getElements(lookup, ids) {\n    const result = [];\n    for (const id of ids) {\n        const item = lookup.get(id);\n        if (item) {\n            const element = 'internals' in item ? item.internals?.userNode : item;\n            result.push(element);\n        }\n    }\n    return result;\n}\n","<script>\r\n  export let width = \"25px\";\r\n  export let height = \"25px\";\r\n</script>\r\n\r\n<svg\r\n  fill=\"none\"\r\n  width= {width}\r\n  height= {height}\r\n  viewBox=\"0 0 24 24\"\r\n  xmlns=\"http://www.w3.org/2000/svg\"\r\n>\r\n  <path\r\n    d=\"M13 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V11\"\r\n    stroke=\"#000000\"\r\n    stroke-width=\"2\"\r\n    stroke-linecap=\"round\"\r\n    stroke-linejoin=\"round\"\r\n  />\r\n  <path\r\n    d=\"M4 16L8.29289 11.7071C8.68342 11.3166 9.31658 11.3166 9.70711 11.7071L13 15M13 15L15.7929 12.2071C16.1834 11.8166 16.8166 11.8166 17.2071 12.2071L20 15M13 15L15.25 17.25\"\r\n    stroke=\"#000000\"\r\n    stroke-width=\"2\"\r\n    stroke-linecap=\"round\"\r\n    stroke-linejoin=\"round\"\r\n  />\r\n  <path\r\n    d=\"M18 3V8M18 8L16 6M18 8L20 6\"\r\n    stroke=\"#000000\"\r\n    stroke-width=\"2\"\r\n    stroke-linecap=\"round\"\r\n    stroke-linejoin=\"round\"\r\n  />\r\n</svg>\r\n","<script>\n  import { toPng } from 'html-to-image';\n  import { getNodesBounds, getViewportForBounds } from '@xyflow/svelte';\n  import DownloadImg from \"./icons/download-image.svelte\"\n\n  export let nodes=[];\n  export let fileName = \"\";\n\n  const imageWidth = 1024;\n  const imageHeight = 768;\n\n  function handleClick() {\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      console.error('No nodes available to generate image.');\n      return; // Exit if there are no nodes\n    }\n    const nodesBounds = getNodesBounds(nodes);\n    const viewport = getViewportForBounds(nodesBounds, imageWidth, imageHeight, 0.5, 2.0, 0.2);\n\n    const viewportDomNode = document.querySelector('.svelte-flow__viewport');\n\n    if (viewport) {\n      toPng(viewportDomNode, {\n        // backgroundColor: '#1a365d', //to make it transparent\n        width: imageWidth,\n        height: imageHeight,\n        style: {\n          width: `${imageWidth}px`,\n          height: `${imageHeight}px`,\n          transform: `translate(${viewport.x}px, ${viewport.y}px) scale(${viewport.zoom})`\n        }\n      }).then((dataUrl) => {\n        const link = document.createElement('a');\n        link.download = `${fileName || ''}_solothought-flowchart.png`;\n        link.href = dataUrl;\n        link.click();\n      });\n    }\n  }\n</script>\n\n<!-- <Panel position=\"top-right\"> -->\n  <button {...$$restProps} on:click={handleClick} alt=\"save as image\" placeholder=\"save chart as image\"><DownloadImg /></button>\n<!-- </Panel> -->","<script>\n  export let width = \"25px\";\n  export let height = \"25px\";\n</script>\n\n<svg\n  fill=\"#000000\"\n  width={width}\n  height={height}\n  viewBox=\"0 0 32 32\"\n  id=\"icon\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <defs>\n    <style>\n      .cls-1 {\n        fill: none;\n      }\n    </style>\n  </defs>\n  <title>fork</title>\n  <path\n    d=\"M26,18a3.9955,3.9955,0,0,0-3.858,3H18a3.0033,3.0033,0,0,1-3-3V14a4.9514,4.9514,0,0,0-1.0256-3H22.142a4,4,0,1,0,0-2H9.858a4,4,0,1,0,0,2H10a3.0033,3.0033,0,0,1,3,3v4a5.0059,5.0059,0,0,0,5,5h4.142A3.9935,3.9935,0,1,0,26,18ZM26,8a2,2,0,1,1-2,2A2.0023,2.0023,0,0,1,26,8ZM6,12a2,2,0,1,1,2-2A2.002,2.002,0,0,1,6,12ZM26,24a2,2,0,1,1,2-2A2.0027,2.0027,0,0,1,26,24Z\"\n  />\n</svg>","<script>\n  import { createEventDispatcher } from 'svelte';\n  import BranchIcon from './../icons/branch.svelte'; // Import the BranchIcon\n\n  export let paths = [];\n  export let nodes = [];\n  export let selectedFlowIndex = 0;\n\n  // State to manage dropdown visibility\n  let showDropdown = false;\n\n  // Dispatch function to emit custom events\n  const dispatch = createEventDispatcher();\n\n  // Function to toggle dropdown visibility\n  function toggleDropdown() {\n    showDropdown = !showDropdown;\n  }\n\n  // Function to handle path selection\n  function handlePathSelect(pathIndex, mode = \"select\") {\n    if (paths && paths[pathIndex]) {\n      const path = paths[pathIndex];\n      dispatch(\"pathSelected\", {\n        mode: mode,\n        flowIndex: selectedFlowIndex,\n        nodeIndexes: path.filter(nodeId => nodeId !== -1) // Filter out the -1 (end of path)\n      });\n    }\n    showDropdown = false; // Hide the dropdown after selection\n  }\n</script>\n\n<div class=\"paths-dropdown-container\">\n  <!-- BranchIcon Button -->\n  <button on:click={toggleDropdown}>\n    <BranchIcon />\n  </button>\n\n  <!-- Dropdown -->\n  {#if showDropdown && paths.length > 0}\n    <div class=\"paths-dropdown\">\n      {#each paths as path, index}\n        <div class=\"path-item\">\n          <span on:click={() => handlePathSelect(index, \"play\")}></span> <span on:click={() => handlePathSelect(index)}>Path {index + 1} ({path.length} steps) ends at Step {nodes[path[path.length-1]].id}</span>\n        </div>\n      {/each}\n    </div>\n  {/if}\n</div>\n\n<style>\n  .paths-dropdown-container {\n    position: relative;\n    display: inline-block;\n  }\n\n  .paths-dropdown {\n    position: absolute;\n    top: 100%;\n    /* right: 0; */\n    background-color: white;\n    border: 1px solid #ccc;\n    z-index: 1000;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    min-width: 400px;\n  }\n\n  .path-item {\n    padding: 8px 16px;\n    cursor: pointer;\n  }\n\n  .path-item:hover {\n    background-color: #f0f0f0;\n  }\n</style>","\r\n<script>\r\n  export let width = \"45px\";\r\n  export let height = \"35px\";\r\n</script>\r\n\r\n<svg fill=\"#000000\" height=\"{height}\" width=\"{width}\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \r\n\t viewBox=\"0 0 290 290\" xml:space=\"preserve\">\r\n<g>\r\n\t<path id=\"circle34669\" d=\"M165.862,46.682c-0.688-0.009-1.376-0.009-2.064,0.002c-13.223,0.207-26.518,4.065-38.291,11.84\r\n\t\tc-5.703,3.645-0.079,12.159,5.512,8.344c27.088-17.889,63.28-11.773,82.986,14.023c19.706,25.797,16.09,62.324-8.293,83.754\r\n\t\tc-24.383,21.43-61.073,20.33-84.127-2.525c-4.735-4.798-11.88,2.408-7.041,7.102c23.295,23.094,58.803,27.024,86.25,11.193\r\n\t\tl53.785,61.211c1.906,2.169,5.248,2.278,7.291,0.236l26.666-26.666c2.016-2.016,1.941-5.306-0.164-7.229l-60.518-55.236\r\n\t\tc13.22-24.202,11.725-54.835-5.902-77.91C208.123,56.718,187.193,46.961,165.862,46.682z M162.426,75.754\r\n\t\tc-2.76,0.041-4.965,2.31-4.926,5.07v47.5h-7.5v-6.666c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v6.666\r\n\t\th-7.5V92.492c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v35.832h-7.5v-18.332\r\n\t\tc0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v18.332h-7.5v-0.832c0.04-2.818-2.256-5.112-5.074-5.07\r\n\t\tc-2.76,0.041-4.965,2.31-4.926,5.07v0.832h-25v-24.166c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07\r\n\t\tv24.166h-25V86.658c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v41.666h-7.5v-30\r\n\t\tc0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v35c0,2.761,2.239,5,5,5h30v12.5\r\n\t\tc-0.096,6.762,10.096,6.762,10,0v-12.5h25v12.5c-0.096,6.762,10.096,6.762,10,0v-12.5h100c2.761,0,5-2.239,5-5v-17.5\r\n\t\tc0.096-6.762-10.096-6.762-10,0v12.5h-7.5v-47.5C167.54,78.006,165.244,75.712,162.426,75.754z M215.223,115.789\r\n\t\tc-1.379,0.021-2.48,1.156-2.461,2.535c0,26.407-21.355,47.762-47.762,47.762c-3.381-0.048-3.381,5.048,0,5\r\n\t\tc29.109,0,52.762-23.652,52.762-52.762C217.782,116.915,216.633,115.767,215.223,115.789z M222.368,161.264l43.764,39.943\r\n\t\tl-18.584,17.27l-38.402-43.707c1.073-0.84,2.133-1.704,3.168-2.613C216.105,168.824,219.449,165.162,222.368,161.264z\r\n\t\t M269.838,204.59l7.926,7.234l-19.195,19.195l-7.719-8.785L269.838,204.59z\"/>\r\n</g>\r\n</svg>","<script>\n  import AnalysisIcon from './../icons/analysis.svelte';// Import the BranchIcon\n\n  export let stats = {};\n  export let paths = [];\n  // State to manage dropdown visibility\n  let showDropdown = false;\n\n  // Function to toggle dropdown visibility\n  function toggleDropdown() {\n    showDropdown = !showDropdown;\n  }\n\n</script>\n\n<div class=\"analysis-dropdown-container\">\n  <button on:click={toggleDropdown}>\n    <AnalysisIcon />\n  </button>\n\n  <!-- Dropdown -->\n  {#if showDropdown}\n    <div class=\"analysis-dropdown\">\n      <!-- <div class=\"path-item\">\n        <strong>Algorithm Analysis</strong>\n      </div> -->\n      <table class=\"analysis-table\">\n        <tbody>\n          <tr>\n            <td>Cyclomatic Complexity</td>\n            <td>{stats.cyclomaticComplexity}</td>\n          </tr>\n          <tr>\n            <td>Depth</td>\n            <td>{stats.depth}</td>\n          </tr>\n          <tr>\n            <td>Decision Points</td>\n            <td>{stats.decisionPoints}</td>\n          </tr>\n          <tr>\n            <td>Number of Steps</td>\n            <td>{stats.stepsCount}</td>\n          </tr>\n          <tr>\n            <td>Loop Complexity</td>\n            <td>O(n<sup>{stats.nestingLoops.length}</sup>)</td>\n          </tr>\n          <tr>\n            <td>Shortest path has</td>\n            <td>{paths[0].length} Steps</td>\n          </tr>\n          <tr>\n            <td>Longest path has</td>\n            <td>{paths[paths.length-1].length} Steps</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  {/if}\n</div>\n\n<style>\n  .analysis-dropdown-container {\n    position: relative;\n    display: inline-block;\n  }\n\n  .analysis-dropdown {\n    position: absolute;\n    top: 100%;\n    /* right: 0; */\n    background-color: white;\n    border: 1px solid #ccc;\n    z-index: 1000;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    min-width: 400px;\n  }\n\n.analysis-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 10px;\n}\n\n</style>","<script>\n  // Reactive state to track popup visibility\n  let isPopupVisible = false;\n\n  // Function to toggle popup visibility\n  function togglePopup() {\n    isPopupVisible = !isPopupVisible;\n  }\n\n  // Function to close the popup when clicking outside\n  function closePopup(event) {\n    if (event.target === event.currentTarget) {\n      isPopupVisible = false;\n    }\n  }\n</script>\n\n<style>\n  .help-link {\n    color: blue;\n    text-decoration: underline;\n    cursor: pointer;\n  }\n\n  .popup-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n  }\n\n  .popup-box {\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    max-width: 700px;\n    width: 100%;\n  }\n  .help-table {\n    /* width: 100%; */\n    border-collapse: collapse;\n    margin: 10px;\n  }\n  .help-table td{\n    min-width: 200px;\n  }\n</style>\n\n<!-- Help link -->\n<a class=\"help-link\" on:click={togglePopup}>Help</a>\n\n<!-- Popup container -->\n{#if isPopupVisible}\n  <div class=\"popup-container\" on:click={closePopup}>\n    <div class=\"popup-box\">\n      <p><a href=\"https://github.com/NaturalIntelligence/text2obj\" target=\"_blank\">Algorithm Syntax</a></p>\n      <div>\n        <h3>Hover a Node</h3>\n        <table class=\"help-table\">\n          <tbody>\n            <tr>\n              <td>with <kbd>a</kbd></td>\n              <td>Highlight all the paths passing through</td>\n            </tr>\n            <tr>\n              <td>with <kbd>q</kbd></td>\n              <td>Highlight all the steps after</td>\n            </tr>\n            <tr>\n              <td>with <kbd>b</kbd></td>\n              <td>Highlight all the steps before</td>\n            </tr>\n            <tr>\n              <td>with <kbd>s</kbd></td>\n              <td>Highlight shortest path passing through</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <small>Keep the key held and hover out from the node to remove the selection.</small>\n      <div>\n        <h3>Click a Node</h3>\n        <table class=\"help-table\">\n          <tbody>\n            <tr>\n              <td>No key</td>\n              <td>Expand/Collapse child steps</td>\n            </tr>\n            <tr>\n              <td>with <kbd>]</kbd></td>\n              <td>Collapse all nested branches</td>\n            </tr>\n            <tr>\n              <td>with <kbd>[</kbd></td>\n              <td>Expand all nested branches</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n{/if}","<script>\n  export let width = \"25px\";\n  export let height = \"25px\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width={width}\n  height={height}\n  viewBox=\"-0.5 -0.5 104 104\"\n  ><defs\n    ><style type=\"text/css\">\n@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;\n    </style></defs\n  ><rect\n    fill=\"#ffffff\"\n    width=\"100%\"\n    height=\"100%\"\n    x=\"0\"\n    y=\"0\"\n    style=\"fill: light-dark(#ffffff, var(--ge-dark-color, #121212));\"\n  /><g\n    ><g data-cell-id=\"0\"\n      ><g data-cell-id=\"1\"\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-1\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-2\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-3\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-4\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-5\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-6\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-7\"\n          ><g\n            ><rect\n              x=\"2\"\n              y=\"2\"\n              width=\"100\"\n              height=\"100\"\n              rx=\"13\"\n              ry=\"13\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              pointer-events=\"all\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-10\"\n          ><g\n            ><path\n              d=\"M 18 28 L 88 28\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-14\"\n          ><g\n            ><path\n              d=\"M 18 44 L 88 44\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-27\"\n          ><g\n            ><path\n              d=\"M 18 60 L 88 60\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-28\"\n          ><g\n            ><path\n              d=\"M 18 76 L 88 76\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-30\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-31\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-32\" /></g\n      ></g\n    ></g\n  ></svg\n>\n","<script>\n  export let width = \"25px\";\n  export let height = \"25px\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width={width}\n  height={height}\n  viewBox=\"-0.5 -0.5 104 104\"\n  ><defs\n    ><style type=\"text/css\">\n@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;\n    </style></defs\n  ><rect\n    fill=\"#ffffff\"\n    width=\"100%\"\n    height=\"100%\"\n    x=\"0\"\n    y=\"0\"\n    style=\"fill: light-dark(#ffffff, var(--ge-dark-color, #121212));\"\n  /><g\n    ><g data-cell-id=\"0\"\n      ><g data-cell-id=\"1\"\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-1\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-2\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-3\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-4\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-5\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-6\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-7\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-10\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-14\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-27\"\n        /><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-28\" /><g\n          data-cell-id=\"9eGFOFwpmL9Wt3psQl19-30\"\n          ><g\n            ><rect\n              x=\"2\"\n              y=\"2\"\n              width=\"100\"\n              height=\"100\"\n              rx=\"13\"\n              ry=\"13\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              pointer-events=\"all\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-31\"\n          ><g\n            ><path\n              d=\"M 18 31 L 88 31\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ><g data-cell-id=\"9eGFOFwpmL9Wt3psQl19-32\"\n          ><g\n            ><path\n              d=\"M 18 47 L 88 47\"\n              fill=\"none\"\n              stroke=\"#000000\"\n              stroke-width=\"4\"\n              stroke-miterlimit=\"10\"\n              pointer-events=\"stroke\"\n              style=\"stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));\"\n            /></g\n          ></g\n        ></g\n      ></g\n    ></g\n  ></svg\n>\n","<script>\n  export let width = \"24px\";\n  export let height = \"24px\";\n</script>\n<svg width={width} height={height} viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    \n    <title>focus_point_round [#844]</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n\n</defs>\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g id=\"Dribbble-Light-Preview\" transform=\"translate(-300.000000, -4439.000000)\" fill=\"#000000\">\n            <g id=\"icons\" transform=\"translate(56.000000, 160.000000)\">\n                <path d=\"M264,4281 L264,4286 C264,4286.552 263.552,4287 263,4287 C262.448,4287 262,4286.552 262,4286 L262,4282 C262,4281.448 261.552,4281 261,4281 L257,4281 C256.448,4281 256,4280.552 256,4280 C256,4279.448 256.448,4279 257,4279 L262,4279 C263.105,4279 264,4279.895 264,4281 L264,4281 Z M262,4299 L257,4299 C256.448,4299 256,4298.552 256,4298 C256,4297.448 256.448,4297 257,4297 L261,4297 C261.552,4297 262,4296.552 262,4296 L262,4292 C262,4291.448 262.448,4291 263,4291 C263.552,4291 264,4291.448 264,4292 L264,4297 C264,4298.105 263.105,4299 262,4299 L262,4299 Z M244,4297 L244,4292 C244,4291.448 244.448,4291 245,4291 C245.552,4291 246,4291.448 246,4292 L246,4296 C246,4296.552 246.448,4297 247,4297 L251,4297 C251.552,4297 252,4297.448 252,4298 C252,4298.552 251.552,4299 251,4299 L246,4299 C244.895,4299 244,4298.105 244,4297 L244,4297 Z M244,4286 L244,4281 C244,4279.895 244.895,4279 246,4279 L251,4279 C251.552,4279 252,4279.448 252,4280 C252,4280.552 251.552,4281 251,4281 L247,4281 C246.448,4281 246,4281.448 246,4282 L246,4286 C246,4286.552 245.552,4287 245,4287 C244.448,4287 244,4286.552 244,4286 L244,4286 Z M244.01,4289 L244,4289.01 L244,4288.99 L244.01,4289 Z M254,4291 C252.897,4291 252,4290.103 252,4289 C252,4287.897 252.897,4287 254,4287 C255.103,4287 256,4287.897 256,4289 C256,4290.103 255.103,4291 254,4291 L254,4291 Z M257.859,4290 L259,4290 C259.552,4290 260,4289.552 260,4289 C260,4288.448 259.552,4288 259,4288 L257.859,4288 C257.496,4286.599 256.401,4285.504 255,4285.141 L255,4284 C255,4283.448 254.552,4283 254,4283 C253.448,4283 253,4283.448 253,4284 L253,4285.141 C251.599,4285.504 250.504,4286.599 250.141,4288 L249,4288 C248.448,4288 248,4288.448 248,4289 C248,4289.552 248.448,4290 249,4290 L250.141,4290 C250.504,4291.401 251.599,4292.496 253,4292.859 L253,4294 C253,4294.552 253.448,4295 254,4295 C254.552,4295 255,4294.552 255,4294 L255,4292.859 C256.401,4292.496 257.496,4291.401 257.859,4290 L257.859,4290 Z\" id=\"focus_point_round-[#844]\">\n\n</path>\n            </g>\n        </g>\n    </g>\n</svg>","<script>\n  import DownloadButton from './../DownloadButton.svelte';\n  import PathsDropdown from './PathsDropdown.svelte';\n  import AnalysisDropdown from './AnalysisDropdown.svelte';\n  import Help from './Help.svelte';\n  import LongTextIcon from './../icons/longText.svelte';\n  import ShortTextIcon from './../icons/shortText.svelte';\n  import FocusIcon from './../icons/focus.svelte';\n  \n\n  export let flowsData = [];\n  export let selectedFlowIndex;\n  export let flowName = \"\";\n  export let hideMsgDetail = true;\n  export let nodes = [];\n  export let handleFlowChange;\n  export let hideStepMsgDetail;\n  export let focusOn = true;\n\n  // Dispatch function to emit custom events\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n\n  // Function to handle path selection from PathsDropdown\n  function handlePathSelect(event) {\n    dispatch('pathSelected', event.detail);\n  }\n\n  function toggleFocus(){\n    focusOn = !focusOn;\n  }\n\n</script>\n\n<div class=\"st-toolbox\">\n  <select class=\"st-flow-chart-tool\" on:change={handleFlowChange} bind:value={selectedFlowIndex}>\n    {#each flowsData as flow, index}\n      <option value={index}>{flow.flowName}</option>\n    {/each}\n  </select>\n  <button on:click={hideStepMsgDetail}>\n    {#if !hideMsgDetail}\n      <LongTextIcon height=\"24px\" />\n    {/if}\n    {#if hideMsgDetail}\n      <ShortTextIcon height=\"24px\" />\n    {/if}\n  </button>\n  <DownloadButton {nodes} fileName={flowName} />\n  \n  {#if flowsData[selectedFlowIndex] && flowsData[selectedFlowIndex].paths}\n    <PathsDropdown\n      {nodes}\n      paths={flowsData[selectedFlowIndex].paths}\n      selectedFlowIndex={selectedFlowIndex}\n      on:pathSelected={handlePathSelect}\n    />\n  {/if}\n  {#if flowsData[selectedFlowIndex] && flowsData[selectedFlowIndex].stats}\n    <AnalysisDropdown  \n      stats={flowsData[selectedFlowIndex].stats}  \n      paths={flowsData[selectedFlowIndex].paths}\n    />\n  {/if}\n  <button on:click={toggleFocus} class=\"{focusOn?'':'passive'}\">\n    <FocusIcon/>\n  </button>\n  <Help />\n</div>\n\n<style>\n  .passive {\n    opacity: 50%;\n  }\n  :global(.st-toolbox) {\n    height: 50px;\n    /* padding: 0.2rem 0.5rem; */\n    display: flex;\n    align-items: center; /* Ensures vertical alignment */\n    gap: 0.5rem;         /* Adds consistent spacing */\n  }\n  :global(.st-toolbox button) {\n    background-color: #FFFFFF;\n    border-width: 0;\n    padding: 5px;\n    cursor: pointer;\n  }\n  :global(.st-toolbox button:hover) {\n    outline: 1px dashed black;\n  }\n  .st-flow-chart-tool {\n    height: 32px;         /* Match button height */\n    padding: 5px 10px;    /* Adjust padding */\n    border: 1px solid #ccc; /* Optional: To match button border */\n    border-radius: 4px;   /* Optional: For consistency */\n  }\n  .st-flow-chart-tool,\n  .st-toolbox button {\n      vertical-align: middle;\n  }\n</style>","<script>\n  import {\n    useSvelteFlow\n  } from '@xyflow/svelte';\n\n  let svelteFlowElement;\n  export let selection;\n  export let nodes;\n  export let focusOn = true;\n\n  function calculateBoundingBox(selectedNodeIds, nodes) {\n    if (!selectedNodeIds || selectedNodeIds.length === 0) return null;\n\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    selectedNodeIds.forEach((nodeId) => {\n      const node = nodes.find((n) => n.id === nodeId);\n      if (node) {\n        const { x, y, width, height } = node;\n        minX = Math.min(minX, x);\n        minY = Math.min(minY, y);\n        maxX = Math.max(maxX, x + width);\n        maxY = Math.max(maxY, y + height);\n      }\n    });\n\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY,\n    };\n  }\n\n  function fitViewToSelection(selectedNodeIds, nodes) {\n    // const boundingBox = calculateBoundingBox(selectedNodeIds, nodes);\n    // if (boundingBox) {\n    if (selectedNodeIds.length > 0) {\n      const nd = nodes.filter(node => selectedNodeIds.includes(node.id));\n      // console.log(svelteFlowElement.getViewport())\n      //TODO: Don't change view if node is already in the view\n      svelteFlowElement.fitView({\n        nodes: nd,\n        maxZoom: 1,\n        duration: 200,\n        // includeHiddenNodes: true\n      });\n    }\n  }\n\n  $: {\n    if (selection && selection.nodeIds && focusOn) {\n      fitViewToSelection(selection.nodeIds, nodes);\n    }\n  }\n\n  $: {\n    svelteFlowElement = useSvelteFlow();\n  }\n</script>\n","export let nodeSize = {width: 180, height:72}","<script>\n  export let width = \"25px\";\n  export let height = \"25px\";\n</script>\n<svg\n  fill=\"#000000\"\n  width={width}\n  height={height}\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M4.70710678,18 L6.85355339,20.1464466 C7.04881554,20.3417088 7.04881554,20.6582912 6.85355339,20.8535534 C6.65829124,21.0488155 6.34170876,21.0488155 6.14644661,20.8535534 L3.14644661,17.8535534 C2.95118446,17.6582912 2.95118446,17.3417088 3.14644661,17.1464466 L6.14644661,14.1464466 C6.34170876,13.9511845 6.65829124,13.9511845 6.85355339,14.1464466 C7.04881554,14.3417088 7.04881554,14.6582912 6.85355339,14.8535534 L4.70710678,17 L18.5,17 C19.3284271,17 20,16.3284271 20,15.5 L20,12.5 C20,12.2238576 20.2238576,12 20.5,12 C20.7761424,12 21,12.2238576 21,12.5 L21,15.5 C21,16.8807119 19.8807119,18 18.5,18 L4.70710678,18 Z M19.2928932,7 L17.1464466,4.85355339 C16.9511845,4.65829124 16.9511845,4.34170876 17.1464466,4.14644661 C17.3417088,3.95118446 17.6582912,3.95118446 17.8535534,4.14644661 L20.8535534,7.14644661 C21.0488155,7.34170876 21.0488155,7.65829124 20.8535534,7.85355339 L17.8535534,10.8535534 C17.6582912,11.0488155 17.3417088,11.0488155 17.1464466,10.8535534 C16.9511845,10.6582912 16.9511845,10.3417088 17.1464466,10.1464466 L19.2928932,8 L5.5,8 C4.67157288,8 4,8.67157288 4,9.5 L4,12.5 C4,12.7761424 3.77614237,13 3.5,13 C3.22385763,13 3,12.7761424 3,12.5 L3,9.5 C3,8.11928813 4.11928813,7 5.5,7 L19.2928932,7 Z\"\n  />\n</svg>\n","<script>\n  export let size = \"25\";\n  // export let height = \"25px\";\n</script>\n\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n\t viewBox=\"0 0 50 50\" xml:space=\"preserve\">\n<circle style=\"fill:#D75A4A;\" cx={size} cy={size} r={size}/>\n<polyline style=\"fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;\" points=\"16,34 25,25 34,16 \n\t\"/>\n<polyline style=\"fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;\" points=\"16,16 25,25 34,34 \n\t\"/>\n</svg>","<script>\n  export let width = \"25px\";\n  export let height = \"25px\";\n</script>\n<svg\n  width={width}\n  height={height}\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M21 9.00001L21 3.00001M21 3.00001H15M21 3.00001L12 12M10 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V14\"\n    stroke=\"#000000\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</svg>\n","<script>\n  import { Handle, Position } from '@xyflow/svelte';\n  import { tick, onMount, afterUpdate } from 'svelte';\n  import { nodeSize } from './../config.js';\n  import BranchIcon from './../icons/branch.svelte';\n  import LoopIcon from './../icons/loop.svelte';\n  import ErrIcon from './../icons/error.svelte';\n  import LinkExternalIcon from './../icons/linkExternal.svelte';\n\n  export const fontSize = {desire: 15, min: 10, max: 80}\n\n  function isOverflow(el) {\n    return el.scrollWidth > el.clientWidth || el.scrollHeight > el.clientHeight;\n  }\n\n  function resizeText(element, parent) {\n    let min = fontSize.min;\n    let max = fontSize.max;\n    let size = min;\n\n    while (min <= max) {\n      size = Math.floor((min + max) / 2);\n      element.style.fontSize = `${size}px`;\n      isOverflow(parent) ? max = --size : min = ++size;\n    }\n\n    element.style.fontSize = `${max}px`;\n  }\n\n  let containerElement;\n  let textElement;\n\n  async function applyFit() {\n    if (containerElement && textElement) {\n      await tick();\n      resizeText(textElement, containerElement);\n    }\n  }\n\n  onMount(async () => {\n    await applyFit();\n  });\n\n  afterUpdate(() => {\n    applyFit();\n  });\n\n\n  export let data;  // Contains the node-specific data\n  export let position;\n  export let id;\n  export let hidden = false;\n</script>\n\n<div style=\"position: absolute;\">\n  {#if data.type === \"LOOP\"}\n    <div class=\"step-icon\">\n      <LoopIcon/>\n    </div>\n  {/if}\n  {#if data.type === \"IF\" || data.type === \"ELSE_IF\"}\n    <div class=\"step-icon\">\n      <BranchIcon/>\n    </div>\n  {/if}\n  {#if data.type === \"ERR\" }\n    <div class=\"step-icon\">\n      <ErrIcon/>\n    </div>\n  {/if}\n  {#if data.type === \"FOLLOW\" }\n    <div class=\"step-icon\">\n      <LinkExternalIcon/>\n    </div>\n  {/if}\n</div>\n\n<div class=\"{data.highlight ? 'hovered' : ''} {data.isEnd ? 'endStep':'step'} {data.type === 'FOLLOW' ? 'clickable' : ''}\">\n  <!-- <Handle class=\"hndl\" id=\"tt\" type=\"target\" position={Position.Top} /> -->\n  <Handle class=\"hndl\" id=\"t\" type=\"target\" position={Position.Top} />\n  <div class=\"step-container\" style=\"width:{nodeSize.width}px; height:{nodeSize.height}px;\" bind:this={containerElement}>\n    <div class=\"msgWrapper\">\n      <p bind:this={textElement}>{data.hideMsgDetail ? data.msg : data.rawMsg}</p>\n    </div>\n  </div>\n  <Handle class=\"hndl\" id=\"b\" type=\"source\" position={Position.Bottom} />\n  <Handle class=\"hndl\" id=\"bt\" type=\"target\" position={Position.Bottom} />\n  <Handle class=\"hndl\" id=\"l\" type=\"source\" position={Position.Left} />\n  <Handle class=\"hndl\" id=\"lt\" type=\"target\" position={Position.Left} />\n  <Handle class=\"hndl\" id=\"r\" type=\"source\" position={Position.Right} />\n  <Handle class=\"hndl\" id=\"rt\" type=\"target\" position={Position.Right} />\n\n  {#if data.type === \"IF\" || data.type === \"ELSE_IF\" || data.type === \"LOOP\"}\n    <div>\n      <span class=\"expand\">{data.collapsable ? '-' : '+'}</span>\n    </div>\n  {/if}\n</div>\n\n<style>\n  .msgWrapper{\n    display: inline-block; \n    width: 100%; \n    height: 100%;\n  }\n  :global(.hndl) {\n    visibility: hidden;\n  }\n  .clickable{\n    cursor: pointer;\n  }\n  .endStep{\n    padding: 5px;\n    border-radius: 5px;\n    background-color: black;\n    color: white;\n    border: 1px solid #555;\n  }\n  .step {\n    padding: 5px;\n    border-radius: 5px;\n    background: white;\n    color: inherit;\n    border: 1px solid #555;\n  }\n\n\n  .step-container {\n    position: relative;\n    /* width: 150px;\n    height: 50px; */\n    text-align: center;\n  }\n\n  .hovered {\n    border: 2px solid #FF4000;\n    background-color: lightgrey;\n    color: inherit;\n  }\n\n  .step-icon{\n    width: 25px;\n    height: 25px;\n    top: -35px;\n    position: absolute;\n  }\n  .expand{\n    color: black;\n    font-size: 1.5rem;\n    top: -15px;\n    right: -20px;\n    position: absolute;\n  }\n</style>\n","/**\n * update a property or state of all or selected nodes\n * @param {object[]} nodes \n * @param {object} globalState \n * @param {object} newProp \n * @param {string[]} selectedNodeIds node ids\n */\nexport function updateProperty(nodes, globalState, newProp = {}, selectedNodeIds = null){\n  if(!selectedNodeIds){\n    nodes.forEach(node => {\n        node.data = {\n          ...node.data,\n          ...globalState,\n          ...newProp\n        };\n    })\n  }else{\n    nodes.forEach(node => {\n      if(selectedNodeIds.has(node.id)){\n        node.data = {\n          ...node.data,\n          ...globalState,\n          ...newProp\n        };\n      }\n    })\n  }\n  return nodes; //for chaining if needed\n}\n\nexport function updatePropertyByIndexes(nodes, globalState, newProp = {}, selectedNodeIndexes = []){\n  selectedNodeIndexes.forEach(index => {\n    nodes[index].data = {\n      ...nodes[index].data,\n      ...globalState,\n      ...newProp\n    }\n  });\n}\n\n","import { \n  MarkerType\n  } from '@xyflow/svelte';\n  import {updateProperty, updatePropertyByIndexes} from './nodeUpdater.js';\n\n\nexport const edgeStyle = \"stroke-width: 2px; stroke: #cac2c2;\";\nexport const highlightedEdgeStyle = \"stroke-width: 2px; stroke: #FF4000\";\nexport const labelStyle = \"font-size: 10px; font-weight: inherit; color: inherit;\";\nexport const highlightedLabelStyle = \"font-size: 16px; font-weight: bold; color: #ff6347;\";\nexport const edgeMarkerStyle = { \n  type: MarkerType.ArrowClosed,\n  width: 20, \n  height: 20, \n  color: '#cac2c2' };\nexport const highlightedEdgeMarkerStyle = { \n  type: MarkerType.ArrowClosed,\n  width: 20, \n  height: 20, \n  color: \"#FF4000\" };\nexport const defaultEdgeOptions = {\n    type: 'smoothstep',\n    markerEnd: edgeMarkerStyle,\n    style: edgeStyle\n  }\nexport class Highlighter{\n  constructor(nodes, edges, nodeState){\n    this.nodes = nodes;\n    this.edges = edges;\n    this.nodeState = nodeState;\n    this.selectedNodes = new Set();\n    this.selectedEdges = new Set();\n  }\n  update(nodes, edges){\n    this.nodes = nodes;\n    this.edges = edges;\n  }\n  selectPath(nodeIds, edgeIds, edgeState = {}){\n    this.selectNodes(nodeIds);\n    if(edgeIds) this.selectEdges(edgeIds, highlightEdge);\n  }\n  \n  selectNodes(selectedIds){\n    updateProperty(this.nodes, this.nodeState, {highlight: true}, selectedIds);\n    this.selectedNodes = selectedIds;\n  }\n  selectNodesByIndexes(selectedIndexes){\n    updatePropertyByIndexes(this.nodes, this.nodeState, {highlight: true}, selectedIndexes);\n    // this.selectedNodes = selectedIds;\n  }\n  selectEdges(selectedIds){\n    updateEdgesStyle(this.edges,  selectedIds, highlightEdge);\n    this.selectedEdges = selectedIds;\n  }\n\n  unselectPath(){\n    this.unselectNodes();\n    if(this.selectedEdges.size > 0) this.unselectEdges(highlightEdge);\n  }\n\n  unselectNodes(){\n    updateProperty(this.nodes, this.nodeState, {highlight: false}, this.selectedNodes);\n    this.selectedNodes.clear();\n  }\n  unselectAllNodes(){\n    updateProperty(this.nodes, this.nodeState, {highlight: false});\n    this.selectedNodes.clear();\n  }\n  unselectEdges(){\n    updateEdgesStyle(this.edges, this.selectedEdges, unhighlightEdge);\n    this.selectedEdges.clear();\n  }\n  unselectAllEdges(){\n    updateEdgesStyle(this.edges, null, unhighlightEdge);\n    this.selectedEdges.clear();\n  }\n\n  toggleEdge(id){\n    if (this.selectedEdges.has(id)) {\n      this.selectedEdges.delete(id);\n      updateEdgesStyle(this.edges, new Set([id]), unhighlightEdge);\n    }else{\n      this.selectedEdges.add(id);\n      updateEdgesStyle(this.edges, new Set([id]), highlightEdge);\n    }\n  }\n}\n\nfunction updateEdgesStyle(edges,edgeIds, cb){\n  if(edgeIds){\n    edges.forEach(edge => {\n      if(edgeIds.has(edge.id)){\n        cb(edge);\n      }\n    })\n  }else{\n    edges.forEach(edge => {\n      cb(edge);\n    })\n  }\n}\n\n/**\n * apply edge and it's marker's style\n * @param {object} edge \n */\nexport function unhighlightEdge(edge){\n  edge.style = edgeStyle;\n  edge.markerEnd = edgeMarkerStyle;\n  edge.labelStyle = labelStyle;\n}\n\n/**\n * apply edge and it's marker's style\n * @param {object} edge \n */\nexport function highlightEdge(edge){\n  edge.style = highlightedEdgeStyle;\n  edge.markerEnd = highlightedEdgeMarkerStyle;\n  edge.labelStyle = highlightedLabelStyle;\n}","export function toggleNodeCollapse(nodes, edges, node, nodesIndex) {\n  toggleHide(nodes, edges,node.data.collapsable,findExpandedChildNodes(nodes, node), node, nodesIndex);\n  node.data = { ...node.data, collapsable: !node.data.collapsable };\n}\n\n/**\n * Find all the indexes whose indent is more than indent of given node \n * @param {[]} nodes \n * @param {object} node \n * @returns {number[]} indexes of nodes[]\n */\nfunction findExpandedChildNodes(nodes, node) {\n  const nodeIds = [];\n  const parentIndent = node.data.indent;\n  \n  for (let i = node.data.index + 1; i < nodes.length; i++) {\n    const currentNode = nodes[i];\n    \n    if (currentNode.data.indent <= parentIndent) break;\n    \n    // If the current node is collapsed, skip all its children\n    if (currentNode.data.collapsable === false) {\n      i = findSiblingOrHigherNodeIndex(nodes,i);\n    }\n    \n    nodeIds.push(currentNode.id);\n  }\n  \n  return nodeIds;\n}\n\n/**\n * Find index of next step of same or higher indent level\n * @param {[]} nodes \n * @param {number} index \n * @returns {number}\n */\nfunction findSiblingOrHigherNodeIndex(nodes, index){\n  const currentIndent = nodes[index].data.indent;\n  for (let i=index+1; i < nodes.length; i++) {\n    const node = nodes[i];\n    if(currentIndent >= node.data.indent) return --i;\n  }\n}\n\n/**\n * Set hidden property of relevant edges and nodes\n * @param {[]} nodes\n * @param {[]} edges \n * @param {boolean} state to set hidden property to hide or show\n * @param {string[]} selectedNodeIds indexes of nodes array\n * @param {string} parentNode node clicked\n */\nfunction toggleHide(nodes, edges, state, selectedNodeIds, parentNode, nodesIndex){\n  //Show/Hide nodes\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    if(selectedNodeIds.includes(node.id))\n      node.hidden = state;\n  }\n\n  //Show/Hide edges\n  if(!state) showEdges(nodes, edges, parentNode, nodesIndex);\n  else hideEdges(nodes, edges,parentNode, nodesIndex);\n}\n\nfunction showEdges(nodes, edges, parentNode, nodesIndex){\n  edges.forEach(edge => {\n    if(!nodes[nodesIndex[edge.target]].hidden && !nodes[nodesIndex[edge.source]].hidden){\n      edge.hidden = false;\n    }else if(edge.source === parentNode.id){\n      edge.hidden = false;\n    }\n  })\n}\n\nfunction hideEdges(nodes, edges, parentNode, nodesIndex){\n  edges.forEach(edge => {\n    if(nodes[nodesIndex[edge.target]].hidden || nodes[nodesIndex[edge.source]].hidden){\n      edge.hidden = true;\n    }else if(edge.source === parentNode.id){\n      edge.hidden = true;\n    }\n  })\n}\n\n/**\n * Collapse all nodes under given node\n * @param {[]} nodes \n * @param {{}} node \n * @returns \n */\nexport function collapseAllChildren(nodes, edges, node, nodesIndex){\n  const nodeIds = [];\n  const parentIndent = node.data.indent;\n  \n  for (let i = node.data.index + 1; i < nodes.length; i++) {\n    const currentNode = nodes[i];\n    \n    if (currentNode.data.indent <= parentIndent) break;\n    \n    if (currentNode.data.collapsable === false || currentNode.data.collapsable === true) {\n      currentNode.data = { ...currentNode.data, collapsable: false };\n    }\n    \n    nodeIds.push(currentNode.id);\n  }\n  \n  toggleHide(nodes, edges,true,nodeIds, node, nodesIndex);\n  node.data = { ...node.data, collapsable: false };\n}\n\nexport function expandAllChildren(nodes, edges, node, nodesIndex){\n  const nodeIds = [];\n  const parentIndent = node.data.indent;\n  \n  for (let i = node.data.index + 1; i < nodes.length; i++) {\n    const currentNode = nodes[i];\n    \n    if (currentNode.data.indent <= parentIndent) break;\n    \n    if (currentNode.data.collapsable === false || currentNode.data.collapsable === true) {\n      currentNode.data = { ...currentNode.data, collapsable: true };\n    }\n    \n    nodeIds.push(currentNode.id);\n  }\n  \n  toggleHide(nodes, edges, false, nodeIds, node, nodesIndex);\n  node.data = { ...node.data, collapsable: true };\n}\n","<script>\n  import { writable } from 'svelte/store';\n  import { onDestroy, createEventDispatcher } from 'svelte';\n  import ViewportAdjuster from './ViewportAdjuster.svelte';\n\n  const dispatch = createEventDispatcher();\n\n  import {\n    SvelteFlow,\n    Controls,\n    Background,\n    MiniMap,\n    SvelteFlowProvider\n  } from '@xyflow/svelte';\n  import '@xyflow/svelte/dist/style.css';\n  import StepNode from './Step.svelte';\n\n  import {\n    getPathsPassingThrough,\n    getStepsBefore,\n    getStepsAfter,\n    getSmallestPath,\n    getLongestPath\n   } from './PathSelector.js';\n\n  import {Highlighter, defaultEdgeOptions} from './Highlighter.js';\n  import { toggleNodeCollapse, collapseAllChildren, expandAllChildren } from './ExpandCollapse.js';\n  const nodeTypes = { step: StepNode };\n\n  export let nodes = [];\n  export let edges = [];\n  export let nodeState = {};\n  export let paths = [];\n  export let nodesIndex = {};\n  export let style = \"\"; // Accept style as a prop\n  export let clazz = \"\"; // Accept class as a prop\n  export let selection = {};\n  export let focusOn = true;\n  export let minimap = true;\n  export let selectedFlowIndex = -1;\n\n  let highlighter = new Highlighter(nodes,edges, nodeState);\n  let nodeStore = writable(nodes);\n  let edgeStore = writable(edges);\n  let selectionKey = -1;\n\n  function highlightPath(event) {\n    const node = event.detail.node;\n\n    let seletedIndexes = null;\n    if(selectionKey !== -1){\n      switch(selectionKey){\n        case 'a': //all\n          seletedIndexes = getPathsPassingThrough(paths, node.data.index);\n          break;\n        case 'q': //steps after\n          seletedIndexes = getStepsAfter(paths,node.data.index);\n          break;\n        case 'b': //steps before\n          seletedIndexes = getStepsBefore(paths,node.data.index);\n          break;\n        case 'l': //longest\n          seletedIndexes = getLongestPath(paths,node.data.index);\n          break;\n        case 's': //smallest\n          seletedIndexes = getSmallestPath(paths,node.data.index);\n          break;\n      }\n      highlighter.unselectAllNodes();\n      highlighter.selectNodesByIndexes(new Set(seletedIndexes));\n      nodeStore.set(nodes);\n      selection = { flowIndex: selectedFlowIndex ,nodeIndexes: seletedIndexes };\n    }\n  }\n\n  function unHighlightPath() {\n    if(selectionKey !== -1){\n      highlighter.unselectAllNodes();\n      nodeStore.set(nodes);\n      selection = { flowIndex: selectedFlowIndex ,nodeIndexes: [] };\n    }\n  }\n\n  function styleEdge(event) {\n    // console.log(event.detail.edge)\n    highlighter.toggleEdge(event.detail.edge.id)\n    edgeStore.set(edges);\n  }\n\n  // Handle key events\n  function handleKeyDown(event) {\n    selectionKey = event.key;\n  }\n\n  function handleKeyUp(event) {\n    selectionKey = -1;\n  }\n\n  // Handle node click\n  function onNodeClick(event) {\n    const node = event.detail.node;\n    // console.log(node);\n    if (node.data.type === \"FOLLOW\") {\n      dispatch('flowChange', { flowName: node.data.msg });\n    } else if (node.data.type === \"IF\" || node.data.type === \"ELSE_IF\" || node.data.type === \"LOOP\") {\n      if(selectionKey === \"]\"){\n        collapseAllChildren(nodes, edges, node, nodesIndex);\n      }else if(selectionKey === \"[\"){\n        expandAllChildren(nodes, edges, node, nodesIndex);\n      }else{\n        toggleNodeCollapse(nodes, edges, node, nodesIndex);\n      }\n      updateStore(nodes,edges);\n    }\n  }\n\n\n\n  // React to changes in selection\n  $: highlighter.nodeState = nodeState;\n  $: {\n    if (selection && selection.nodeIds && selection.nodeIds.length > 0) {\n      highlighter.unselectAllNodes();\n      highlighter.selectNodes( new Set(selection.nodeIds));\n\n      nodeStore.set(nodes);\n    }else if (selection && selection.nodeIndexes && selection.nodeIndexes.length > 0) {\n      highlighter.unselectAllNodes();\n      highlighter.selectNodesByIndexes( new Set(selection.nodeIndexes));\n\n      nodeStore.set(nodes);\n    }\n  }\n\n  export function updateStore(nodes, edges){\n    highlighter.update(nodes, edges);\n    nodeStore.set(nodes);\n    edgeStore.set(edges);\n  }\n\n  // Clean up on component destruction\n  onDestroy(() => {\n    updateStore([],[]);\n  });\n</script>\n\n<svelte:window on:keyup={handleKeyUp} on:keydown={handleKeyDown} />\n\n<div style={style} class={clazz}>\n  <SvelteFlowProvider>\n    <ViewportAdjuster {selection} {nodes} {focusOn}/>\n    <SvelteFlow\n      {nodeTypes}\n      bind:nodes={nodeStore}\n      bind:edges={edgeStore}\n      fitView\n      defaultEdgeOptions={defaultEdgeOptions}\n      on:nodemouseenter={highlightPath}\n      on:nodemouseleave={unHighlightPath}\n      on:nodeclick={onNodeClick}\n      on:edgeclick={styleEdge}\n    >\n      <Controls />\n      <Background />\n      {#if minimap}\n        <MiniMap />\n      {/if}\n    </SvelteFlow>\n  </SvelteFlowProvider>\n</div>","\nexport function getPathsPassingThrough(paths, nodeIndex) {\n  return paths\n      .filter(path => path.includes(String(nodeIndex)))\n      .flat(); // Flatten to return a single array of node IDs\n}\n\nexport function getStepsBefore(paths, nodeId) {\n  return paths\n      .filter(path => path.includes(String(nodeId)))\n      .flatMap(path => {\n          let index = path.indexOf(String(nodeId));\n          return index > 0 ? path.slice(0, index) : [];\n      });\n}\n\nexport function getStepsAfter(paths, nodeId) {\n  return paths\n      .filter(path => path.includes(String(nodeId)))\n      .flatMap(path => {\n          let index = path.indexOf(String(nodeId));\n          return index !== -1 && index < path.length - 1 ? path.slice(index + 1) : [];\n      });\n}\n\n\nexport function getLongestPath(paths, nodeId) {\n  let filteredPaths = paths.filter(path => path.includes(String(nodeId)));\n  if (filteredPaths.length === 0) return [];\n\n  let longestPath = filteredPaths.reduce((longest, current) =>\n      current.length > longest.length ? current : longest\n  );\n  return longestPath;\n}\n\nexport function getSmallestPath(paths, nodeId) {\n  let filteredPaths = paths.filter(path => path.includes(String(nodeId)));\n  if (filteredPaths.length === 0) return [];\n\n  let smallestPath = filteredPaths.reduce((smallest, current) =>\n      current.length < smallest.length ? current : smallest\n  );\n  return smallestPath;\n}\n\n","const generateLinks = require(\"./LinkGenerator\");\n\nconst branchSteps = [\"IF\", \"ELSE_IF\", \"LOOP\", \"ELSE\"];\nconst leavingSteps = [\"GOTO\", \"SKIP\", \"STOP\", \"END\"];\nconst normalSteps = [\"AND\", \"THEN\", \"BUT\", \"FOLLOW\", \"ERR\"];\n\nclass Flow {\n  constructor(name) {\n    this.name = name;\n    this.headers = {};\n    this.steps = []; // Store step detail\n    this.links = {}; // Store links for a step\n    this.leveledSteps = [[]]; // store steps indentation wise\n    // this.index = {};\n    // this.exitSteps = [];\n  }\n}\n\nfunction parse(algoText) {\n  const lines = algoText.split('\\n'); // split and trim lines\n  const flows = [];\n\n  let indexedSteps = {}; //used for GOTO statement\n  let indentLevels = []; //temp to hold indent detail\n  let curIndentLvl = 0;  //temp to hold current indent detail\n  let stepIndex = -1;    //temp\n  let currentFlow = null;\n  let readingHeader = false;\n  //TODO: \n  // - read Flow headers\n\n  lines.forEach((line, i) => {\n    const trimmedLine = line.trim();\n    if (!trimmedLine || trimmedLine[0] === \"#\") return; // Skip empty or comment lines\n    else if (trimmedLine.startsWith(\"FLOW:\")){\n      // complete last flow and start new\n      if(currentFlow) generateLinks(currentFlow.steps, indexedSteps, currentFlow.links);\n      indexedSteps = {}; //reset\n      indentLevels = [];\n      curIndentLvl  = 0;\n      stepIndex = -1\n      currentFlow = new Flow(trimmedLine.substring(6));\n      flows.push(currentFlow);\n      readingHeader = true;\n      return;\n    }else if(readingHeader && trimmedLine.match(/^[a-z]{1,70}:/)) {//reading header\n      const [key, value] = line.split(':');\n      currentFlow.headers[key.trim()] = value.trim();\n      return;\n    }else{\n      readingHeader = false;\n    }\n\n    stepIndex++;\n\n    const indent = line.search(/\\S/);\n    let curIndentVal;\n    if(indentLevels[curIndentLvl]!== undefined){\n      curIndentVal = indentLevels[curIndentLvl];\n    }else{\n      curIndentVal = indent;\n      indentLevels[curIndentLvl] = indent;\n    }\n    if(curIndentVal === indent){ //same level\n      currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n    }else if(curIndentVal < indent){ // next level\n      indentLevels[++curIndentLvl] = indent;\n      if(currentFlow.leveledSteps[curIndentLvl]){\n        currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n      }else{\n        currentFlow.leveledSteps.push([stepIndex]);\n      }\n    }else{ //previous level\n      for(;curIndentLvl > -1; curIndentLvl--){\n        let lastIndentLvl = indentLevels[curIndentLvl];\n        if(lastIndentLvl === indent) break;\n      }\n      if(curIndentLvl === -1){\n        throw new Error(`Indentation issue with line |${line}|`);\n      }else{\n        currentFlow.leveledSteps[curIndentLvl].push(stepIndex);\n      }\n    }\n\n    let data = readStep(line.trim());\n    data.indent = curIndentLvl;\n    if(data.index) indexedSteps[data.index] = stepIndex;\n    currentFlow.steps.push(data);\n    currentFlow.links[stepIndex] = [];\n\n  });\n\n  \n  generateLinks(currentFlow.steps, indexedSteps, currentFlow.links); //for last flow\n  return flows;\n}\n\n\n/**\n * Sample: [#1] ERR This statement (extra info)\n * @param {string} statement \n * @returns {{msg:string, rawMsg: string, type:string, index:string, indent:number}}\n    {msg: 'This statement',\n    rawMsg: 'This statement (extra info)',\n    type: 'ERR',\n    index: '#1',\n    indent: 0}\n */\nfunction readStep(statement) {\n  const data = { msg:\"\", rawMsg: \"\", type: \"\"}\n  if(statement[0] === '[') {//has index\n    const boundary = statement.indexOf(\"]\");\n    data.index = statement.substring(1,boundary).trim();\n    statement = statement.substring(boundary+1).trimStart();\n  }\n  const index = statement.indexOf(' ');\n  if(index < 1) {\n    if(isSupportedKeyword(statement)) data.type = statement;\n    else   data.msg = data.rawMsg = statement;\n  }else{\n    const firstWord = statement.substring(0, index);\n    const restStatement = statement.substring(index + 1);\n\n    if(isSupportedKeyword(firstWord)) {\n      data.type = firstWord;\n      statement = restStatement;\n    }else{\n    }\n    data.rawMsg = statement.replace(/\\s+/g,\" \");\n    data.msg = refinedMsg(statement).replace(/\\s+/g,\" \");\n  }\n  return data;\n}\n\n\n/**\n * Remove extra  info from the message\n * @param {string} msg \n * @returns {string}\n */\nfunction refinedMsg(msg){\n  let count = 0;\n  let newmsg = \"\";\n  for (let i = 0; i < msg.length; i++) {\n    const ch = msg[i];\n    if(ch===\"(\") count++;\n    else if(ch===\")\") count--;\n    else {\n      if(count > 0) continue;\n      else newmsg += ch;\n    }\n  }\n  return newmsg.trim();\n}\n\nfunction isSupportedKeyword(k){\n  return leavingSteps.indexOf(k) !== -1 || \n    branchSteps.indexOf(k) !== -1 ||\n    normalSteps.indexOf(k) !== -1;\n}\n\n// Example usage\n// let input = `\n// IF root\n//   LOOP condition 1\n//     [#1] DO A\n//     IF condition 2 (extra)\n//       GOTO #1\n//     ELSE_IF condition 3\n//       SKIP\n//     ELSE_IF condition 4\n//       LOOP illusion\n//         ends here\n//       IF otherwise\n//         END\n//       ELSE\n//         STOP\n//     this is B\n//     FOLLOW a new flow\n//     last here\n//     #comments are skipped\n// ELSE_IF admin\n//   ban\n// last`;\n// input = `\n// FLOW: sample\n// [index] ERR This statement (extra info)\n\n// FLOW: sample\n// this: is header\n// [index] ERR This statement (extra info)\n// `;\n\n\n// const output = parse(input);\n// console.log(JSON.stringify(output, null, 2));\n\n\nmodule.exports = parse;","const branchSteps = [\"IF\", \"ELSE_IF\", \"ELSE\", \"LOOP\"];\nconst leavingSteps = [\"GOTO\", \"SKIP\", \"STOP\", \"END\"];\n\nfunction isBranchStep(step) {\n  return branchSteps.includes(step.type);\n}\nfunction isLeavingStep(step) {\n  return leavingSteps.includes(step.type);\n}\n\n\n/**\n * A next step is not a child step but a sibling or higher level step\n * Find next step of same level or\n * Find next step of lower level within loop boundary if within loop\n * loop step if no next step of lower level within loop boundary if within loop\n * Find next step of lower level if not in loop\n * -1 if no next step and not in loop\n * \n * But if next step is ELSE_IF, ELSE type\n *  AND current step is IF/ELSE_IF on same indent level\n * , then we need to find next step of this\n * @param {[number[]]} steps \n * @param {number} currentStepId \n * @param {number} indent\n * @returns {number} step id\n */\nfunction findNextStep(steps, currentStepId, parentLoopId, nested) {\n  //TODO: use leveledSteps to find the next step\n  // nextStepId = leveledSteps[steps[currentStepId].indent].indexOf(currentStepId)+1\n  // if(nextStepId === undefined) nextStepId=-1\n  // else if(steps[nextStepId].type.startsWith(\"ELSE\")\n  //          && currentStep.type is not of same level IF block) check for next step in indent\n  let nextStepId = -2;\n\n  // if(parentLoopId !== undefined && parentLoopId > currentStepId){\n  if(parentLoopId !== undefined){\n    // Find next step whose indent is less or equal to current indent\n    // but higher than loop's indent\n    // Otherwise IF next step indent is higher, ignore\n    // IF next step indent is higher or equal to loop indent, point to loop\n\n    const parentLoop = steps[parentLoopId];\n    const currentIndent = steps[currentStepId].indent;\n    for (let i = currentStepId+1; i < steps.length; i++) {\n      const nextStepIndent = steps[i].indent;\n      if (nextStepIndent === currentIndent){\n        nextStepId = i;\n        break;\n      }else if (nextStepIndent < currentIndent){\n        if(nextStepIndent > parentLoop.indent) {\n          nextStepId = i;\n        }else{\n          nextStepId = parentLoopId\n        }\n        break;\n      }\n    }\n    if(nextStepId === -2) nextStepId = parentLoopId;\n  }else{\n    for (let i = currentStepId + 1; i < steps.length; i++) {\n      if (steps[i].indent <= steps[currentStepId].indent) {\n        nextStepId = i;\n        break;\n      }\n    }\n    if(nextStepId === -2) nextStepId = -1;\n  }\n\n  if(nextStepId > -1 && steps[nextStepId].type.startsWith(\"ELSE\")){\n    // IF not\n    //   but\n    // ELSE_IF else if\n    //   B\n    // ELSE\n    if(!nested && steps[currentStepId].indent === steps[nextStepId].indent\n      && (steps[currentStepId].type === \"IF\" \n        || steps[currentStepId].type === \"ELSE_IF\")\n      ){\n      // an IF or ELSE_IF can point to ELSE_IF or ELSE on the same indent\n    }else{\n      // Must not point to ELSE_IF or ELSE\n      nextStepId = findNextStep(steps,nextStepId,parentLoopId, true);\n    }\n  }\n  return nextStepId;\n}\n\nfunction handleNormalStep(steps, stepId, links, loopStack) {\n  const nextStepIndex = findNextStep(steps, stepId, parentLoop(loopStack));\n  links[stepId].push(nextStepIndex);\n}\n\nfunction findLastStepOfSameLevel(steps, stepId){\n  const targetLvl = steps[stepId].indent;\n  for (let i = stepId-1; i > -1; i--) {\n    if(targetLvl === steps[i].indent){\n      return i; \n    }\n  }\n  throw new Error(\"Unable to find last step of same indent level\");\n}\n\nfunction handleBranchStep(step, steps, links, stepId, loopStack) {\n  if(step.type === \"ELSE\") { // no linking is needed\n    delete links[stepId];\n    return; \n  }\n  const indent = step.indent;\n  \n  // a) Success branch: If the next step has a higher indent\n  if (steps[stepId + 1] && steps[stepId + 1].indent > indent) {\n    links[stepId].push(stepId + 1); // Success branch\n  } else {\n    links[stepId].push(undefined); // No success branch\n  }\n\n  // Find next step with same or lower indent\n  let failingBranchStepId = findNextStep(steps, stepId, parentLoop(loopStack));\n  if(failingBranchStepId !== -1 && steps[failingBranchStepId].type === \"ELSE\"){\n    failingBranchStepId++;\n  }\n  links[stepId].push(failingBranchStepId);\n\n  if (step.type === \"LOOP\") {\n    loopStack.push(stepId); // Push LOOP to the stack\n  }\n}\n\nfunction checkIfNot1stStep(steps, id){\n  if(id === 0) throw new Error(`${steps[id].type} can't be first step of the flow`);\n}\n\nfunction handleGotoStep(steps, step, indexedSteps, links, stepId) {\n  checkIfNot1stStep(steps, stepId);\n  if(indexedSteps[step.msg] === undefined) throw new Error(`GOTO is pointing to ${step.msg} that doesn't specified with any step`)\n\n  //validate target step\n  updatePointersOfLastSteps(steps, links,stepId,indexedSteps[step.msg]);\n}\n\nfunction handleLeavingStep(steps, currentStepId, links, loopStack) {\n  checkIfNot1stStep(steps, currentStepId);\n  const step = steps[currentStepId];\n  if (step.type === \"SKIP\") { // points to the LOOP step\n    if (loopStack.length < 1) throw new Error(\"SKIP must be inside LOOP\");\n\n    const loopStepId = loopStack[loopStack.length - 1];\n    updatePointersOfLastSteps(steps, links, currentStepId, loopStepId);\n  } else if (step.type === \"STOP\") { // points to next step of the LOOP step\n    if (loopStack.length < 1) throw new Error(\"STOP must be inside LOOP\");\n\n    const nextStepIndex = findNextStep(steps, parentLoop(loopStack));\n    updatePointersOfLastSteps(steps, links, currentStepId, nextStepIndex);\n  } else if (step.type === \"END\")  { // points to -1\n    updatePointersOfLastSteps(steps, links, currentStepId, -1);\n  }\n}\n\n/**\n * Skip an extra link for leaving steps. Update pointer in all previous steps pointing to this\n * @param {object} links \n * @param {number} parentStepId \n * @param {number} currentStepId \n */\nfunction updatePointersOfLastSteps(steps, links, currentStepId, stepToPoint){\n  for (let i = 0; i < currentStepId; i++) {\n    let link = links[i];\n    if(link !== undefined){\n      const ind = link.indexOf(currentStepId);\n      if(ind !== -1){\n        if(steps[i].type === \"ELSE\"){\n          link = findLastStepOfSameLevel(steps, link);\n        }\n        link[ind] = stepToPoint;\n      }\n    }\n  }\n  delete links[currentStepId];\n}\n\nfunction generateLinks(steps, indexedSteps, links) {\n  const loopStack = []; // Stack to track LOOP steps\n\n  // Traverse through all steps\n  for (let i = 0; i < steps.length; i++) {\n    const step = steps[i];\n    const indent = step.indent;\n\n    if (loopStack.length > 0 ) {\n      //pop until loop indent is equal to current  step indent\n      for (let li = loopStack.length - 1; li > -1; li--) {\n        const loopStepId = loopStack[li];\n        if(indent <= steps[loopStepId].indent)\n          loopStack.pop();\n      }\n    }\n\n    if (step.type === \"GOTO\") {\n      handleGotoStep(steps, step, indexedSteps, links, i);\n      // continue;\n    }else if (isBranchStep(step)) {\n      handleBranchStep(step, steps, links, i, loopStack);\n    }else if(isLeavingStep(step)){\n      handleLeavingStep(steps, i, links, loopStack);\n    }else{  // Normal Step: Just link to the next step if exists\n      handleNormalStep(steps, i, links, loopStack);\n    }\n\n    \n  }\n}\n\nfunction parentLoop(loopStack){\n  return loopStack[loopStack.length -1];\n}\n\nmodule.exports = generateLinks","import parse from \"@solothought/text2obj/flow\";\nimport { nodeSize } from './../config.js';\n\nconst nodeWidth = nodeSize.width;\nconst nodeHeight = nodeSize.height;\nconst nodeMargin_h = nodeSize.height*1.5;\nconst nodeMargin_v = nodeSize.width*1.1;\n\nconst deltaX = nodeWidth + nodeMargin_v;\nconst deltaY = nodeHeight + nodeMargin_h;\n\nfunction SvelteFlowNode(id, data , position){ //TODO: use class\n  return {\n    id : id+\"\",\n    type : \"step\",\n    data : data,\n    position : position,\n  }\n}\nfunction SvelteFlowEdge(sourceId, targetId, i, sourceType=\"\", targetType){ //TODO: use class\n  // console.debug(sourceType, i)\n  let animated = false;\n  // let srcHandle = \"b\";\n  // let targetHandle = \"t\";\n  let srcHandle = \"\";\n  let targetHandle = \"\";\n  let label = \"\";\n  if(isBranchStep(sourceType)){//first node\n    if(i==0)  {\n      srcHandle = \"r\";\n      targetHandle= \"lt\";\n    }\n  }\n  // if(targetType === \"LOOP\" && sourceId > targetId){\n  if(sourceId > targetId){\n    srcHandle = \"l\";\n    animated = true;\n  }\n  if(sourceType === \"IF\" || sourceType === \"ELSE_IF\"){\n    if(i === 0)    label= \"True\";\n    else if(i === 1)    label= \"False\";\n  }else if(sourceType === \"LOOP\"){\n    if(i === 1)    label= \"Exit\";\n  }\n  return {\n    id : `${sourceId}-${targetId}`,\n    source : sourceId+\"\",\n    target : targetId+\"\",\n    data : {},\n    sourceHandle: srcHandle,\n    targetHandle: targetHandle,\n    animated: animated,\n    label: label\n  }\n}\n\n/**\n * Parse flow to SvelteFlow compatible nodes and edges\n * @param {string} flowContent \n * @returns \n */\nexport function convert(flowContent){\n  const nodesAndEdges = [];\n  try{\n    const flows = parse(flowContent); // returns [Flow]\n    for (let i = 0; i < flows.length; i++) {\n      const flow = flows[i];\n      if(flow.steps.length > 0) {\n        const nAe = mapStepsToNodes(flow);\n        // console.log(nAe.edges);\n        // console.log(nAe.nodes);\n        // console.log(nAe.paths);\n        nodesAndEdges.push(nAe);\n      }\n    }\n  }catch(e){\n    //TODO: notify error\n    console.error(e);\n  }\n  // console.debug(nodesAndEdges);\n  return nodesAndEdges;\n}\n\n\nfunction mapStepsToNodes(flow){\n  const nodes=[];\n  const edges=[];\n  // const connections = {}; // { \"node-id\": {target: [\"node-id\"], parent: [\"node-id\"]} }\n  let lastNode;\n  const parentStack = [];\n  let nodeId = 0, row=-1;\n  const nodeIdToIndexMap = {};\n  let decisionPoints = 0;\n\n  for (; nodeId < flow.steps.length; nodeId++) {\n    const step = flow.steps[nodeId];\n    \n    if(flow.links[nodeId]){\n      row++;\n      let position;\n\n      //Build chart connections\n      // if(connections[nodeId]) connections[nodeId].target = [...flow.links[nodeId].map(String)];\n      // else connections[nodeId] = {target: [...flow.links[nodeId].map(String)], parent: []};\n    \n      //calculate position\n      if(!lastNode) position={x:0,y:0};\n      else{\n        const lastStep = flow.steps[lastNode.id];\n        if(lastStep.indent === step.indent) {//same level\n          position = {x:lastNode.position.x, y:lastNode.position.y+deltaY}\n        }else if(lastStep.indent < step.indent){ //child-parent step\n          row--; //graph expands horizontally\n          position = {x:lastNode.position.x+deltaX, y:lastNode.position.y};\n        }else{\n          let diff = lastStep.indent - step.indent;\n          let parentNode;\n          while(diff-->0) parentNode = parentStack.pop();\n          position = {x:parentNode.position.x, y:(row*deltaY)}\n        }\n\n        if(flow.steps[nodeId-1].type===\"ELSE\"){ //shift to left\n          position = {x:position.x-deltaX, y:position.y};\n        }\n      }\n\n      //Add node\n      const node = SvelteFlowNode(nodeId, { \n          msg: step.msg, \n          rawMsg: step.rawMsg, \n          type: step.type, \n          indent: step.indent\n        }, position )\n      if(isBranchStep(step.type)) {\n        decisionPoints++;\n        node.data.collapsable = true;\n      }else if(step.type === \"GOTO\"){\n        decisionPoints++;\n      }\n      nodes.push(node);\n      node.data.index = nodes.length - 1;\n      nodeIdToIndexMap[nodeId] = nodes.length - 1;\n\n      //to calculate position\n      lastNode = node;\n      if(isBranchStep(step.type)){\n        parentStack.push(node);\n      }\n\n      //Add edge\n      for (let j = 0; j < flow.links[nodeId].length; j++) {\n        const targetId = flow.links[nodeId][j];\n        \n        //Build chart connections\n        // if(!connections[targetId]) connections[targetId] = {target:[], parent:[]}\n        // if(targetId > nodeId) connections[targetId].parent.push(String(nodeId));\n\n        if(targetId === -1){\n          node.data.isEnd = true;          \n        }else{\n          if(!flow.links[targetId]) throw new Error(`Link for Step ${targetId} is not present`);\n          const edge = SvelteFlowEdge(nodeId, targetId, j, step.type, flow.steps[targetId].type);\n          edges.push(edge);\n        }\n      }\n    }\n  }\n  // for first node\n  nodes[0].data.isStart = true;\n  let paths = findAllPaths(flow.links, nodeIdToIndexMap);\n  paths = paths.sort((p1,p2) => p1.length  - p2.length);\n\n  const stats = {};\n  stats.cyclomaticComplexity = decisionPoints + 1;\n  stats.depth = flow.leveledSteps.length;\n  stats.stepsCount = flow.steps.length;\n  stats.decisionPoints = decisionPoints;\n  stats.nestingLoops = calculateLoopNestingIndices(flow.steps);\n\n  return {flowName:  flow.name, nodes, edges, paths, nodesIndex: nodeIdToIndexMap, stats}\n}\n\n/**\n * \n * @param {[]} steps \n * @returns {[number[]]}\n */\nfunction calculateLoopNestingIndices(steps) {\n  // Initialize variables\n  const loopNestingIndices = [];\n  let currentNestingLevel = 0;\n\n  // Traverse the steps array\n  steps.forEach((step, index) => {\n    if (step.type === \"LOOP\") {\n      // Increment the nesting level for this loop\n      currentNestingLevel++;\n\n      // Ensure there's an array for this nesting level\n      if (!loopNestingIndices[currentNestingLevel - 1]) {\n        loopNestingIndices[currentNestingLevel - 1] = [];\n      }\n\n      // Add the step index to the corresponding nesting level\n      loopNestingIndices[currentNestingLevel - 1].push(index);\n    } else if (step.type === \"END\") {\n      // Decrement the nesting level when exiting a loop\n      currentNestingLevel--;\n    }\n  });\n\n  return loopNestingIndices;\n}\n\nfunction findAllPaths(links,nodeIdToIndexMap) {\n  const paths = [];\n\n  function dfs(nodeId, currentPath, visitCount) {\n    const nodeIndex = nodeIdToIndexMap[nodeId];\n    currentPath.push(String(nodeIndex));\n\n    if (nodeId === -1) {\n        paths.push([...currentPath.slice(0, -1)]); // Exclude -1 from final path\n    } else {\n        for (const neighbor of links[nodeId] || []) {\n            if (visitCount[neighbor] === undefined) visitCount[neighbor] = 0;\n\n            if (visitCount[neighbor] < 2 || neighbor === -1) { // Allow limited revisits\n                visitCount[neighbor]++;\n                dfs(neighbor, currentPath, { ...visitCount }); // Pass a copy to avoid mutation issues\n                visitCount[neighbor]--;\n            }\n        }\n    }\n\n    currentPath.pop(); // Backtrack\n  }\n\n  dfs(0, [], { 0: 1 }); // Start DFS with node 0 marked as visited once\n  \n  return paths;\n}\n\n\nconst branchSteps=[\"IF\", \"ELSE_IF\", \"LOOP\"];\nfunction isBranchStep(type){\n  return branchSteps.indexOf(type) !== -1;\n}\n\n// let flowText = `\n// FLOW: passed as parameter\n// here you go\n// LOOP until\n//   you're safe here\n//   IF not\n//     STOP\n//   ELSE\n//     SKIP\n// ` \n// let flowText = `\n// FLOW: Sample flow 1\n// LOOP (source is) readable\n//   read a character (of input buffer)\n//   IF statement \n//     IF another statement\n//       THEN found here\n//       AND copy data\n//     ELSE_IF parallel statement\n//       DO nothing\n//       ERR Unexpected end of input\n//       END\n//     ELSE \n//       last statement\n//   ELSE \n//     something\n//   IF optional\n//     still step\n// DO in end\n// ` \n\n// const {nodes,edges} = convert(flowText)\n// console.log(nodes)\n// console.log(edges);\n\n\n// const steps = [\n//   { msg: \"outer loop\", type: \"LOOP\", indent: 0 },\n//   { msg: \"inner loop\", type: \"LOOP\", indent: 1 },\n//   { msg: \"\", type: \"END\", indent: 1 },\n//   { msg: \"innermost loop\", type: \"LOOP\", indent: 2 },\n//   { msg: \"\", type: \"END\", indent: 2 },\n//   { msg: \"\", type: \"END\", indent: 0 }\n// ];\n// console.log(calculateLoopNestingIndices(steps));","<script>\n  import Toolbar from './Toolbar.svelte';\n  import CoreChart from './CoreChart.svelte';\n  import { convert as flowText2Obj } from './NodesAndEdgesBuilder.js';\n  import { updateProperty } from './nodeUpdater.js';\n\n  export let text = \"\";\n  export let selection = {};\n  export let focusOn = true;\n  export let width = '100%';\n  export let height = '100%';\n  export let flowsData = []; //json obj of flows text\n  export let minimap = true;\n  export let toolbar = true;\n  let coreChartHeight = \"\";\n  \n  if (toolbar) coreChartHeight = `calc(${height} - 50px)`;\n  else coreChartHeight = height;\n\n  let selectedFlowIndex = 0; //toolbar\n  let nodes = [];\n  let edges = [];\n  let paths = [];\n  let nodesIndex = {};\n  let flowName = \"\";\n  let nodeState = {\n    hideMsgDetail: false,\n    standardShape: false\n  };\n\n\n  // Bind to CoreChart instance\n  let coreChartInstance;\n\n  // Update flow data when text changes or flows data\n  $: {\n    if (text.length > 0) { //called only when text is updated\n      flowsData = flowText2Obj(text);\n      updateSelectedFlow(selectedFlowIndex);\n    }\n  }\n  $: {\n    if (flowsData.length > 0) {\n      updateSelectedFlow(selectedFlowIndex);\n    }\n  }\n\n  /**\n   * Draw chart for the given flow index\n   * @param index\n   */\n  function updateSelectedFlow(index) {\n    selectedFlowIndex = index;\n    if (flowsData[selectedFlowIndex]) {\n      const selectedFlow = flowsData[selectedFlowIndex];\n      nodes = selectedFlow.nodes;\n      edges = selectedFlow.edges;\n      paths = selectedFlow.paths;\n      nodesIndex = selectedFlow.nodesIndex;\n      flowName = selectedFlow.flowName;\n      selection = { flowIndex: index, nodesIndex};\n      updateProperty(nodes, nodeState);\n      if (coreChartInstance && typeof coreChartInstance.updateStore === 'function') {\n        coreChartInstance.updateStore(nodes, edges);\n      }\n    }\n  }\n\n  // Handle flow change from toolbar\n  function handleFlowChange(event) {\n    updateSelectedFlow(parseInt(event.target.value));\n  }\n\n  function flowChange(e){//triggered by core chart\n    if(e.detail.flowName){ //When User clicks on a node\n      const flowName = e.detail.flowName;\n      flowsData.forEach((flow, i) => {\n        if (flow.flowName === flowName) {\n          updateSelectedFlow(i);\n        }\n      });\n    }\n  }\n\n  // Toggle node message details\n  function hideStepMsgDetail() {\n    nodeState.hideMsgDetail = !nodeState.hideMsgDetail;\n    updateProperty(nodes, {hideMsgDetail: nodeState.hideMsgDetail});\n    coreChartInstance.updateStore(nodes, edges);\n  }\n\n    // Handle path selection from toolbar\n  function selectPath(event) {\n    // console.log(event);\n    if(event.detail.mode === \"play\"){\n      playPath(event);\n    }else{\n      selection = {\n        flowIndex: event.detail.flowIndex,\n        nodeIndexes: event.detail.nodeIndexes\n      };\n    }\n  }\n\n  function playPath(event) {\n    const flowIndex = event.detail.flowIndex;\n    const path = event.detail.nodeIndexes;\n\n    //TODO: highlight edge between 2 nodes\n    function highlightNextNode(index) {\n      if (index < path.length) {\n        const nextIndex = path[index];\n        selection = {\n          flowIndex: flowIndex,\n          nodeIndexes: [nextIndex]\n        };\n        \n        setTimeout(() => {\n          highlightNextNode(index + 1);\n        }, 400); // 400ms delay\n      } else {\n        // Reset selection after playing the entire path\n        selection = { flowIndex: -1, nodeIndexes: [] };\n      }\n    }\n\n    // Start highlighting the first node\n    highlightNextNode(0);\n  }\n\n  $: {\n    if (selection && selection.nodeIds && selection.nodeIds.length) {\n      if(selection.flowIndex !== selectedFlowIndex){\n        updateSelectedFlow(selection.flowIndex);\n      }\n    }\n  }\n</script>\n\n<div class=\"solothought_text2chart_flow\" style=\"width: {width}; height: {height};\">\n  {#if toolbar}\n    <Toolbar\n      {flowsData}\n      bind:selectedFlowIndex\n      {flowName}\n      bind:hideMsgDetail={nodeState.hideMsgDetail}\n      {nodes}\n      handleFlowChange={handleFlowChange}\n      hideStepMsgDetail={hideStepMsgDetail}\n      on:pathSelected={selectPath}\n      bind:focusOn\n    />\n  {/if}\n  <CoreChart\n    bind:this={coreChartInstance}\n    {nodes}\n    {edges}\n    {nodeState}\n    {paths}\n    {nodesIndex}\n    {selectedFlowIndex}\n    {...$$restProps}\n    bind:selection={selection}\n    {focusOn}\n    {minimap}\n    style=\"width: {width}; height: {coreChartHeight};\"\n    on:flowChange={flowChange}\n  />\n\n  \n</div>\n<style>\n  /* :global(.svelte-flow__attribution){\n    display: none;\n  } */\n</style>"],"names":["noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","not_equal","subscribe","store","callbacks","callback","undefined","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","null_to_empty","set_store_value","ret","set","action_destroyer","action_result","destroy","globals","window","globalThis","global","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","always_set_through_set_attribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","indexOf","set_data","set_style","important","removeProperty","setProperty","select_option","select","mounting","option","__value","selected","selectedIndex","crossorigin","current_component","is_crossorigin","parent","error","toggle_class","toggle","classList","construct_svelte_component","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","createEventDispatcher","type","detail","cancelable","bubbles","CustomEvent","custom_event","call","defaultPrevented","setContext","context","getContext","get","bubble","this","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","add_flush_callback","seen_callbacks","flushidx","saved_component","update","e","pop","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","ensure_array_like","array_like_or_iterator","Array","from","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","updates","child_ctx","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","get_spread_update","levels","to_null_out","accounted_for","get_spread_object","spread_props","bind","index","bound","create_component","mount_component","new_on_destroy","map","filter","destroy_component","filtered","targets","flush_render_callbacks","init","instance","create_fragment","append_styles","parent_component","on_disconnect","skip_bound","root","ready","fill","make_dirty","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","$on","splice","$set","obj","__svelte","v","uuid","counter","random","toString","toArray","arrayLike","arr","px","styleProperty","val","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parseFloat","replace","getImageSize","targetNode","width","leftBorder","rightBorder","clientWidth","getNodeWidth","height","topBorder","bottomBorder","clientHeight","getNodeHeight","canvasDimensionLimit","createImage","url","reject","img","Image","decode","onload","onerror","crossOrigin","decoding","async","nodeToDataURL","xmlns","svg","foreignObject","XMLSerializer","serializeToString","encodeURIComponent","html","svgToDataURL","isInstanceOfElement","nodePrototype","getPrototypeOf","constructor","getPseudoElementStyle","className","pseudo","selector","content","formatCSSText","getPropertyPriority","join","formatCSSProperties","clonePseudoElement","nativeNode","clonedNode","err","styleElement","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","webp","getMimeType","extension","match","exec","getExtension","toLowerCase","isDataUrl","search","makeDataUrl","mimeType","fetchAsDataURL","process","res","fetch","status","blob","reader","FileReader","onloadend","readAsDataURL","cache","resourceToDataURL","resourceUrl","contentType","cacheKey","includeQueryParams","test","getCacheKey","dataURL","cacheBust","Date","getTime","fetchRequestInit","headers","split","getContentFromDataUrl","imagePlaceholder","msg","message","console","warn","cloneSingleNode","HTMLCanvasElement","canvas","toDataURL","cloneNode","cloneCanvasElement","HTMLVideoElement","video","currentSrc","drawImage","poster","cloneVideoElement","HTMLIFrameElement","iframe","_a","contentDocument","body","_b","cloneIFrameElement","isSlotElement","tagName","toUpperCase","decorate","Element","targetStyle","sourceStyle","transformOrigin","endsWith","reducedFont","floor","substring","cloneCSSStyle","clonePseudoElements","HTMLTextAreaElement","innerHTML","HTMLInputElement","cloneInputValue","HTMLSelectElement","clonedSelect","selectedOption","find","child","cloneSelectValue","isRoot","assignedNodes","shadowRoot","reduce","deferred","clonedChild","cloneChildren","clone","uses","querySelectorAll","processedDefs","id","exist","querySelector","values","ns","position","overflow","display","defs","ensureSVGSymbols","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","embed","resourceURL","baseURL","getContentFromUrl","resolvedURL","baseUrl","location","protocol","doc","implementation","createHTMLDocument","base","head","href","resolveUrl","escaped","RegExp","toRegex","shouldEmbed","embedResources","filteredCSSText","str","preferredFontFormat","format","filterPreferredFontFormat","urls","raw","quotation","parseURLs","css","embedProp","propName","propValue","cssString","embedImages","embedBackground","isImageElement","HTMLImageElement","SVGImageElement","baseVal","image","loading","srcset","embedImageNode","deferreds","all","embedChildren","cssFetchCache","fetchCSS","embedFonts","regexUrl","loadFonts","loc","startsWith","URL","parseCSS","source","keyframesRegex","matches","importRegex","unifiedRegex","lastIndex","parseWebFontRules","styleSheets","cssRules","sheet","item","CSSRule","IMPORT_RULE","importIndex","metadata","rule","insertRule","catch","inline","getCSSRules","FONT_FACE_RULE","getWebFontRules","embedWebFonts","fontEmbedCSS","skipFonts","rules","parentStyleSheet","getWebFontCSS","styleNode","sytleContent","firstChild","toSvg","backgroundColor","manual","applyStyle","toCanvas","ratio","pixelRatio","FINAL_PROCESS","env","devicePixelRatio","parseInt","Number","isNaN","getPixelRatio","canvasWidth","canvasHeight","skipAutoScale","checkCanvasDimensions","fillStyle","fillRect","subscriber_queue","readable","start","writable","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","derived","stores","initial_value","single","isArray","stores_array","every","Boolean","auto","started","pending","cleanup","sync","unsubscribers","cc","names","out","tmp","dispatch","t","arguments","Dispatch","concat","prototype","on","typename","types","T","trim","hasOwnProperty","copy","that","args","apply","xhtml","namespaces","xlink","xml","namespace","prefix","creatorInherit","uri","namespaceURI","documentElement","creatorFixed","fullname","creator","none","selectorAll","arrayAll","x","matcher","childMatcher","childFirst","firstElementChild","sparse","EnterNode","datum","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","ascending","NaN","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","styleRemove","styleConstant","priority","styleFunction","styleValue","propertyRemove","propertyConstant","propertyFunction","classArray","string","ClassList","_node","_names","classedAdd","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","constantNull","selection_cloneShallow","selection_cloneDeep","onRemove","__on","j","listener","onAdd","contextListener","dispatchEvent","params","createEvent","initEvent","dispatchConstant","dispatchFunction","contains","Selection","groups","parents","_groups","_parents","selection","pointer","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","y","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","left","clientLeft","top","clientTop","pageX","pageY","subgroups","subnode","subgroup","selectAll","selectChild","childFind","selectChildren","childrenFilter","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","onenter","onupdate","onexit","merge","order","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","each","getAttributeNS","property","classed","before","deep","typenames","parseTypenames","Symbol","iterator","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","noevent$1","preventDefault","dragDisable","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","setTimeout","constant$2","DragEvent","subject","identifier","active","dx","dy","defineProperties","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","define","factory","extend","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","rgbn","Rgb","rgba","hsla","g","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","round","h","s","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","channels","displayable","formatHex8","formatHsl","pow","clamp","constant$1","gamma","nogamma","exponential","constant","linear","interpolateRgb","rgbGamma","end","colorRgb","interpolateNumber","reA","reB","interpolateString","am","bm","bs","bi","q","number","one","zero","svgNode","degrees","PI","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","decompose","f","sqrt","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","interpolateTransformSvg","transform","consolidate","matrix","cosh","exp","taskHead","taskTail","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","d2","log","d1","b0","b1","r0","r1","coshr0","u","sinh","duration","SQRT2","_1","_2","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","schedule","timing","schedules","__transition","self","tween","state","tick","ease","interrupt","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","inherit","id0","id1","on0","on1","sit","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","cancel","defaultTiming","ZoomEvent","Transform","applyX","applyY","invert","invertX","invertY","rescaleX","domain","range","rescaleY","__zoom","defaultExtent","SVGElement","hasAttribute","viewBox","defaultTransform","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","zoom$1","touchstarting","touchfirst","touchending","constrain","wheelDelta","touchable","scaleExtent","listeners","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","centroid","gesture","w","clean","__zooming","Gesture","taps","wheel","mouse","moved","x0","y0","dragEnable","changedTouches","k1","shiftKey","touches","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","translateBy","translateTo","emit","clickDistance","errorMessages","nodeType","handleType","sourceHandle","targetHandle","infiniteExtent","NEGATIVE_INFINITY","POSITIVE_INFINITY","ConnectionMode","PanOnScrollMode","SelectionMode","initialConnection","inProgress","isValid","fromHandle","fromPosition","fromNode","to","toHandle","toPosition","toNode","ConnectionLineType","MarkerType","Position","oppositePosition","Left","Right","Top","Bottom","handleConnectionChange","cb","diff","connection","getConnectionStatus","isInternalNodeBase","getNodePositionWithOrigin","nodeOrigin","getNodeDimensions","origin","offsetX","offsetY","getNodesBounds","nodeLookup","box","currBox","nodeOrId","isId","currentNode","nodeBox","nodeToBox","x2","y2","getBoundsOfBoxes","boxToRect","getInternalNodesBounds","getNodesInside","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","pointToRendererPoint","visibleNodes","measured","selectable","hidden","initialWidth","initialHeight","overlappingArea","getOverlappingArea","nodeToRect","area","partiallyVisible","internals","handleBounds","dragging","getConnectedEdges","edges","nodeIds","edge","getFitViewNodes","fitViewNodes","optionNodeIds","includeHiddenNodes","fitView","panZoom","minZoom","maxZoom","bounds","viewport","getViewportForBounds","padding","setViewport","calculateNodePosition","nodeId","nextPosition","nodeExtent","onError","parentId","parentX","parentY","positionAbsolute","expandParent","isCoordinateExtent","parentWidth","parentHeight","clampPosition","getElementsToRemove","nodesToRemove","edgesToRemove","onBeforeDelete","matchingNodes","deletable","isIncluded","parentHit","edgeIds","deletableEdges","matchingEdges","onBeforeDeleteResult","dimensions","clampPositionToParent","childPosition","childDimensions","calcAutoPanVelocity","calcAutoPan","pos","speed","distance","box1","box2","rectToBox","getBoundsOfRects","rect1","rect2","rectA","rectB","xOverlap","yOverlap","ceil","isRectObject","isNumeric","isFinite","devWarn","snapPosition","snapGrid","snapToGrid","rendererPointToPoint","xZoom","yZoom","clampedZoom","isMacOs","userAgent","nodeHasDimensions","getPointerPosition","getEventPosition","pointerPos","xSnapped","ySnapped","getDimensions","offsetWidth","offsetHeight","inputTags","isMouseEvent","isMouse","evtX","evtY","getHandleBounds","nodeElement","nodeBounds","handles","handle","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","getBezierPath","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","sourceControlX","sourceControlY","targetControlX","targetControlY","labelX","labelY","centerX","centerY","getBezierEdgeCenter","getEdgeCenter","xOffset","yOffset","getElevatedEdgeZIndex","sourceNode","zIndex","elevateOnSelect","edgeOrConnectedNodeSelected","selectedZIndex","z","getEdgeId","getStraightPath","handleDirections","getPoints","center","offset","sourceDir","targetDir","sourceGapped","targetGapped","dir","getDirection","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","getSmoothStepPath","borderRadius","segment","bendSize","xDir","getBend","isNodeInitialized","toHandleBounds","getHandlePosition","fallbackPosition","getHandle$1","handleId","getMarkerId","marker","defaultOptions","elevateNodesOnSelect","defaults","adoptUserNodesDefaultOptions","checkEquality","mergeObjects","incoming","adoptUserNodes","parentLookup","_options","tmpLookup","selectedNodeZ","userNode","internalNode","positionWithOrigin","clampedPosition","calculateZ","updateChildNode","updateParentLookup","childNode","absolutePosition","childZ","parentZ","calculateChildXYZ","positionChanged","updateNodeInternals","domNode","viewportNode","updatedInternals","changes","m22","DOMMatrixReadOnly","parentExpandChildren","dimensionChanged","force","parentExpandChanges","parentExpansions","parentRect","expandedRect","xChange","yChange","newWidth","newHeight","widthChange","heightChange","some","setAttributes","handleExpandParent","updateConnectionLookup","connectionLookup","edgeLookup","sourceKey","targetKey","prevSource","prevTarget","edgeId","isParentSelected","hasSelector","current","parentElement","getEventHandlerParams","dragItems","nodesFromDragItems","dragItem","XYDrag","onNodeMouseDown","getStoreItems","onDragStart","onDrag","onDragStop","lastPos","autoPanId","autoPanStarted","mousePosition","containerBounds","dragStarted","d3Selection","abortDrag","noDragClassName","handleSelector","isSelectable","nodeClickDistance","updateNodes","dragEvent","onNodeDrag","onSelectionDrag","updateNodePositions","hasChange","nodesBox","adjustedNodeExtent","currentNodes","autoPan","panBy","autoPanSpeed","xMovement","yMovement","startDrag","multiSelectionActive","nodesDraggable","selectNodesOnDrag","onNodeDragStart","onSelectionDragStart","unselectNodesAndEdges","mousePos","draggable","getDragItems","d3DragInstance","mousedownx","mousedowny","mousemoving","container","gestures","drag","beforestart","mousemoved","mouseupped","nodrag","touch","nodeDragThreshold","autoPanOnNodeDrag","cancelAnimationFrame","onNodeDragStop","onSelectionDragStop","getClosestHandle","connectionRadius","closestHandles","minDistance","closeNodes","getNodesWithinDistance","allHandles","oppositeHandleType","getHandle","connectionMode","withAbsolutePosition","getHandleType","edgeUpdaterType","handleDomNode","alwaysValid","isValidHandle","fromNodeId","fromHandleId","fromType","lib","flowId","isValidConnection","isTarget","handleBelow","elementFromPoint","handleToCheck","handleNodeId","connectable","connectableEnd","Strict","XYHandle","onPointerDown","autoPanOnConnect","cancelConnection","onConnectStart","onConnect","onConnectEnd","onReconnectEnd","updateConnection","getTransform","getFromHandle","getRootNode","getHostForElement","closestHandle","clickedHandle","fromHandleInternal","fromNodeInternal","newConnection","previousConnection","onPointerMove","onPointerUp","isInsideConnectionRadius","isHandleValid","isConnectionValid","connectionState","finalConnectionState","transformToViewport","viewportToTransform","zoomIdentity","isWrappedWithClass","closest","isRightClickPan","panOnDrag","usedButton","includes","getD3Transition","onEnd","hasDuration","factor","XYPanZoom","paneClickDistance","onPanZoom","onPanZoomStart","onPanZoomEnd","onDraggingChange","zoomPanValues","isZoomingOrPanning","usedRightMouseButton","prevViewport","mouseButton","timerId","panScrollTimeout","isPanScrolling","bbox","d3ZoomInstance","setViewportConstrained","d3ZoomHandler","d3DblClickZoomHandler","setTransform","nextTransform","contrainedTransform","noWheelClassName","noPanClassName","onPaneContextMenu","userSelectionActive","panOnScroll","panOnScrollMode","panOnScrollSpeed","preventScrolling","zoomOnPinch","zoomOnScroll","zoomOnDoubleClick","zoomActivationKeyPressed","onTransformChange","wheelHandler","d3Zoom","currentZoom","pinchDelta","deltaNormalize","deltaX","Vertical","Horizontal","internal","nextViewport","createPanOnScrollHandler","createZoomOnScrollHandler","startHandler","createPanZoomStartHandler","panZoomHandler","createPanZoomHandler","panZoomEndHandler","eventViewport","createPanZoomEndHandler","zoomScroll","pinchZoom","buttonAllowed","createFilter","getViewport","zoomTransform","setScaleExtent","setTranslateExtent","syncViewport","currentTransform","setClickDistance","validDistance","ResizeControlVariant","div","div_data_id_value","$$props","onconnect","ondisconnect","isConnectable","isConnectableProp","class","useStore","isValidConnectionStore","addEdge","onedgecreate","onConnectAction","onconnectstart","onConnectStartAction","onconnectend","onConnectEndAction","connections","prevConnections","$$invalidate","$connectable","$connectionLookup","areConnectionMapsEqual","_connections","connectionInProcess","$connection","connectingFrom","connectingTo","isPossibleEndHandle","$connectionMode","valid","isMouseTriggered","$connectionRadius","$domNode","$nodeLookup","$lib","$autoPanOnConnect","$flowId","$isValidConnectionStore","$onedgecreate","$onConnectAction","startParams","$onConnectStartAction","$onConnectEndAction","$viewport","t1_value","label","t0_value","tryToMount","targetEl","portal","useHandleEdgeSelect","selectionRect","selectionRectMode","multiselectionKeyPressed","addSelectedEdges","elementsSelectable","style_transform","div_style_value","style_changed","handleEdgeSelect","path_1","create_if_block_1","create_if_block","if_block0","path","labelStyle","markerStart","markerEnd","interactionWidth","interactionWidthValue","createNodesStore","_set","nds","setDefaultOptions","setOptions","createEdgesStore","eds","nextEdges","initialNodeTypes","input","InputNode","output","OutputNode","default","DefaultNode","GroupNode","initialEdgeTypes","straight","StraightEdgeInternal","smoothstep","SmoothStepEdgeInternal","BezierEdgeInternal","step","getVisibleEdges","visibleEdges","onlyRenderVisibleElements","edgeBox","viewRect","isEdgeVisible","edgePosition","sourceHandleBounds","targetHandleBounds","getEdgePosition","getVisibleNodes","createStore","fitViewOnCreate","storeNodeOrigin","storeNodeExtent","fitViewOnInit","fitViewOnInitDone","fitViewOptions","selectionKeyPressed","deleteKeyPressed","panActivationKeyPressed","selectionMode","Partial","nodeTypes","edgeTypes","connectionLineType","Bezier","nodesConnectable","markers","defaultMarkerColor","ondelete","onbeforedelete","nodesInitialized","edgesInitialized","viewportInitialized","initialized","getInitialStore","zoomBy","resetSelectedElements","elements","elementsChanged","addSelectedNodes","ids","isMultiSelection","nodeWillBeSelected","es","selectedNodes","selectedEdges","mN","mE","_connection","defaultColor","defaultMarkerStart","defaultMarkerEnd","markerId","localeCompare","createMarkerIds","initialNodesLength","initialEdgesLength","syncNodeStores","nodesStore","userNodesStore","nodesStoreSetter","userNodesStoreSetter","currentNodesStore","currentUserNodesStore","updatedNodes","syncEdgeStores","edgesStore","userEdgesStore","userEdgesStoreSetter","panZoomStore","viewportStore","userViewportStore","viewportStoreSetter","userViewportStoreSetter","vp","syncViewportStores","setNodeTypes","setEdgeTypes","edgeParams","isEdgeBase","el","connectionExists","addEdgeUtil","nodeDragItems","updateNodeInternalsSystem","updateAbsolutePositions","fitViewSystem","fitViewSync","change","zoomIn","zoomOut","setMinZoom","setMaxZoom","setPaneClickDistance","edgeWillBeSelected","handleNodeSelection","delta","transformChanged","panBySystem","reset","getStore","initialViewport","panZoomInstance","currentViewport","Free","onMoveStart","onMove","onMoveEnd","$viewportInitialized","viewPort","_panOnDrag","$panActivationKeyPressed","_panOnScroll","wrapHandler","toggleSelected","isSelected","selectionOnDrag","selectionInProgress","onClick","isSelecting","$selectionKeyPressed","$selectionRect","hasActiveSelection","$elementsSelectable","$selectionRectMode","setPointerCapture","pointerId","startX","startY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","$edges","$selectionMode","selectedEdgeIds","selectedNodeIds","releasePointerCapture","$$value","dragInstance","updateDrag","disabled","noDragClass","resizeObserver","isParent","positionX","positionY","measuredWidth","measuredHeight","dragHandle","nodeRef","prevNodeRef","dispatchNodeEvent","connectableStore","prevType","prevSourcePosition","prevTargetPosition","unobserve","nodeTypeValid","$nodeTypes","nodeComponent","inlineStyleDimensions","styleWidth","styleHeight","getNodeInlineStyleDimensions","observe","nodewrapper_changes","ResizeObserver","entries","entry","disconnect","g_aria_label_value","switch_instance_changes","animated","ariaLabel","onMouseEvent","$edgeLookup","edgeType","edgeComponent","$edgeTypes","markerStartUrl","markerEndUrl","_onMount","_onDestroy","polyline","Arrow","ArrowClosed","markerUnits","orient","strokeWidth","edgewrapper_changes","defaultEdgeOptions","$edgesInitialized","isVisible","selection_changes","show_if","$nodes","__","shortcut","param","enabled","trigger","normalizedTriggers","modifiedMap","alt","altKey","ctrl","shift","meta","metaKey","mergedTrigger","modifier","triggerEnabled","def","originalEvent","newEnabled","newType","getShortcutTrigger","isKeyObject","getModifier","_key","keyString","getKeyString","selectionKey","multiSelectionKey","deleteKey","panActivationKey","zoomActivationKey","composedPath","nodeName","isInputDOMNode","if_block","containerStyle","isCustomComponent","pathParams","$connectionLineType","Step","SmoothStep","div_class_value","positionClasses","hideAttribution","proOptions","updateStore","updateStoreByKeys","prop","useColorModeClass","colorMode","colorModeClass","mediaQuery","matchMedia","updateColorModeClass","connectionLine","div0","div1","connectionline_changes","pane_changes","tabIndex","contentWindow","zoom_changes","slots","connectionLineStyle","connectionLineContainerStyle","attributionPosition","oninit","initViewport","hasContext","createStoreContext","onInitCalled","$initialized","initialNodes","initialEdges","button_class_value","bgColor","bgColorHover","colorHover","borderColor","create_if_block_3","create_if_block_2","panel_changes","showZoom","showFitView","showLock","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","orientation","buttonProps","isInteractive","$nodesDraggable","$nodesConnectable","minZoomReached","$minZoom","maxZoomReached","$maxZoom","orientationClass","BackgroundVariant","circle","circle_class_value","radius","path_d_value","lineWidth","variant","dotpattern_changes","pattern","pattern_x_value","pattern_y_value","pattern_width_value","pattern_height_value","pattern_patternTransform_value","defaultSize","Dots","Lines","Cross","gap","patternColor","patternClass","patternSize","isDots","isCross","gapXY","patternId","scaledGap","scaledSize","patternDimensions","patternOffset","rect_style_value","shapeRendering","strokeColor","interactive","minimap","getViewScale","zoomStep","pannable","zoomable","inversePan","panStart","zoomAndPanHandler","panCurrent","panDelta","moveScale","nextZoom","XYMinimap","constants_0","svg_viewBox_value","title","getAttrFunction","func","Function","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","maskColor","maskStrokeColor","maskStrokeWidth","containerWidth","containerHeight","nodeColorFunc","nodeStrokeColorFunc","nodeClassFunc","chrome","labelledBy","boundingRect","viewBB","$containerWidth","$containerHeight","elementWidth","elementHeight","scaledWidth","scaledHeight","viewScale","viewWidth","viewHeight","viewboxWidth","viewboxHeight","isNode","isNodeBase","getElements","path0","path1","path2","imageWidth","fileName","nodesBounds","viewportDomNode","toPng","dataUrl","link","download","click","t3_value","t5_value","span0","span1","t5","t7","t7_value","paths","selectedFlowIndex","showDropdown","handlePathSelect","pathIndex","mode","flowIndex","nodeIndexes","t2_value","cyclomaticComplexity","t6_value","depth","t10_value","decisionPoints","t14_value","stepsCount","nestingLoops","t29_value","table","tbody","tr0","td0","td1","tr1","td2","td3","tr2","td4","td5","tr3","td6","td7","tr4","td8","td9","sup","tr5","td10","td11","tr6","td12","td13","t6","t10","t14","t19","t19_value","t24","t24_value","t29","stats","div3","isPopupVisible","rect0","g21","g20","g19","g0","g1","g2","g3","g4","g5","g7","g6","g9","g8","g11","g10","g13","g12","g15","g14","path3","g16","g17","g18","desc","t_value","flowName","if_block2","if_block3","button0","button1","flowsData","hideMsgDetail","handleFlowChange","hideStepMsgDetail","focusOn","selected_option","select_value","svelteFlowElement","nd","fitViewToSelection","getNodeRect","nodeToUse","nextParentId","evaluateAbsolutePosition","nodeWithPosition","getInternalNode","getNode","getNodes","getEdge","getEdges","setZoom","zoomLevel","currentPanZoom","getZoom","setCenter","fitBounds","getIntersectingNodes","nodeOrRect","nodesToIntersect","isRect","nodeRect","currNodeRect","isNodeIntersecting","deleteElements","deletedNodes","deletedEdges","screenToFlowPosition","_domNode","_snapGrid","domX","domY","correctedPosition","flowToScreenPosition","rendererPosition","toObject","updateNode","nodeUpdate","nextNode","updateNodeData","dataUpdate","nextData","_nodeLookup","_nodeOrigin","getHandleConnections","useSvelteFlow","nodeSize","polyline0","polyline1","collapsable","span","rawMsg","create_if_block_4","if_block4","div2","highlight","isEnd","fontSize","desire","containerElement","textElement","applyFit","scrollWidth","scrollHeight","resizeText","updateProperty","globalState","newProp","edgeStyle","edgeMarkerStyle","highlightedEdgeMarkerStyle","Highlighter","nodeState","selectPath","edgeState","selectNodes","selectEdges","highlightEdge","selectedIds","selectNodesByIndexes","selectedIndexes","selectedNodeIndexes","updatePropertyByIndexes","updateEdgesStyle","unselectPath","unselectNodes","unselectEdges","unselectAllNodes","unhighlightEdge","unselectAllEdges","toggleEdge","toggleNodeCollapse","nodesIndex","toggleHide","parentIndent","indent","findSiblingOrHigherNodeIndex","findExpandedChildNodes","currentIndent","hideEdges","showEdges","StepNode","clazz","highlighter","nodeStore","edgeStore","seletedIndexes","nodeIndex","String","flat","getPathsPassingThrough","flatMap","getStepsAfter","getStepsBefore","filteredPaths","longest","getLongestPath","smallest","getSmallestPath","collapseAllChildren","expandAllChildren","generateLinks","branchSteps","leavingSteps","isBranchStep","isLeavingStep","findNextStep","steps","currentStepId","parentLoopId","nested","nextStepId","parentLoop","nextStepIndent","handleNormalStep","stepId","links","loopStack","nextStepIndex","findLastStepOfSameLevel","targetLvl","handleBranchStep","failingBranchStepId","checkIfNot1stStep","handleGotoStep","indexedSteps","updatePointersOfLastSteps","handleLeavingStep","stepToPoint","ind","LinkGenerator","li","require$$0","normalSteps","Flow","leveledSteps","isSupportedKeyword","flow","algoText","lines","flows","indentLevels","curIndentLvl","stepIndex","currentFlow","readingHeader","line","trimmedLine","curIndentVal","statement","boundary","trimStart","firstWord","restStatement","count","newmsg","ch","refinedMsg","readStep","SvelteFlowNode","SvelteFlowEdge","sourceId","targetId","sourceType","targetType","srcHandle","mapStepsToNodes","lastNode","parentStack","row","nodeIdToIndexMap","lastStep","isStart","dfs","currentPath","visitCount","neighbor","findAllPaths","p2","loopNestingIndices","currentNestingLevel","calculateLoopNestingIndices","toolbar_1_props","toolbar_1_changes","toolbar","coreChartHeight","coreChartInstance","standardShape","updateSelectedFlow","selectedFlow","flowContent","nodesAndEdges","nAe","flowText2Obj","highlightNextNode","nextIndex","playPath","$$self"],"mappings":"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"}